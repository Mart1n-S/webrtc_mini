{"version":3,"file":"ot-main.js","sources":["../../../node_modules/lodash-es/_freeGlobal.js","../../../node_modules/lodash-es/_root.js","../../../node_modules/lodash-es/_Symbol.js","../../../node_modules/lodash-es/_getRawTag.js","../../../node_modules/lodash-es/_objectToString.js","../../../node_modules/lodash-es/_baseGetTag.js","../../../node_modules/lodash-es/isObjectLike.js","../../../node_modules/lodash-es/isArray.js","../../../node_modules/lodash-es/isObject.js","../../../node_modules/lodash-es/identity.js","../../../node_modules/lodash-es/isFunction.js","../../../node_modules/lodash-es/_coreJsData.js","../../../node_modules/lodash-es/_isMasked.js","../../../node_modules/lodash-es/_toSource.js","../../../node_modules/lodash-es/_baseIsNative.js","../../../node_modules/lodash-es/_getValue.js","../../../node_modules/lodash-es/_getNative.js","../../../node_modules/lodash-es/_WeakMap.js","../../../node_modules/lodash-es/_baseCreate.js","../../../node_modules/lodash-es/_apply.js","../../../node_modules/lodash-es/_copyArray.js","../../../node_modules/lodash-es/_shortOut.js","../../../node_modules/lodash-es/constant.js","../../../node_modules/lodash-es/_defineProperty.js","../../../node_modules/lodash-es/_baseSetToString.js","../../../node_modules/lodash-es/_setToString.js","../../../node_modules/lodash-es/_arrayEach.js","../../../node_modules/lodash-es/_isIndex.js","../../../node_modules/lodash-es/_baseAssignValue.js","../../../node_modules/lodash-es/eq.js","../../../node_modules/lodash-es/_assignValue.js","../../../node_modules/lodash-es/_copyObject.js","../../../node_modules/lodash-es/_overRest.js","../../../node_modules/lodash-es/_baseRest.js","../../../node_modules/lodash-es/isLength.js","../../../node_modules/lodash-es/isArrayLike.js","../../../node_modules/lodash-es/_isIterateeCall.js","../../../node_modules/lodash-es/_createAssigner.js","../../../node_modules/lodash-es/_isPrototype.js","../../../node_modules/lodash-es/_baseTimes.js","../../../node_modules/lodash-es/_baseIsArguments.js","../../../node_modules/lodash-es/isArguments.js","../../../node_modules/lodash-es/stubFalse.js","../../../node_modules/lodash-es/isBuffer.js","../../../node_modules/lodash-es/_baseIsTypedArray.js","../../../node_modules/lodash-es/_baseUnary.js","../../../node_modules/lodash-es/_nodeUtil.js","../../../node_modules/lodash-es/isTypedArray.js","../../../node_modules/lodash-es/_arrayLikeKeys.js","../../../node_modules/lodash-es/_overArg.js","../../../node_modules/lodash-es/_nativeKeys.js","../../../node_modules/lodash-es/_baseKeys.js","../../../node_modules/lodash-es/keys.js","../../../node_modules/lodash-es/_nativeKeysIn.js","../../../node_modules/lodash-es/_baseKeysIn.js","../../../node_modules/lodash-es/keysIn.js","../../../node_modules/lodash-es/_nativeCreate.js","../../../node_modules/lodash-es/_hashClear.js","../../../node_modules/lodash-es/_hashDelete.js","../../../node_modules/lodash-es/_hashGet.js","../../../node_modules/lodash-es/_hashHas.js","../../../node_modules/lodash-es/_hashSet.js","../../../node_modules/lodash-es/_Hash.js","../../../node_modules/lodash-es/_listCacheClear.js","../../../node_modules/lodash-es/_assocIndexOf.js","../../../node_modules/lodash-es/_listCacheDelete.js","../../../node_modules/lodash-es/_listCacheGet.js","../../../node_modules/lodash-es/_listCacheHas.js","../../../node_modules/lodash-es/_listCacheSet.js","../../../node_modules/lodash-es/_ListCache.js","../../../node_modules/lodash-es/_Map.js","../../../node_modules/lodash-es/_mapCacheClear.js","../../../node_modules/lodash-es/_isKeyable.js","../../../node_modules/lodash-es/_getMapData.js","../../../node_modules/lodash-es/_mapCacheDelete.js","../../../node_modules/lodash-es/_mapCacheGet.js","../../../node_modules/lodash-es/_mapCacheHas.js","../../../node_modules/lodash-es/_mapCacheSet.js","../../../node_modules/lodash-es/_MapCache.js","../../../node_modules/lodash-es/_arrayPush.js","../../../node_modules/lodash-es/_getPrototype.js","../../../node_modules/lodash-es/isPlainObject.js","../../../node_modules/lodash-es/_stackClear.js","../../../node_modules/lodash-es/_stackDelete.js","../../../node_modules/lodash-es/_stackGet.js","../../../node_modules/lodash-es/_stackHas.js","../../../node_modules/lodash-es/_stackSet.js","../../../node_modules/lodash-es/_Stack.js","../../../node_modules/lodash-es/_cloneBuffer.js","../../../node_modules/lodash-es/_arrayFilter.js","../../../node_modules/lodash-es/stubArray.js","../../../node_modules/lodash-es/_getSymbols.js","../../../node_modules/lodash-es/_baseGetAllKeys.js","../../../node_modules/lodash-es/_getAllKeys.js","../../../node_modules/lodash-es/_DataView.js","../../../node_modules/lodash-es/_Promise.js","../../../node_modules/lodash-es/_Set.js","../../../node_modules/lodash-es/_getTag.js","../../../node_modules/lodash-es/_initCloneArray.js","../../../node_modules/lodash-es/_Uint8Array.js","../../../node_modules/lodash-es/_cloneArrayBuffer.js","../../../node_modules/lodash-es/_cloneDataView.js","../../../node_modules/lodash-es/_cloneRegExp.js","../../../node_modules/lodash-es/_cloneSymbol.js","../../../node_modules/lodash-es/_cloneTypedArray.js","../../../node_modules/lodash-es/_initCloneByTag.js","../../../node_modules/lodash-es/_initCloneObject.js","../../../node_modules/lodash-es/_baseIsMap.js","../../../node_modules/lodash-es/isMap.js","../../../node_modules/lodash-es/_baseIsSet.js","../../../node_modules/lodash-es/isSet.js","../../../node_modules/lodash-es/_baseClone.js","../../../node_modules/lodash-es/cloneDeep.js","../../../node_modules/lodash-es/_setCacheAdd.js","../../../node_modules/lodash-es/_setCacheHas.js","../../../node_modules/lodash-es/_SetCache.js","../../../node_modules/lodash-es/_arraySome.js","../../../node_modules/lodash-es/_cacheHas.js","../../../node_modules/lodash-es/_equalArrays.js","../../../node_modules/lodash-es/_mapToArray.js","../../../node_modules/lodash-es/_setToArray.js","../../../node_modules/lodash-es/_equalByTag.js","../../../node_modules/lodash-es/_equalObjects.js","../../../node_modules/lodash-es/_baseIsEqualDeep.js","../../../node_modules/lodash-es/_baseIsEqual.js","../../../node_modules/lodash-es/_createBaseFor.js","../../../node_modules/lodash-es/_baseFor.js","../../../node_modules/lodash-es/_assignMergeValue.js","../../../node_modules/lodash-es/isArrayLikeObject.js","../../../node_modules/lodash-es/_safeGet.js","../../../node_modules/lodash-es/toPlainObject.js","../../../node_modules/lodash-es/_baseMergeDeep.js","../../../node_modules/lodash-es/_baseMerge.js","../../../node_modules/lodash-es/isEqual.js","../../../node_modules/lodash-es/merge.js","../../../node_modules/parchment/dist/parchment.js","../../../node_modules/quill/node_modules/fast-diff/diff.js","../../../node_modules/lodash.clonedeep/index.js","../../../node_modules/lodash.isequal/index.js","../../../node_modules/quill/node_modules/quill-delta/dist/AttributeMap.js","../../../node_modules/quill/node_modules/quill-delta/dist/Op.js","../../../node_modules/quill/node_modules/quill-delta/dist/OpIterator.js","../../../node_modules/quill/node_modules/quill-delta/dist/Delta.js","../../../node_modules/quill/blots/break.js","../../../node_modules/quill/blots/text.js","../../../node_modules/quill/blots/inline.js","../../../node_modules/quill/blots/block.js","../../../node_modules/quill/blots/cursor.js","../../../node_modules/eventemitter3/index.js","../../../node_modules/quill/core/instances.js","../../../node_modules/quill/core/logger.js","../../../node_modules/quill/core/emitter.js","../../../node_modules/quill/core/selection.js","../../../node_modules/quill/core/editor.js","../../../node_modules/quill/core/module.js","../../../node_modules/quill/blots/embed.js","../../../node_modules/quill/core/composition.js","../../../node_modules/quill/core/theme.js","../../../node_modules/quill/core/utils/scrollRectIntoView.js","../../../node_modules/quill/core/utils/createRegistryWithFormats.js","../../../node_modules/quill/core/quill.js","../../../node_modules/quill/blots/container.js","../../../node_modules/quill/blots/scroll.js","../../../node_modules/quill/formats/align.js","../../../node_modules/quill/formats/color.js","../../../node_modules/quill/formats/background.js","../../../node_modules/quill/formats/code.js","../../../node_modules/quill/formats/direction.js","../../../node_modules/quill/formats/font.js","../../../node_modules/quill/formats/size.js","../../../node_modules/quill/modules/keyboard.js","../../../node_modules/quill/modules/normalizeExternalHTML/normalizers/googleDocs.js","../../../node_modules/quill/modules/normalizeExternalHTML/normalizers/msWord.js","../../../node_modules/quill/modules/normalizeExternalHTML/index.js","../../../node_modules/quill/modules/clipboard.js","../../../node_modules/quill/modules/history.js","../../../node_modules/quill/modules/uploader.js","../../../node_modules/quill/modules/input.js","../../../node_modules/quill/modules/uiNode.js","../../../node_modules/quill/core.js","../../../node_modules/quill/formats/indent.js","../../../node_modules/quill/formats/blockquote.js","../../../node_modules/quill/formats/header.js","../../../node_modules/quill/formats/list.js","../../../node_modules/quill/formats/bold.js","../../../node_modules/quill/formats/italic.js","../../../node_modules/quill/formats/link.js","../../../node_modules/quill/formats/script.js","../../../node_modules/quill/formats/strike.js","../../../node_modules/quill/formats/underline.js","../../../node_modules/quill/formats/formula.js","../../../node_modules/quill/formats/image.js","../../../node_modules/quill/formats/video.js","../../../node_modules/quill/modules/syntax.js","../../../node_modules/quill/formats/table.js","../../../node_modules/quill/modules/table.js","../../../node_modules/quill/modules/toolbar.js","../../../node_modules/quill/ui/icons.js","../../../node_modules/quill/ui/picker.js","../../../node_modules/quill/ui/color-picker.js","../../../node_modules/quill/ui/icon-picker.js","../../../node_modules/quill/ui/tooltip.js","../../../node_modules/quill/themes/base.js","../../../node_modules/quill/themes/bubble.js","../../../node_modules/quill/themes/snow.js","../../../node_modules/quill/quill.js","../../../node_modules/events/events.js","../../../node_modules/sharedb/lib/emitter.js","../../../node_modules/sharedb/lib/logger/logger.js","../../../node_modules/sharedb/lib/logger/index.js","../../../node_modules/sharedb/lib/error.js","../../../node_modules/ot-json0/lib/bootstrapTransform.js","../../../node_modules/ot-json0/lib/text0.js","../../../node_modules/ot-json0/lib/json0.js","../../../node_modules/ot-json0/lib/index.js","../../../node_modules/sharedb/lib/types.js","../../../node_modules/sharedb/lib/next-tick.js","../../../node_modules/has-symbols/shams.js","../../../node_modules/has-tostringtag/shams.js","../../../node_modules/es-object-atoms/index.js","../../../node_modules/es-errors/index.js","../../../node_modules/es-errors/eval.js","../../../node_modules/es-errors/range.js","../../../node_modules/es-errors/ref.js","../../../node_modules/es-errors/syntax.js","../../../node_modules/es-errors/type.js","../../../node_modules/es-errors/uri.js","../../../node_modules/math-intrinsics/abs.js","../../../node_modules/math-intrinsics/floor.js","../../../node_modules/math-intrinsics/max.js","../../../node_modules/math-intrinsics/min.js","../../../node_modules/math-intrinsics/pow.js","../../../node_modules/math-intrinsics/round.js","../../../node_modules/math-intrinsics/isNaN.js","../../../node_modules/math-intrinsics/sign.js","../../../node_modules/gopd/gOPD.js","../../../node_modules/gopd/index.js","../../../node_modules/es-define-property/index.js","../../../node_modules/has-symbols/index.js","../../../node_modules/get-proto/Reflect.getPrototypeOf.js","../../../node_modules/get-proto/Object.getPrototypeOf.js","../../../node_modules/function-bind/implementation.js","../../../node_modules/function-bind/index.js","../../../node_modules/call-bind-apply-helpers/functionCall.js","../../../node_modules/call-bind-apply-helpers/functionApply.js","../../../node_modules/call-bind-apply-helpers/reflectApply.js","../../../node_modules/call-bind-apply-helpers/actualApply.js","../../../node_modules/call-bind-apply-helpers/index.js","../../../node_modules/dunder-proto/get.js","../../../node_modules/get-proto/index.js","../../../node_modules/hasown/index.js","../../../node_modules/get-intrinsic/index.js","../../../node_modules/call-bound/index.js","../../../node_modules/is-arguments/index.js","../../../node_modules/is-regex/index.js","../../../node_modules/safe-regex-test/index.js","../../../node_modules/is-generator-function/index.js","../../../node_modules/is-callable/index.js","../../../node_modules/for-each/index.js","../../../node_modules/possible-typed-array-names/index.js","../../../node_modules/available-typed-arrays/index.js","../../../node_modules/define-data-property/index.js","../../../node_modules/has-property-descriptors/index.js","../../../node_modules/set-function-length/index.js","../../../node_modules/call-bind-apply-helpers/applyBind.js","../../../node_modules/call-bind/index.js","../../../node_modules/which-typed-array/index.js","../../../node_modules/is-typed-array/index.js","../../../node_modules/util/support/types.js","../../../node_modules/util/support/isBufferBrowser.js","../../../node_modules/inherits/inherits_browser.js","../../../node_modules/util/util.js","../../../node_modules/sharedb/lib/util.js","../../../node_modules/fast-deep-equal/index.js","../../../node_modules/sharedb/lib/message-actions.js","../../../node_modules/sharedb/lib/client/doc.js","../../../node_modules/sharedb/lib/client/query.js","../../../node_modules/sharedb/lib/client/presence/local-presence.js","../../../node_modules/sharedb/lib/client/presence/remote-presence.js","../../../node_modules/async/dist/async.mjs","../../../node_modules/hat/index.js","../../../node_modules/sharedb/lib/client/presence/presence.js","../../../node_modules/sharedb/lib/client/presence/local-doc-presence.js","../../../node_modules/sharedb/lib/ot.js","../../../node_modules/sharedb/lib/client/presence/remote-doc-presence.js","../../../node_modules/sharedb/lib/client/presence/doc-presence.js","../../../node_modules/sharedb/lib/snapshot.js","../../../node_modules/sharedb/lib/client/snapshot-request/snapshot-request.js","../../../node_modules/sharedb/lib/client/snapshot-request/snapshot-version-request.js","../../../node_modules/sharedb/lib/client/snapshot-request/snapshot-timestamp-request.js","../../../node_modules/sharedb/lib/client/presence/doc-presence-emitter.js","../../../node_modules/sharedb/lib/protocol.js","../../../node_modules/sharedb/lib/client/connection.js","../../../node_modules/sharedb/lib/client/index.js","../../../node_modules/fast-diff/diff.js","../../../node_modules/quill-delta/dist/AttributeMap.js","../../../node_modules/quill-delta/dist/Iterator.js","../../../node_modules/quill-delta/dist/Op.js","../../../node_modules/quill-delta/dist/Delta.js","../../../node_modules/rich-text/lib/type.js","../../../node_modules/rich-text/index.js","../../../src/ot-main.js"],"sourcesContent":["/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n","import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n","import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n","import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n","import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n","import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n","import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","var Scope = /* @__PURE__ */ ((Scope2) => (Scope2[Scope2.TYPE = 3] = \"TYPE\", Scope2[Scope2.LEVEL = 12] = \"LEVEL\", Scope2[Scope2.ATTRIBUTE = 13] = \"ATTRIBUTE\", Scope2[Scope2.BLOT = 14] = \"BLOT\", Scope2[Scope2.INLINE = 7] = \"INLINE\", Scope2[Scope2.BLOCK = 11] = \"BLOCK\", Scope2[Scope2.BLOCK_BLOT = 10] = \"BLOCK_BLOT\", Scope2[Scope2.INLINE_BLOT = 6] = \"INLINE_BLOT\", Scope2[Scope2.BLOCK_ATTRIBUTE = 9] = \"BLOCK_ATTRIBUTE\", Scope2[Scope2.INLINE_ATTRIBUTE = 5] = \"INLINE_ATTRIBUTE\", Scope2[Scope2.ANY = 15] = \"ANY\", Scope2))(Scope || {});\nclass Attributor {\n  constructor(attrName, keyName, options = {}) {\n    this.attrName = attrName, this.keyName = keyName;\n    const attributeBit = Scope.TYPE & Scope.ATTRIBUTE;\n    this.scope = options.scope != null ? (\n      // Ignore type bits, force attribute bit\n      options.scope & Scope.LEVEL | attributeBit\n    ) : Scope.ATTRIBUTE, options.whitelist != null && (this.whitelist = options.whitelist);\n  }\n  static keys(node) {\n    return Array.from(node.attributes).map((item) => item.name);\n  }\n  add(node, value) {\n    return this.canAdd(node, value) ? (node.setAttribute(this.keyName, value), !0) : !1;\n  }\n  canAdd(_node, value) {\n    return this.whitelist == null ? !0 : typeof value == \"string\" ? this.whitelist.indexOf(value.replace(/[\"']/g, \"\")) > -1 : this.whitelist.indexOf(value) > -1;\n  }\n  remove(node) {\n    node.removeAttribute(this.keyName);\n  }\n  value(node) {\n    const value = node.getAttribute(this.keyName);\n    return this.canAdd(node, value) && value ? value : \"\";\n  }\n}\nclass ParchmentError extends Error {\n  constructor(message) {\n    message = \"[Parchment] \" + message, super(message), this.message = message, this.name = this.constructor.name;\n  }\n}\nconst _Registry = class _Registry {\n  constructor() {\n    this.attributes = {}, this.classes = {}, this.tags = {}, this.types = {};\n  }\n  static find(node, bubble = !1) {\n    if (node == null)\n      return null;\n    if (this.blots.has(node))\n      return this.blots.get(node) || null;\n    if (bubble) {\n      let parentNode = null;\n      try {\n        parentNode = node.parentNode;\n      } catch {\n        return null;\n      }\n      return this.find(parentNode, bubble);\n    }\n    return null;\n  }\n  create(scroll, input, value) {\n    const match2 = this.query(input);\n    if (match2 == null)\n      throw new ParchmentError(`Unable to create ${input} blot`);\n    const blotClass = match2, node = (\n      // @ts-expect-error Fix me later\n      input instanceof Node || input.nodeType === Node.TEXT_NODE ? input : blotClass.create(value)\n    ), blot = new blotClass(scroll, node, value);\n    return _Registry.blots.set(blot.domNode, blot), blot;\n  }\n  find(node, bubble = !1) {\n    return _Registry.find(node, bubble);\n  }\n  query(query, scope = Scope.ANY) {\n    let match2;\n    return typeof query == \"string\" ? match2 = this.types[query] || this.attributes[query] : query instanceof Text || query.nodeType === Node.TEXT_NODE ? match2 = this.types.text : typeof query == \"number\" ? query & Scope.LEVEL & Scope.BLOCK ? match2 = this.types.block : query & Scope.LEVEL & Scope.INLINE && (match2 = this.types.inline) : query instanceof Element && ((query.getAttribute(\"class\") || \"\").split(/\\s+/).some((name) => (match2 = this.classes[name], !!match2)), match2 = match2 || this.tags[query.tagName]), match2 == null ? null : \"scope\" in match2 && scope & Scope.LEVEL & match2.scope && scope & Scope.TYPE & match2.scope ? match2 : null;\n  }\n  register(...definitions) {\n    return definitions.map((definition) => {\n      const isBlot = \"blotName\" in definition, isAttr = \"attrName\" in definition;\n      if (!isBlot && !isAttr)\n        throw new ParchmentError(\"Invalid definition\");\n      if (isBlot && definition.blotName === \"abstract\")\n        throw new ParchmentError(\"Cannot register abstract class\");\n      const key = isBlot ? definition.blotName : isAttr ? definition.attrName : void 0;\n      return this.types[key] = definition, isAttr ? typeof definition.keyName == \"string\" && (this.attributes[definition.keyName] = definition) : isBlot && (definition.className && (this.classes[definition.className] = definition), definition.tagName && (Array.isArray(definition.tagName) ? definition.tagName = definition.tagName.map((tagName) => tagName.toUpperCase()) : definition.tagName = definition.tagName.toUpperCase(), (Array.isArray(definition.tagName) ? definition.tagName : [definition.tagName]).forEach((tag) => {\n        (this.tags[tag] == null || definition.className == null) && (this.tags[tag] = definition);\n      }))), definition;\n    });\n  }\n};\n_Registry.blots = /* @__PURE__ */ new WeakMap();\nlet Registry = _Registry;\nfunction match(node, prefix) {\n  return (node.getAttribute(\"class\") || \"\").split(/\\s+/).filter((name) => name.indexOf(`${prefix}-`) === 0);\n}\nclass ClassAttributor extends Attributor {\n  static keys(node) {\n    return (node.getAttribute(\"class\") || \"\").split(/\\s+/).map((name) => name.split(\"-\").slice(0, -1).join(\"-\"));\n  }\n  add(node, value) {\n    return this.canAdd(node, value) ? (this.remove(node), node.classList.add(`${this.keyName}-${value}`), !0) : !1;\n  }\n  remove(node) {\n    match(node, this.keyName).forEach((name) => {\n      node.classList.remove(name);\n    }), node.classList.length === 0 && node.removeAttribute(\"class\");\n  }\n  value(node) {\n    const value = (match(node, this.keyName)[0] || \"\").slice(this.keyName.length + 1);\n    return this.canAdd(node, value) ? value : \"\";\n  }\n}\nconst ClassAttributor$1 = ClassAttributor;\nfunction camelize(name) {\n  const parts = name.split(\"-\"), rest = parts.slice(1).map((part) => part[0].toUpperCase() + part.slice(1)).join(\"\");\n  return parts[0] + rest;\n}\nclass StyleAttributor extends Attributor {\n  static keys(node) {\n    return (node.getAttribute(\"style\") || \"\").split(\";\").map((value) => value.split(\":\")[0].trim());\n  }\n  add(node, value) {\n    return this.canAdd(node, value) ? (node.style[camelize(this.keyName)] = value, !0) : !1;\n  }\n  remove(node) {\n    node.style[camelize(this.keyName)] = \"\", node.getAttribute(\"style\") || node.removeAttribute(\"style\");\n  }\n  value(node) {\n    const value = node.style[camelize(this.keyName)];\n    return this.canAdd(node, value) ? value : \"\";\n  }\n}\nconst StyleAttributor$1 = StyleAttributor;\nclass AttributorStore {\n  constructor(domNode) {\n    this.attributes = {}, this.domNode = domNode, this.build();\n  }\n  attribute(attribute, value) {\n    value ? attribute.add(this.domNode, value) && (attribute.value(this.domNode) != null ? this.attributes[attribute.attrName] = attribute : delete this.attributes[attribute.attrName]) : (attribute.remove(this.domNode), delete this.attributes[attribute.attrName]);\n  }\n  build() {\n    this.attributes = {};\n    const blot = Registry.find(this.domNode);\n    if (blot == null)\n      return;\n    const attributes = Attributor.keys(this.domNode), classes = ClassAttributor$1.keys(this.domNode), styles = StyleAttributor$1.keys(this.domNode);\n    attributes.concat(classes).concat(styles).forEach((name) => {\n      const attr = blot.scroll.query(name, Scope.ATTRIBUTE);\n      attr instanceof Attributor && (this.attributes[attr.attrName] = attr);\n    });\n  }\n  copy(target) {\n    Object.keys(this.attributes).forEach((key) => {\n      const value = this.attributes[key].value(this.domNode);\n      target.format(key, value);\n    });\n  }\n  move(target) {\n    this.copy(target), Object.keys(this.attributes).forEach((key) => {\n      this.attributes[key].remove(this.domNode);\n    }), this.attributes = {};\n  }\n  values() {\n    return Object.keys(this.attributes).reduce(\n      (attributes, name) => (attributes[name] = this.attributes[name].value(this.domNode), attributes),\n      {}\n    );\n  }\n}\nconst AttributorStore$1 = AttributorStore, _ShadowBlot = class _ShadowBlot {\n  constructor(scroll, domNode) {\n    this.scroll = scroll, this.domNode = domNode, Registry.blots.set(domNode, this), this.prev = null, this.next = null;\n  }\n  static create(rawValue) {\n    if (this.tagName == null)\n      throw new ParchmentError(\"Blot definition missing tagName\");\n    let node, value;\n    return Array.isArray(this.tagName) ? (typeof rawValue == \"string\" ? (value = rawValue.toUpperCase(), parseInt(value, 10).toString() === value && (value = parseInt(value, 10))) : typeof rawValue == \"number\" && (value = rawValue), typeof value == \"number\" ? node = document.createElement(this.tagName[value - 1]) : value && this.tagName.indexOf(value) > -1 ? node = document.createElement(value) : node = document.createElement(this.tagName[0])) : node = document.createElement(this.tagName), this.className && node.classList.add(this.className), node;\n  }\n  // Hack for accessing inherited static methods\n  get statics() {\n    return this.constructor;\n  }\n  attach() {\n  }\n  clone() {\n    const domNode = this.domNode.cloneNode(!1);\n    return this.scroll.create(domNode);\n  }\n  detach() {\n    this.parent != null && this.parent.removeChild(this), Registry.blots.delete(this.domNode);\n  }\n  deleteAt(index, length) {\n    this.isolate(index, length).remove();\n  }\n  formatAt(index, length, name, value) {\n    const blot = this.isolate(index, length);\n    if (this.scroll.query(name, Scope.BLOT) != null && value)\n      blot.wrap(name, value);\n    else if (this.scroll.query(name, Scope.ATTRIBUTE) != null) {\n      const parent = this.scroll.create(this.statics.scope);\n      blot.wrap(parent), parent.format(name, value);\n    }\n  }\n  insertAt(index, value, def) {\n    const blot = def == null ? this.scroll.create(\"text\", value) : this.scroll.create(value, def), ref = this.split(index);\n    this.parent.insertBefore(blot, ref || void 0);\n  }\n  isolate(index, length) {\n    const target = this.split(index);\n    if (target == null)\n      throw new Error(\"Attempt to isolate at end\");\n    return target.split(length), target;\n  }\n  length() {\n    return 1;\n  }\n  offset(root = this.parent) {\n    return this.parent == null || this === root ? 0 : this.parent.children.offset(this) + this.parent.offset(root);\n  }\n  optimize(_context) {\n    this.statics.requiredContainer && !(this.parent instanceof this.statics.requiredContainer) && this.wrap(this.statics.requiredContainer.blotName);\n  }\n  remove() {\n    this.domNode.parentNode != null && this.domNode.parentNode.removeChild(this.domNode), this.detach();\n  }\n  replaceWith(name, value) {\n    const replacement = typeof name == \"string\" ? this.scroll.create(name, value) : name;\n    return this.parent != null && (this.parent.insertBefore(replacement, this.next || void 0), this.remove()), replacement;\n  }\n  split(index, _force) {\n    return index === 0 ? this : this.next;\n  }\n  update(_mutations, _context) {\n  }\n  wrap(name, value) {\n    const wrapper = typeof name == \"string\" ? this.scroll.create(name, value) : name;\n    if (this.parent != null && this.parent.insertBefore(wrapper, this.next || void 0), typeof wrapper.appendChild != \"function\")\n      throw new ParchmentError(`Cannot wrap ${name}`);\n    return wrapper.appendChild(this), wrapper;\n  }\n};\n_ShadowBlot.blotName = \"abstract\";\nlet ShadowBlot = _ShadowBlot;\nconst _LeafBlot = class _LeafBlot extends ShadowBlot {\n  /**\n   * Returns the value represented by domNode if it is this Blot's type\n   * No checking that domNode can represent this Blot type is required so\n   * applications needing it should check externally before calling.\n   */\n  static value(_domNode) {\n    return !0;\n  }\n  /**\n   * Given location represented by node and offset from DOM Selection Range,\n   * return index to that location.\n   */\n  index(node, offset) {\n    return this.domNode === node || this.domNode.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY ? Math.min(offset, 1) : -1;\n  }\n  /**\n   * Given index to location within blot, return node and offset representing\n   * that location, consumable by DOM Selection Range\n   */\n  position(index, _inclusive) {\n    let offset = Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);\n    return index > 0 && (offset += 1), [this.parent.domNode, offset];\n  }\n  /**\n   * Return value represented by this blot\n   * Should not change without interaction from API or\n   * user change detectable by update()\n   */\n  value() {\n    return {\n      [this.statics.blotName]: this.statics.value(this.domNode) || !0\n    };\n  }\n};\n_LeafBlot.scope = Scope.INLINE_BLOT;\nlet LeafBlot = _LeafBlot;\nconst LeafBlot$1 = LeafBlot;\nclass LinkedList {\n  constructor() {\n    this.head = null, this.tail = null, this.length = 0;\n  }\n  append(...nodes) {\n    if (this.insertBefore(nodes[0], null), nodes.length > 1) {\n      const rest = nodes.slice(1);\n      this.append(...rest);\n    }\n  }\n  at(index) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur && index > 0; )\n      index -= 1, cur = next();\n    return cur;\n  }\n  contains(node) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur; ) {\n      if (cur === node)\n        return !0;\n      cur = next();\n    }\n    return !1;\n  }\n  indexOf(node) {\n    const next = this.iterator();\n    let cur = next(), index = 0;\n    for (; cur; ) {\n      if (cur === node)\n        return index;\n      index += 1, cur = next();\n    }\n    return -1;\n  }\n  insertBefore(node, refNode) {\n    node != null && (this.remove(node), node.next = refNode, refNode != null ? (node.prev = refNode.prev, refNode.prev != null && (refNode.prev.next = node), refNode.prev = node, refNode === this.head && (this.head = node)) : this.tail != null ? (this.tail.next = node, node.prev = this.tail, this.tail = node) : (node.prev = null, this.head = this.tail = node), this.length += 1);\n  }\n  offset(target) {\n    let index = 0, cur = this.head;\n    for (; cur != null; ) {\n      if (cur === target)\n        return index;\n      index += cur.length(), cur = cur.next;\n    }\n    return -1;\n  }\n  remove(node) {\n    this.contains(node) && (node.prev != null && (node.prev.next = node.next), node.next != null && (node.next.prev = node.prev), node === this.head && (this.head = node.next), node === this.tail && (this.tail = node.prev), this.length -= 1);\n  }\n  iterator(curNode = this.head) {\n    return () => {\n      const ret = curNode;\n      return curNode != null && (curNode = curNode.next), ret;\n    };\n  }\n  find(index, inclusive = !1) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur; ) {\n      const length = cur.length();\n      if (index < length || inclusive && index === length && (cur.next == null || cur.next.length() !== 0))\n        return [cur, index];\n      index -= length, cur = next();\n    }\n    return [null, 0];\n  }\n  forEach(callback) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur; )\n      callback(cur), cur = next();\n  }\n  forEachAt(index, length, callback) {\n    if (length <= 0)\n      return;\n    const [startNode, offset] = this.find(index);\n    let curIndex = index - offset;\n    const next = this.iterator(startNode);\n    let cur = next();\n    for (; cur && curIndex < index + length; ) {\n      const curLength = cur.length();\n      index > curIndex ? callback(\n        cur,\n        index - curIndex,\n        Math.min(length, curIndex + curLength - index)\n      ) : callback(cur, 0, Math.min(curLength, index + length - curIndex)), curIndex += curLength, cur = next();\n    }\n  }\n  map(callback) {\n    return this.reduce((memo, cur) => (memo.push(callback(cur)), memo), []);\n  }\n  reduce(callback, memo) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur; )\n      memo = callback(memo, cur), cur = next();\n    return memo;\n  }\n}\nfunction makeAttachedBlot(node, scroll) {\n  const found = scroll.find(node);\n  if (found)\n    return found;\n  try {\n    return scroll.create(node);\n  } catch {\n    const blot = scroll.create(Scope.INLINE);\n    return Array.from(node.childNodes).forEach((child) => {\n      blot.domNode.appendChild(child);\n    }), node.parentNode && node.parentNode.replaceChild(blot.domNode, node), blot.attach(), blot;\n  }\n}\nconst _ParentBlot = class _ParentBlot extends ShadowBlot {\n  constructor(scroll, domNode) {\n    super(scroll, domNode), this.uiNode = null, this.build();\n  }\n  appendChild(other) {\n    this.insertBefore(other);\n  }\n  attach() {\n    super.attach(), this.children.forEach((child) => {\n      child.attach();\n    });\n  }\n  attachUI(node) {\n    this.uiNode != null && this.uiNode.remove(), this.uiNode = node, _ParentBlot.uiClass && this.uiNode.classList.add(_ParentBlot.uiClass), this.uiNode.setAttribute(\"contenteditable\", \"false\"), this.domNode.insertBefore(this.uiNode, this.domNode.firstChild);\n  }\n  /**\n   * Called during construction, should fill its own children LinkedList.\n   */\n  build() {\n    this.children = new LinkedList(), Array.from(this.domNode.childNodes).filter((node) => node !== this.uiNode).reverse().forEach((node) => {\n      try {\n        const child = makeAttachedBlot(node, this.scroll);\n        this.insertBefore(child, this.children.head || void 0);\n      } catch (err) {\n        if (err instanceof ParchmentError)\n          return;\n        throw err;\n      }\n    });\n  }\n  deleteAt(index, length) {\n    if (index === 0 && length === this.length())\n      return this.remove();\n    this.children.forEachAt(index, length, (child, offset, childLength) => {\n      child.deleteAt(offset, childLength);\n    });\n  }\n  descendant(criteria, index = 0) {\n    const [child, offset] = this.children.find(index);\n    return criteria.blotName == null && criteria(child) || criteria.blotName != null && child instanceof criteria ? [child, offset] : child instanceof _ParentBlot ? child.descendant(criteria, offset) : [null, -1];\n  }\n  descendants(criteria, index = 0, length = Number.MAX_VALUE) {\n    let descendants = [], lengthLeft = length;\n    return this.children.forEachAt(\n      index,\n      length,\n      (child, childIndex, childLength) => {\n        (criteria.blotName == null && criteria(child) || criteria.blotName != null && child instanceof criteria) && descendants.push(child), child instanceof _ParentBlot && (descendants = descendants.concat(\n          child.descendants(criteria, childIndex, lengthLeft)\n        )), lengthLeft -= childLength;\n      }\n    ), descendants;\n  }\n  detach() {\n    this.children.forEach((child) => {\n      child.detach();\n    }), super.detach();\n  }\n  enforceAllowedChildren() {\n    let done = !1;\n    this.children.forEach((child) => {\n      done || this.statics.allowedChildren.some(\n        (def) => child instanceof def\n      ) || (child.statics.scope === Scope.BLOCK_BLOT ? (child.next != null && this.splitAfter(child), child.prev != null && this.splitAfter(child.prev), child.parent.unwrap(), done = !0) : child instanceof _ParentBlot ? child.unwrap() : child.remove());\n    });\n  }\n  formatAt(index, length, name, value) {\n    this.children.forEachAt(index, length, (child, offset, childLength) => {\n      child.formatAt(offset, childLength, name, value);\n    });\n  }\n  insertAt(index, value, def) {\n    const [child, offset] = this.children.find(index);\n    if (child)\n      child.insertAt(offset, value, def);\n    else {\n      const blot = def == null ? this.scroll.create(\"text\", value) : this.scroll.create(value, def);\n      this.appendChild(blot);\n    }\n  }\n  insertBefore(childBlot, refBlot) {\n    childBlot.parent != null && childBlot.parent.children.remove(childBlot);\n    let refDomNode = null;\n    this.children.insertBefore(childBlot, refBlot || null), childBlot.parent = this, refBlot != null && (refDomNode = refBlot.domNode), (this.domNode.parentNode !== childBlot.domNode || this.domNode.nextSibling !== refDomNode) && this.domNode.insertBefore(childBlot.domNode, refDomNode), childBlot.attach();\n  }\n  length() {\n    return this.children.reduce((memo, child) => memo + child.length(), 0);\n  }\n  moveChildren(targetParent, refNode) {\n    this.children.forEach((child) => {\n      targetParent.insertBefore(child, refNode);\n    });\n  }\n  optimize(context) {\n    if (super.optimize(context), this.enforceAllowedChildren(), this.uiNode != null && this.uiNode !== this.domNode.firstChild && this.domNode.insertBefore(this.uiNode, this.domNode.firstChild), this.children.length === 0)\n      if (this.statics.defaultChild != null) {\n        const child = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(child);\n      } else\n        this.remove();\n  }\n  path(index, inclusive = !1) {\n    const [child, offset] = this.children.find(index, inclusive), position = [[this, index]];\n    return child instanceof _ParentBlot ? position.concat(child.path(offset, inclusive)) : (child != null && position.push([child, offset]), position);\n  }\n  removeChild(child) {\n    this.children.remove(child);\n  }\n  replaceWith(name, value) {\n    const replacement = typeof name == \"string\" ? this.scroll.create(name, value) : name;\n    return replacement instanceof _ParentBlot && this.moveChildren(replacement), super.replaceWith(replacement);\n  }\n  split(index, force = !1) {\n    if (!force) {\n      if (index === 0)\n        return this;\n      if (index === this.length())\n        return this.next;\n    }\n    const after = this.clone();\n    return this.parent && this.parent.insertBefore(after, this.next || void 0), this.children.forEachAt(index, this.length(), (child, offset, _length) => {\n      const split = child.split(offset, force);\n      split != null && after.appendChild(split);\n    }), after;\n  }\n  splitAfter(child) {\n    const after = this.clone();\n    for (; child.next != null; )\n      after.appendChild(child.next);\n    return this.parent && this.parent.insertBefore(after, this.next || void 0), after;\n  }\n  unwrap() {\n    this.parent && this.moveChildren(this.parent, this.next || void 0), this.remove();\n  }\n  update(mutations, _context) {\n    const addedNodes = [], removedNodes = [];\n    mutations.forEach((mutation) => {\n      mutation.target === this.domNode && mutation.type === \"childList\" && (addedNodes.push(...mutation.addedNodes), removedNodes.push(...mutation.removedNodes));\n    }), removedNodes.forEach((node) => {\n      if (node.parentNode != null && // @ts-expect-error Fix me later\n      node.tagName !== \"IFRAME\" && document.body.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY)\n        return;\n      const blot = this.scroll.find(node);\n      blot != null && (blot.domNode.parentNode == null || blot.domNode.parentNode === this.domNode) && blot.detach();\n    }), addedNodes.filter((node) => node.parentNode === this.domNode && node !== this.uiNode).sort((a, b) => a === b ? 0 : a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING ? 1 : -1).forEach((node) => {\n      let refBlot = null;\n      node.nextSibling != null && (refBlot = this.scroll.find(node.nextSibling));\n      const blot = makeAttachedBlot(node, this.scroll);\n      (blot.next !== refBlot || blot.next == null) && (blot.parent != null && blot.parent.removeChild(this), this.insertBefore(blot, refBlot || void 0));\n    }), this.enforceAllowedChildren();\n  }\n};\n_ParentBlot.uiClass = \"\";\nlet ParentBlot = _ParentBlot;\nconst ParentBlot$1 = ParentBlot;\nfunction isEqual(obj1, obj2) {\n  if (Object.keys(obj1).length !== Object.keys(obj2).length)\n    return !1;\n  for (const prop in obj1)\n    if (obj1[prop] !== obj2[prop])\n      return !1;\n  return !0;\n}\nconst _InlineBlot = class _InlineBlot extends ParentBlot$1 {\n  static create(value) {\n    return super.create(value);\n  }\n  static formats(domNode, scroll) {\n    const match2 = scroll.query(_InlineBlot.blotName);\n    if (!(match2 != null && domNode.tagName === match2.tagName)) {\n      if (typeof this.tagName == \"string\")\n        return !0;\n      if (Array.isArray(this.tagName))\n        return domNode.tagName.toLowerCase();\n    }\n  }\n  constructor(scroll, domNode) {\n    super(scroll, domNode), this.attributes = new AttributorStore$1(this.domNode);\n  }\n  format(name, value) {\n    if (name === this.statics.blotName && !value)\n      this.children.forEach((child) => {\n        child instanceof _InlineBlot || (child = child.wrap(_InlineBlot.blotName, !0)), this.attributes.copy(child);\n      }), this.unwrap();\n    else {\n      const format = this.scroll.query(name, Scope.INLINE);\n      if (format == null)\n        return;\n      format instanceof Attributor ? this.attributes.attribute(format, value) : value && (name !== this.statics.blotName || this.formats()[name] !== value) && this.replaceWith(name, value);\n    }\n  }\n  formats() {\n    const formats = this.attributes.values(), format = this.statics.formats(this.domNode, this.scroll);\n    return format != null && (formats[this.statics.blotName] = format), formats;\n  }\n  formatAt(index, length, name, value) {\n    this.formats()[name] != null || this.scroll.query(name, Scope.ATTRIBUTE) ? this.isolate(index, length).format(name, value) : super.formatAt(index, length, name, value);\n  }\n  optimize(context) {\n    super.optimize(context);\n    const formats = this.formats();\n    if (Object.keys(formats).length === 0)\n      return this.unwrap();\n    const next = this.next;\n    next instanceof _InlineBlot && next.prev === this && isEqual(formats, next.formats()) && (next.moveChildren(this), next.remove());\n  }\n  replaceWith(name, value) {\n    const replacement = super.replaceWith(name, value);\n    return this.attributes.copy(replacement), replacement;\n  }\n  update(mutations, context) {\n    super.update(mutations, context), mutations.some(\n      (mutation) => mutation.target === this.domNode && mutation.type === \"attributes\"\n    ) && this.attributes.build();\n  }\n  wrap(name, value) {\n    const wrapper = super.wrap(name, value);\n    return wrapper instanceof _InlineBlot && this.attributes.move(wrapper), wrapper;\n  }\n};\n_InlineBlot.allowedChildren = [_InlineBlot, LeafBlot$1], _InlineBlot.blotName = \"inline\", _InlineBlot.scope = Scope.INLINE_BLOT, _InlineBlot.tagName = \"SPAN\";\nlet InlineBlot = _InlineBlot;\nconst InlineBlot$1 = InlineBlot, _BlockBlot = class _BlockBlot extends ParentBlot$1 {\n  static create(value) {\n    return super.create(value);\n  }\n  static formats(domNode, scroll) {\n    const match2 = scroll.query(_BlockBlot.blotName);\n    if (!(match2 != null && domNode.tagName === match2.tagName)) {\n      if (typeof this.tagName == \"string\")\n        return !0;\n      if (Array.isArray(this.tagName))\n        return domNode.tagName.toLowerCase();\n    }\n  }\n  constructor(scroll, domNode) {\n    super(scroll, domNode), this.attributes = new AttributorStore$1(this.domNode);\n  }\n  format(name, value) {\n    const format = this.scroll.query(name, Scope.BLOCK);\n    format != null && (format instanceof Attributor ? this.attributes.attribute(format, value) : name === this.statics.blotName && !value ? this.replaceWith(_BlockBlot.blotName) : value && (name !== this.statics.blotName || this.formats()[name] !== value) && this.replaceWith(name, value));\n  }\n  formats() {\n    const formats = this.attributes.values(), format = this.statics.formats(this.domNode, this.scroll);\n    return format != null && (formats[this.statics.blotName] = format), formats;\n  }\n  formatAt(index, length, name, value) {\n    this.scroll.query(name, Scope.BLOCK) != null ? this.format(name, value) : super.formatAt(index, length, name, value);\n  }\n  insertAt(index, value, def) {\n    if (def == null || this.scroll.query(value, Scope.INLINE) != null)\n      super.insertAt(index, value, def);\n    else {\n      const after = this.split(index);\n      if (after != null) {\n        const blot = this.scroll.create(value, def);\n        after.parent.insertBefore(blot, after);\n      } else\n        throw new Error(\"Attempt to insertAt after block boundaries\");\n    }\n  }\n  replaceWith(name, value) {\n    const replacement = super.replaceWith(name, value);\n    return this.attributes.copy(replacement), replacement;\n  }\n  update(mutations, context) {\n    super.update(mutations, context), mutations.some(\n      (mutation) => mutation.target === this.domNode && mutation.type === \"attributes\"\n    ) && this.attributes.build();\n  }\n};\n_BlockBlot.blotName = \"block\", _BlockBlot.scope = Scope.BLOCK_BLOT, _BlockBlot.tagName = \"P\", _BlockBlot.allowedChildren = [\n  InlineBlot$1,\n  _BlockBlot,\n  LeafBlot$1\n];\nlet BlockBlot = _BlockBlot;\nconst BlockBlot$1 = BlockBlot, _ContainerBlot = class _ContainerBlot extends ParentBlot$1 {\n  checkMerge() {\n    return this.next !== null && this.next.statics.blotName === this.statics.blotName;\n  }\n  deleteAt(index, length) {\n    super.deleteAt(index, length), this.enforceAllowedChildren();\n  }\n  formatAt(index, length, name, value) {\n    super.formatAt(index, length, name, value), this.enforceAllowedChildren();\n  }\n  insertAt(index, value, def) {\n    super.insertAt(index, value, def), this.enforceAllowedChildren();\n  }\n  optimize(context) {\n    super.optimize(context), this.children.length > 0 && this.next != null && this.checkMerge() && (this.next.moveChildren(this), this.next.remove());\n  }\n};\n_ContainerBlot.blotName = \"container\", _ContainerBlot.scope = Scope.BLOCK_BLOT;\nlet ContainerBlot = _ContainerBlot;\nconst ContainerBlot$1 = ContainerBlot;\nclass EmbedBlot extends LeafBlot$1 {\n  static formats(_domNode, _scroll) {\n  }\n  format(name, value) {\n    super.formatAt(0, this.length(), name, value);\n  }\n  formatAt(index, length, name, value) {\n    index === 0 && length === this.length() ? this.format(name, value) : super.formatAt(index, length, name, value);\n  }\n  formats() {\n    return this.statics.formats(this.domNode, this.scroll);\n  }\n}\nconst EmbedBlot$1 = EmbedBlot, OBSERVER_CONFIG = {\n  attributes: !0,\n  characterData: !0,\n  characterDataOldValue: !0,\n  childList: !0,\n  subtree: !0\n}, MAX_OPTIMIZE_ITERATIONS = 100, _ScrollBlot = class _ScrollBlot extends ParentBlot$1 {\n  constructor(registry, node) {\n    super(null, node), this.registry = registry, this.scroll = this, this.build(), this.observer = new MutationObserver((mutations) => {\n      this.update(mutations);\n    }), this.observer.observe(this.domNode, OBSERVER_CONFIG), this.attach();\n  }\n  create(input, value) {\n    return this.registry.create(this, input, value);\n  }\n  find(node, bubble = !1) {\n    const blot = this.registry.find(node, bubble);\n    return blot ? blot.scroll === this ? blot : bubble ? this.find(blot.scroll.domNode.parentNode, !0) : null : null;\n  }\n  query(query, scope = Scope.ANY) {\n    return this.registry.query(query, scope);\n  }\n  register(...definitions) {\n    return this.registry.register(...definitions);\n  }\n  build() {\n    this.scroll != null && super.build();\n  }\n  detach() {\n    super.detach(), this.observer.disconnect();\n  }\n  deleteAt(index, length) {\n    this.update(), index === 0 && length === this.length() ? this.children.forEach((child) => {\n      child.remove();\n    }) : super.deleteAt(index, length);\n  }\n  formatAt(index, length, name, value) {\n    this.update(), super.formatAt(index, length, name, value);\n  }\n  insertAt(index, value, def) {\n    this.update(), super.insertAt(index, value, def);\n  }\n  optimize(mutations = [], context = {}) {\n    super.optimize(context);\n    const mutationsMap = context.mutationsMap || /* @__PURE__ */ new WeakMap();\n    let records = Array.from(this.observer.takeRecords());\n    for (; records.length > 0; )\n      mutations.push(records.pop());\n    const mark = (blot, markParent = !0) => {\n      blot == null || blot === this || blot.domNode.parentNode != null && (mutationsMap.has(blot.domNode) || mutationsMap.set(blot.domNode, []), markParent && mark(blot.parent));\n    }, optimize = (blot) => {\n      mutationsMap.has(blot.domNode) && (blot instanceof ParentBlot$1 && blot.children.forEach(optimize), mutationsMap.delete(blot.domNode), blot.optimize(context));\n    };\n    let remaining = mutations;\n    for (let i = 0; remaining.length > 0; i += 1) {\n      if (i >= MAX_OPTIMIZE_ITERATIONS)\n        throw new Error(\"[Parchment] Maximum optimize iterations reached\");\n      for (remaining.forEach((mutation) => {\n        const blot = this.find(mutation.target, !0);\n        blot != null && (blot.domNode === mutation.target && (mutation.type === \"childList\" ? (mark(this.find(mutation.previousSibling, !1)), Array.from(mutation.addedNodes).forEach((node) => {\n          const child = this.find(node, !1);\n          mark(child, !1), child instanceof ParentBlot$1 && child.children.forEach((grandChild) => {\n            mark(grandChild, !1);\n          });\n        })) : mutation.type === \"attributes\" && mark(blot.prev)), mark(blot));\n      }), this.children.forEach(optimize), remaining = Array.from(this.observer.takeRecords()), records = remaining.slice(); records.length > 0; )\n        mutations.push(records.pop());\n    }\n  }\n  update(mutations, context = {}) {\n    mutations = mutations || this.observer.takeRecords();\n    const mutationsMap = /* @__PURE__ */ new WeakMap();\n    mutations.map((mutation) => {\n      const blot = this.find(mutation.target, !0);\n      return blot == null ? null : mutationsMap.has(blot.domNode) ? (mutationsMap.get(blot.domNode).push(mutation), null) : (mutationsMap.set(blot.domNode, [mutation]), blot);\n    }).forEach((blot) => {\n      blot != null && blot !== this && mutationsMap.has(blot.domNode) && blot.update(mutationsMap.get(blot.domNode) || [], context);\n    }), context.mutationsMap = mutationsMap, mutationsMap.has(this.domNode) && super.update(mutationsMap.get(this.domNode), context), this.optimize(mutations, context);\n  }\n};\n_ScrollBlot.blotName = \"scroll\", _ScrollBlot.defaultChild = BlockBlot$1, _ScrollBlot.allowedChildren = [BlockBlot$1, ContainerBlot$1], _ScrollBlot.scope = Scope.BLOCK_BLOT, _ScrollBlot.tagName = \"DIV\";\nlet ScrollBlot = _ScrollBlot;\nconst ScrollBlot$1 = ScrollBlot, _TextBlot = class _TextBlot extends LeafBlot$1 {\n  static create(value) {\n    return document.createTextNode(value);\n  }\n  static value(domNode) {\n    return domNode.data;\n  }\n  constructor(scroll, node) {\n    super(scroll, node), this.text = this.statics.value(this.domNode);\n  }\n  deleteAt(index, length) {\n    this.domNode.data = this.text = this.text.slice(0, index) + this.text.slice(index + length);\n  }\n  index(node, offset) {\n    return this.domNode === node ? offset : -1;\n  }\n  insertAt(index, value, def) {\n    def == null ? (this.text = this.text.slice(0, index) + value + this.text.slice(index), this.domNode.data = this.text) : super.insertAt(index, value, def);\n  }\n  length() {\n    return this.text.length;\n  }\n  optimize(context) {\n    super.optimize(context), this.text = this.statics.value(this.domNode), this.text.length === 0 ? this.remove() : this.next instanceof _TextBlot && this.next.prev === this && (this.insertAt(this.length(), this.next.value()), this.next.remove());\n  }\n  position(index, _inclusive = !1) {\n    return [this.domNode, index];\n  }\n  split(index, force = !1) {\n    if (!force) {\n      if (index === 0)\n        return this;\n      if (index === this.length())\n        return this.next;\n    }\n    const after = this.scroll.create(this.domNode.splitText(index));\n    return this.parent.insertBefore(after, this.next || void 0), this.text = this.statics.value(this.domNode), after;\n  }\n  update(mutations, _context) {\n    mutations.some((mutation) => mutation.type === \"characterData\" && mutation.target === this.domNode) && (this.text = this.statics.value(this.domNode));\n  }\n  value() {\n    return this.text;\n  }\n};\n_TextBlot.blotName = \"text\", _TextBlot.scope = Scope.INLINE_BLOT;\nlet TextBlot = _TextBlot;\nconst TextBlot$1 = TextBlot;\nexport {\n  Attributor,\n  AttributorStore$1 as AttributorStore,\n  BlockBlot$1 as BlockBlot,\n  ClassAttributor$1 as ClassAttributor,\n  ContainerBlot$1 as ContainerBlot,\n  EmbedBlot$1 as EmbedBlot,\n  InlineBlot$1 as InlineBlot,\n  LeafBlot$1 as LeafBlot,\n  ParentBlot$1 as ParentBlot,\n  Registry,\n  Scope,\n  ScrollBlot$1 as ScrollBlot,\n  StyleAttributor$1 as StyleAttributor,\n  TextBlot$1 as TextBlot\n};\n//# sourceMappingURL=parchment.js.map\n","/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int|Object} [cursor_pos] Edit position in text1 or object with more info\n * @param {boolean} [cleanup] Apply semantic cleanup before returning.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos, cleanup, _fix_unicode) {\n  // Check for equality\n  if (text1 === text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  if (cursor_pos != null) {\n    var editdiff = find_cursor_edit_diff(text1, text2, cursor_pos);\n    if (editdiff) {\n      return editdiff;\n    }\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs, _fix_unicode);\n  if (cleanup) {\n    diff_cleanupSemantic(diffs);\n  }\n  return diffs;\n}\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i !== -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [\n      [DIFF_INSERT, longtext.substring(0, i)],\n      [DIFF_EQUAL, shorttext],\n      [DIFF_INSERT, longtext.substring(i + shorttext.length)],\n    ];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length === 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [\n      [DIFF_DELETE, text1],\n      [DIFF_INSERT, text2],\n    ];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n}\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = delta % 2 !== 0;\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 === -d || (k1 !== d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (\n        x1 < text1_length &&\n        y1 < text2_length &&\n        text1.charAt(x1) === text2.charAt(y1)\n      ) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] !== -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 === -d || (k2 !== d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (\n        x2 < text1_length &&\n        y2 < text2_length &&\n        text1.charAt(text1_length - x2 - 1) ===\n          text2.charAt(text2_length - y2 - 1)\n      ) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] !== -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [\n    [DIFF_DELETE, text1],\n    [DIFF_INSERT, text2],\n  ];\n}\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n}\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) !== text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(pointerstart, pointermid) ==\n      text2.substring(pointerstart, pointermid)\n    ) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_start(text1.charCodeAt(pointermid - 1))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\nfunction diff_commonOverlap_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  // Eliminate the null case.\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  }\n  // Truncate the longer string.\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n  var text_length = Math.min(text1_length, text2_length);\n  // Quick check for the worst case.\n  if (text1 == text2) {\n    return text_length;\n  }\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: http://neil.fraser.name/news/2010/11/04/\n  var best = 0;\n  var length = 1;\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n    if (found == -1) {\n      return best;\n    }\n    length += found;\n    if (\n      found == 0 ||\n      text1.substring(text_length - length) == text2.substring(0, length)\n    ) {\n      best = length;\n      length++;\n    }\n  }\n}\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.slice(-1) !== text2.slice(-1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n      text2.substring(text2.length - pointermid, text2.length - pointerend)\n    ) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_end(text1.charCodeAt(text1.length - pointermid))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = \"\";\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) !== -1) {\n      var prefixLength = diff_commonPrefix(\n        longtext.substring(i),\n        shorttext.substring(j)\n      );\n      var suffixLength = diff_commonSuffix(\n        longtext.substring(0, i),\n        shorttext.substring(0, j)\n      );\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common =\n          shorttext.substring(j - suffixLength, j) +\n          shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [\n        best_longtext_a,\n        best_longtext_b,\n        best_shorttext_a,\n        best_shorttext_b,\n        best_common,\n      ];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 4)\n  );\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 2)\n  );\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n}\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemantic(diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastequality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n  var length_insertions1 = 0;\n  var length_deletions1 = 0;\n  // Number of characters that changed after the equality.\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastequality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      }\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (\n        lastequality &&\n        lastequality.length <=\n          Math.max(length_insertions1, length_deletions1) &&\n        lastequality.length <= Math.max(length_insertions2, length_deletions2)\n      ) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, [\n          DIFF_DELETE,\n          lastequality,\n        ]);\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        // Throw away the equality we just deleted.\n        equalitiesLength--;\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastequality = null;\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  // Normalize the diff.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n  diff_cleanupSemanticLossless(diffs);\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1;\n  while (pointer < diffs.length) {\n    if (\n      diffs[pointer - 1][0] == DIFF_DELETE &&\n      diffs[pointer][0] == DIFF_INSERT\n    ) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = diff_commonOverlap_(insertion, deletion);\n      if (overlap_length1 >= overlap_length2) {\n        if (\n          overlap_length1 >= deletion.length / 2 ||\n          overlap_length1 >= insertion.length / 2\n        ) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            insertion.substring(0, overlap_length1),\n          ]);\n          diffs[pointer - 1][1] = deletion.substring(\n            0,\n            deletion.length - overlap_length1\n          );\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (\n          overlap_length2 >= deletion.length / 2 ||\n          overlap_length2 >= insertion.length / 2\n        ) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            deletion.substring(0, overlap_length2),\n          ]);\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(\n            0,\n            insertion.length - overlap_length2\n          );\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n      pointer++;\n    }\n    pointer++;\n  }\n}\n\nvar nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\nvar whitespaceRegex_ = /\\s/;\nvar linebreakRegex_ = /[\\r\\n]/;\nvar blanklineEndRegex_ = /\\n\\r?\\n$/;\nvar blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemanticLossless(diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n    return 0;\n  }\n\n  var pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] == DIFF_EQUAL &&\n      diffs[pointer + 1][0] == DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1];\n\n      // First, shift the edit as far left as possible.\n      var commonOffset = diff_commonSuffix(equality1, edit);\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore =\n        diff_cleanupSemanticScore_(equality1, edit) +\n        diff_cleanupSemanticScore_(edit, equality2);\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score =\n          diff_cleanupSemanticScore_(equality1, edit) +\n          diff_cleanupSemanticScore_(edit, equality2);\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n        diffs[pointer][1] = bestEdit;\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n    pointer++;\n  }\n}\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n * @param {boolean} fix_unicode Whether to normalize to a unicode-correct diff\n */\nfunction diff_cleanupMerge(diffs, fix_unicode) {\n  diffs.push([DIFF_EQUAL, \"\"]); // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = \"\";\n  var text_insert = \"\";\n  var commonlength;\n  while (pointer < diffs.length) {\n    if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n      diffs.splice(pointer, 1);\n      continue;\n    }\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        var previous_equality = pointer - count_insert - count_delete - 1;\n        if (fix_unicode) {\n          // prevent splitting of unicode surrogate pairs.  when fix_unicode is true,\n          // we assume that the old and new text in the diff are complete and correct\n          // unicode-encoded JS strings, but the tuple boundaries may fall between\n          // surrogate pairs.  we fix this by shaving off stray surrogates from the end\n          // of the previous equality and the beginning of this equality.  this may create\n          // empty equalities or a common prefix or suffix.  for example, if AB and AC are\n          // emojis, `[[0, 'A'], [-1, 'BA'], [0, 'C']]` would turn into deleting 'ABAC' and\n          // inserting 'AC', and then the common suffix 'AC' will be eliminated.  in this\n          // particular case, both equalities go away, we absorb any previous inequalities,\n          // and we keep scanning for the next equality before rewriting the tuples.\n          if (\n            previous_equality >= 0 &&\n            ends_with_pair_start(diffs[previous_equality][1])\n          ) {\n            var stray = diffs[previous_equality][1].slice(-1);\n            diffs[previous_equality][1] = diffs[previous_equality][1].slice(\n              0,\n              -1\n            );\n            text_delete = stray + text_delete;\n            text_insert = stray + text_insert;\n            if (!diffs[previous_equality][1]) {\n              // emptied out previous equality, so delete it and include previous delete/insert\n              diffs.splice(previous_equality, 1);\n              pointer--;\n              var k = previous_equality - 1;\n              if (diffs[k] && diffs[k][0] === DIFF_INSERT) {\n                count_insert++;\n                text_insert = diffs[k][1] + text_insert;\n                k--;\n              }\n              if (diffs[k] && diffs[k][0] === DIFF_DELETE) {\n                count_delete++;\n                text_delete = diffs[k][1] + text_delete;\n                k--;\n              }\n              previous_equality = k;\n            }\n          }\n          if (starts_with_pair_end(diffs[pointer][1])) {\n            var stray = diffs[pointer][1].charAt(0);\n            diffs[pointer][1] = diffs[pointer][1].slice(1);\n            text_delete += stray;\n            text_insert += stray;\n          }\n        }\n        if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n          // for empty equality not at end, wait for next equality\n          diffs.splice(pointer, 1);\n          break;\n        }\n        if (text_delete.length > 0 || text_insert.length > 0) {\n          // note that diff_commonPrefix and diff_commonSuffix are unicode-aware\n          if (text_delete.length > 0 && text_insert.length > 0) {\n            // Factor out any common prefixes.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if (previous_equality >= 0) {\n                diffs[previous_equality][1] += text_insert.substring(\n                  0,\n                  commonlength\n                );\n              } else {\n                diffs.splice(0, 0, [\n                  DIFF_EQUAL,\n                  text_insert.substring(0, commonlength),\n                ]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixes.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] =\n                text_insert.substring(text_insert.length - commonlength) +\n                diffs[pointer][1];\n              text_insert = text_insert.substring(\n                0,\n                text_insert.length - commonlength\n              );\n              text_delete = text_delete.substring(\n                0,\n                text_delete.length - commonlength\n              );\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          var n = count_insert + count_delete;\n          if (text_delete.length === 0 && text_insert.length === 0) {\n            diffs.splice(pointer - n, n);\n            pointer = pointer - n;\n          } else if (text_delete.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_INSERT, text_insert]);\n            pointer = pointer - n + 1;\n          } else if (text_insert.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_DELETE, text_delete]);\n            pointer = pointer - n + 1;\n          } else {\n            diffs.splice(\n              pointer - n,\n              n,\n              [DIFF_DELETE, text_delete],\n              [DIFF_INSERT, text_insert]\n            );\n            pointer = pointer - n + 2;\n          }\n        }\n        if (pointer !== 0 && diffs[pointer - 1][0] === DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = \"\";\n        text_insert = \"\";\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === \"\") {\n    diffs.pop(); // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] === DIFF_EQUAL &&\n      diffs[pointer + 1][0] === DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      if (\n        diffs[pointer][1].substring(\n          diffs[pointer][1].length - diffs[pointer - 1][1].length\n        ) === diffs[pointer - 1][1]\n      ) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] =\n          diffs[pointer - 1][1] +\n          diffs[pointer][1].substring(\n            0,\n            diffs[pointer][1].length - diffs[pointer - 1][1].length\n          );\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (\n        diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n        diffs[pointer + 1][1]\n      ) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n          diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n          diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs, fix_unicode);\n  }\n}\n\nfunction is_surrogate_pair_start(charCode) {\n  return charCode >= 0xd800 && charCode <= 0xdbff;\n}\n\nfunction is_surrogate_pair_end(charCode) {\n  return charCode >= 0xdc00 && charCode <= 0xdfff;\n}\n\nfunction starts_with_pair_end(str) {\n  return is_surrogate_pair_end(str.charCodeAt(0));\n}\n\nfunction ends_with_pair_start(str) {\n  return is_surrogate_pair_start(str.charCodeAt(str.length - 1));\n}\n\nfunction remove_empty_tuples(tuples) {\n  var ret = [];\n  for (var i = 0; i < tuples.length; i++) {\n    if (tuples[i][1].length > 0) {\n      ret.push(tuples[i]);\n    }\n  }\n  return ret;\n}\n\nfunction make_edit_splice(before, oldMiddle, newMiddle, after) {\n  if (ends_with_pair_start(before) || starts_with_pair_end(after)) {\n    return null;\n  }\n  return remove_empty_tuples([\n    [DIFF_EQUAL, before],\n    [DIFF_DELETE, oldMiddle],\n    [DIFF_INSERT, newMiddle],\n    [DIFF_EQUAL, after],\n  ]);\n}\n\nfunction find_cursor_edit_diff(oldText, newText, cursor_pos) {\n  // note: this runs after equality check has ruled out exact equality\n  var oldRange =\n    typeof cursor_pos === \"number\"\n      ? { index: cursor_pos, length: 0 }\n      : cursor_pos.oldRange;\n  var newRange = typeof cursor_pos === \"number\" ? null : cursor_pos.newRange;\n  // take into account the old and new selection to generate the best diff\n  // possible for a text edit.  for example, a text change from \"xxx\" to \"xx\"\n  // could be a delete or forwards-delete of any one of the x's, or the\n  // result of selecting two of the x's and typing \"x\".\n  var oldLength = oldText.length;\n  var newLength = newText.length;\n  if (oldRange.length === 0 && (newRange === null || newRange.length === 0)) {\n    // see if we have an insert or delete before or after cursor\n    var oldCursor = oldRange.index;\n    var oldBefore = oldText.slice(0, oldCursor);\n    var oldAfter = oldText.slice(oldCursor);\n    var maybeNewCursor = newRange ? newRange.index : null;\n    editBefore: {\n      // is this an insert or delete right before oldCursor?\n      var newCursor = oldCursor + newLength - oldLength;\n      if (maybeNewCursor !== null && maybeNewCursor !== newCursor) {\n        break editBefore;\n      }\n      if (newCursor < 0 || newCursor > newLength) {\n        break editBefore;\n      }\n      var newBefore = newText.slice(0, newCursor);\n      var newAfter = newText.slice(newCursor);\n      if (newAfter !== oldAfter) {\n        break editBefore;\n      }\n      var prefixLength = Math.min(oldCursor, newCursor);\n      var oldPrefix = oldBefore.slice(0, prefixLength);\n      var newPrefix = newBefore.slice(0, prefixLength);\n      if (oldPrefix !== newPrefix) {\n        break editBefore;\n      }\n      var oldMiddle = oldBefore.slice(prefixLength);\n      var newMiddle = newBefore.slice(prefixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldAfter);\n    }\n    editAfter: {\n      // is this an insert or delete right after oldCursor?\n      if (maybeNewCursor !== null && maybeNewCursor !== oldCursor) {\n        break editAfter;\n      }\n      var cursor = oldCursor;\n      var newBefore = newText.slice(0, cursor);\n      var newAfter = newText.slice(cursor);\n      if (newBefore !== oldBefore) {\n        break editAfter;\n      }\n      var suffixLength = Math.min(oldLength - cursor, newLength - cursor);\n      var oldSuffix = oldAfter.slice(oldAfter.length - suffixLength);\n      var newSuffix = newAfter.slice(newAfter.length - suffixLength);\n      if (oldSuffix !== newSuffix) {\n        break editAfter;\n      }\n      var oldMiddle = oldAfter.slice(0, oldAfter.length - suffixLength);\n      var newMiddle = newAfter.slice(0, newAfter.length - suffixLength);\n      return make_edit_splice(oldBefore, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n  if (oldRange.length > 0 && newRange && newRange.length === 0) {\n    replaceRange: {\n      // see if diff could be a splice of the old selection range\n      var oldPrefix = oldText.slice(0, oldRange.index);\n      var oldSuffix = oldText.slice(oldRange.index + oldRange.length);\n      var prefixLength = oldPrefix.length;\n      var suffixLength = oldSuffix.length;\n      if (newLength < prefixLength + suffixLength) {\n        break replaceRange;\n      }\n      var newPrefix = newText.slice(0, prefixLength);\n      var newSuffix = newText.slice(newLength - suffixLength);\n      if (oldPrefix !== newPrefix || oldSuffix !== newSuffix) {\n        break replaceRange;\n      }\n      var oldMiddle = oldText.slice(prefixLength, oldLength - suffixLength);\n      var newMiddle = newText.slice(prefixLength, newLength - suffixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n\n  return null;\n}\n\nfunction diff(text1, text2, cursor_pos, cleanup) {\n  // only pass fix_unicode=true at the top level, not when diff_main is\n  // recursively invoked\n  return diff_main(text1, text2, cursor_pos, cleanup, true);\n}\n\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cloneDeep = require(\"lodash.clonedeep\");\nconst isEqual = require(\"lodash.isequal\");\nvar AttributeMap;\n(function (AttributeMap) {\n    function compose(a = {}, b = {}, keepNull = false) {\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        let attributes = cloneDeep(b);\n        if (!keepNull) {\n            attributes = Object.keys(attributes).reduce((copy, key) => {\n                if (attributes[key] != null) {\n                    copy[key] = attributes[key];\n                }\n                return copy;\n            }, {});\n        }\n        for (const key in a) {\n            if (a[key] !== undefined && b[key] === undefined) {\n                attributes[key] = a[key];\n            }\n        }\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.compose = compose;\n    function diff(a = {}, b = {}) {\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        const attributes = Object.keys(a)\n            .concat(Object.keys(b))\n            .reduce((attrs, key) => {\n            if (!isEqual(a[key], b[key])) {\n                attrs[key] = b[key] === undefined ? null : b[key];\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.diff = diff;\n    function invert(attr = {}, base = {}) {\n        attr = attr || {};\n        const baseInverted = Object.keys(base).reduce((memo, key) => {\n            if (base[key] !== attr[key] && attr[key] !== undefined) {\n                memo[key] = base[key];\n            }\n            return memo;\n        }, {});\n        return Object.keys(attr).reduce((memo, key) => {\n            if (attr[key] !== base[key] && base[key] === undefined) {\n                memo[key] = null;\n            }\n            return memo;\n        }, baseInverted);\n    }\n    AttributeMap.invert = invert;\n    function transform(a, b, priority = false) {\n        if (typeof a !== 'object') {\n            return b;\n        }\n        if (typeof b !== 'object') {\n            return undefined;\n        }\n        if (!priority) {\n            return b; // b simply overwrites us without priority\n        }\n        const attributes = Object.keys(b).reduce((attrs, key) => {\n            if (a[key] === undefined) {\n                attrs[key] = b[key]; // null is a valid value\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.transform = transform;\n})(AttributeMap || (AttributeMap = {}));\nexports.default = AttributeMap;\n//# sourceMappingURL=AttributeMap.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Op;\n(function (Op) {\n    function length(op) {\n        if (typeof op.delete === 'number') {\n            return op.delete;\n        }\n        else if (typeof op.retain === 'number') {\n            return op.retain;\n        }\n        else if (typeof op.retain === 'object' && op.retain !== null) {\n            return 1;\n        }\n        else {\n            return typeof op.insert === 'string' ? op.insert.length : 1;\n        }\n    }\n    Op.length = length;\n})(Op || (Op = {}));\nexports.default = Op;\n//# sourceMappingURL=Op.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Op_1 = require(\"./Op\");\nclass Iterator {\n    constructor(ops) {\n        this.ops = ops;\n        this.index = 0;\n        this.offset = 0;\n    }\n    hasNext() {\n        return this.peekLength() < Infinity;\n    }\n    next(length) {\n        if (!length) {\n            length = Infinity;\n        }\n        const nextOp = this.ops[this.index];\n        if (nextOp) {\n            const offset = this.offset;\n            const opLength = Op_1.default.length(nextOp);\n            if (length >= opLength - offset) {\n                length = opLength - offset;\n                this.index += 1;\n                this.offset = 0;\n            }\n            else {\n                this.offset += length;\n            }\n            if (typeof nextOp.delete === 'number') {\n                return { delete: length };\n            }\n            else {\n                const retOp = {};\n                if (nextOp.attributes) {\n                    retOp.attributes = nextOp.attributes;\n                }\n                if (typeof nextOp.retain === 'number') {\n                    retOp.retain = length;\n                }\n                else if (typeof nextOp.retain === 'object' &&\n                    nextOp.retain !== null) {\n                    // offset should === 0, length should === 1\n                    retOp.retain = nextOp.retain;\n                }\n                else if (typeof nextOp.insert === 'string') {\n                    retOp.insert = nextOp.insert.substr(offset, length);\n                }\n                else {\n                    // offset should === 0, length should === 1\n                    retOp.insert = nextOp.insert;\n                }\n                return retOp;\n            }\n        }\n        else {\n            return { retain: Infinity };\n        }\n    }\n    peek() {\n        return this.ops[this.index];\n    }\n    peekLength() {\n        if (this.ops[this.index]) {\n            // Should never return 0 if our index is being managed correctly\n            return Op_1.default.length(this.ops[this.index]) - this.offset;\n        }\n        else {\n            return Infinity;\n        }\n    }\n    peekType() {\n        const op = this.ops[this.index];\n        if (op) {\n            if (typeof op.delete === 'number') {\n                return 'delete';\n            }\n            else if (typeof op.retain === 'number' ||\n                (typeof op.retain === 'object' && op.retain !== null)) {\n                return 'retain';\n            }\n            else {\n                return 'insert';\n            }\n        }\n        return 'retain';\n    }\n    rest() {\n        if (!this.hasNext()) {\n            return [];\n        }\n        else if (this.offset === 0) {\n            return this.ops.slice(this.index);\n        }\n        else {\n            const offset = this.offset;\n            const index = this.index;\n            const next = this.next();\n            const rest = this.ops.slice(this.index);\n            this.offset = offset;\n            this.index = index;\n            return [next].concat(rest);\n        }\n    }\n}\nexports.default = Iterator;\n//# sourceMappingURL=OpIterator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AttributeMap = exports.OpIterator = exports.Op = void 0;\nconst diff = require(\"fast-diff\");\nconst cloneDeep = require(\"lodash.clonedeep\");\nconst isEqual = require(\"lodash.isequal\");\nconst AttributeMap_1 = require(\"./AttributeMap\");\nexports.AttributeMap = AttributeMap_1.default;\nconst Op_1 = require(\"./Op\");\nexports.Op = Op_1.default;\nconst OpIterator_1 = require(\"./OpIterator\");\nexports.OpIterator = OpIterator_1.default;\nconst NULL_CHARACTER = String.fromCharCode(0); // Placeholder char for embed in diff()\nconst getEmbedTypeAndData = (a, b) => {\n    if (typeof a !== 'object' || a === null) {\n        throw new Error(`cannot retain a ${typeof a}`);\n    }\n    if (typeof b !== 'object' || b === null) {\n        throw new Error(`cannot retain a ${typeof b}`);\n    }\n    const embedType = Object.keys(a)[0];\n    if (!embedType || embedType !== Object.keys(b)[0]) {\n        throw new Error(`embed types not matched: ${embedType} != ${Object.keys(b)[0]}`);\n    }\n    return [embedType, a[embedType], b[embedType]];\n};\nclass Delta {\n    constructor(ops) {\n        // Assume we are given a well formed ops\n        if (Array.isArray(ops)) {\n            this.ops = ops;\n        }\n        else if (ops != null && Array.isArray(ops.ops)) {\n            this.ops = ops.ops;\n        }\n        else {\n            this.ops = [];\n        }\n    }\n    static registerEmbed(embedType, handler) {\n        this.handlers[embedType] = handler;\n    }\n    static unregisterEmbed(embedType) {\n        delete this.handlers[embedType];\n    }\n    static getHandler(embedType) {\n        const handler = this.handlers[embedType];\n        if (!handler) {\n            throw new Error(`no handlers for embed type \"${embedType}\"`);\n        }\n        return handler;\n    }\n    insert(arg, attributes) {\n        const newOp = {};\n        if (typeof arg === 'string' && arg.length === 0) {\n            return this;\n        }\n        newOp.insert = arg;\n        if (attributes != null &&\n            typeof attributes === 'object' &&\n            Object.keys(attributes).length > 0) {\n            newOp.attributes = attributes;\n        }\n        return this.push(newOp);\n    }\n    delete(length) {\n        if (length <= 0) {\n            return this;\n        }\n        return this.push({ delete: length });\n    }\n    retain(length, attributes) {\n        if (typeof length === 'number' && length <= 0) {\n            return this;\n        }\n        const newOp = { retain: length };\n        if (attributes != null &&\n            typeof attributes === 'object' &&\n            Object.keys(attributes).length > 0) {\n            newOp.attributes = attributes;\n        }\n        return this.push(newOp);\n    }\n    push(newOp) {\n        let index = this.ops.length;\n        let lastOp = this.ops[index - 1];\n        newOp = cloneDeep(newOp);\n        if (typeof lastOp === 'object') {\n            if (typeof newOp.delete === 'number' &&\n                typeof lastOp.delete === 'number') {\n                this.ops[index - 1] = { delete: lastOp.delete + newOp.delete };\n                return this;\n            }\n            // Since it does not matter if we insert before or after deleting at the same index,\n            // always prefer to insert first\n            if (typeof lastOp.delete === 'number' && newOp.insert != null) {\n                index -= 1;\n                lastOp = this.ops[index - 1];\n                if (typeof lastOp !== 'object') {\n                    this.ops.unshift(newOp);\n                    return this;\n                }\n            }\n            if (isEqual(newOp.attributes, lastOp.attributes)) {\n                if (typeof newOp.insert === 'string' &&\n                    typeof lastOp.insert === 'string') {\n                    this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n                    if (typeof newOp.attributes === 'object') {\n                        this.ops[index - 1].attributes = newOp.attributes;\n                    }\n                    return this;\n                }\n                else if (typeof newOp.retain === 'number' &&\n                    typeof lastOp.retain === 'number') {\n                    this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n                    if (typeof newOp.attributes === 'object') {\n                        this.ops[index - 1].attributes = newOp.attributes;\n                    }\n                    return this;\n                }\n            }\n        }\n        if (index === this.ops.length) {\n            this.ops.push(newOp);\n        }\n        else {\n            this.ops.splice(index, 0, newOp);\n        }\n        return this;\n    }\n    chop() {\n        const lastOp = this.ops[this.ops.length - 1];\n        if (lastOp && typeof lastOp.retain === 'number' && !lastOp.attributes) {\n            this.ops.pop();\n        }\n        return this;\n    }\n    filter(predicate) {\n        return this.ops.filter(predicate);\n    }\n    forEach(predicate) {\n        this.ops.forEach(predicate);\n    }\n    map(predicate) {\n        return this.ops.map(predicate);\n    }\n    partition(predicate) {\n        const passed = [];\n        const failed = [];\n        this.forEach((op) => {\n            const target = predicate(op) ? passed : failed;\n            target.push(op);\n        });\n        return [passed, failed];\n    }\n    reduce(predicate, initialValue) {\n        return this.ops.reduce(predicate, initialValue);\n    }\n    changeLength() {\n        return this.reduce((length, elem) => {\n            if (elem.insert) {\n                return length + Op_1.default.length(elem);\n            }\n            else if (elem.delete) {\n                return length - elem.delete;\n            }\n            return length;\n        }, 0);\n    }\n    length() {\n        return this.reduce((length, elem) => {\n            return length + Op_1.default.length(elem);\n        }, 0);\n    }\n    slice(start = 0, end = Infinity) {\n        const ops = [];\n        const iter = new OpIterator_1.default(this.ops);\n        let index = 0;\n        while (index < end && iter.hasNext()) {\n            let nextOp;\n            if (index < start) {\n                nextOp = iter.next(start - index);\n            }\n            else {\n                nextOp = iter.next(end - index);\n                ops.push(nextOp);\n            }\n            index += Op_1.default.length(nextOp);\n        }\n        return new Delta(ops);\n    }\n    compose(other) {\n        const thisIter = new OpIterator_1.default(this.ops);\n        const otherIter = new OpIterator_1.default(other.ops);\n        const ops = [];\n        const firstOther = otherIter.peek();\n        if (firstOther != null &&\n            typeof firstOther.retain === 'number' &&\n            firstOther.attributes == null) {\n            let firstLeft = firstOther.retain;\n            while (thisIter.peekType() === 'insert' &&\n                thisIter.peekLength() <= firstLeft) {\n                firstLeft -= thisIter.peekLength();\n                ops.push(thisIter.next());\n            }\n            if (firstOther.retain - firstLeft > 0) {\n                otherIter.next(firstOther.retain - firstLeft);\n            }\n        }\n        const delta = new Delta(ops);\n        while (thisIter.hasNext() || otherIter.hasNext()) {\n            if (otherIter.peekType() === 'insert') {\n                delta.push(otherIter.next());\n            }\n            else if (thisIter.peekType() === 'delete') {\n                delta.push(thisIter.next());\n            }\n            else {\n                const length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n                const thisOp = thisIter.next(length);\n                const otherOp = otherIter.next(length);\n                if (otherOp.retain) {\n                    const newOp = {};\n                    if (typeof thisOp.retain === 'number') {\n                        newOp.retain =\n                            typeof otherOp.retain === 'number' ? length : otherOp.retain;\n                    }\n                    else {\n                        if (typeof otherOp.retain === 'number') {\n                            if (thisOp.retain == null) {\n                                newOp.insert = thisOp.insert;\n                            }\n                            else {\n                                newOp.retain = thisOp.retain;\n                            }\n                        }\n                        else {\n                            const action = thisOp.retain == null ? 'insert' : 'retain';\n                            const [embedType, thisData, otherData] = getEmbedTypeAndData(thisOp[action], otherOp.retain);\n                            const handler = Delta.getHandler(embedType);\n                            newOp[action] = {\n                                [embedType]: handler.compose(thisData, otherData, action === 'retain'),\n                            };\n                        }\n                    }\n                    // Preserve null when composing with a retain, otherwise remove it for inserts\n                    const attributes = AttributeMap_1.default.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n                    if (attributes) {\n                        newOp.attributes = attributes;\n                    }\n                    delta.push(newOp);\n                    // Optimization if rest of other is just retain\n                    if (!otherIter.hasNext() &&\n                        isEqual(delta.ops[delta.ops.length - 1], newOp)) {\n                        const rest = new Delta(thisIter.rest());\n                        return delta.concat(rest).chop();\n                    }\n                    // Other op should be delete, we could be an insert or retain\n                    // Insert + delete cancels out\n                }\n                else if (typeof otherOp.delete === 'number' &&\n                    (typeof thisOp.retain === 'number' ||\n                        (typeof thisOp.retain === 'object' && thisOp.retain !== null))) {\n                    delta.push(otherOp);\n                }\n            }\n        }\n        return delta.chop();\n    }\n    concat(other) {\n        const delta = new Delta(this.ops.slice());\n        if (other.ops.length > 0) {\n            delta.push(other.ops[0]);\n            delta.ops = delta.ops.concat(other.ops.slice(1));\n        }\n        return delta;\n    }\n    diff(other, cursor) {\n        if (this.ops === other.ops) {\n            return new Delta();\n        }\n        const strings = [this, other].map((delta) => {\n            return delta\n                .map((op) => {\n                if (op.insert != null) {\n                    return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n                }\n                const prep = delta === other ? 'on' : 'with';\n                throw new Error('diff() called ' + prep + ' non-document');\n            })\n                .join('');\n        });\n        const retDelta = new Delta();\n        const diffResult = diff(strings[0], strings[1], cursor, true);\n        const thisIter = new OpIterator_1.default(this.ops);\n        const otherIter = new OpIterator_1.default(other.ops);\n        diffResult.forEach((component) => {\n            let length = component[1].length;\n            while (length > 0) {\n                let opLength = 0;\n                switch (component[0]) {\n                    case diff.INSERT:\n                        opLength = Math.min(otherIter.peekLength(), length);\n                        retDelta.push(otherIter.next(opLength));\n                        break;\n                    case diff.DELETE:\n                        opLength = Math.min(length, thisIter.peekLength());\n                        thisIter.next(opLength);\n                        retDelta.delete(opLength);\n                        break;\n                    case diff.EQUAL:\n                        opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n                        const thisOp = thisIter.next(opLength);\n                        const otherOp = otherIter.next(opLength);\n                        if (isEqual(thisOp.insert, otherOp.insert)) {\n                            retDelta.retain(opLength, AttributeMap_1.default.diff(thisOp.attributes, otherOp.attributes));\n                        }\n                        else {\n                            retDelta.push(otherOp).delete(opLength);\n                        }\n                        break;\n                }\n                length -= opLength;\n            }\n        });\n        return retDelta.chop();\n    }\n    eachLine(predicate, newline = '\\n') {\n        const iter = new OpIterator_1.default(this.ops);\n        let line = new Delta();\n        let i = 0;\n        while (iter.hasNext()) {\n            if (iter.peekType() !== 'insert') {\n                return;\n            }\n            const thisOp = iter.peek();\n            const start = Op_1.default.length(thisOp) - iter.peekLength();\n            const index = typeof thisOp.insert === 'string'\n                ? thisOp.insert.indexOf(newline, start) - start\n                : -1;\n            if (index < 0) {\n                line.push(iter.next());\n            }\n            else if (index > 0) {\n                line.push(iter.next(index));\n            }\n            else {\n                if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n                    return;\n                }\n                i += 1;\n                line = new Delta();\n            }\n        }\n        if (line.length() > 0) {\n            predicate(line, {}, i);\n        }\n    }\n    invert(base) {\n        const inverted = new Delta();\n        this.reduce((baseIndex, op) => {\n            if (op.insert) {\n                inverted.delete(Op_1.default.length(op));\n            }\n            else if (typeof op.retain === 'number' && op.attributes == null) {\n                inverted.retain(op.retain);\n                return baseIndex + op.retain;\n            }\n            else if (op.delete || typeof op.retain === 'number') {\n                const length = (op.delete || op.retain);\n                const slice = base.slice(baseIndex, baseIndex + length);\n                slice.forEach((baseOp) => {\n                    if (op.delete) {\n                        inverted.push(baseOp);\n                    }\n                    else if (op.retain && op.attributes) {\n                        inverted.retain(Op_1.default.length(baseOp), AttributeMap_1.default.invert(op.attributes, baseOp.attributes));\n                    }\n                });\n                return baseIndex + length;\n            }\n            else if (typeof op.retain === 'object' && op.retain !== null) {\n                const slice = base.slice(baseIndex, baseIndex + 1);\n                const baseOp = new OpIterator_1.default(slice.ops).next();\n                const [embedType, opData, baseOpData] = getEmbedTypeAndData(op.retain, baseOp.insert);\n                const handler = Delta.getHandler(embedType);\n                inverted.retain({ [embedType]: handler.invert(opData, baseOpData) }, AttributeMap_1.default.invert(op.attributes, baseOp.attributes));\n                return baseIndex + 1;\n            }\n            return baseIndex;\n        }, 0);\n        return inverted.chop();\n    }\n    transform(arg, priority = false) {\n        priority = !!priority;\n        if (typeof arg === 'number') {\n            return this.transformPosition(arg, priority);\n        }\n        const other = arg;\n        const thisIter = new OpIterator_1.default(this.ops);\n        const otherIter = new OpIterator_1.default(other.ops);\n        const delta = new Delta();\n        while (thisIter.hasNext() || otherIter.hasNext()) {\n            if (thisIter.peekType() === 'insert' &&\n                (priority || otherIter.peekType() !== 'insert')) {\n                delta.retain(Op_1.default.length(thisIter.next()));\n            }\n            else if (otherIter.peekType() === 'insert') {\n                delta.push(otherIter.next());\n            }\n            else {\n                const length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n                const thisOp = thisIter.next(length);\n                const otherOp = otherIter.next(length);\n                if (thisOp.delete) {\n                    // Our delete either makes their delete redundant or removes their retain\n                    continue;\n                }\n                else if (otherOp.delete) {\n                    delta.push(otherOp);\n                }\n                else {\n                    const thisData = thisOp.retain;\n                    const otherData = otherOp.retain;\n                    let transformedData = typeof otherData === 'object' && otherData !== null\n                        ? otherData\n                        : length;\n                    if (typeof thisData === 'object' &&\n                        thisData !== null &&\n                        typeof otherData === 'object' &&\n                        otherData !== null) {\n                        const embedType = Object.keys(thisData)[0];\n                        if (embedType === Object.keys(otherData)[0]) {\n                            const handler = Delta.getHandler(embedType);\n                            if (handler) {\n                                transformedData = {\n                                    [embedType]: handler.transform(thisData[embedType], otherData[embedType], priority),\n                                };\n                            }\n                        }\n                    }\n                    // We retain either their retain or insert\n                    delta.retain(transformedData, AttributeMap_1.default.transform(thisOp.attributes, otherOp.attributes, priority));\n                }\n            }\n        }\n        return delta.chop();\n    }\n    transformPosition(index, priority = false) {\n        priority = !!priority;\n        const thisIter = new OpIterator_1.default(this.ops);\n        let offset = 0;\n        while (thisIter.hasNext() && offset <= index) {\n            const length = thisIter.peekLength();\n            const nextType = thisIter.peekType();\n            thisIter.next();\n            if (nextType === 'delete') {\n                index -= Math.min(length, index - offset);\n                continue;\n            }\n            else if (nextType === 'insert' && (offset < index || !priority)) {\n                index += length;\n            }\n            offset += length;\n        }\n        return index;\n    }\n}\nDelta.Op = Op_1.default;\nDelta.OpIterator = OpIterator_1.default;\nDelta.AttributeMap = AttributeMap_1.default;\nDelta.handlers = {};\nexports.default = Delta;\nif (typeof module === 'object') {\n    module.exports = Delta;\n    module.exports.default = Delta;\n}\n//# sourceMappingURL=Delta.js.map","import { EmbedBlot } from 'parchment';\nclass Break extends EmbedBlot {\n  static value() {\n    return undefined;\n  }\n  optimize() {\n    if (this.prev || this.next) {\n      this.remove();\n    }\n  }\n  length() {\n    return 0;\n  }\n  value() {\n    return '';\n  }\n}\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\nexport default Break;\n//# sourceMappingURL=break.js.map","import { TextBlot } from 'parchment';\nclass Text extends TextBlot {}\n\n// https://lodash.com/docs#escape\nconst entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nfunction escapeText(text) {\n  return text.replace(/[&<>\"']/g, s => entityMap[s]);\n}\nexport { Text as default, escapeText };\n//# sourceMappingURL=text.js.map","import { EmbedBlot, InlineBlot, Scope } from 'parchment';\nimport Break from './break.js';\nimport Text from './text.js';\nclass Inline extends InlineBlot {\n  static allowedChildren = [Inline, Break, EmbedBlot, Text];\n  // Lower index means deeper in the DOM tree, since not found (-1) is for embeds\n  static order = ['cursor', 'inline',\n  // Must be lower\n  'link',\n  // Chrome wants <a> to be lower\n  'underline', 'strike', 'italic', 'bold', 'script', 'code' // Must be higher\n  ];\n  static compare(self, other) {\n    const selfIndex = Inline.order.indexOf(self);\n    const otherIndex = Inline.order.indexOf(other);\n    if (selfIndex >= 0 || otherIndex >= 0) {\n      return selfIndex - otherIndex;\n    }\n    if (self === other) {\n      return 0;\n    }\n    if (self < other) {\n      return -1;\n    }\n    return 1;\n  }\n  formatAt(index, length, name, value) {\n    if (Inline.compare(this.statics.blotName, name) < 0 && this.scroll.query(name, Scope.BLOT)) {\n      const blot = this.isolate(index, length);\n      if (value) {\n        blot.wrap(name, value);\n      }\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n  optimize(context) {\n    super.optimize(context);\n    if (this.parent instanceof Inline && Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0) {\n      const parent = this.parent.isolate(this.offset(), this.length());\n      // @ts-expect-error TODO: make isolate generic\n      this.moveChildren(parent);\n      parent.wrap(this);\n    }\n  }\n}\nexport default Inline;\n//# sourceMappingURL=inline.js.map","import { AttributorStore, BlockBlot, EmbedBlot, LeafBlot, Scope } from 'parchment';\nimport Delta from 'quill-delta';\nimport Break from './break.js';\nimport Inline from './inline.js';\nimport TextBlot from './text.js';\nconst NEWLINE_LENGTH = 1;\nclass Block extends BlockBlot {\n  cache = {};\n  delta() {\n    if (this.cache.delta == null) {\n      this.cache.delta = blockDelta(this);\n    }\n    return this.cache.delta;\n  }\n  deleteAt(index, length) {\n    super.deleteAt(index, length);\n    this.cache = {};\n  }\n  formatAt(index, length, name, value) {\n    if (length <= 0) return;\n    if (this.scroll.query(name, Scope.BLOCK)) {\n      if (index + length === this.length()) {\n        this.format(name, value);\n      }\n    } else {\n      super.formatAt(index, Math.min(length, this.length() - index - 1), name, value);\n    }\n    this.cache = {};\n  }\n  insertAt(index, value, def) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      this.cache = {};\n      return;\n    }\n    if (value.length === 0) return;\n    const lines = value.split('\\n');\n    const text = lines.shift();\n    if (text.length > 0) {\n      if (index < this.length() - 1 || this.children.tail == null) {\n        super.insertAt(Math.min(index, this.length() - 1), text);\n      } else {\n        this.children.tail.insertAt(this.children.tail.length(), text);\n      }\n      this.cache = {};\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let block = this;\n    lines.reduce((lineIndex, line) => {\n      // @ts-expect-error Fix me later\n      block = block.split(lineIndex, true);\n      block.insertAt(0, line);\n      return line.length;\n    }, index + text.length);\n  }\n  insertBefore(blot, ref) {\n    const {\n      head\n    } = this.children;\n    super.insertBefore(blot, ref);\n    if (head instanceof Break) {\n      head.remove();\n    }\n    this.cache = {};\n  }\n  length() {\n    if (this.cache.length == null) {\n      this.cache.length = super.length() + NEWLINE_LENGTH;\n    }\n    return this.cache.length;\n  }\n  moveChildren(target, ref) {\n    super.moveChildren(target, ref);\n    this.cache = {};\n  }\n  optimize(context) {\n    super.optimize(context);\n    this.cache = {};\n  }\n  path(index) {\n    return super.path(index, true);\n  }\n  removeChild(child) {\n    super.removeChild(child);\n    this.cache = {};\n  }\n  split(index) {\n    let force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n      const clone = this.clone();\n      if (index === 0) {\n        this.parent.insertBefore(clone, this);\n        return this;\n      }\n      this.parent.insertBefore(clone, this.next);\n      return clone;\n    }\n    const next = super.split(index, force);\n    this.cache = {};\n    return next;\n  }\n}\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = Break;\nBlock.allowedChildren = [Break, Inline, EmbedBlot, TextBlot];\nclass BlockEmbed extends EmbedBlot {\n  attach() {\n    super.attach();\n    this.attributes = new AttributorStore(this.domNode);\n  }\n  delta() {\n    return new Delta().insert(this.value(), {\n      ...this.formats(),\n      ...this.attributes.values()\n    });\n  }\n  format(name, value) {\n    const attribute = this.scroll.query(name, Scope.BLOCK_ATTRIBUTE);\n    if (attribute != null) {\n      // @ts-expect-error TODO: Scroll#query() should return Attributor when scope is attribute\n      this.attributes.attribute(attribute, value);\n    }\n  }\n  formatAt(index, length, name, value) {\n    this.format(name, value);\n  }\n  insertAt(index, value, def) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      return;\n    }\n    const lines = value.split('\\n');\n    const text = lines.pop();\n    const blocks = lines.map(line => {\n      const block = this.scroll.create(Block.blotName);\n      block.insertAt(0, line);\n      return block;\n    });\n    const ref = this.split(index);\n    blocks.forEach(block => {\n      this.parent.insertBefore(block, ref);\n    });\n    if (text) {\n      this.parent.insertBefore(this.scroll.create('text', text), ref);\n    }\n  }\n}\nBlockEmbed.scope = Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\nfunction blockDelta(blot) {\n  let filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return blot.descendants(LeafBlot).reduce((delta, leaf) => {\n    if (leaf.length() === 0) {\n      return delta;\n    }\n    return delta.insert(leaf.value(), bubbleFormats(leaf, {}, filter));\n  }, new Delta()).insert('\\n', bubbleFormats(blot));\n}\nfunction bubbleFormats(blot) {\n  let formats = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let filter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  if (blot == null) return formats;\n  if ('formats' in blot && typeof blot.formats === 'function') {\n    formats = {\n      ...formats,\n      ...blot.formats()\n    };\n    if (filter) {\n      // exclude syntax highlighting from deltas and getFormat()\n      delete formats['code-token'];\n    }\n  }\n  if (blot.parent == null || blot.parent.statics.blotName === 'scroll' || blot.parent.statics.scope !== blot.statics.scope) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats, filter);\n}\nexport { blockDelta, bubbleFormats, BlockEmbed, Block as default };\n//# sourceMappingURL=block.js.map","import { EmbedBlot, Scope } from 'parchment';\nimport TextBlot from './text.js';\nclass Cursor extends EmbedBlot {\n  static blotName = 'cursor';\n  static className = 'ql-cursor';\n  static tagName = 'span';\n  static CONTENTS = '\\uFEFF'; // Zero width no break space\n\n  static value() {\n    return undefined;\n  }\n  constructor(scroll, domNode, selection) {\n    super(scroll, domNode);\n    this.selection = selection;\n    this.textNode = document.createTextNode(Cursor.CONTENTS);\n    this.domNode.appendChild(this.textNode);\n    this.savedLength = 0;\n  }\n  detach() {\n    // super.detach() will also clear domNode.__blot\n    if (this.parent != null) this.parent.removeChild(this);\n  }\n  format(name, value) {\n    if (this.savedLength !== 0) {\n      super.format(name, value);\n      return;\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let target = this;\n    let index = 0;\n    while (target != null && target.statics.scope !== Scope.BLOCK_BLOT) {\n      index += target.offset(target.parent);\n      target = target.parent;\n    }\n    if (target != null) {\n      this.savedLength = Cursor.CONTENTS.length;\n      // @ts-expect-error TODO: allow empty context in Parchment\n      target.optimize();\n      target.formatAt(index, Cursor.CONTENTS.length, name, value);\n      this.savedLength = 0;\n    }\n  }\n  index(node, offset) {\n    if (node === this.textNode) return 0;\n    return super.index(node, offset);\n  }\n  length() {\n    return this.savedLength;\n  }\n  position() {\n    return [this.textNode, this.textNode.data.length];\n  }\n  remove() {\n    super.remove();\n    // @ts-expect-error Fix me later\n    this.parent = null;\n  }\n  restore() {\n    if (this.selection.composing || this.parent == null) return null;\n    const range = this.selection.getNativeRange();\n    // Browser may push down styles/nodes inside the cursor blot.\n    // https://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#push-down-values\n    while (this.domNode.lastChild != null && this.domNode.lastChild !== this.textNode) {\n      // @ts-expect-error Fix me later\n      this.domNode.parentNode.insertBefore(this.domNode.lastChild, this.domNode);\n    }\n    const prevTextBlot = this.prev instanceof TextBlot ? this.prev : null;\n    const prevTextLength = prevTextBlot ? prevTextBlot.length() : 0;\n    const nextTextBlot = this.next instanceof TextBlot ? this.next : null;\n    // @ts-expect-error TODO: make TextBlot.text public\n    const nextText = nextTextBlot ? nextTextBlot.text : '';\n    const {\n      textNode\n    } = this;\n    // take text from inside this blot and reset it\n    const newText = textNode.data.split(Cursor.CONTENTS).join('');\n    textNode.data = Cursor.CONTENTS;\n\n    // proactively merge TextBlots around cursor so that optimization\n    // doesn't lose the cursor.  the reason we are here in cursor.restore\n    // could be that the user clicked in prevTextBlot or nextTextBlot, or\n    // the user typed something.\n    let mergedTextBlot;\n    if (prevTextBlot) {\n      mergedTextBlot = prevTextBlot;\n      if (newText || nextTextBlot) {\n        prevTextBlot.insertAt(prevTextBlot.length(), newText + nextText);\n        if (nextTextBlot) {\n          nextTextBlot.remove();\n        }\n      }\n    } else if (nextTextBlot) {\n      mergedTextBlot = nextTextBlot;\n      nextTextBlot.insertAt(0, newText);\n    } else {\n      const newTextNode = document.createTextNode(newText);\n      mergedTextBlot = this.scroll.create(newTextNode);\n      this.parent.insertBefore(mergedTextBlot, this);\n    }\n    this.remove();\n    if (range) {\n      // calculate selection to restore\n      const remapOffset = (node, offset) => {\n        if (prevTextBlot && node === prevTextBlot.domNode) {\n          return offset;\n        }\n        if (node === textNode) {\n          return prevTextLength + offset - 1;\n        }\n        if (nextTextBlot && node === nextTextBlot.domNode) {\n          return prevTextLength + newText.length + offset;\n        }\n        return null;\n      };\n      const start = remapOffset(range.start.node, range.start.offset);\n      const end = remapOffset(range.end.node, range.end.offset);\n      if (start !== null && end !== null) {\n        return {\n          startNode: mergedTextBlot.domNode,\n          startOffset: start,\n          endNode: mergedTextBlot.domNode,\n          endOffset: end\n        };\n      }\n    }\n    return null;\n  }\n  update(mutations, context) {\n    if (mutations.some(mutation => {\n      return mutation.type === 'characterData' && mutation.target === this.textNode;\n    })) {\n      const range = this.restore();\n      if (range) context.range = range;\n    }\n  }\n\n  // Avoid .ql-cursor being a descendant of `<a/>`.\n  // The reason is Safari pushes down `<a/>` on text insertion.\n  // That will cause DOM nodes not sync with the model.\n  //\n  // For example ({I} is the caret), given the markup:\n  //    <a><span class=\"ql-cursor\">\\uFEFF{I}</span></a>\n  // When typing a char \"x\", `<a/>` will be pushed down inside the `<span>` first:\n  //    <span class=\"ql-cursor\"><a>\\uFEFF{I}</a></span>\n  // And then \"x\" will be inserted after `<a/>`:\n  //    <span class=\"ql-cursor\"><a>\\uFEFF</a>d{I}</span>\n  optimize(context) {\n    // @ts-expect-error Fix me later\n    super.optimize(context);\n    let {\n      parent\n    } = this;\n    while (parent) {\n      if (parent.domNode.tagName === 'A') {\n        this.savedLength = Cursor.CONTENTS.length;\n        // @ts-expect-error TODO: make isolate generic\n        parent.isolate(this.offset(parent), this.length()).unwrap();\n        this.savedLength = 0;\n        break;\n      }\n      parent = parent.parent;\n    }\n  }\n  value() {\n    return '';\n  }\n}\nexport default Cursor;\n//# sourceMappingURL=cursor.js.map","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","export default new WeakMap();\n//# sourceMappingURL=instances.js.map","const levels = ['error', 'warn', 'log', 'info'];\nlet level = 'warn';\nfunction debug(method) {\n  if (level) {\n    if (levels.indexOf(method) <= levels.indexOf(level)) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      console[method](...args); // eslint-disable-line no-console\n    }\n  }\n}\nfunction namespace(ns) {\n  return levels.reduce((logger, method) => {\n    logger[method] = debug.bind(console, method, ns);\n    return logger;\n  }, {});\n}\nnamespace.level = newLevel => {\n  level = newLevel;\n};\ndebug.level = namespace.level;\nexport default namespace;\n//# sourceMappingURL=logger.js.map","import { EventEmitter } from 'eventemitter3';\nimport instances from './instances.js';\nimport logger from './logger.js';\nconst debug = logger('quill:events');\nconst EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\nEVENTS.forEach(eventName => {\n  document.addEventListener(eventName, function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    Array.from(document.querySelectorAll('.ql-container')).forEach(node => {\n      const quill = instances.get(node);\n      if (quill && quill.emitter) {\n        quill.emitter.handleDOM(...args);\n      }\n    });\n  });\n});\nclass Emitter extends EventEmitter {\n  static events = {\n    EDITOR_CHANGE: 'editor-change',\n    SCROLL_BEFORE_UPDATE: 'scroll-before-update',\n    SCROLL_BLOT_MOUNT: 'scroll-blot-mount',\n    SCROLL_BLOT_UNMOUNT: 'scroll-blot-unmount',\n    SCROLL_OPTIMIZE: 'scroll-optimize',\n    SCROLL_UPDATE: 'scroll-update',\n    SCROLL_EMBED_UPDATE: 'scroll-embed-update',\n    SELECTION_CHANGE: 'selection-change',\n    TEXT_CHANGE: 'text-change',\n    COMPOSITION_BEFORE_START: 'composition-before-start',\n    COMPOSITION_START: 'composition-start',\n    COMPOSITION_BEFORE_END: 'composition-before-end',\n    COMPOSITION_END: 'composition-end'\n  };\n  static sources = {\n    API: 'api',\n    SILENT: 'silent',\n    USER: 'user'\n  };\n  constructor() {\n    super();\n    this.domListeners = {};\n    this.on('error', debug.error);\n  }\n  emit() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    debug.log.call(debug, ...args);\n    // @ts-expect-error\n    return super.emit(...args);\n  }\n  handleDOM(event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    (this.domListeners[event.type] || []).forEach(_ref => {\n      let {\n        node,\n        handler\n      } = _ref;\n      if (event.target === node || node.contains(event.target)) {\n        handler(event, ...args);\n      }\n    });\n  }\n  listenDOM(eventName, node, handler) {\n    if (!this.domListeners[eventName]) {\n      this.domListeners[eventName] = [];\n    }\n    this.domListeners[eventName].push({\n      node,\n      handler\n    });\n  }\n}\nexport default Emitter;\n//# sourceMappingURL=emitter.js.map","import { LeafBlot, Scope } from 'parchment';\nimport { cloneDeep, isEqual } from 'lodash-es';\nimport Emitter from './emitter.js';\nimport logger from './logger.js';\nconst debug = logger('quill:selection');\nexport class Range {\n  constructor(index) {\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this.index = index;\n    this.length = length;\n  }\n}\nclass Selection {\n  constructor(scroll, emitter) {\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    // @ts-expect-error\n    this.cursor = this.scroll.create('cursor', this);\n    // savedRange is last non-null range\n    this.savedRange = new Range(0, 0);\n    this.lastRange = this.savedRange;\n    this.lastNative = null;\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM('selectionchange', document, () => {\n      if (!this.mouseDown && !this.composing) {\n        setTimeout(this.update.bind(this, Emitter.sources.USER), 1);\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE, () => {\n      if (!this.hasFocus()) return;\n      const native = this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === this.cursor.textNode) return; // cursor.restore() will handle\n      this.emitter.once(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\n        try {\n          if (this.root.contains(native.start.node) && this.root.contains(native.end.node)) {\n            this.setNativeRange(native.start.node, native.start.offset, native.end.node, native.end.offset);\n          }\n          const triggeredByTyping = mutations.some(mutation => mutation.type === 'characterData' || mutation.type === 'childList' || mutation.type === 'attributes' && mutation.target === this.root);\n          this.update(triggeredByTyping ? Emitter.sources.SILENT : source);\n        } catch (ignored) {\n          // ignore\n        }\n      });\n    });\n    this.emitter.on(Emitter.events.SCROLL_OPTIMIZE, (mutations, context) => {\n      if (context.range) {\n        const {\n          startNode,\n          startOffset,\n          endNode,\n          endOffset\n        } = context.range;\n        this.setNativeRange(startNode, startOffset, endNode, endOffset);\n        this.update(Emitter.sources.SILENT);\n      }\n    });\n    this.update(Emitter.sources.SILENT);\n  }\n  handleComposition() {\n    this.emitter.on(Emitter.events.COMPOSITION_BEFORE_START, () => {\n      this.composing = true;\n    });\n    this.emitter.on(Emitter.events.COMPOSITION_END, () => {\n      this.composing = false;\n      if (this.cursor.parent) {\n        const range = this.cursor.restore();\n        if (!range) return;\n        setTimeout(() => {\n          this.setNativeRange(range.startNode, range.startOffset, range.endNode, range.endOffset);\n        }, 1);\n      }\n    });\n  }\n  handleDragging() {\n    this.emitter.listenDOM('mousedown', document.body, () => {\n      this.mouseDown = true;\n    });\n    this.emitter.listenDOM('mouseup', document.body, () => {\n      this.mouseDown = false;\n      this.update(Emitter.sources.USER);\n    });\n  }\n  focus() {\n    if (this.hasFocus()) return;\n    this.root.focus({\n      preventScroll: true\n    });\n    this.setRange(this.savedRange);\n  }\n  format(format, value) {\n    this.scroll.update();\n    const nativeRange = this.getNativeRange();\n    if (nativeRange == null || !nativeRange.native.collapsed || this.scroll.query(format, Scope.BLOCK)) return;\n    if (nativeRange.start.node !== this.cursor.textNode) {\n      const blot = this.scroll.find(nativeRange.start.node, false);\n      if (blot == null) return;\n      // TODO Give blot ability to not split\n      if (blot instanceof LeafBlot) {\n        const after = blot.split(nativeRange.start.offset);\n        blot.parent.insertBefore(this.cursor, after);\n      } else {\n        // @ts-expect-error TODO: nativeRange.start.node doesn't seem to match function signature\n        blot.insertBefore(this.cursor, nativeRange.start.node); // Should never happen\n      }\n      this.cursor.attach();\n    }\n    this.cursor.format(format, value);\n    this.scroll.optimize();\n    this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n    this.update();\n  }\n  getBounds(index) {\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    const scrollLength = this.scroll.length();\n    index = Math.min(index, scrollLength - 1);\n    length = Math.min(index + length, scrollLength - 1) - index;\n    let node;\n    let [leaf, offset] = this.scroll.leaf(index);\n    if (leaf == null) return null;\n    if (length > 0 && offset === leaf.length()) {\n      const [next] = this.scroll.leaf(index + 1);\n      if (next) {\n        const [line] = this.scroll.line(index);\n        const [nextLine] = this.scroll.line(index + 1);\n        if (line === nextLine) {\n          leaf = next;\n          offset = 0;\n        }\n      }\n    }\n    [node, offset] = leaf.position(offset, true);\n    const range = document.createRange();\n    if (length > 0) {\n      range.setStart(node, offset);\n      [leaf, offset] = this.scroll.leaf(index + length);\n      if (leaf == null) return null;\n      [node, offset] = leaf.position(offset, true);\n      range.setEnd(node, offset);\n      return range.getBoundingClientRect();\n    }\n    let side = 'left';\n    let rect;\n    if (node instanceof Text) {\n      // Return null if the text node is empty because it is\n      // not able to get a useful client rect:\n      // https://github.com/w3c/csswg-drafts/issues/2514.\n      // Empty text nodes are most likely caused by TextBlot#optimize()\n      // not getting called when editor content changes.\n      if (!node.data.length) {\n        return null;\n      }\n      if (offset < node.data.length) {\n        range.setStart(node, offset);\n        range.setEnd(node, offset + 1);\n      } else {\n        range.setStart(node, offset - 1);\n        range.setEnd(node, offset);\n        side = 'right';\n      }\n      rect = range.getBoundingClientRect();\n    } else {\n      if (!(leaf.domNode instanceof Element)) return null;\n      rect = leaf.domNode.getBoundingClientRect();\n      if (offset > 0) side = 'right';\n    }\n    return {\n      bottom: rect.top + rect.height,\n      height: rect.height,\n      left: rect[side],\n      right: rect[side],\n      top: rect.top,\n      width: 0\n    };\n  }\n  getNativeRange() {\n    const selection = document.getSelection();\n    if (selection == null || selection.rangeCount <= 0) return null;\n    const nativeRange = selection.getRangeAt(0);\n    if (nativeRange == null) return null;\n    const range = this.normalizeNative(nativeRange);\n    debug.info('getNativeRange', range);\n    return range;\n  }\n  getRange() {\n    const root = this.scroll.domNode;\n    if ('isConnected' in root && !root.isConnected) {\n      // document.getSelection() forces layout on Blink, so we trend to\n      // not calling it.\n      return [null, null];\n    }\n    const normalized = this.getNativeRange();\n    if (normalized == null) return [null, null];\n    const range = this.normalizedToRange(normalized);\n    return [range, normalized];\n  }\n  hasFocus() {\n    return document.activeElement === this.root || document.activeElement != null && contains(this.root, document.activeElement);\n  }\n  normalizedToRange(range) {\n    const positions = [[range.start.node, range.start.offset]];\n    if (!range.native.collapsed) {\n      positions.push([range.end.node, range.end.offset]);\n    }\n    const indexes = positions.map(position => {\n      const [node, offset] = position;\n      const blot = this.scroll.find(node, true);\n      // @ts-expect-error Fix me later\n      const index = blot.offset(this.scroll);\n      if (offset === 0) {\n        return index;\n      }\n      if (blot instanceof LeafBlot) {\n        return index + blot.index(node, offset);\n      }\n      // @ts-expect-error Fix me later\n      return index + blot.length();\n    });\n    const end = Math.min(Math.max(...indexes), this.scroll.length() - 1);\n    const start = Math.min(end, ...indexes);\n    return new Range(start, end - start);\n  }\n  normalizeNative(nativeRange) {\n    if (!contains(this.root, nativeRange.startContainer) || !nativeRange.collapsed && !contains(this.root, nativeRange.endContainer)) {\n      return null;\n    }\n    const range = {\n      start: {\n        node: nativeRange.startContainer,\n        offset: nativeRange.startOffset\n      },\n      end: {\n        node: nativeRange.endContainer,\n        offset: nativeRange.endOffset\n      },\n      native: nativeRange\n    };\n    [range.start, range.end].forEach(position => {\n      let {\n        node,\n        offset\n      } = position;\n      while (!(node instanceof Text) && node.childNodes.length > 0) {\n        if (node.childNodes.length > offset) {\n          node = node.childNodes[offset];\n          offset = 0;\n        } else if (node.childNodes.length === offset) {\n          // @ts-expect-error Fix me later\n          node = node.lastChild;\n          if (node instanceof Text) {\n            offset = node.data.length;\n          } else if (node.childNodes.length > 0) {\n            // Container case\n            offset = node.childNodes.length;\n          } else {\n            // Embed case\n            offset = node.childNodes.length + 1;\n          }\n        } else {\n          break;\n        }\n      }\n      position.node = node;\n      position.offset = offset;\n    });\n    return range;\n  }\n  rangeToNative(range) {\n    const scrollLength = this.scroll.length();\n    const getPosition = (index, inclusive) => {\n      index = Math.min(scrollLength - 1, index);\n      const [leaf, leafOffset] = this.scroll.leaf(index);\n      return leaf ? leaf.position(leafOffset, inclusive) : [null, -1];\n    };\n    return [...getPosition(range.index, false), ...getPosition(range.index + range.length, true)];\n  }\n  setNativeRange(startNode, startOffset) {\n    let endNode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : startNode;\n    let endOffset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : startOffset;\n    let force = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\n    if (startNode != null && (this.root.parentNode == null || startNode.parentNode == null ||\n    // @ts-expect-error Fix me later\n    endNode.parentNode == null)) {\n      return;\n    }\n    const selection = document.getSelection();\n    if (selection == null) return;\n    if (startNode != null) {\n      if (!this.hasFocus()) this.root.focus({\n        preventScroll: true\n      });\n      const {\n        native\n      } = this.getNativeRange() || {};\n      if (native == null || force || startNode !== native.startContainer || startOffset !== native.startOffset || endNode !== native.endContainer || endOffset !== native.endOffset) {\n        if (startNode instanceof Element && startNode.tagName === 'BR') {\n          // @ts-expect-error Fix me later\n          startOffset = Array.from(startNode.parentNode.childNodes).indexOf(startNode);\n          startNode = startNode.parentNode;\n        }\n        if (endNode instanceof Element && endNode.tagName === 'BR') {\n          // @ts-expect-error Fix me later\n          endOffset = Array.from(endNode.parentNode.childNodes).indexOf(endNode);\n          endNode = endNode.parentNode;\n        }\n        const range = document.createRange();\n        // @ts-expect-error Fix me later\n        range.setStart(startNode, startOffset);\n        // @ts-expect-error Fix me later\n        range.setEnd(endNode, endOffset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    } else {\n      selection.removeAllRanges();\n      this.root.blur();\n    }\n  }\n  setRange(range) {\n    let force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Emitter.sources.API;\n    if (typeof force === 'string') {\n      source = force;\n      force = false;\n    }\n    debug.info('setRange', range);\n    if (range != null) {\n      const args = this.rangeToNative(range);\n      this.setNativeRange(...args, force);\n    } else {\n      this.setNativeRange(null);\n    }\n    this.update(source);\n  }\n  update() {\n    let source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Emitter.sources.USER;\n    const oldRange = this.lastRange;\n    const [lastRange, nativeRange] = this.getRange();\n    this.lastRange = lastRange;\n    this.lastNative = nativeRange;\n    if (this.lastRange != null) {\n      this.savedRange = this.lastRange;\n    }\n    if (!isEqual(oldRange, this.lastRange)) {\n      if (!this.composing && nativeRange != null && nativeRange.native.collapsed && nativeRange.start.node !== this.cursor.textNode) {\n        const range = this.cursor.restore();\n        if (range) {\n          this.setNativeRange(range.startNode, range.startOffset, range.endNode, range.endOffset);\n        }\n      }\n      const args = [Emitter.events.SELECTION_CHANGE, cloneDeep(this.lastRange), cloneDeep(oldRange), source];\n      this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n      if (source !== Emitter.sources.SILENT) {\n        this.emitter.emit(...args);\n      }\n    }\n  }\n}\nfunction contains(parent, descendant) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode; // eslint-disable-line @typescript-eslint/no-unused-expressions\n  } catch (e) {\n    return false;\n  }\n  return parent.contains(descendant);\n}\nexport default Selection;\n//# sourceMappingURL=selection.js.map","import { cloneDeep, isEqual, merge } from 'lodash-es';\nimport { LeafBlot, EmbedBlot, Scope, ParentBlot } from 'parchment';\nimport Delta, { AttributeMap, Op } from 'quill-delta';\nimport Block, { BlockEmbed, bubbleFormats } from '../blots/block.js';\nimport Break from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport { Range } from './selection.js';\nconst ASCII = /^[ -~]*$/;\nclass Editor {\n  constructor(scroll) {\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n  applyDelta(delta) {\n    this.scroll.update();\n    let scrollLength = this.scroll.length();\n    this.scroll.batchStart();\n    const normalizedDelta = normalizeDelta(delta);\n    const deleteDelta = new Delta();\n    const normalizedOps = splitOpLines(normalizedDelta.ops.slice());\n    normalizedOps.reduce((index, op) => {\n      const length = Op.length(op);\n      let attributes = op.attributes || {};\n      let isImplicitNewlinePrepended = false;\n      let isImplicitNewlineAppended = false;\n      if (op.insert != null) {\n        deleteDelta.retain(length);\n        if (typeof op.insert === 'string') {\n          const text = op.insert;\n          isImplicitNewlineAppended = !text.endsWith('\\n') && (scrollLength <= index || !!this.scroll.descendant(BlockEmbed, index)[0]);\n          this.scroll.insertAt(index, text);\n          const [line, offset] = this.scroll.line(index);\n          let formats = merge({}, bubbleFormats(line));\n          if (line instanceof Block) {\n            const [leaf] = line.descendant(LeafBlot, offset);\n            if (leaf) {\n              formats = merge(formats, bubbleFormats(leaf));\n            }\n          }\n          attributes = AttributeMap.diff(formats, attributes) || {};\n        } else if (typeof op.insert === 'object') {\n          const key = Object.keys(op.insert)[0]; // There should only be one key\n          if (key == null) return index;\n          const isInlineEmbed = this.scroll.query(key, Scope.INLINE) != null;\n          if (isInlineEmbed) {\n            if (scrollLength <= index || !!this.scroll.descendant(BlockEmbed, index)[0]) {\n              isImplicitNewlineAppended = true;\n            }\n          } else if (index > 0) {\n            const [leaf, offset] = this.scroll.descendant(LeafBlot, index - 1);\n            if (leaf instanceof TextBlot) {\n              const text = leaf.value();\n              if (text[offset] !== '\\n') {\n                isImplicitNewlinePrepended = true;\n              }\n            } else if (leaf instanceof EmbedBlot && leaf.statics.scope === Scope.INLINE_BLOT) {\n              isImplicitNewlinePrepended = true;\n            }\n          }\n          this.scroll.insertAt(index, key, op.insert[key]);\n          if (isInlineEmbed) {\n            const [leaf] = this.scroll.descendant(LeafBlot, index);\n            if (leaf) {\n              const formats = merge({}, bubbleFormats(leaf));\n              attributes = AttributeMap.diff(formats, attributes) || {};\n            }\n          }\n        }\n        scrollLength += length;\n      } else {\n        deleteDelta.push(op);\n        if (op.retain !== null && typeof op.retain === 'object') {\n          const key = Object.keys(op.retain)[0];\n          if (key == null) return index;\n          this.scroll.updateEmbedAt(index, key, op.retain[key]);\n        }\n      }\n      Object.keys(attributes).forEach(name => {\n        this.scroll.formatAt(index, length, name, attributes[name]);\n      });\n      const prependedLength = isImplicitNewlinePrepended ? 1 : 0;\n      const addedLength = isImplicitNewlineAppended ? 1 : 0;\n      scrollLength += prependedLength + addedLength;\n      deleteDelta.retain(prependedLength);\n      deleteDelta.delete(addedLength);\n      return index + length + prependedLength + addedLength;\n    }, 0);\n    deleteDelta.reduce((index, op) => {\n      if (typeof op.delete === 'number') {\n        this.scroll.deleteAt(index, op.delete);\n        return index;\n      }\n      return index + Op.length(op);\n    }, 0);\n    this.scroll.batchEnd();\n    this.scroll.optimize();\n    return this.update(normalizedDelta);\n  }\n  deleteText(index, length) {\n    this.scroll.deleteAt(index, length);\n    return this.update(new Delta().retain(index).delete(length));\n  }\n  formatLine(index, length) {\n    let formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    this.scroll.update();\n    Object.keys(formats).forEach(format => {\n      this.scroll.lines(index, Math.max(length, 1)).forEach(line => {\n        line.format(format, formats[format]);\n      });\n    });\n    this.scroll.optimize();\n    const delta = new Delta().retain(index).retain(length, cloneDeep(formats));\n    return this.update(delta);\n  }\n  formatText(index, length) {\n    let formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Object.keys(formats).forEach(format => {\n      this.scroll.formatAt(index, length, format, formats[format]);\n    });\n    const delta = new Delta().retain(index).retain(length, cloneDeep(formats));\n    return this.update(delta);\n  }\n  getContents(index, length) {\n    return this.delta.slice(index, index + length);\n  }\n  getDelta() {\n    return this.scroll.lines().reduce((delta, line) => {\n      return delta.concat(line.delta());\n    }, new Delta());\n  }\n  getFormat(index) {\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    let lines = [];\n    let leaves = [];\n    if (length === 0) {\n      this.scroll.path(index).forEach(path => {\n        const [blot] = path;\n        if (blot instanceof Block) {\n          lines.push(blot);\n        } else if (blot instanceof LeafBlot) {\n          leaves.push(blot);\n        }\n      });\n    } else {\n      lines = this.scroll.lines(index, length);\n      leaves = this.scroll.descendants(LeafBlot, index, length);\n    }\n    const [lineFormats, leafFormats] = [lines, leaves].map(blots => {\n      const blot = blots.shift();\n      if (blot == null) return {};\n      let formats = bubbleFormats(blot);\n      while (Object.keys(formats).length > 0) {\n        const blot = blots.shift();\n        if (blot == null) return formats;\n        formats = combineFormats(bubbleFormats(blot), formats);\n      }\n      return formats;\n    });\n    return {\n      ...lineFormats,\n      ...leafFormats\n    };\n  }\n  getHTML(index, length) {\n    const [line, lineOffset] = this.scroll.line(index);\n    if (line) {\n      const lineLength = line.length();\n      const isWithinLine = line.length() >= lineOffset + length;\n      if (isWithinLine && !(lineOffset === 0 && length === lineLength)) {\n        return convertHTML(line, lineOffset, length, true);\n      }\n      return convertHTML(this.scroll, index, length, true);\n    }\n    return '';\n  }\n  getText(index, length) {\n    return this.getContents(index, length).filter(op => typeof op.insert === 'string').map(op => op.insert).join('');\n  }\n  insertContents(index, contents) {\n    const normalizedDelta = normalizeDelta(contents);\n    const change = new Delta().retain(index).concat(normalizedDelta);\n    this.scroll.insertContents(index, normalizedDelta);\n    return this.update(change);\n  }\n  insertEmbed(index, embed, value) {\n    this.scroll.insertAt(index, embed, value);\n    return this.update(new Delta().retain(index).insert({\n      [embed]: value\n    }));\n  }\n  insertText(index, text) {\n    let formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n    this.scroll.insertAt(index, text);\n    Object.keys(formats).forEach(format => {\n      this.scroll.formatAt(index, text.length, format, formats[format]);\n    });\n    return this.update(new Delta().retain(index).insert(text, cloneDeep(formats)));\n  }\n  isBlank() {\n    if (this.scroll.children.length === 0) return true;\n    if (this.scroll.children.length > 1) return false;\n    const blot = this.scroll.children.head;\n    if (blot?.statics.blotName !== Block.blotName) return false;\n    const block = blot;\n    if (block.children.length > 1) return false;\n    return block.children.head instanceof Break;\n  }\n  removeFormat(index, length) {\n    const text = this.getText(index, length);\n    const [line, offset] = this.scroll.line(index + length);\n    let suffixLength = 0;\n    let suffix = new Delta();\n    if (line != null) {\n      suffixLength = line.length() - offset;\n      suffix = line.delta().slice(offset, offset + suffixLength - 1).insert('\\n');\n    }\n    const contents = this.getContents(index, length + suffixLength);\n    const diff = contents.diff(new Delta().insert(text).concat(suffix));\n    const delta = new Delta().retain(index).concat(diff);\n    return this.applyDelta(delta);\n  }\n  update(change) {\n    let mutations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    let selectionInfo = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n    const oldDelta = this.delta;\n    if (mutations.length === 1 && mutations[0].type === 'characterData' &&\n    // @ts-expect-error Fix me later\n    mutations[0].target.data.match(ASCII) && this.scroll.find(mutations[0].target)) {\n      // Optimization for character changes\n      const textBlot = this.scroll.find(mutations[0].target);\n      const formats = bubbleFormats(textBlot);\n      const index = textBlot.offset(this.scroll);\n      // @ts-expect-error Fix me later\n      const oldValue = mutations[0].oldValue.replace(CursorBlot.CONTENTS, '');\n      const oldText = new Delta().insert(oldValue);\n      // @ts-expect-error\n      const newText = new Delta().insert(textBlot.value());\n      const relativeSelectionInfo = selectionInfo && {\n        oldRange: shiftRange(selectionInfo.oldRange, -index),\n        newRange: shiftRange(selectionInfo.newRange, -index)\n      };\n      const diffDelta = new Delta().retain(index).concat(oldText.diff(newText, relativeSelectionInfo));\n      change = diffDelta.reduce((delta, op) => {\n        if (op.insert) {\n          return delta.insert(op.insert, formats);\n        }\n        return delta.push(op);\n      }, new Delta());\n      this.delta = oldDelta.compose(change);\n    } else {\n      this.delta = this.getDelta();\n      if (!change || !isEqual(oldDelta.compose(change), this.delta)) {\n        change = oldDelta.diff(this.delta, selectionInfo);\n      }\n    }\n    return change;\n  }\n}\nfunction convertListHTML(items, lastIndent, types) {\n  if (items.length === 0) {\n    const [endTag] = getListType(types.pop());\n    if (lastIndent <= 0) {\n      return `</li></${endTag}>`;\n    }\n    return `</li></${endTag}>${convertListHTML([], lastIndent - 1, types)}`;\n  }\n  const [{\n    child,\n    offset,\n    length,\n    indent,\n    type\n  }, ...rest] = items;\n  const [tag, attribute] = getListType(type);\n  if (indent > lastIndent) {\n    types.push(type);\n    if (indent === lastIndent + 1) {\n      return `<${tag}><li${attribute}>${convertHTML(child, offset, length)}${convertListHTML(rest, indent, types)}`;\n    }\n    return `<${tag}><li>${convertListHTML(items, lastIndent + 1, types)}`;\n  }\n  const previousType = types[types.length - 1];\n  if (indent === lastIndent && type === previousType) {\n    return `</li><li${attribute}>${convertHTML(child, offset, length)}${convertListHTML(rest, indent, types)}`;\n  }\n  const [endTag] = getListType(types.pop());\n  return `</li></${endTag}>${convertListHTML(items, lastIndent - 1, types)}`;\n}\nfunction convertHTML(blot, index, length) {\n  let isRoot = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  if ('html' in blot && typeof blot.html === 'function') {\n    return blot.html(index, length);\n  }\n  if (blot instanceof TextBlot) {\n    const escapedText = escapeText(blot.value().slice(index, index + length));\n    return escapedText.replaceAll(' ', '&nbsp;');\n  }\n  if (blot instanceof ParentBlot) {\n    // TODO fix API\n    if (blot.statics.blotName === 'list-container') {\n      const items = [];\n      blot.children.forEachAt(index, length, (child, offset, childLength) => {\n        const formats = 'formats' in child && typeof child.formats === 'function' ? child.formats() : {};\n        items.push({\n          child,\n          offset,\n          length: childLength,\n          indent: formats.indent || 0,\n          type: formats.list\n        });\n      });\n      return convertListHTML(items, -1, []);\n    }\n    const parts = [];\n    blot.children.forEachAt(index, length, (child, offset, childLength) => {\n      parts.push(convertHTML(child, offset, childLength));\n    });\n    if (isRoot || blot.statics.blotName === 'list') {\n      return parts.join('');\n    }\n    const {\n      outerHTML,\n      innerHTML\n    } = blot.domNode;\n    const [start, end] = outerHTML.split(`>${innerHTML}<`);\n    // TODO cleanup\n    if (start === '<table') {\n      return `<table style=\"border: 1px solid #000;\">${parts.join('')}<${end}`;\n    }\n    return `${start}>${parts.join('')}<${end}`;\n  }\n  return blot.domNode instanceof Element ? blot.domNode.outerHTML : '';\n}\nfunction combineFormats(formats, combined) {\n  return Object.keys(combined).reduce((merged, name) => {\n    if (formats[name] == null) return merged;\n    const combinedValue = combined[name];\n    if (combinedValue === formats[name]) {\n      merged[name] = combinedValue;\n    } else if (Array.isArray(combinedValue)) {\n      if (combinedValue.indexOf(formats[name]) < 0) {\n        merged[name] = combinedValue.concat([formats[name]]);\n      } else {\n        // If style already exists, don't add to an array, but don't lose other styles\n        merged[name] = combinedValue;\n      }\n    } else {\n      merged[name] = [combinedValue, formats[name]];\n    }\n    return merged;\n  }, {});\n}\nfunction getListType(type) {\n  const tag = type === 'ordered' ? 'ol' : 'ul';\n  switch (type) {\n    case 'checked':\n      return [tag, ' data-list=\"checked\"'];\n    case 'unchecked':\n      return [tag, ' data-list=\"unchecked\"'];\n    default:\n      return [tag, ''];\n  }\n}\nfunction normalizeDelta(delta) {\n  return delta.reduce((normalizedDelta, op) => {\n    if (typeof op.insert === 'string') {\n      const text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      return normalizedDelta.insert(text, op.attributes);\n    }\n    return normalizedDelta.push(op);\n  }, new Delta());\n}\nfunction shiftRange(_ref, amount) {\n  let {\n    index,\n    length\n  } = _ref;\n  return new Range(index + amount, length);\n}\nfunction splitOpLines(ops) {\n  const split = [];\n  ops.forEach(op => {\n    if (typeof op.insert === 'string') {\n      const lines = op.insert.split('\\n');\n      lines.forEach((line, index) => {\n        if (index) split.push({\n          insert: '\\n',\n          attributes: op.attributes\n        });\n        if (line) split.push({\n          insert: line,\n          attributes: op.attributes\n        });\n      });\n    } else {\n      split.push(op);\n    }\n  });\n  return split;\n}\nexport default Editor;\n//# sourceMappingURL=editor.js.map","class Module {\n  static DEFAULTS = {};\n  constructor(quill) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.quill = quill;\n    this.options = options;\n  }\n}\nexport default Module;\n//# sourceMappingURL=module.js.map","import { EmbedBlot } from 'parchment';\nimport TextBlot from './text.js';\nconst GUARD_TEXT = '\\uFEFF';\nclass Embed extends EmbedBlot {\n  constructor(scroll, node) {\n    super(scroll, node);\n    this.contentNode = document.createElement('span');\n    this.contentNode.setAttribute('contenteditable', 'false');\n    Array.from(this.domNode.childNodes).forEach(childNode => {\n      this.contentNode.appendChild(childNode);\n    });\n    this.leftGuard = document.createTextNode(GUARD_TEXT);\n    this.rightGuard = document.createTextNode(GUARD_TEXT);\n    this.domNode.appendChild(this.leftGuard);\n    this.domNode.appendChild(this.contentNode);\n    this.domNode.appendChild(this.rightGuard);\n  }\n  index(node, offset) {\n    if (node === this.leftGuard) return 0;\n    if (node === this.rightGuard) return 1;\n    return super.index(node, offset);\n  }\n  restore(node) {\n    let range = null;\n    let textNode;\n    const text = node.data.split(GUARD_TEXT).join('');\n    if (node === this.leftGuard) {\n      if (this.prev instanceof TextBlot) {\n        const prevLength = this.prev.length();\n        this.prev.insertAt(prevLength, text);\n        range = {\n          startNode: this.prev.domNode,\n          startOffset: prevLength + text.length\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this);\n        range = {\n          startNode: textNode,\n          startOffset: text.length\n        };\n      }\n    } else if (node === this.rightGuard) {\n      if (this.next instanceof TextBlot) {\n        this.next.insertAt(0, text);\n        range = {\n          startNode: this.next.domNode,\n          startOffset: text.length\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this.next);\n        range = {\n          startNode: textNode,\n          startOffset: text.length\n        };\n      }\n    }\n    node.data = GUARD_TEXT;\n    return range;\n  }\n  update(mutations, context) {\n    mutations.forEach(mutation => {\n      if (mutation.type === 'characterData' && (mutation.target === this.leftGuard || mutation.target === this.rightGuard)) {\n        const range = this.restore(mutation.target);\n        if (range) context.range = range;\n      }\n    });\n  }\n}\nexport default Embed;\n//# sourceMappingURL=embed.js.map","import Embed from '../blots/embed.js';\nimport Emitter from './emitter.js';\nclass Composition {\n  isComposing = false;\n  constructor(scroll, emitter) {\n    this.scroll = scroll;\n    this.emitter = emitter;\n    this.setupListeners();\n  }\n  setupListeners() {\n    this.scroll.domNode.addEventListener('compositionstart', event => {\n      if (!this.isComposing) {\n        this.handleCompositionStart(event);\n      }\n    });\n    this.scroll.domNode.addEventListener('compositionend', event => {\n      if (this.isComposing) {\n        // Webkit makes DOM changes after compositionend, so we use microtask to\n        // ensure the order.\n        // https://bugs.webkit.org/show_bug.cgi?id=31902\n        queueMicrotask(() => {\n          this.handleCompositionEnd(event);\n        });\n      }\n    });\n  }\n  handleCompositionStart(event) {\n    const blot = event.target instanceof Node ? this.scroll.find(event.target, true) : null;\n    if (blot && !(blot instanceof Embed)) {\n      this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_START, event);\n      this.scroll.batchStart();\n      this.emitter.emit(Emitter.events.COMPOSITION_START, event);\n      this.isComposing = true;\n    }\n  }\n  handleCompositionEnd(event) {\n    this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_END, event);\n    this.scroll.batchEnd();\n    this.emitter.emit(Emitter.events.COMPOSITION_END, event);\n    this.isComposing = false;\n  }\n}\nexport default Composition;\n//# sourceMappingURL=composition.js.map","class Theme {\n  static DEFAULTS = {\n    modules: {}\n  };\n  static themes = {\n    default: Theme\n  };\n  modules = {};\n  constructor(quill, options) {\n    this.quill = quill;\n    this.options = options;\n  }\n  init() {\n    Object.keys(this.options.modules).forEach(name => {\n      if (this.modules[name] == null) {\n        this.addModule(name);\n      }\n    });\n  }\n  addModule(name) {\n    // @ts-expect-error\n    const ModuleClass = this.quill.constructor.import(`modules/${name}`);\n    this.modules[name] = new ModuleClass(this.quill, this.options.modules[name] || {});\n    return this.modules[name];\n  }\n}\nexport default Theme;\n//# sourceMappingURL=theme.js.map","const getParentElement = element => element.parentElement || element.getRootNode().host || null;\nconst getElementRect = element => {\n  const rect = element.getBoundingClientRect();\n  const scaleX = 'offsetWidth' in element && Math.abs(rect.width) / element.offsetWidth || 1;\n  const scaleY = 'offsetHeight' in element && Math.abs(rect.height) / element.offsetHeight || 1;\n  return {\n    top: rect.top,\n    right: rect.left + element.clientWidth * scaleX,\n    bottom: rect.top + element.clientHeight * scaleY,\n    left: rect.left\n  };\n};\nconst paddingValueToInt = value => {\n  const number = parseInt(value, 10);\n  return Number.isNaN(number) ? 0 : number;\n};\n\n// Follow the steps described in https://www.w3.org/TR/cssom-view-1/#element-scrolling-members,\n// assuming that the scroll option is set to 'nearest'.\nconst getScrollDistance = (targetStart, targetEnd, scrollStart, scrollEnd, scrollPaddingStart, scrollPaddingEnd) => {\n  if (targetStart < scrollStart && targetEnd > scrollEnd) {\n    return 0;\n  }\n  if (targetStart < scrollStart) {\n    return -(scrollStart - targetStart + scrollPaddingStart);\n  }\n  if (targetEnd > scrollEnd) {\n    return targetEnd - targetStart > scrollEnd - scrollStart ? targetStart + scrollPaddingStart - scrollStart : targetEnd - scrollEnd + scrollPaddingEnd;\n  }\n  return 0;\n};\nconst scrollRectIntoView = (root, targetRect) => {\n  const document = root.ownerDocument;\n  let rect = targetRect;\n  let current = root;\n  while (current) {\n    const isDocumentBody = current === document.body;\n    const bounding = isDocumentBody ? {\n      top: 0,\n      right: window.visualViewport?.width ?? document.documentElement.clientWidth,\n      bottom: window.visualViewport?.height ?? document.documentElement.clientHeight,\n      left: 0\n    } : getElementRect(current);\n    const style = getComputedStyle(current);\n    const scrollDistanceX = getScrollDistance(rect.left, rect.right, bounding.left, bounding.right, paddingValueToInt(style.scrollPaddingLeft), paddingValueToInt(style.scrollPaddingRight));\n    const scrollDistanceY = getScrollDistance(rect.top, rect.bottom, bounding.top, bounding.bottom, paddingValueToInt(style.scrollPaddingTop), paddingValueToInt(style.scrollPaddingBottom));\n    if (scrollDistanceX || scrollDistanceY) {\n      if (isDocumentBody) {\n        document.defaultView?.scrollBy(scrollDistanceX, scrollDistanceY);\n      } else {\n        const {\n          scrollLeft,\n          scrollTop\n        } = current;\n        if (scrollDistanceY) {\n          current.scrollTop += scrollDistanceY;\n        }\n        if (scrollDistanceX) {\n          current.scrollLeft += scrollDistanceX;\n        }\n        const scrolledLeft = current.scrollLeft - scrollLeft;\n        const scrolledTop = current.scrollTop - scrollTop;\n        rect = {\n          left: rect.left - scrolledLeft,\n          top: rect.top - scrolledTop,\n          right: rect.right - scrolledLeft,\n          bottom: rect.bottom - scrolledTop\n        };\n      }\n    }\n    current = isDocumentBody || style.position === 'fixed' ? null : getParentElement(current);\n  }\n};\nexport default scrollRectIntoView;\n//# sourceMappingURL=scrollRectIntoView.js.map","import { Registry } from 'parchment';\nconst MAX_REGISTER_ITERATIONS = 100;\nconst CORE_FORMATS = ['block', 'break', 'cursor', 'inline', 'scroll', 'text'];\nconst createRegistryWithFormats = (formats, sourceRegistry, debug) => {\n  const registry = new Registry();\n  CORE_FORMATS.forEach(name => {\n    const coreBlot = sourceRegistry.query(name);\n    if (coreBlot) registry.register(coreBlot);\n  });\n  formats.forEach(name => {\n    let format = sourceRegistry.query(name);\n    if (!format) {\n      debug.error(`Cannot register \"${name}\" specified in \"formats\" config. Are you sure it was registered?`);\n    }\n    let iterations = 0;\n    while (format) {\n      registry.register(format);\n      format = 'blotName' in format ? format.requiredContainer ?? null : null;\n      iterations += 1;\n      if (iterations > MAX_REGISTER_ITERATIONS) {\n        debug.error(`Cycle detected in registering blot requiredContainer: \"${name}\"`);\n        break;\n      }\n    }\n  });\n  return registry;\n};\nexport default createRegistryWithFormats;\n//# sourceMappingURL=createRegistryWithFormats.js.map","import { merge } from 'lodash-es';\nimport * as Parchment from 'parchment';\nimport Delta from 'quill-delta';\nimport Editor from './editor.js';\nimport Emitter from './emitter.js';\nimport instances from './instances.js';\nimport logger from './logger.js';\nimport Module from './module.js';\nimport Selection, { Range } from './selection.js';\nimport Composition from './composition.js';\nimport Theme from './theme.js';\nimport scrollRectIntoView from './utils/scrollRectIntoView.js';\nimport createRegistryWithFormats from './utils/createRegistryWithFormats.js';\nconst debug = logger('quill');\nconst globalRegistry = new Parchment.Registry();\nParchment.ParentBlot.uiClass = 'ql-ui';\n\n/**\n * Options for initializing a Quill instance\n */\n\n/**\n * Similar to QuillOptions, but with all properties expanded to their default values,\n * and all selectors resolved to HTMLElements.\n */\n\nclass Quill {\n  static DEFAULTS = {\n    bounds: null,\n    modules: {\n      clipboard: true,\n      keyboard: true,\n      history: true,\n      uploader: true\n    },\n    placeholder: '',\n    readOnly: false,\n    registry: globalRegistry,\n    theme: 'default'\n  };\n  static events = Emitter.events;\n  static sources = Emitter.sources;\n  static version = typeof \"2.0.3\" === 'undefined' ? 'dev' : \"2.0.3\";\n  static imports = {\n    delta: Delta,\n    parchment: Parchment,\n    'core/module': Module,\n    'core/theme': Theme\n  };\n  static debug(limit) {\n    if (limit === true) {\n      limit = 'log';\n    }\n    logger.level(limit);\n  }\n  static find(node) {\n    let bubble = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    return instances.get(node) || globalRegistry.find(node, bubble);\n  }\n  static import(name) {\n    if (this.imports[name] == null) {\n      debug.error(`Cannot import ${name}. Are you sure it was registered?`);\n    }\n    return this.imports[name];\n  }\n  static register() {\n    if (typeof (arguments.length <= 0 ? undefined : arguments[0]) !== 'string') {\n      const target = arguments.length <= 0 ? undefined : arguments[0];\n      const overwrite = !!(arguments.length <= 1 ? undefined : arguments[1]);\n      const name = 'attrName' in target ? target.attrName : target.blotName;\n      if (typeof name === 'string') {\n        // Shortcut for formats:\n        // register(Blot | Attributor, overwrite)\n        this.register(`formats/${name}`, target, overwrite);\n      } else {\n        Object.keys(target).forEach(key => {\n          this.register(key, target[key], overwrite);\n        });\n      }\n    } else {\n      const path = arguments.length <= 0 ? undefined : arguments[0];\n      const target = arguments.length <= 1 ? undefined : arguments[1];\n      const overwrite = !!(arguments.length <= 2 ? undefined : arguments[2]);\n      if (this.imports[path] != null && !overwrite) {\n        debug.warn(`Overwriting ${path} with`, target);\n      }\n      this.imports[path] = target;\n      if ((path.startsWith('blots/') || path.startsWith('formats/')) && target && typeof target !== 'boolean' && target.blotName !== 'abstract') {\n        globalRegistry.register(target);\n      }\n      if (typeof target.register === 'function') {\n        target.register(globalRegistry);\n      }\n    }\n  }\n  constructor(container) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n    if (this.container == null) {\n      debug.error('Invalid Quill container', container);\n      return;\n    }\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n    const html = this.container.innerHTML.trim();\n    this.container.classList.add('ql-container');\n    this.container.innerHTML = '';\n    instances.set(this.container, this);\n    this.root = this.addContainer('ql-editor');\n    this.root.classList.add('ql-blank');\n    this.emitter = new Emitter();\n    const scrollBlotName = Parchment.ScrollBlot.blotName;\n    const ScrollBlot = this.options.registry.query(scrollBlotName);\n    if (!ScrollBlot || !('blotName' in ScrollBlot)) {\n      throw new Error(`Cannot initialize Quill without \"${scrollBlotName}\" blot`);\n    }\n    this.scroll = new ScrollBlot(this.options.registry, this.root, {\n      emitter: this.emitter\n    });\n    this.editor = new Editor(this.scroll);\n    this.selection = new Selection(this.scroll, this.emitter);\n    this.composition = new Composition(this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options); // eslint-disable-line new-cap\n    this.keyboard = this.theme.addModule('keyboard');\n    this.clipboard = this.theme.addModule('clipboard');\n    this.history = this.theme.addModule('history');\n    this.uploader = this.theme.addModule('uploader');\n    this.theme.addModule('input');\n    this.theme.addModule('uiNode');\n    this.theme.init();\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, type => {\n      if (type === Emitter.events.TEXT_CHANGE) {\n        this.root.classList.toggle('ql-blank', this.editor.isBlank());\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo = oldRange && newRange ? {\n        oldRange,\n        newRange\n      } : undefined;\n      modify.call(this, () => this.editor.update(null, mutations, selectionInfo), source);\n    });\n    this.emitter.on(Emitter.events.SCROLL_EMBED_UPDATE, (blot, delta) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo = oldRange && newRange ? {\n        oldRange,\n        newRange\n      } : undefined;\n      modify.call(this, () => {\n        const change = new Delta().retain(blot.offset(this)).retain({\n          [blot.statics.blotName]: delta\n        });\n        return this.editor.update(change, [], selectionInfo);\n      }, Quill.sources.USER);\n    });\n    if (html) {\n      const contents = this.clipboard.convert({\n        html: `${html}<p><br></p>`,\n        text: '\\n'\n      });\n      this.setContents(contents);\n    }\n    this.history.clear();\n    if (this.options.placeholder) {\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\n    }\n    if (this.options.readOnly) {\n      this.disable();\n    }\n    this.allowReadOnlyEdits = false;\n  }\n  addContainer(container) {\n    let refNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    if (typeof container === 'string') {\n      const className = container;\n      container = document.createElement('div');\n      container.classList.add(className);\n    }\n    this.container.insertBefore(container, refNode);\n    return container;\n  }\n  blur() {\n    this.selection.setRange(null);\n  }\n  deleteText(index, length, source) {\n    // @ts-expect-error\n    [index, length,, source] = overload(index, length, source);\n    return modify.call(this, () => {\n      return this.editor.deleteText(index, length);\n    }, source, index, -1 * length);\n  }\n  disable() {\n    this.enable(false);\n  }\n  editReadOnly(modifier) {\n    this.allowReadOnlyEdits = true;\n    const value = modifier();\n    this.allowReadOnlyEdits = false;\n    return value;\n  }\n  enable() {\n    let enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.scroll.enable(enabled);\n    this.container.classList.toggle('ql-disabled', !enabled);\n  }\n  focus() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.selection.focus();\n    if (!options.preventScroll) {\n      this.scrollSelectionIntoView();\n    }\n  }\n  format(name, value) {\n    let source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Emitter.sources.API;\n    return modify.call(this, () => {\n      const range = this.getSelection(true);\n      let change = new Delta();\n      if (range == null) return change;\n      if (this.scroll.query(name, Parchment.Scope.BLOCK)) {\n        change = this.editor.formatLine(range.index, range.length, {\n          [name]: value\n        });\n      } else if (range.length === 0) {\n        this.selection.format(name, value);\n        return change;\n      } else {\n        change = this.editor.formatText(range.index, range.length, {\n          [name]: value\n        });\n      }\n      this.setSelection(range, Emitter.sources.SILENT);\n      return change;\n    }, source);\n  }\n  formatLine(index, length, name, value, source) {\n    let formats;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(index, length,\n    // @ts-expect-error\n    name, value, source);\n    return modify.call(this, () => {\n      return this.editor.formatLine(index, length, formats);\n    }, source, index, 0);\n  }\n  formatText(index, length, name, value, source) {\n    let formats;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(\n    // @ts-expect-error\n    index, length, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.formatText(index, length, formats);\n    }, source, index, 0);\n  }\n  getBounds(index) {\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    let bounds = null;\n    if (typeof index === 'number') {\n      bounds = this.selection.getBounds(index, length);\n    } else {\n      bounds = this.selection.getBounds(index.index, index.length);\n    }\n    if (!bounds) return null;\n    const containerBounds = this.container.getBoundingClientRect();\n    return {\n      bottom: bounds.bottom - containerBounds.top,\n      height: bounds.height,\n      left: bounds.left - containerBounds.left,\n      right: bounds.right - containerBounds.left,\n      top: bounds.top - containerBounds.top,\n      width: bounds.width\n    };\n  }\n  getContents() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.getLength() - index;\n    [index, length] = overload(index, length);\n    return this.editor.getContents(index, length);\n  }\n  getFormat() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.getSelection(true);\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    if (typeof index === 'number') {\n      return this.editor.getFormat(index, length);\n    }\n    return this.editor.getFormat(index.index, index.length);\n  }\n  getIndex(blot) {\n    return blot.offset(this.scroll);\n  }\n  getLength() {\n    return this.scroll.length();\n  }\n  getLeaf(index) {\n    return this.scroll.leaf(index);\n  }\n  getLine(index) {\n    return this.scroll.line(index);\n  }\n  getLines() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.MAX_VALUE;\n    if (typeof index !== 'number') {\n      return this.scroll.lines(index.index, index.length);\n    }\n    return this.scroll.lines(index, length);\n  }\n  getModule(name) {\n    return this.theme.modules[name];\n  }\n  getSelection() {\n    let focus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (focus) this.focus();\n    this.update(); // Make sure we access getRange with editor in consistent state\n    return this.selection.getRange()[0];\n  }\n  getSemanticHTML() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 ? arguments[1] : undefined;\n    if (typeof index === 'number') {\n      length = length ?? this.getLength() - index;\n    }\n    // @ts-expect-error\n    [index, length] = overload(index, length);\n    return this.editor.getHTML(index, length);\n  }\n  getText() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 ? arguments[1] : undefined;\n    if (typeof index === 'number') {\n      length = length ?? this.getLength() - index;\n    }\n    // @ts-expect-error\n    [index, length] = overload(index, length);\n    return this.editor.getText(index, length);\n  }\n  hasFocus() {\n    return this.selection.hasFocus();\n  }\n  insertEmbed(index, embed, value) {\n    let source = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Quill.sources.API;\n    return modify.call(this, () => {\n      return this.editor.insertEmbed(index, embed, value);\n    }, source, index);\n  }\n  insertText(index, text, name, value, source) {\n    let formats;\n    // eslint-disable-next-line prefer-const\n    // @ts-expect-error\n    [index,, formats, source] = overload(index, 0, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.insertText(index, text, formats);\n    }, source, index, text.length);\n  }\n  isEnabled() {\n    return this.scroll.isEnabled();\n  }\n  off() {\n    return this.emitter.off(...arguments);\n  }\n  on() {\n    return this.emitter.on(...arguments);\n  }\n  once() {\n    return this.emitter.once(...arguments);\n  }\n  removeFormat(index, length, source) {\n    [index, length,, source] = overload(index, length, source);\n    return modify.call(this, () => {\n      return this.editor.removeFormat(index, length);\n    }, source, index);\n  }\n  scrollRectIntoView(rect) {\n    scrollRectIntoView(this.root, rect);\n  }\n\n  /**\n   * @deprecated Use Quill#scrollSelectionIntoView() instead.\n   */\n  scrollIntoView() {\n    console.warn('Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead.');\n    this.scrollSelectionIntoView();\n  }\n\n  /**\n   * Scroll the current selection into the visible area.\n   * If the selection is already visible, no scrolling will occur.\n   */\n  scrollSelectionIntoView() {\n    const range = this.selection.lastRange;\n    const bounds = range && this.selection.getBounds(range.index, range.length);\n    if (bounds) {\n      this.scrollRectIntoView(bounds);\n    }\n  }\n  setContents(delta) {\n    let source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Emitter.sources.API;\n    return modify.call(this, () => {\n      delta = new Delta(delta);\n      const length = this.getLength();\n      // Quill will set empty editor to \\n\n      const delete1 = this.editor.deleteText(0, length);\n      const applied = this.editor.insertContents(0, delta);\n      // Remove extra \\n from empty editor initialization\n      const delete2 = this.editor.deleteText(this.getLength() - 1, 1);\n      return delete1.compose(applied).compose(delete2);\n    }, source);\n  }\n  setSelection(index, length, source) {\n    if (index == null) {\n      // @ts-expect-error https://github.com/microsoft/TypeScript/issues/22609\n      this.selection.setRange(null, length || Quill.sources.API);\n    } else {\n      // @ts-expect-error\n      [index, length,, source] = overload(index, length, source);\n      this.selection.setRange(new Range(Math.max(0, index), length), source);\n      if (source !== Emitter.sources.SILENT) {\n        this.scrollSelectionIntoView();\n      }\n    }\n  }\n  setText(text) {\n    let source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Emitter.sources.API;\n    const delta = new Delta().insert(text);\n    return this.setContents(delta, source);\n  }\n  update() {\n    let source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Emitter.sources.USER;\n    const change = this.scroll.update(source); // Will update selection before selection.update() does if text changes\n    this.selection.update(source);\n    // TODO this is usually undefined\n    return change;\n  }\n  updateContents(delta) {\n    let source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Emitter.sources.API;\n    return modify.call(this, () => {\n      delta = new Delta(delta);\n      return this.editor.applyDelta(delta);\n    }, source, true);\n  }\n}\nfunction resolveSelector(selector) {\n  return typeof selector === 'string' ? document.querySelector(selector) : selector;\n}\nfunction expandModuleConfig(config) {\n  return Object.entries(config ?? {}).reduce((expanded, _ref) => {\n    let [key, value] = _ref;\n    return {\n      ...expanded,\n      [key]: value === true ? {} : value\n    };\n  }, {});\n}\nfunction omitUndefinedValuesFromOptions(obj) {\n  return Object.fromEntries(Object.entries(obj).filter(entry => entry[1] !== undefined));\n}\nfunction expandConfig(containerOrSelector, options) {\n  const container = resolveSelector(containerOrSelector);\n  if (!container) {\n    throw new Error('Invalid Quill container');\n  }\n  const shouldUseDefaultTheme = !options.theme || options.theme === Quill.DEFAULTS.theme;\n  const theme = shouldUseDefaultTheme ? Theme : Quill.import(`themes/${options.theme}`);\n  if (!theme) {\n    throw new Error(`Invalid theme ${options.theme}. Did you register it?`);\n  }\n  const {\n    modules: quillModuleDefaults,\n    ...quillDefaults\n  } = Quill.DEFAULTS;\n  const {\n    modules: themeModuleDefaults,\n    ...themeDefaults\n  } = theme.DEFAULTS;\n  let userModuleOptions = expandModuleConfig(options.modules);\n  // Special case toolbar shorthand\n  if (userModuleOptions != null && userModuleOptions.toolbar && userModuleOptions.toolbar.constructor !== Object) {\n    userModuleOptions = {\n      ...userModuleOptions,\n      toolbar: {\n        container: userModuleOptions.toolbar\n      }\n    };\n  }\n  const modules = merge({}, expandModuleConfig(quillModuleDefaults), expandModuleConfig(themeModuleDefaults), userModuleOptions);\n  const config = {\n    ...quillDefaults,\n    ...omitUndefinedValuesFromOptions(themeDefaults),\n    ...omitUndefinedValuesFromOptions(options)\n  };\n  let registry = options.registry;\n  if (registry) {\n    if (options.formats) {\n      debug.warn('Ignoring \"formats\" option because \"registry\" is specified');\n    }\n  } else {\n    registry = options.formats ? createRegistryWithFormats(options.formats, config.registry, debug) : config.registry;\n  }\n  return {\n    ...config,\n    registry,\n    container,\n    theme,\n    modules: Object.entries(modules).reduce((modulesWithDefaults, _ref2) => {\n      let [name, value] = _ref2;\n      if (!value) return modulesWithDefaults;\n      const moduleClass = Quill.import(`modules/${name}`);\n      if (moduleClass == null) {\n        debug.error(`Cannot load ${name} module. Are you sure you registered it?`);\n        return modulesWithDefaults;\n      }\n      return {\n        ...modulesWithDefaults,\n        // @ts-expect-error\n        [name]: merge({}, moduleClass.DEFAULTS || {}, value)\n      };\n    }, {}),\n    bounds: resolveSelector(config.bounds)\n  };\n}\n\n// Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\nfunction modify(modifier, source, index, shift) {\n  if (!this.isEnabled() && source === Emitter.sources.USER && !this.allowReadOnlyEdits) {\n    return new Delta();\n  }\n  let range = index == null ? null : this.getSelection();\n  const oldDelta = this.editor.delta;\n  const change = modifier();\n  if (range != null) {\n    if (index === true) {\n      index = range.index; // eslint-disable-line prefer-destructuring\n    }\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      // @ts-expect-error index should always be number\n      range = shiftRange(range, index, shift, source);\n    }\n    this.setSelection(range, Emitter.sources.SILENT);\n  }\n  if (change.length() > 0) {\n    const args = [Emitter.events.TEXT_CHANGE, change, oldDelta, source];\n    this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n    if (source !== Emitter.sources.SILENT) {\n      this.emitter.emit(...args);\n    }\n  }\n  return change;\n}\nfunction overload(index, length, name, value, source) {\n  let formats = {};\n  // @ts-expect-error\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== 'number') {\n      // @ts-expect-error\n      source = value;\n      value = name;\n      name = length;\n      // @ts-expect-error\n      length = index.length; // eslint-disable-line prefer-destructuring\n      // @ts-expect-error\n      index = index.index; // eslint-disable-line prefer-destructuring\n    } else {\n      // @ts-expect-error\n      length = index.length; // eslint-disable-line prefer-destructuring\n      // @ts-expect-error\n      index = index.index; // eslint-disable-line prefer-destructuring\n    }\n  } else if (typeof length !== 'number') {\n    // @ts-expect-error\n    source = value;\n    value = name;\n    name = length;\n    length = 0;\n  }\n  // Handle format being object, two format name/value strings or excluded\n  if (typeof name === 'object') {\n    // @ts-expect-error Fix me later\n    formats = name;\n    // @ts-expect-error\n    source = value;\n  } else if (typeof name === 'string') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      // @ts-expect-error\n      source = name;\n    }\n  }\n  // Handle optional source\n  source = source || Emitter.sources.API;\n  // @ts-expect-error\n  return [index, length, formats, source];\n}\nfunction shiftRange(range, index, lengthOrSource, source) {\n  const length = typeof lengthOrSource === 'number' ? lengthOrSource : 0;\n  if (range == null) return null;\n  let start;\n  let end;\n  // @ts-expect-error -- TODO: add a better type guard around `index`\n  if (index && typeof index.transformPosition === 'function') {\n    [start, end] = [range.index, range.index + range.length].map(pos =>\n    // @ts-expect-error -- TODO: add a better type guard around `index`\n    index.transformPosition(pos, source !== Emitter.sources.USER));\n  } else {\n    [start, end] = [range.index, range.index + range.length].map(pos => {\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      if (pos < index || pos === index && source === Emitter.sources.USER) return pos;\n      if (length >= 0) {\n        return pos + length;\n      }\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      return Math.max(index, pos + length);\n    });\n  }\n  return new Range(start, end - start);\n}\nexport { Parchment, Range };\nexport { globalRegistry, expandConfig, overload, Quill as default };\n//# sourceMappingURL=quill.js.map","import { ContainerBlot } from 'parchment';\nclass Container extends ContainerBlot {}\nexport default Container;\n//# sourceMappingURL=container.js.map","import { ContainerBlot, LeafBlot, Scope, ScrollBlot } from 'parchment';\nimport Delta, { AttributeMap, Op } from 'quill-delta';\nimport Emitter from '../core/emitter.js';\nimport Block, { BlockEmbed, bubbleFormats } from './block.js';\nimport Break from './break.js';\nimport Container from './container.js';\nfunction isLine(blot) {\n  return blot instanceof Block || blot instanceof BlockEmbed;\n}\nfunction isUpdatable(blot) {\n  return typeof blot.updateContent === 'function';\n}\nclass Scroll extends ScrollBlot {\n  static blotName = 'scroll';\n  static className = 'ql-editor';\n  static tagName = 'DIV';\n  static defaultChild = Block;\n  static allowedChildren = [Block, BlockEmbed, Container];\n  constructor(registry, domNode, _ref) {\n    let {\n      emitter\n    } = _ref;\n    super(registry, domNode);\n    this.emitter = emitter;\n    this.batch = false;\n    this.optimize();\n    this.enable();\n    this.domNode.addEventListener('dragstart', e => this.handleDragStart(e));\n  }\n  batchStart() {\n    if (!Array.isArray(this.batch)) {\n      this.batch = [];\n    }\n  }\n  batchEnd() {\n    if (!this.batch) return;\n    const mutations = this.batch;\n    this.batch = false;\n    this.update(mutations);\n  }\n  emitMount(blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_MOUNT, blot);\n  }\n  emitUnmount(blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_UNMOUNT, blot);\n  }\n  emitEmbedUpdate(blot, change) {\n    this.emitter.emit(Emitter.events.SCROLL_EMBED_UPDATE, blot, change);\n  }\n  deleteAt(index, length) {\n    const [first, offset] = this.line(index);\n    const [last] = this.line(index + length);\n    super.deleteAt(index, length);\n    if (last != null && first !== last && offset > 0) {\n      if (first instanceof BlockEmbed || last instanceof BlockEmbed) {\n        this.optimize();\n        return;\n      }\n      const ref = last.children.head instanceof Break ? null : last.children.head;\n      // @ts-expect-error\n      first.moveChildren(last, ref);\n      // @ts-expect-error\n      first.remove();\n    }\n    this.optimize();\n  }\n  enable() {\n    let enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.domNode.setAttribute('contenteditable', enabled ? 'true' : 'false');\n  }\n  formatAt(index, length, format, value) {\n    super.formatAt(index, length, format, value);\n    this.optimize();\n  }\n  insertAt(index, value, def) {\n    if (index >= this.length()) {\n      if (def == null || this.scroll.query(value, Scope.BLOCK) == null) {\n        const blot = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(blot);\n        if (def == null && value.endsWith('\\n')) {\n          blot.insertAt(0, value.slice(0, -1), def);\n        } else {\n          blot.insertAt(0, value, def);\n        }\n      } else {\n        const embed = this.scroll.create(value, def);\n        this.appendChild(embed);\n      }\n    } else {\n      super.insertAt(index, value, def);\n    }\n    this.optimize();\n  }\n  insertBefore(blot, ref) {\n    if (blot.statics.scope === Scope.INLINE_BLOT) {\n      const wrapper = this.scroll.create(this.statics.defaultChild.blotName);\n      wrapper.appendChild(blot);\n      super.insertBefore(wrapper, ref);\n    } else {\n      super.insertBefore(blot, ref);\n    }\n  }\n  insertContents(index, delta) {\n    const renderBlocks = this.deltaToRenderBlocks(delta.concat(new Delta().insert('\\n')));\n    const last = renderBlocks.pop();\n    if (last == null) return;\n    this.batchStart();\n    const first = renderBlocks.shift();\n    if (first) {\n      const shouldInsertNewlineChar = first.type === 'block' && (first.delta.length() === 0 || !this.descendant(BlockEmbed, index)[0] && index < this.length());\n      const delta = first.type === 'block' ? first.delta : new Delta().insert({\n        [first.key]: first.value\n      });\n      insertInlineContents(this, index, delta);\n      const newlineCharLength = first.type === 'block' ? 1 : 0;\n      const lineEndIndex = index + delta.length() + newlineCharLength;\n      if (shouldInsertNewlineChar) {\n        this.insertAt(lineEndIndex - 1, '\\n');\n      }\n      const formats = bubbleFormats(this.line(index)[0]);\n      const attributes = AttributeMap.diff(formats, first.attributes) || {};\n      Object.keys(attributes).forEach(name => {\n        this.formatAt(lineEndIndex - 1, 1, name, attributes[name]);\n      });\n      index = lineEndIndex;\n    }\n    let [refBlot, refBlotOffset] = this.children.find(index);\n    if (renderBlocks.length) {\n      if (refBlot) {\n        refBlot = refBlot.split(refBlotOffset);\n        refBlotOffset = 0;\n      }\n      renderBlocks.forEach(renderBlock => {\n        if (renderBlock.type === 'block') {\n          const block = this.createBlock(renderBlock.attributes, refBlot || undefined);\n          insertInlineContents(block, 0, renderBlock.delta);\n        } else {\n          const blockEmbed = this.create(renderBlock.key, renderBlock.value);\n          this.insertBefore(blockEmbed, refBlot || undefined);\n          Object.keys(renderBlock.attributes).forEach(name => {\n            blockEmbed.format(name, renderBlock.attributes[name]);\n          });\n        }\n      });\n    }\n    if (last.type === 'block' && last.delta.length()) {\n      const offset = refBlot ? refBlot.offset(refBlot.scroll) + refBlotOffset : this.length();\n      insertInlineContents(this, offset, last.delta);\n    }\n    this.batchEnd();\n    this.optimize();\n  }\n  isEnabled() {\n    return this.domNode.getAttribute('contenteditable') === 'true';\n  }\n  leaf(index) {\n    const last = this.path(index).pop();\n    if (!last) {\n      return [null, -1];\n    }\n    const [blot, offset] = last;\n    return blot instanceof LeafBlot ? [blot, offset] : [null, -1];\n  }\n  line(index) {\n    if (index === this.length()) {\n      return this.line(index - 1);\n    }\n    // @ts-expect-error TODO: make descendant() generic\n    return this.descendant(isLine, index);\n  }\n  lines() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.MAX_VALUE;\n    const getLines = (blot, blotIndex, blotLength) => {\n      let lines = [];\n      let lengthLeft = blotLength;\n      blot.children.forEachAt(blotIndex, blotLength, (child, childIndex, childLength) => {\n        if (isLine(child)) {\n          lines.push(child);\n        } else if (child instanceof ContainerBlot) {\n          lines = lines.concat(getLines(child, childIndex, lengthLeft));\n        }\n        lengthLeft -= childLength;\n      });\n      return lines;\n    };\n    return getLines(this, index, length);\n  }\n  optimize() {\n    let mutations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (this.batch) return;\n    super.optimize(mutations, context);\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE, mutations, context);\n    }\n  }\n  path(index) {\n    return super.path(index).slice(1); // Exclude self\n  }\n  remove() {\n    // Never remove self\n  }\n  update(mutations) {\n    if (this.batch) {\n      if (Array.isArray(mutations)) {\n        this.batch = this.batch.concat(mutations);\n      }\n      return;\n    }\n    let source = Emitter.sources.USER;\n    if (typeof mutations === 'string') {\n      source = mutations;\n    }\n    if (!Array.isArray(mutations)) {\n      mutations = this.observer.takeRecords();\n    }\n    mutations = mutations.filter(_ref2 => {\n      let {\n        target\n      } = _ref2;\n      const blot = this.find(target, true);\n      return blot && !isUpdatable(blot);\n    });\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE, source, mutations);\n    }\n    super.update(mutations.concat([])); // pass copy\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_UPDATE, source, mutations);\n    }\n  }\n  updateEmbedAt(index, key, change) {\n    // Currently it only supports top-level embeds (BlockEmbed).\n    // We can update `ParentBlot` in parchment to support inline embeds.\n    const [blot] = this.descendant(b => b instanceof BlockEmbed, index);\n    if (blot && blot.statics.blotName === key && isUpdatable(blot)) {\n      blot.updateContent(change);\n    }\n  }\n  handleDragStart(event) {\n    event.preventDefault();\n  }\n  deltaToRenderBlocks(delta) {\n    const renderBlocks = [];\n    let currentBlockDelta = new Delta();\n    delta.forEach(op => {\n      const insert = op?.insert;\n      if (!insert) return;\n      if (typeof insert === 'string') {\n        const splitted = insert.split('\\n');\n        splitted.slice(0, -1).forEach(text => {\n          currentBlockDelta.insert(text, op.attributes);\n          renderBlocks.push({\n            type: 'block',\n            delta: currentBlockDelta,\n            attributes: op.attributes ?? {}\n          });\n          currentBlockDelta = new Delta();\n        });\n        const last = splitted[splitted.length - 1];\n        if (last) {\n          currentBlockDelta.insert(last, op.attributes);\n        }\n      } else {\n        const key = Object.keys(insert)[0];\n        if (!key) return;\n        if (this.query(key, Scope.INLINE)) {\n          currentBlockDelta.push(op);\n        } else {\n          if (currentBlockDelta.length()) {\n            renderBlocks.push({\n              type: 'block',\n              delta: currentBlockDelta,\n              attributes: {}\n            });\n          }\n          currentBlockDelta = new Delta();\n          renderBlocks.push({\n            type: 'blockEmbed',\n            key,\n            value: insert[key],\n            attributes: op.attributes ?? {}\n          });\n        }\n      }\n    });\n    if (currentBlockDelta.length()) {\n      renderBlocks.push({\n        type: 'block',\n        delta: currentBlockDelta,\n        attributes: {}\n      });\n    }\n    return renderBlocks;\n  }\n  createBlock(attributes, refBlot) {\n    let blotName;\n    const formats = {};\n    Object.entries(attributes).forEach(_ref3 => {\n      let [key, value] = _ref3;\n      const isBlockBlot = this.query(key, Scope.BLOCK & Scope.BLOT) != null;\n      if (isBlockBlot) {\n        blotName = key;\n      } else {\n        formats[key] = value;\n      }\n    });\n    const block = this.create(blotName || this.statics.defaultChild.blotName, blotName ? attributes[blotName] : undefined);\n    this.insertBefore(block, refBlot || undefined);\n    const length = block.length();\n    Object.entries(formats).forEach(_ref4 => {\n      let [key, value] = _ref4;\n      block.formatAt(0, length, key, value);\n    });\n    return block;\n  }\n}\nfunction insertInlineContents(parent, index, inlineContents) {\n  inlineContents.reduce((index, op) => {\n    const length = Op.length(op);\n    let attributes = op.attributes || {};\n    if (op.insert != null) {\n      if (typeof op.insert === 'string') {\n        const text = op.insert;\n        parent.insertAt(index, text);\n        const [leaf] = parent.descendant(LeafBlot, index);\n        const formats = bubbleFormats(leaf);\n        attributes = AttributeMap.diff(formats, attributes) || {};\n      } else if (typeof op.insert === 'object') {\n        const key = Object.keys(op.insert)[0]; // There should only be one key\n        if (key == null) return index;\n        parent.insertAt(index, key, op.insert[key]);\n        const isInlineEmbed = parent.scroll.query(key, Scope.INLINE) != null;\n        if (isInlineEmbed) {\n          const [leaf] = parent.descendant(LeafBlot, index);\n          const formats = bubbleFormats(leaf);\n          attributes = AttributeMap.diff(formats, attributes) || {};\n        }\n      }\n    }\n    Object.keys(attributes).forEach(key => {\n      parent.formatAt(index, length, key, attributes[key]);\n    });\n    return index + length;\n  }, index);\n}\nexport default Scroll;\n//# sourceMappingURL=scroll.js.map","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['right', 'center', 'justify']\n};\nconst AlignAttribute = new Attributor('align', 'align', config);\nconst AlignClass = new ClassAttributor('align', 'ql-align', config);\nconst AlignStyle = new StyleAttributor('align', 'text-align', config);\nexport { AlignAttribute, AlignClass, AlignStyle };\n//# sourceMappingURL=align.js.map","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\nclass ColorAttributor extends StyleAttributor {\n  value(domNode) {\n    let value = super.value(domNode);\n    if (!value.startsWith('rgb(')) return value;\n    value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\n    const hex = value.split(',').map(component => `00${parseInt(component, 10).toString(16)}`.slice(-2)).join('');\n    return `#${hex}`;\n  }\n}\nconst ColorClass = new ClassAttributor('color', 'ql-color', {\n  scope: Scope.INLINE\n});\nconst ColorStyle = new ColorAttributor('color', 'color', {\n  scope: Scope.INLINE\n});\nexport { ColorAttributor, ColorClass, ColorStyle };\n//# sourceMappingURL=color.js.map","import { ClassAttributor, Scope } from 'parchment';\nimport { ColorAttributor } from './color.js';\nconst BackgroundClass = new ClassAttributor('background', 'ql-bg', {\n  scope: Scope.INLINE\n});\nconst BackgroundStyle = new ColorAttributor('background', 'background-color', {\n  scope: Scope.INLINE\n});\nexport { BackgroundClass, BackgroundStyle };\n//# sourceMappingURL=background.js.map","import Block from '../blots/block.js';\nimport Break from '../blots/break.js';\nimport Cursor from '../blots/cursor.js';\nimport Inline from '../blots/inline.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport Container from '../blots/container.js';\nimport Quill from '../core/quill.js';\nclass CodeBlockContainer extends Container {\n  static create(value) {\n    const domNode = super.create(value);\n    domNode.setAttribute('spellcheck', 'false');\n    return domNode;\n  }\n  code(index, length) {\n    return this.children\n    // @ts-expect-error\n    .map(child => child.length() <= 1 ? '' : child.domNode.innerText).join('\\n').slice(index, index + length);\n  }\n  html(index, length) {\n    // `\\n`s are needed in order to support empty lines at the beginning and the end.\n    // https://html.spec.whatwg.org/multipage/syntax.html#element-restrictions\n    return `<pre>\\n${escapeText(this.code(index, length))}\\n</pre>`;\n  }\n}\nclass CodeBlock extends Block {\n  static TAB = '  ';\n  static register() {\n    Quill.register(CodeBlockContainer);\n  }\n}\nclass Code extends Inline {}\nCode.blotName = 'code';\nCode.tagName = 'CODE';\nCodeBlock.blotName = 'code-block';\nCodeBlock.className = 'ql-code-block';\nCodeBlock.tagName = 'DIV';\nCodeBlockContainer.blotName = 'code-block-container';\nCodeBlockContainer.className = 'ql-code-block-container';\nCodeBlockContainer.tagName = 'DIV';\nCodeBlockContainer.allowedChildren = [CodeBlock];\nCodeBlock.allowedChildren = [TextBlot, Break, Cursor];\nCodeBlock.requiredContainer = CodeBlockContainer;\nexport { Code, CodeBlockContainer, CodeBlock as default };\n//# sourceMappingURL=code.js.map","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['rtl']\n};\nconst DirectionAttribute = new Attributor('direction', 'dir', config);\nconst DirectionClass = new ClassAttributor('direction', 'ql-direction', config);\nconst DirectionStyle = new StyleAttributor('direction', 'direction', config);\nexport { DirectionAttribute, DirectionClass, DirectionStyle };\n//# sourceMappingURL=direction.js.map","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\nconst config = {\n  scope: Scope.INLINE,\n  whitelist: ['serif', 'monospace']\n};\nconst FontClass = new ClassAttributor('font', 'ql-font', config);\nclass FontStyleAttributor extends StyleAttributor {\n  value(node) {\n    return super.value(node).replace(/[\"']/g, '');\n  }\n}\nconst FontStyle = new FontStyleAttributor('font', 'font-family', config);\nexport { FontStyle, FontClass };\n//# sourceMappingURL=font.js.map","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\nconst SizeClass = new ClassAttributor('size', 'ql-size', {\n  scope: Scope.INLINE,\n  whitelist: ['small', 'large', 'huge']\n});\nconst SizeStyle = new StyleAttributor('size', 'font-size', {\n  scope: Scope.INLINE,\n  whitelist: ['10px', '18px', '32px']\n});\nexport { SizeClass, SizeStyle };\n//# sourceMappingURL=size.js.map","import { cloneDeep, isEqual } from 'lodash-es';\nimport Delta, { AttributeMap } from 'quill-delta';\nimport { EmbedBlot, Scope, TextBlot } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nconst debug = logger('quill:keyboard');\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\nclass Keyboard extends Module {\n  static match(evt, binding) {\n    if (['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].some(key => {\n      return !!binding[key] !== evt[key] && binding[key] !== null;\n    })) {\n      return false;\n    }\n    return binding.key === evt.key || binding.key === evt.which;\n  }\n  constructor(quill, options) {\n    super(quill, options);\n    this.bindings = {};\n    // @ts-expect-error Fix me later\n    Object.keys(this.options.bindings).forEach(name => {\n      // @ts-expect-error Fix me later\n      if (this.options.bindings[name]) {\n        // @ts-expect-error Fix me later\n        this.addBinding(this.options.bindings[name]);\n      }\n    });\n    this.addBinding({\n      key: 'Enter',\n      shiftKey: null\n    }, this.handleEnter);\n    this.addBinding({\n      key: 'Enter',\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null\n    }, () => {});\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      this.addBinding({\n        key: 'Backspace'\n      }, {\n        collapsed: true\n      }, this.handleBackspace);\n      this.addBinding({\n        key: 'Delete'\n      }, {\n        collapsed: true\n      }, this.handleDelete);\n    } else {\n      this.addBinding({\n        key: 'Backspace'\n      }, {\n        collapsed: true,\n        prefix: /^.?$/\n      }, this.handleBackspace);\n      this.addBinding({\n        key: 'Delete'\n      }, {\n        collapsed: true,\n        suffix: /^.?$/\n      }, this.handleDelete);\n    }\n    this.addBinding({\n      key: 'Backspace'\n    }, {\n      collapsed: false\n    }, this.handleDeleteRange);\n    this.addBinding({\n      key: 'Delete'\n    }, {\n      collapsed: false\n    }, this.handleDeleteRange);\n    this.addBinding({\n      key: 'Backspace',\n      altKey: null,\n      ctrlKey: null,\n      metaKey: null,\n      shiftKey: null\n    }, {\n      collapsed: true,\n      offset: 0\n    }, this.handleBackspace);\n    this.listen();\n  }\n  addBinding(keyBinding) {\n    let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let handler = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const binding = normalize(keyBinding);\n    if (binding == null) {\n      debug.warn('Attempted to add invalid keyboard binding', binding);\n      return;\n    }\n    if (typeof context === 'function') {\n      context = {\n        handler: context\n      };\n    }\n    if (typeof handler === 'function') {\n      handler = {\n        handler\n      };\n    }\n    const keys = Array.isArray(binding.key) ? binding.key : [binding.key];\n    keys.forEach(key => {\n      const singleBinding = {\n        ...binding,\n        key,\n        ...context,\n        ...handler\n      };\n      this.bindings[singleBinding.key] = this.bindings[singleBinding.key] || [];\n      this.bindings[singleBinding.key].push(singleBinding);\n    });\n  }\n  listen() {\n    this.quill.root.addEventListener('keydown', evt => {\n      if (evt.defaultPrevented || evt.isComposing) return;\n\n      // evt.isComposing is false when pressing Enter/Backspace when composing in Safari\n      // https://bugs.webkit.org/show_bug.cgi?id=165004\n      const isComposing = evt.keyCode === 229 && (evt.key === 'Enter' || evt.key === 'Backspace');\n      if (isComposing) return;\n      const bindings = (this.bindings[evt.key] || []).concat(this.bindings[evt.which] || []);\n      const matches = bindings.filter(binding => Keyboard.match(evt, binding));\n      if (matches.length === 0) return;\n      // @ts-expect-error\n      const blot = Quill.find(evt.target, true);\n      if (blot && blot.scroll !== this.quill.scroll) return;\n      const range = this.quill.getSelection();\n      if (range == null || !this.quill.hasFocus()) return;\n      const [line, offset] = this.quill.getLine(range.index);\n      const [leafStart, offsetStart] = this.quill.getLeaf(range.index);\n      const [leafEnd, offsetEnd] = range.length === 0 ? [leafStart, offsetStart] : this.quill.getLeaf(range.index + range.length);\n      const prefixText = leafStart instanceof TextBlot ? leafStart.value().slice(0, offsetStart) : '';\n      const suffixText = leafEnd instanceof TextBlot ? leafEnd.value().slice(offsetEnd) : '';\n      const curContext = {\n        collapsed: range.length === 0,\n        // @ts-expect-error Fix me later\n        empty: range.length === 0 && line.length() <= 1,\n        format: this.quill.getFormat(range),\n        line,\n        offset,\n        prefix: prefixText,\n        suffix: suffixText,\n        event: evt\n      };\n      const prevented = matches.some(binding => {\n        if (binding.collapsed != null && binding.collapsed !== curContext.collapsed) {\n          return false;\n        }\n        if (binding.empty != null && binding.empty !== curContext.empty) {\n          return false;\n        }\n        if (binding.offset != null && binding.offset !== curContext.offset) {\n          return false;\n        }\n        if (Array.isArray(binding.format)) {\n          // any format is present\n          if (binding.format.every(name => curContext.format[name] == null)) {\n            return false;\n          }\n        } else if (typeof binding.format === 'object') {\n          // all formats must match\n          if (!Object.keys(binding.format).every(name => {\n            // @ts-expect-error Fix me later\n            if (binding.format[name] === true) return curContext.format[name] != null;\n            // @ts-expect-error Fix me later\n            if (binding.format[name] === false) return curContext.format[name] == null;\n            // @ts-expect-error Fix me later\n            return isEqual(binding.format[name], curContext.format[name]);\n          })) {\n            return false;\n          }\n        }\n        if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) {\n          return false;\n        }\n        if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) {\n          return false;\n        }\n        // @ts-expect-error Fix me later\n        return binding.handler.call(this, range, curContext, binding) !== true;\n      });\n      if (prevented) {\n        evt.preventDefault();\n      }\n    });\n  }\n  handleBackspace(range, context) {\n    // Check for astral symbols\n    const length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix) ? 2 : 1;\n    if (range.index === 0 || this.quill.getLength() <= 1) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new Delta().retain(range.index - length).delete(length);\n    if (context.offset === 0) {\n      // Always deleting newline here, length always 1\n      const [prev] = this.quill.getLine(range.index - 1);\n      if (prev) {\n        const isPrevLineEmpty = prev.statics.blotName === 'block' && prev.length() <= 1;\n        if (!isPrevLineEmpty) {\n          // @ts-expect-error Fix me later\n          const curFormats = line.formats();\n          const prevFormats = this.quill.getFormat(range.index - 1, 1);\n          formats = AttributeMap.diff(curFormats, prevFormats) || {};\n          if (Object.keys(formats).length > 0) {\n            // line.length() - 1 targets \\n in line, another -1 for newline being deleted\n            const formatDelta = new Delta()\n            // @ts-expect-error Fix me later\n            .retain(range.index + line.length() - 2).retain(1, formats);\n            delta = delta.compose(formatDelta);\n          }\n        }\n      }\n    }\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.focus();\n  }\n  handleDelete(range, context) {\n    // Check for astral symbols\n    const length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix) ? 2 : 1;\n    if (range.index >= this.quill.getLength() - length) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new Delta().retain(range.index).delete(length);\n    // @ts-expect-error Fix me later\n    if (context.offset >= line.length() - 1) {\n      const [next] = this.quill.getLine(range.index + 1);\n      if (next) {\n        // @ts-expect-error Fix me later\n        const curFormats = line.formats();\n        const nextFormats = this.quill.getFormat(range.index, 1);\n        formats = AttributeMap.diff(curFormats, nextFormats) || {};\n        if (Object.keys(formats).length > 0) {\n          delta = delta.retain(next.length() - 1).retain(1, formats);\n        }\n      }\n    }\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.focus();\n  }\n  handleDeleteRange(range) {\n    deleteRange({\n      range,\n      quill: this.quill\n    });\n    this.quill.focus();\n  }\n  handleEnter(range, context) {\n    const lineFormats = Object.keys(context.format).reduce((formats, format) => {\n      if (this.quill.scroll.query(format, Scope.BLOCK) && !Array.isArray(context.format[format])) {\n        formats[format] = context.format[format];\n      }\n      return formats;\n    }, {});\n    const delta = new Delta().retain(range.index).delete(range.length).insert('\\n', lineFormats);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n    this.quill.focus();\n  }\n}\nconst defaultOptions = {\n  bindings: {\n    bold: makeFormatHandler('bold'),\n    italic: makeFormatHandler('italic'),\n    underline: makeFormatHandler('underline'),\n    indent: {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: 'Tab',\n      format: ['blockquote', 'indent', 'list'],\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', Quill.sources.USER);\n        return false;\n      }\n    },\n    outdent: {\n      key: 'Tab',\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', Quill.sources.USER);\n        return false;\n      }\n    },\n    'outdent backspace': {\n      key: 'Backspace',\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n      handler(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', Quill.sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, Quill.sources.USER);\n        }\n      }\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: 'Tab',\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n      handler(range) {\n        this.quill.deleteText(range.index - 1, 1, Quill.sources.USER);\n      }\n    },\n    tab: {\n      key: 'Tab',\n      handler(range, context) {\n        if (context.format.table) return true;\n        this.quill.history.cutoff();\n        const delta = new Delta().retain(range.index).delete(range.length).insert('\\t');\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        return false;\n      }\n    },\n    'blockquote empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['blockquote'],\n      empty: true,\n      handler() {\n        this.quill.format('blockquote', false, Quill.sources.USER);\n      }\n    },\n    'list empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n      handler(range, context) {\n        const formats = {\n          list: false\n        };\n        if (context.format.indent) {\n          formats.indent = false;\n        }\n        this.quill.formatLine(range.index, range.length, formats, Quill.sources.USER);\n      }\n    },\n    'checklist enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: {\n        list: 'checked'\n      },\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const formats = {\n          // @ts-expect-error Fix me later\n          ...line.formats(),\n          list: 'checked'\n        };\n        const delta = new Delta().retain(range.index).insert('\\n', formats)\n        // @ts-expect-error Fix me later\n        .retain(line.length() - offset - 1).retain(1, {\n          list: 'unchecked'\n        });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollSelectionIntoView();\n      }\n    },\n    'header enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n      handler(range, context) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const delta = new Delta().retain(range.index).insert('\\n', context.format)\n        // @ts-expect-error Fix me later\n        .retain(line.length() - offset - 1).retain(1, {\n          header: null\n        });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollSelectionIntoView();\n      }\n    },\n    'table backspace': {\n      key: 'Backspace',\n      format: ['table'],\n      collapsed: true,\n      offset: 0,\n      handler() {}\n    },\n    'table delete': {\n      key: 'Delete',\n      format: ['table'],\n      collapsed: true,\n      suffix: /^$/,\n      handler() {}\n    },\n    'table enter': {\n      key: 'Enter',\n      shiftKey: null,\n      format: ['table'],\n      handler(range) {\n        const module = this.quill.getModule('table');\n        if (module) {\n          // @ts-expect-error\n          const [table, row, cell, offset] = module.getTable(range);\n          const shift = tableSide(table, row, cell, offset);\n          if (shift == null) return;\n          let index = table.offset();\n          if (shift < 0) {\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(range.index + 1, range.length, Quill.sources.SILENT);\n          } else if (shift > 0) {\n            index += table.length();\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(index, Quill.sources.USER);\n          }\n        }\n      }\n    },\n    'table tab': {\n      key: 'Tab',\n      shiftKey: null,\n      format: ['table'],\n      handler(range, context) {\n        const {\n          event,\n          line: cell\n        } = context;\n        const offset = cell.offset(this.quill.scroll);\n        if (event.shiftKey) {\n          this.quill.setSelection(offset - 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(offset + cell.length(), Quill.sources.USER);\n        }\n      }\n    },\n    'list autofill': {\n      key: ' ',\n      shiftKey: null,\n      collapsed: true,\n      format: {\n        'code-block': false,\n        blockquote: false,\n        table: false\n      },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n      handler(range, context) {\n        if (this.quill.scroll.query('list') == null) return true;\n        const {\n          length\n        } = context.prefix;\n        const [line, offset] = this.quill.getLine(range.index);\n        if (offset > length) return true;\n        let value;\n        switch (context.prefix.trim()) {\n          case '[]':\n          case '[ ]':\n            value = 'unchecked';\n            break;\n          case '[x]':\n            value = 'checked';\n            break;\n          case '-':\n          case '*':\n            value = 'bullet';\n            break;\n          default:\n            value = 'ordered';\n        }\n        this.quill.insertText(range.index, ' ', Quill.sources.USER);\n        this.quill.history.cutoff();\n        const delta = new Delta().retain(range.index - offset).delete(length + 1)\n        // @ts-expect-error Fix me later\n        .retain(line.length() - 2 - offset).retain(1, {\n          list: value\n        });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, Quill.sources.SILENT);\n        return false;\n      }\n    },\n    'code exit': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /^$/,\n      suffix: /^\\s*$/,\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        let numLines = 2;\n        let cur = line;\n        while (cur != null && cur.length() <= 1 && cur.formats()['code-block']) {\n          // @ts-expect-error\n          cur = cur.prev;\n          numLines -= 1;\n          // Requisite prev lines are empty\n          if (numLines <= 0) {\n            const delta = new Delta()\n            // @ts-expect-error Fix me later\n            .retain(range.index + line.length() - offset - 2).retain(1, {\n              'code-block': null\n            }).delete(1);\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(range.index - 1, Quill.sources.SILENT);\n            return false;\n          }\n        }\n        return true;\n      }\n    },\n    'embed left': makeEmbedArrowHandler('ArrowLeft', false),\n    'embed left shift': makeEmbedArrowHandler('ArrowLeft', true),\n    'embed right': makeEmbedArrowHandler('ArrowRight', false),\n    'embed right shift': makeEmbedArrowHandler('ArrowRight', true),\n    'table down': makeTableArrowHandler(false),\n    'table up': makeTableArrowHandler(true)\n  }\n};\nKeyboard.DEFAULTS = defaultOptions;\nfunction makeCodeBlockHandler(indent) {\n  return {\n    key: 'Tab',\n    shiftKey: !indent,\n    format: {\n      'code-block': true\n    },\n    handler(range, _ref) {\n      let {\n        event\n      } = _ref;\n      const CodeBlock = this.quill.scroll.query('code-block');\n      // @ts-expect-error\n      const {\n        TAB\n      } = CodeBlock;\n      if (range.length === 0 && !event.shiftKey) {\n        this.quill.insertText(range.index, TAB, Quill.sources.USER);\n        this.quill.setSelection(range.index + TAB.length, Quill.sources.SILENT);\n        return;\n      }\n      const lines = range.length === 0 ? this.quill.getLines(range.index, 1) : this.quill.getLines(range);\n      let {\n        index,\n        length\n      } = range;\n      lines.forEach((line, i) => {\n        if (indent) {\n          line.insertAt(0, TAB);\n          if (i === 0) {\n            index += TAB.length;\n          } else {\n            length += TAB.length;\n          }\n          // @ts-expect-error Fix me later\n        } else if (line.domNode.textContent.startsWith(TAB)) {\n          line.deleteAt(0, TAB.length);\n          if (i === 0) {\n            index -= TAB.length;\n          } else {\n            length -= TAB.length;\n          }\n        }\n      });\n      this.quill.update(Quill.sources.USER);\n      this.quill.setSelection(index, length, Quill.sources.SILENT);\n    }\n  };\n}\nfunction makeEmbedArrowHandler(key, shiftKey) {\n  const where = key === 'ArrowLeft' ? 'prefix' : 'suffix';\n  return {\n    key,\n    shiftKey,\n    altKey: null,\n    [where]: /^$/,\n    handler(range) {\n      let {\n        index\n      } = range;\n      if (key === 'ArrowRight') {\n        index += range.length + 1;\n      }\n      const [leaf] = this.quill.getLeaf(index);\n      if (!(leaf instanceof EmbedBlot)) return true;\n      if (key === 'ArrowLeft') {\n        if (shiftKey) {\n          this.quill.setSelection(range.index - 1, range.length + 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(range.index - 1, Quill.sources.USER);\n        }\n      } else if (shiftKey) {\n        this.quill.setSelection(range.index, range.length + 1, Quill.sources.USER);\n      } else {\n        this.quill.setSelection(range.index + range.length + 1, Quill.sources.USER);\n      }\n      return false;\n    }\n  };\n}\nfunction makeFormatHandler(format) {\n  return {\n    key: format[0],\n    shortKey: true,\n    handler(range, context) {\n      this.quill.format(format, !context.format[format], Quill.sources.USER);\n    }\n  };\n}\nfunction makeTableArrowHandler(up) {\n  return {\n    key: up ? 'ArrowUp' : 'ArrowDown',\n    collapsed: true,\n    format: ['table'],\n    handler(range, context) {\n      // TODO move to table module\n      const key = up ? 'prev' : 'next';\n      const cell = context.line;\n      const targetRow = cell.parent[key];\n      if (targetRow != null) {\n        if (targetRow.statics.blotName === 'table-row') {\n          // @ts-expect-error\n          let targetCell = targetRow.children.head;\n          let cur = cell;\n          while (cur.prev != null) {\n            // @ts-expect-error\n            cur = cur.prev;\n            targetCell = targetCell.next;\n          }\n          const index = targetCell.offset(this.quill.scroll) + Math.min(context.offset, targetCell.length() - 1);\n          this.quill.setSelection(index, 0, Quill.sources.USER);\n        }\n      } else {\n        // @ts-expect-error\n        const targetLine = cell.table()[key];\n        if (targetLine != null) {\n          if (up) {\n            this.quill.setSelection(targetLine.offset(this.quill.scroll) + targetLine.length() - 1, 0, Quill.sources.USER);\n          } else {\n            this.quill.setSelection(targetLine.offset(this.quill.scroll), 0, Quill.sources.USER);\n          }\n        }\n      }\n      return false;\n    }\n  };\n}\nfunction normalize(binding) {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    binding = {\n      key: binding\n    };\n  } else if (typeof binding === 'object') {\n    binding = cloneDeep(binding);\n  } else {\n    return null;\n  }\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n  return binding;\n}\n\n// TODO: Move into quill.ts or editor.ts\nfunction deleteRange(_ref2) {\n  let {\n    quill,\n    range\n  } = _ref2;\n  const lines = quill.getLines(range);\n  let formats = {};\n  if (lines.length > 1) {\n    const firstFormats = lines[0].formats();\n    const lastFormats = lines[lines.length - 1].formats();\n    formats = AttributeMap.diff(lastFormats, firstFormats) || {};\n  }\n  quill.deleteText(range, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    quill.formatLine(range.index, 1, formats, Quill.sources.USER);\n  }\n  quill.setSelection(range.index, Quill.sources.SILENT);\n}\nfunction tableSide(_table, row, cell, offset) {\n  if (row.prev == null && row.next == null) {\n    if (cell.prev == null && cell.next == null) {\n      return offset === 0 ? -1 : 1;\n    }\n    return cell.prev == null ? -1 : 1;\n  }\n  if (row.prev == null) {\n    return -1;\n  }\n  if (row.next == null) {\n    return 1;\n  }\n  return null;\n}\nexport { Keyboard as default, SHORTKEY, normalize, deleteRange };\n//# sourceMappingURL=keyboard.js.map","const normalWeightRegexp = /font-weight:\\s*normal/;\nconst blockTagNames = ['P', 'OL', 'UL'];\nconst isBlockElement = element => {\n  return element && blockTagNames.includes(element.tagName);\n};\nconst normalizeEmptyLines = doc => {\n  Array.from(doc.querySelectorAll('br')).filter(br => isBlockElement(br.previousElementSibling) && isBlockElement(br.nextElementSibling)).forEach(br => {\n    br.parentNode?.removeChild(br);\n  });\n};\nconst normalizeFontWeight = doc => {\n  Array.from(doc.querySelectorAll('b[style*=\"font-weight\"]')).filter(node => node.getAttribute('style')?.match(normalWeightRegexp)).forEach(node => {\n    const fragment = doc.createDocumentFragment();\n    fragment.append(...node.childNodes);\n    node.parentNode?.replaceChild(fragment, node);\n  });\n};\nexport default function normalize(doc) {\n  if (doc.querySelector('[id^=\"docs-internal-guid-\"]')) {\n    normalizeFontWeight(doc);\n    normalizeEmptyLines(doc);\n  }\n}\n//# sourceMappingURL=googleDocs.js.map","const ignoreRegexp = /\\bmso-list:[^;]*ignore/i;\nconst idRegexp = /\\bmso-list:[^;]*\\bl(\\d+)/i;\nconst indentRegexp = /\\bmso-list:[^;]*\\blevel(\\d+)/i;\nconst parseListItem = (element, html) => {\n  const style = element.getAttribute('style');\n  const idMatch = style?.match(idRegexp);\n  if (!idMatch) {\n    return null;\n  }\n  const id = Number(idMatch[1]);\n  const indentMatch = style?.match(indentRegexp);\n  const indent = indentMatch ? Number(indentMatch[1]) : 1;\n  const typeRegexp = new RegExp(`@list l${id}:level${indent}\\\\s*\\\\{[^\\\\}]*mso-level-number-format:\\\\s*([\\\\w-]+)`, 'i');\n  const typeMatch = html.match(typeRegexp);\n  const type = typeMatch && typeMatch[1] === 'bullet' ? 'bullet' : 'ordered';\n  return {\n    id,\n    indent,\n    type,\n    element\n  };\n};\n\n// list items are represented as `p` tags with styles like `mso-list: l0 level1` where:\n// 1. \"0\" in \"l0\" means the list item id;\n// 2. \"1\" in \"level1\" means the indent level, starting from 1.\nconst normalizeListItem = doc => {\n  const msoList = Array.from(doc.querySelectorAll('[style*=mso-list]'));\n  const ignored = [];\n  const others = [];\n  msoList.forEach(node => {\n    const shouldIgnore = (node.getAttribute('style') || '').match(ignoreRegexp);\n    if (shouldIgnore) {\n      ignored.push(node);\n    } else {\n      others.push(node);\n    }\n  });\n\n  // Each list item contains a marker wrapped with \"mso-list: Ignore\".\n  ignored.forEach(node => node.parentNode?.removeChild(node));\n\n  // The list stype is not defined inline with the tag, instead, it's in the\n  // style tag so we need to pass the html as a string.\n  const html = doc.documentElement.innerHTML;\n  const listItems = others.map(element => parseListItem(element, html)).filter(parsed => parsed);\n  while (listItems.length) {\n    const childListItems = [];\n    let current = listItems.shift();\n    // Group continuous items into the same group (aka \"ul\")\n    while (current) {\n      childListItems.push(current);\n      current = listItems.length && listItems[0]?.element === current.element.nextElementSibling &&\n      // Different id means the next item doesn't belong to this group.\n      listItems[0].id === current.id ? listItems.shift() : null;\n    }\n    const ul = document.createElement('ul');\n    childListItems.forEach(listItem => {\n      const li = document.createElement('li');\n      li.setAttribute('data-list', listItem.type);\n      if (listItem.indent > 1) {\n        li.setAttribute('class', `ql-indent-${listItem.indent - 1}`);\n      }\n      li.innerHTML = listItem.element.innerHTML;\n      ul.appendChild(li);\n    });\n    const element = childListItems[0]?.element;\n    const {\n      parentNode\n    } = element ?? {};\n    if (element) {\n      parentNode?.replaceChild(ul, element);\n    }\n    childListItems.slice(1).forEach(_ref => {\n      let {\n        element: e\n      } = _ref;\n      parentNode?.removeChild(e);\n    });\n  }\n};\nexport default function normalize(doc) {\n  if (doc.documentElement.getAttribute('xmlns:w') === 'urn:schemas-microsoft-com:office:word') {\n    normalizeListItem(doc);\n  }\n}\n//# sourceMappingURL=msWord.js.map","import googleDocs from './normalizers/googleDocs.js';\nimport msWord from './normalizers/msWord.js';\nconst NORMALIZERS = [msWord, googleDocs];\nconst normalizeExternalHTML = doc => {\n  if (doc.documentElement) {\n    NORMALIZERS.forEach(normalize => {\n      normalize(doc);\n    });\n  }\n};\nexport default normalizeExternalHTML;\n//# sourceMappingURL=index.js.map","import { Attributor, BlockBlot, ClassAttributor, EmbedBlot, Scope, StyleAttributor } from 'parchment';\nimport Delta from 'quill-delta';\nimport { BlockEmbed } from '../blots/block.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport { AlignAttribute, AlignStyle } from '../formats/align.js';\nimport { BackgroundStyle } from '../formats/background.js';\nimport CodeBlock from '../formats/code.js';\nimport { ColorStyle } from '../formats/color.js';\nimport { DirectionAttribute, DirectionStyle } from '../formats/direction.js';\nimport { FontStyle } from '../formats/font.js';\nimport { SizeStyle } from '../formats/size.js';\nimport { deleteRange } from './keyboard.js';\nimport normalizeExternalHTML from './normalizeExternalHTML/index.js';\nconst debug = logger('quill:clipboard');\nconst CLIPBOARD_CONFIG = [[Node.TEXT_NODE, matchText], [Node.TEXT_NODE, matchNewline], ['br', matchBreak], [Node.ELEMENT_NODE, matchNewline], [Node.ELEMENT_NODE, matchBlot], [Node.ELEMENT_NODE, matchAttributor], [Node.ELEMENT_NODE, matchStyles], ['li', matchIndent], ['ol, ul', matchList], ['pre', matchCodeBlock], ['tr', matchTable], ['b', createMatchAlias('bold')], ['i', createMatchAlias('italic')], ['strike', createMatchAlias('strike')], ['style', matchIgnore]];\nconst ATTRIBUTE_ATTRIBUTORS = [AlignAttribute, DirectionAttribute].reduce((memo, attr) => {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\nconst STYLE_ATTRIBUTORS = [AlignStyle, BackgroundStyle, ColorStyle, DirectionStyle, FontStyle, SizeStyle].reduce((memo, attr) => {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\nclass Clipboard extends Module {\n  static DEFAULTS = {\n    matchers: []\n  };\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill.root.addEventListener('copy', e => this.onCaptureCopy(e, false));\n    this.quill.root.addEventListener('cut', e => this.onCaptureCopy(e, true));\n    this.quill.root.addEventListener('paste', this.onCapturePaste.bind(this));\n    this.matchers = [];\n    CLIPBOARD_CONFIG.concat(this.options.matchers ?? []).forEach(_ref => {\n      let [selector, matcher] = _ref;\n      this.addMatcher(selector, matcher);\n    });\n  }\n  addMatcher(selector, matcher) {\n    this.matchers.push([selector, matcher]);\n  }\n  convert(_ref2) {\n    let {\n      html,\n      text\n    } = _ref2;\n    let formats = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (formats[CodeBlock.blotName]) {\n      return new Delta().insert(text || '', {\n        [CodeBlock.blotName]: formats[CodeBlock.blotName]\n      });\n    }\n    if (!html) {\n      return new Delta().insert(text || '', formats);\n    }\n    const delta = this.convertHTML(html);\n    // Remove trailing newline\n    if (deltaEndsWith(delta, '\\n') && (delta.ops[delta.ops.length - 1].attributes == null || formats.table)) {\n      return delta.compose(new Delta().retain(delta.length() - 1).delete(1));\n    }\n    return delta;\n  }\n  normalizeHTML(doc) {\n    normalizeExternalHTML(doc);\n  }\n  convertHTML(html) {\n    const doc = new DOMParser().parseFromString(html, 'text/html');\n    this.normalizeHTML(doc);\n    const container = doc.body;\n    const nodeMatches = new WeakMap();\n    const [elementMatchers, textMatchers] = this.prepareMatching(container, nodeMatches);\n    return traverse(this.quill.scroll, container, elementMatchers, textMatchers, nodeMatches);\n  }\n  dangerouslyPasteHTML(index, html) {\n    let source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Quill.sources.API;\n    if (typeof index === 'string') {\n      const delta = this.convert({\n        html: index,\n        text: ''\n      });\n      // @ts-expect-error\n      this.quill.setContents(delta, html);\n      this.quill.setSelection(0, Quill.sources.SILENT);\n    } else {\n      const paste = this.convert({\n        html,\n        text: ''\n      });\n      this.quill.updateContents(new Delta().retain(index).concat(paste), source);\n      this.quill.setSelection(index + paste.length(), Quill.sources.SILENT);\n    }\n  }\n  onCaptureCopy(e) {\n    let isCut = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (e.defaultPrevented) return;\n    e.preventDefault();\n    const [range] = this.quill.selection.getRange();\n    if (range == null) return;\n    const {\n      html,\n      text\n    } = this.onCopy(range, isCut);\n    e.clipboardData?.setData('text/plain', text);\n    e.clipboardData?.setData('text/html', html);\n    if (isCut) {\n      deleteRange({\n        range,\n        quill: this.quill\n      });\n    }\n  }\n\n  /*\n   * https://www.iana.org/assignments/media-types/text/uri-list\n   */\n  normalizeURIList(urlList) {\n    return urlList.split(/\\r?\\n/)\n    // Ignore all comments\n    .filter(url => url[0] !== '#').join('\\n');\n  }\n  onCapturePaste(e) {\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\n    e.preventDefault();\n    const range = this.quill.getSelection(true);\n    if (range == null) return;\n    const html = e.clipboardData?.getData('text/html');\n    let text = e.clipboardData?.getData('text/plain');\n    if (!html && !text) {\n      const urlList = e.clipboardData?.getData('text/uri-list');\n      if (urlList) {\n        text = this.normalizeURIList(urlList);\n      }\n    }\n    const files = Array.from(e.clipboardData?.files || []);\n    if (!html && files.length > 0) {\n      this.quill.uploader.upload(range, files);\n      return;\n    }\n    if (html && files.length > 0) {\n      const doc = new DOMParser().parseFromString(html, 'text/html');\n      if (doc.body.childElementCount === 1 && doc.body.firstElementChild?.tagName === 'IMG') {\n        this.quill.uploader.upload(range, files);\n        return;\n      }\n    }\n    this.onPaste(range, {\n      html,\n      text\n    });\n  }\n  onCopy(range) {\n    const text = this.quill.getText(range);\n    const html = this.quill.getSemanticHTML(range);\n    return {\n      html,\n      text\n    };\n  }\n  onPaste(range, _ref3) {\n    let {\n      text,\n      html\n    } = _ref3;\n    const formats = this.quill.getFormat(range.index);\n    const pastedDelta = this.convert({\n      text,\n      html\n    }, formats);\n    debug.log('onPaste', pastedDelta, {\n      text,\n      html\n    });\n    const delta = new Delta().retain(range.index).delete(range.length).concat(pastedDelta);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    // range.length contributes to delta.length()\n    this.quill.setSelection(delta.length() - range.length, Quill.sources.SILENT);\n    this.quill.scrollSelectionIntoView();\n  }\n  prepareMatching(container, nodeMatches) {\n    const elementMatchers = [];\n    const textMatchers = [];\n    this.matchers.forEach(pair => {\n      const [selector, matcher] = pair;\n      switch (selector) {\n        case Node.TEXT_NODE:\n          textMatchers.push(matcher);\n          break;\n        case Node.ELEMENT_NODE:\n          elementMatchers.push(matcher);\n          break;\n        default:\n          Array.from(container.querySelectorAll(selector)).forEach(node => {\n            if (nodeMatches.has(node)) {\n              const matches = nodeMatches.get(node);\n              matches?.push(matcher);\n            } else {\n              nodeMatches.set(node, [matcher]);\n            }\n          });\n          break;\n      }\n    });\n    return [elementMatchers, textMatchers];\n  }\n}\nfunction applyFormat(delta, format, value, scroll) {\n  if (!scroll.query(format)) {\n    return delta;\n  }\n  return delta.reduce((newDelta, op) => {\n    if (!op.insert) return newDelta;\n    if (op.attributes && op.attributes[format]) {\n      return newDelta.push(op);\n    }\n    const formats = value ? {\n      [format]: value\n    } : {};\n    return newDelta.insert(op.insert, {\n      ...formats,\n      ...op.attributes\n    });\n  }, new Delta());\n}\nfunction deltaEndsWith(delta, text) {\n  let endText = '';\n  for (let i = delta.ops.length - 1; i >= 0 && endText.length < text.length; --i // eslint-disable-line no-plusplus\n  ) {\n    const op = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n  return endText.slice(-1 * text.length) === text;\n}\nfunction isLine(node, scroll) {\n  if (!(node instanceof Element)) return false;\n  const match = scroll.query(node);\n  // @ts-expect-error\n  if (match && match.prototype instanceof EmbedBlot) return false;\n  return ['address', 'article', 'blockquote', 'canvas', 'dd', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'iframe', 'li', 'main', 'nav', 'ol', 'output', 'p', 'pre', 'section', 'table', 'td', 'tr', 'ul', 'video'].includes(node.tagName.toLowerCase());\n}\nfunction isBetweenInlineElements(node, scroll) {\n  return node.previousElementSibling && node.nextElementSibling && !isLine(node.previousElementSibling, scroll) && !isLine(node.nextElementSibling, scroll);\n}\nconst preNodes = new WeakMap();\nfunction isPre(node) {\n  if (node == null) return false;\n  if (!preNodes.has(node)) {\n    // @ts-expect-error\n    if (node.tagName === 'PRE') {\n      preNodes.set(node, true);\n    } else {\n      preNodes.set(node, isPre(node.parentNode));\n    }\n  }\n  return preNodes.get(node);\n}\nfunction traverse(scroll, node, elementMatchers, textMatchers, nodeMatches) {\n  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce((delta, matcher) => {\n      return matcher(node, delta, scroll);\n    }, new Delta());\n  }\n  if (node.nodeType === node.ELEMENT_NODE) {\n    return Array.from(node.childNodes || []).reduce((delta, childNode) => {\n      let childrenDelta = traverse(scroll, childNode, elementMatchers, textMatchers, nodeMatches);\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce((reducedDelta, matcher) => {\n          return matcher(childNode, reducedDelta, scroll);\n        }, childrenDelta);\n        childrenDelta = (nodeMatches.get(childNode) || []).reduce((reducedDelta, matcher) => {\n          return matcher(childNode, reducedDelta, scroll);\n        }, childrenDelta);\n      }\n      return delta.concat(childrenDelta);\n    }, new Delta());\n  }\n  return new Delta();\n}\nfunction createMatchAlias(format) {\n  return (_node, delta, scroll) => {\n    return applyFormat(delta, format, true, scroll);\n  };\n}\nfunction matchAttributor(node, delta, scroll) {\n  const attributes = Attributor.keys(node);\n  const classes = ClassAttributor.keys(node);\n  const styles = StyleAttributor.keys(node);\n  const formats = {};\n  attributes.concat(classes).concat(styles).forEach(name => {\n    let attr = scroll.query(name, Scope.ATTRIBUTE);\n    if (attr != null) {\n      formats[attr.attrName] = attr.value(node);\n      if (formats[attr.attrName]) return;\n    }\n    attr = ATTRIBUTE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n    attr = STYLE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      attr = STYLE_ATTRIBUTORS[name];\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n  });\n  return Object.entries(formats).reduce((newDelta, _ref4) => {\n    let [name, value] = _ref4;\n    return applyFormat(newDelta, name, value, scroll);\n  }, delta);\n}\nfunction matchBlot(node, delta, scroll) {\n  const match = scroll.query(node);\n  if (match == null) return delta;\n  // @ts-expect-error\n  if (match.prototype instanceof EmbedBlot) {\n    const embed = {};\n    // @ts-expect-error\n    const value = match.value(node);\n    if (value != null) {\n      // @ts-expect-error\n      embed[match.blotName] = value;\n      // @ts-expect-error\n      return new Delta().insert(embed, match.formats(node, scroll));\n    }\n  } else {\n    // @ts-expect-error\n    if (match.prototype instanceof BlockBlot && !deltaEndsWith(delta, '\\n')) {\n      delta.insert('\\n');\n    }\n    if ('blotName' in match && 'formats' in match && typeof match.formats === 'function') {\n      return applyFormat(delta, match.blotName, match.formats(node, scroll), scroll);\n    }\n  }\n  return delta;\n}\nfunction matchBreak(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n  return delta;\n}\nfunction matchCodeBlock(node, delta, scroll) {\n  const match = scroll.query('code-block');\n  const language = match && 'formats' in match && typeof match.formats === 'function' ? match.formats(node, scroll) : true;\n  return applyFormat(delta, 'code-block', language, scroll);\n}\nfunction matchIgnore() {\n  return new Delta();\n}\nfunction matchIndent(node, delta, scroll) {\n  const match = scroll.query(node);\n  if (match == null ||\n  // @ts-expect-error\n  match.blotName !== 'list' || !deltaEndsWith(delta, '\\n')) {\n    return delta;\n  }\n  let indent = -1;\n  let parent = node.parentNode;\n  while (parent != null) {\n    // @ts-expect-error\n    if (['OL', 'UL'].includes(parent.tagName)) {\n      indent += 1;\n    }\n    parent = parent.parentNode;\n  }\n  if (indent <= 0) return delta;\n  return delta.reduce((composed, op) => {\n    if (!op.insert) return composed;\n    if (op.attributes && typeof op.attributes.indent === 'number') {\n      return composed.push(op);\n    }\n    return composed.insert(op.insert, {\n      indent,\n      ...(op.attributes || {})\n    });\n  }, new Delta());\n}\nfunction matchList(node, delta, scroll) {\n  const element = node;\n  let list = element.tagName === 'OL' ? 'ordered' : 'bullet';\n  const checkedAttr = element.getAttribute('data-checked');\n  if (checkedAttr) {\n    list = checkedAttr === 'true' ? 'checked' : 'unchecked';\n  }\n  return applyFormat(delta, 'list', list, scroll);\n}\nfunction matchNewline(node, delta, scroll) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (isLine(node, scroll) && (node.childNodes.length > 0 || node instanceof HTMLParagraphElement)) {\n      return delta.insert('\\n');\n    }\n    if (delta.length() > 0 && node.nextSibling) {\n      let nextSibling = node.nextSibling;\n      while (nextSibling != null) {\n        if (isLine(nextSibling, scroll)) {\n          return delta.insert('\\n');\n        }\n        const match = scroll.query(nextSibling);\n        // @ts-expect-error\n        if (match && match.prototype instanceof BlockEmbed) {\n          return delta.insert('\\n');\n        }\n        nextSibling = nextSibling.firstChild;\n      }\n    }\n  }\n  return delta;\n}\nfunction matchStyles(node, delta, scroll) {\n  const formats = {};\n  const style = node.style || {};\n  if (style.fontStyle === 'italic') {\n    formats.italic = true;\n  }\n  if (style.textDecoration === 'underline') {\n    formats.underline = true;\n  }\n  if (style.textDecoration === 'line-through') {\n    formats.strike = true;\n  }\n  if (style.fontWeight?.startsWith('bold') ||\n  // @ts-expect-error Fix me later\n  parseInt(style.fontWeight, 10) >= 700) {\n    formats.bold = true;\n  }\n  delta = Object.entries(formats).reduce((newDelta, _ref5) => {\n    let [name, value] = _ref5;\n    return applyFormat(newDelta, name, value, scroll);\n  }, delta);\n  // @ts-expect-error\n  if (parseFloat(style.textIndent || 0) > 0) {\n    // Could be 0.5in\n    return new Delta().insert('\\t').concat(delta);\n  }\n  return delta;\n}\nfunction matchTable(node, delta, scroll) {\n  const table = node.parentElement?.tagName === 'TABLE' ? node.parentElement : node.parentElement?.parentElement;\n  if (table != null) {\n    const rows = Array.from(table.querySelectorAll('tr'));\n    const row = rows.indexOf(node) + 1;\n    return applyFormat(delta, 'table', row, scroll);\n  }\n  return delta;\n}\nfunction matchText(node, delta, scroll) {\n  // @ts-expect-error\n  let text = node.data;\n  // Word represents empty line with <o:p>&nbsp;</o:p>\n  if (node.parentElement?.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n  if (!isPre(node)) {\n    if (text.trim().length === 0 && text.includes('\\n') && !isBetweenInlineElements(node, scroll)) {\n      return delta;\n    }\n    // convert all non-nbsp whitespace into regular space\n    text = text.replace(/[^\\S\\u00a0]/g, ' ');\n    // collapse consecutive spaces into one\n    text = text.replace(/ {2,}/g, ' ');\n    if (node.previousSibling == null && node.parentElement != null && isLine(node.parentElement, scroll) || node.previousSibling instanceof Element && isLine(node.previousSibling, scroll)) {\n      // block structure means we don't need leading space\n      text = text.replace(/^ /, '');\n    }\n    if (node.nextSibling == null && node.parentElement != null && isLine(node.parentElement, scroll) || node.nextSibling instanceof Element && isLine(node.nextSibling, scroll)) {\n      // block structure means we don't need trailing space\n      text = text.replace(/ $/, '');\n    }\n    // done removing whitespace and can normalize all to regular space\n    text = text.replaceAll('\\u00a0', ' ');\n  }\n  return delta.insert(text);\n}\nexport { Clipboard as default, matchAttributor, matchBlot, matchNewline, matchText, traverse };\n//# sourceMappingURL=clipboard.js.map","import { Scope } from 'parchment';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nclass History extends Module {\n  static DEFAULTS = {\n    delay: 1000,\n    maxStack: 100,\n    userOnly: false\n  };\n  lastRecorded = 0;\n  ignoreChange = false;\n  stack = {\n    undo: [],\n    redo: []\n  };\n  currentRange = null;\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill.on(Quill.events.EDITOR_CHANGE, (eventName, value, oldValue, source) => {\n      if (eventName === Quill.events.SELECTION_CHANGE) {\n        if (value && source !== Quill.sources.SILENT) {\n          this.currentRange = value;\n        }\n      } else if (eventName === Quill.events.TEXT_CHANGE) {\n        if (!this.ignoreChange) {\n          if (!this.options.userOnly || source === Quill.sources.USER) {\n            this.record(value, oldValue);\n          } else {\n            this.transform(value);\n          }\n        }\n        this.currentRange = transformRange(this.currentRange, value);\n      }\n    });\n    this.quill.keyboard.addBinding({\n      key: 'z',\n      shortKey: true\n    }, this.undo.bind(this));\n    this.quill.keyboard.addBinding({\n      key: ['z', 'Z'],\n      shortKey: true,\n      shiftKey: true\n    }, this.redo.bind(this));\n    if (/Win/i.test(navigator.platform)) {\n      this.quill.keyboard.addBinding({\n        key: 'y',\n        shortKey: true\n      }, this.redo.bind(this));\n    }\n    this.quill.root.addEventListener('beforeinput', event => {\n      if (event.inputType === 'historyUndo') {\n        this.undo();\n        event.preventDefault();\n      } else if (event.inputType === 'historyRedo') {\n        this.redo();\n        event.preventDefault();\n      }\n    });\n  }\n  change(source, dest) {\n    if (this.stack[source].length === 0) return;\n    const item = this.stack[source].pop();\n    if (!item) return;\n    const base = this.quill.getContents();\n    const inverseDelta = item.delta.invert(base);\n    this.stack[dest].push({\n      delta: inverseDelta,\n      range: transformRange(item.range, inverseDelta)\n    });\n    this.lastRecorded = 0;\n    this.ignoreChange = true;\n    this.quill.updateContents(item.delta, Quill.sources.USER);\n    this.ignoreChange = false;\n    this.restoreSelection(item);\n  }\n  clear() {\n    this.stack = {\n      undo: [],\n      redo: []\n    };\n  }\n  cutoff() {\n    this.lastRecorded = 0;\n  }\n  record(changeDelta, oldDelta) {\n    if (changeDelta.ops.length === 0) return;\n    this.stack.redo = [];\n    let undoDelta = changeDelta.invert(oldDelta);\n    let undoRange = this.currentRange;\n    const timestamp = Date.now();\n    if (\n    // @ts-expect-error Fix me later\n    this.lastRecorded + this.options.delay > timestamp && this.stack.undo.length > 0) {\n      const item = this.stack.undo.pop();\n      if (item) {\n        undoDelta = undoDelta.compose(item.delta);\n        undoRange = item.range;\n      }\n    } else {\n      this.lastRecorded = timestamp;\n    }\n    if (undoDelta.length() === 0) return;\n    this.stack.undo.push({\n      delta: undoDelta,\n      range: undoRange\n    });\n    // @ts-expect-error Fix me later\n    if (this.stack.undo.length > this.options.maxStack) {\n      this.stack.undo.shift();\n    }\n  }\n  redo() {\n    this.change('redo', 'undo');\n  }\n  transform(delta) {\n    transformStack(this.stack.undo, delta);\n    transformStack(this.stack.redo, delta);\n  }\n  undo() {\n    this.change('undo', 'redo');\n  }\n  restoreSelection(stackItem) {\n    if (stackItem.range) {\n      this.quill.setSelection(stackItem.range, Quill.sources.USER);\n    } else {\n      const index = getLastChangeIndex(this.quill.scroll, stackItem.delta);\n      this.quill.setSelection(index, Quill.sources.USER);\n    }\n  }\n}\nfunction transformStack(stack, delta) {\n  let remoteDelta = delta;\n  for (let i = stack.length - 1; i >= 0; i -= 1) {\n    const oldItem = stack[i];\n    stack[i] = {\n      delta: remoteDelta.transform(oldItem.delta, true),\n      range: oldItem.range && transformRange(oldItem.range, remoteDelta)\n    };\n    remoteDelta = oldItem.delta.transform(remoteDelta);\n    if (stack[i].delta.length() === 0) {\n      stack.splice(i, 1);\n    }\n  }\n}\nfunction endsWithNewlineChange(scroll, delta) {\n  const lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\n  }\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some(attr => {\n      return scroll.query(attr, Scope.BLOCK) != null;\n    });\n  }\n  return false;\n}\nfunction getLastChangeIndex(scroll, delta) {\n  const deleteLength = delta.reduce((length, op) => {\n    return length + (op.delete || 0);\n  }, 0);\n  let changeIndex = delta.length() - deleteLength;\n  if (endsWithNewlineChange(scroll, delta)) {\n    changeIndex -= 1;\n  }\n  return changeIndex;\n}\nfunction transformRange(range, delta) {\n  if (!range) return range;\n  const start = delta.transformPosition(range.index);\n  const end = delta.transformPosition(range.index + range.length);\n  return {\n    index: start,\n    length: end - start\n  };\n}\nexport { History as default, getLastChangeIndex };\n//# sourceMappingURL=history.js.map","import Delta from 'quill-delta';\nimport Emitter from '../core/emitter.js';\nimport Module from '../core/module.js';\nclass Uploader extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    quill.root.addEventListener('drop', e => {\n      e.preventDefault();\n      let native = null;\n      if (document.caretRangeFromPoint) {\n        native = document.caretRangeFromPoint(e.clientX, e.clientY);\n        // @ts-expect-error\n      } else if (document.caretPositionFromPoint) {\n        // @ts-expect-error\n        const position = document.caretPositionFromPoint(e.clientX, e.clientY);\n        native = document.createRange();\n        native.setStart(position.offsetNode, position.offset);\n        native.setEnd(position.offsetNode, position.offset);\n      }\n      const normalized = native && quill.selection.normalizeNative(native);\n      if (normalized) {\n        const range = quill.selection.normalizedToRange(normalized);\n        if (e.dataTransfer?.files) {\n          this.upload(range, e.dataTransfer.files);\n        }\n      }\n    });\n  }\n  upload(range, files) {\n    const uploads = [];\n    Array.from(files).forEach(file => {\n      if (file && this.options.mimetypes?.includes(file.type)) {\n        uploads.push(file);\n      }\n    });\n    if (uploads.length > 0) {\n      // @ts-expect-error Fix me later\n      this.options.handler.call(this, range, uploads);\n    }\n  }\n}\nUploader.DEFAULTS = {\n  mimetypes: ['image/png', 'image/jpeg'],\n  handler(range, files) {\n    if (!this.quill.scroll.query('image')) {\n      return;\n    }\n    const promises = files.map(file => {\n      return new Promise(resolve => {\n        const reader = new FileReader();\n        reader.onload = () => {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(file);\n      });\n    });\n    Promise.all(promises).then(images => {\n      const update = images.reduce((delta, image) => {\n        return delta.insert({\n          image\n        });\n      }, new Delta().retain(range.index).delete(range.length));\n      this.quill.updateContents(update, Emitter.sources.USER);\n      this.quill.setSelection(range.index + images.length, Emitter.sources.SILENT);\n    });\n  }\n};\nexport default Uploader;\n//# sourceMappingURL=uploader.js.map","import Delta from 'quill-delta';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport { deleteRange } from './keyboard.js';\nconst INSERT_TYPES = ['insertText', 'insertReplacementText'];\nclass Input extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    quill.root.addEventListener('beforeinput', event => {\n      this.handleBeforeInput(event);\n    });\n\n    // Gboard with English input on Android triggers `compositionstart` sometimes even\n    // users are not going to type anything.\n    if (!/Android/i.test(navigator.userAgent)) {\n      quill.on(Quill.events.COMPOSITION_BEFORE_START, () => {\n        this.handleCompositionStart();\n      });\n    }\n  }\n  deleteRange(range) {\n    deleteRange({\n      range,\n      quill: this.quill\n    });\n  }\n  replaceText(range) {\n    let text = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    if (range.length === 0) return false;\n    if (text) {\n      // Follow the native behavior that inherits the formats of the first character\n      const formats = this.quill.getFormat(range.index, 1);\n      this.deleteRange(range);\n      this.quill.updateContents(new Delta().retain(range.index).insert(text, formats), Quill.sources.USER);\n    } else {\n      this.deleteRange(range);\n    }\n    this.quill.setSelection(range.index + text.length, 0, Quill.sources.SILENT);\n    return true;\n  }\n  handleBeforeInput(event) {\n    if (this.quill.composition.isComposing || event.defaultPrevented || !INSERT_TYPES.includes(event.inputType)) {\n      return;\n    }\n    const staticRange = event.getTargetRanges ? event.getTargetRanges()[0] : null;\n    if (!staticRange || staticRange.collapsed === true) {\n      return;\n    }\n    const text = getPlainTextFromInputEvent(event);\n    if (text == null) {\n      return;\n    }\n    const normalized = this.quill.selection.normalizeNative(staticRange);\n    const range = normalized ? this.quill.selection.normalizedToRange(normalized) : null;\n    if (range && this.replaceText(range, text)) {\n      event.preventDefault();\n    }\n  }\n  handleCompositionStart() {\n    const range = this.quill.getSelection();\n    if (range) {\n      this.replaceText(range);\n    }\n  }\n}\nfunction getPlainTextFromInputEvent(event) {\n  // When `inputType` is \"insertText\":\n  // - `event.data` should be string (Safari uses `event.dataTransfer`).\n  // - `event.dataTransfer` should be null.\n  // When `inputType` is \"insertReplacementText\":\n  // - `event.data` should be null.\n  // - `event.dataTransfer` should contain \"text/plain\" data.\n\n  if (typeof event.data === 'string') {\n    return event.data;\n  }\n  if (event.dataTransfer?.types.includes('text/plain')) {\n    return event.dataTransfer.getData('text/plain');\n  }\n  return null;\n}\nexport default Input;\n//# sourceMappingURL=input.js.map","import { ParentBlot } from 'parchment';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nconst isMac = /Mac/i.test(navigator.platform);\n\n// Export for testing\nexport const TTL_FOR_VALID_SELECTION_CHANGE = 100;\n\n// A loose check to determine if the shortcut can move the caret before a UI node:\n// <ANY_PARENT>[CARET]<div class=\"ql-ui\"></div>[CONTENT]</ANY_PARENT>\nconst canMoveCaretBeforeUINode = event => {\n  if (event.key === 'ArrowLeft' || event.key === 'ArrowRight' ||\n  // RTL scripts or moving from the end of the previous line\n  event.key === 'ArrowUp' || event.key === 'ArrowDown' || event.key === 'Home') {\n    return true;\n  }\n  if (isMac && event.key === 'a' && event.ctrlKey === true) {\n    return true;\n  }\n  return false;\n};\nclass UINode extends Module {\n  isListening = false;\n  selectionChangeDeadline = 0;\n  constructor(quill, options) {\n    super(quill, options);\n    this.handleArrowKeys();\n    this.handleNavigationShortcuts();\n  }\n  handleArrowKeys() {\n    this.quill.keyboard.addBinding({\n      key: ['ArrowLeft', 'ArrowRight'],\n      offset: 0,\n      shiftKey: null,\n      handler(range, _ref) {\n        let {\n          line,\n          event\n        } = _ref;\n        if (!(line instanceof ParentBlot) || !line.uiNode) {\n          return true;\n        }\n        const isRTL = getComputedStyle(line.domNode)['direction'] === 'rtl';\n        if (isRTL && event.key !== 'ArrowRight' || !isRTL && event.key !== 'ArrowLeft') {\n          return true;\n        }\n        this.quill.setSelection(range.index - 1, range.length + (event.shiftKey ? 1 : 0), Quill.sources.USER);\n        return false;\n      }\n    });\n  }\n  handleNavigationShortcuts() {\n    this.quill.root.addEventListener('keydown', event => {\n      if (!event.defaultPrevented && canMoveCaretBeforeUINode(event)) {\n        this.ensureListeningToSelectionChange();\n      }\n    });\n  }\n\n  /**\n   * We only listen to the `selectionchange` event when\n   * there is an intention of moving the caret to the beginning using shortcuts.\n   * This is primarily implemented to prevent infinite loops, as we are changing\n   * the selection within the handler of a `selectionchange` event.\n   */\n  ensureListeningToSelectionChange() {\n    this.selectionChangeDeadline = Date.now() + TTL_FOR_VALID_SELECTION_CHANGE;\n    if (this.isListening) return;\n    this.isListening = true;\n    const listener = () => {\n      this.isListening = false;\n      if (Date.now() <= this.selectionChangeDeadline) {\n        this.handleSelectionChange();\n      }\n    };\n    document.addEventListener('selectionchange', listener, {\n      once: true\n    });\n  }\n  handleSelectionChange() {\n    const selection = document.getSelection();\n    if (!selection) return;\n    const range = selection.getRangeAt(0);\n    if (range.collapsed !== true || range.startOffset !== 0) return;\n    const line = this.quill.scroll.find(range.startContainer);\n    if (!(line instanceof ParentBlot) || !line.uiNode) return;\n    const newRange = document.createRange();\n    newRange.setStartAfter(line.uiNode);\n    newRange.setEndAfter(line.uiNode);\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n}\nexport default UINode;\n//# sourceMappingURL=uiNode.js.map","import Quill, { Parchment, Range } from './core/quill.js';\nimport Block, { BlockEmbed } from './blots/block.js';\nimport Break from './blots/break.js';\nimport Container from './blots/container.js';\nimport Cursor from './blots/cursor.js';\nimport Embed from './blots/embed.js';\nimport Inline from './blots/inline.js';\nimport Scroll from './blots/scroll.js';\nimport TextBlot from './blots/text.js';\nimport Clipboard from './modules/clipboard.js';\nimport History from './modules/history.js';\nimport Keyboard from './modules/keyboard.js';\nimport Uploader from './modules/uploader.js';\nimport Delta, { Op, OpIterator, AttributeMap } from 'quill-delta';\nimport Input from './modules/input.js';\nimport UINode from './modules/uiNode.js';\nexport { default as Module } from './core/module.js';\nexport { Delta, Op, OpIterator, AttributeMap, Parchment, Range };\nQuill.register({\n  'blots/block': Block,\n  'blots/block/embed': BlockEmbed,\n  'blots/break': Break,\n  'blots/container': Container,\n  'blots/cursor': Cursor,\n  'blots/embed': Embed,\n  'blots/inline': Inline,\n  'blots/scroll': Scroll,\n  'blots/text': TextBlot,\n  'modules/clipboard': Clipboard,\n  'modules/history': History,\n  'modules/keyboard': Keyboard,\n  'modules/uploader': Uploader,\n  'modules/input': Input,\n  'modules/uiNode': UINode\n});\nexport default Quill;\n//# sourceMappingURL=core.js.map","import { ClassAttributor, Scope } from 'parchment';\nclass IndentAttributor extends ClassAttributor {\n  add(node, value) {\n    let normalizedValue = 0;\n    if (value === '+1' || value === '-1') {\n      const indent = this.value(node) || 0;\n      normalizedValue = value === '+1' ? indent + 1 : indent - 1;\n    } else if (typeof value === 'number') {\n      normalizedValue = value;\n    }\n    if (normalizedValue === 0) {\n      this.remove(node);\n      return true;\n    }\n    return super.add(node, normalizedValue.toString());\n  }\n  canAdd(node, value) {\n    return super.canAdd(node, value) || super.canAdd(node, parseInt(value, 10));\n  }\n  value(node) {\n    return parseInt(super.value(node), 10) || undefined; // Don't return NaN\n  }\n}\nconst IndentClass = new IndentAttributor('indent', 'ql-indent', {\n  scope: Scope.BLOCK,\n  // @ts-expect-error\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8]\n});\nexport default IndentClass;\n//# sourceMappingURL=indent.js.map","import Block from '../blots/block.js';\nclass Blockquote extends Block {\n  static blotName = 'blockquote';\n  static tagName = 'blockquote';\n}\nexport default Blockquote;\n//# sourceMappingURL=blockquote.js.map","import Block from '../blots/block.js';\nclass Header extends Block {\n  static blotName = 'header';\n  static tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n  static formats(domNode) {\n    return this.tagName.indexOf(domNode.tagName) + 1;\n  }\n}\nexport default Header;\n//# sourceMappingURL=header.js.map","import Block from '../blots/block.js';\nimport Container from '../blots/container.js';\nimport Quill from '../core/quill.js';\nclass ListContainer extends Container {}\nListContainer.blotName = 'list-container';\nListContainer.tagName = 'OL';\nclass ListItem extends Block {\n  static create(value) {\n    const node = super.create();\n    node.setAttribute('data-list', value);\n    return node;\n  }\n  static formats(domNode) {\n    return domNode.getAttribute('data-list') || undefined;\n  }\n  static register() {\n    Quill.register(ListContainer);\n  }\n  constructor(scroll, domNode) {\n    super(scroll, domNode);\n    const ui = domNode.ownerDocument.createElement('span');\n    const listEventHandler = e => {\n      if (!scroll.isEnabled()) return;\n      const format = this.statics.formats(domNode, scroll);\n      if (format === 'checked') {\n        this.format('list', 'unchecked');\n        e.preventDefault();\n      } else if (format === 'unchecked') {\n        this.format('list', 'checked');\n        e.preventDefault();\n      }\n    };\n    ui.addEventListener('mousedown', listEventHandler);\n    ui.addEventListener('touchstart', listEventHandler);\n    this.attachUI(ui);\n  }\n  format(name, value) {\n    if (name === this.statics.blotName && value) {\n      this.domNode.setAttribute('data-list', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nListItem.blotName = 'list';\nListItem.tagName = 'LI';\nListContainer.allowedChildren = [ListItem];\nListItem.requiredContainer = ListContainer;\nexport { ListContainer, ListItem as default };\n//# sourceMappingURL=list.js.map","import Inline from '../blots/inline.js';\nclass Bold extends Inline {\n  static blotName = 'bold';\n  static tagName = ['STRONG', 'B'];\n  static create() {\n    return super.create();\n  }\n  static formats() {\n    return true;\n  }\n  optimize(context) {\n    super.optimize(context);\n    if (this.domNode.tagName !== this.statics.tagName[0]) {\n      this.replaceWith(this.statics.blotName);\n    }\n  }\n}\nexport default Bold;\n//# sourceMappingURL=bold.js.map","import Bold from './bold.js';\nclass Italic extends Bold {\n  static blotName = 'italic';\n  static tagName = ['EM', 'I'];\n}\nexport default Italic;\n//# sourceMappingURL=italic.js.map","import Inline from '../blots/inline.js';\nclass Link extends Inline {\n  static blotName = 'link';\n  static tagName = 'A';\n  static SANITIZED_URL = 'about:blank';\n  static PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel', 'sms'];\n  static create(value) {\n    const node = super.create(value);\n    node.setAttribute('href', this.sanitize(value));\n    node.setAttribute('rel', 'noopener noreferrer');\n    node.setAttribute('target', '_blank');\n    return node;\n  }\n  static formats(domNode) {\n    return domNode.getAttribute('href');\n  }\n  static sanitize(url) {\n    return sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\n  }\n  format(name, value) {\n    if (name !== this.statics.blotName || !value) {\n      super.format(name, value);\n    } else {\n      // @ts-expect-error\n      this.domNode.setAttribute('href', this.constructor.sanitize(value));\n    }\n  }\n}\nfunction sanitize(url, protocols) {\n  const anchor = document.createElement('a');\n  anchor.href = url;\n  const protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\n  return protocols.indexOf(protocol) > -1;\n}\nexport { Link as default, sanitize };\n//# sourceMappingURL=link.js.map","import Inline from '../blots/inline.js';\nclass Script extends Inline {\n  static blotName = 'script';\n  static tagName = ['SUB', 'SUP'];\n  static create(value) {\n    if (value === 'super') {\n      return document.createElement('sup');\n    }\n    if (value === 'sub') {\n      return document.createElement('sub');\n    }\n    return super.create(value);\n  }\n  static formats(domNode) {\n    if (domNode.tagName === 'SUB') return 'sub';\n    if (domNode.tagName === 'SUP') return 'super';\n    return undefined;\n  }\n}\nexport default Script;\n//# sourceMappingURL=script.js.map","import Bold from './bold.js';\nclass Strike extends Bold {\n  static blotName = 'strike';\n  static tagName = ['S', 'STRIKE'];\n}\nexport default Strike;\n//# sourceMappingURL=strike.js.map","import Inline from '../blots/inline.js';\nclass Underline extends Inline {\n  static blotName = 'underline';\n  static tagName = 'U';\n}\nexport default Underline;\n//# sourceMappingURL=underline.js.map","import Embed from '../blots/embed.js';\nclass Formula extends Embed {\n  static blotName = 'formula';\n  static className = 'ql-formula';\n  static tagName = 'SPAN';\n  static create(value) {\n    // @ts-expect-error\n    if (window.katex == null) {\n      throw new Error('Formula module requires KaTeX.');\n    }\n    const node = super.create(value);\n    if (typeof value === 'string') {\n      // @ts-expect-error\n      window.katex.render(value, node, {\n        throwOnError: false,\n        errorColor: '#f00'\n      });\n      node.setAttribute('data-value', value);\n    }\n    return node;\n  }\n  static value(domNode) {\n    return domNode.getAttribute('data-value');\n  }\n  html() {\n    const {\n      formula\n    } = this.value();\n    return `<span>${formula}</span>`;\n  }\n}\nexport default Formula;\n//# sourceMappingURL=formula.js.map","import { EmbedBlot } from 'parchment';\nimport { sanitize } from './link.js';\nconst ATTRIBUTES = ['alt', 'height', 'width'];\nclass Image extends EmbedBlot {\n  static blotName = 'image';\n  static tagName = 'IMG';\n  static create(value) {\n    const node = super.create(value);\n    if (typeof value === 'string') {\n      node.setAttribute('src', this.sanitize(value));\n    }\n    return node;\n  }\n  static formats(domNode) {\n    return ATTRIBUTES.reduce((formats, attribute) => {\n      if (domNode.hasAttribute(attribute)) {\n        formats[attribute] = domNode.getAttribute(attribute);\n      }\n      return formats;\n    }, {});\n  }\n  static match(url) {\n    return /\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url);\n  }\n  static sanitize(url) {\n    return sanitize(url, ['http', 'https', 'data']) ? url : '//:0';\n  }\n  static value(domNode) {\n    return domNode.getAttribute('src');\n  }\n  format(name, value) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nexport default Image;\n//# sourceMappingURL=image.js.map","import { BlockEmbed } from '../blots/block.js';\nimport Link from './link.js';\nconst ATTRIBUTES = ['height', 'width'];\nclass Video extends BlockEmbed {\n  static blotName = 'video';\n  static className = 'ql-video';\n  static tagName = 'IFRAME';\n  static create(value) {\n    const node = super.create(value);\n    node.setAttribute('frameborder', '0');\n    node.setAttribute('allowfullscreen', 'true');\n    node.setAttribute('src', this.sanitize(value));\n    return node;\n  }\n  static formats(domNode) {\n    return ATTRIBUTES.reduce((formats, attribute) => {\n      if (domNode.hasAttribute(attribute)) {\n        formats[attribute] = domNode.getAttribute(attribute);\n      }\n      return formats;\n    }, {});\n  }\n  static sanitize(url) {\n    return Link.sanitize(url);\n  }\n  static value(domNode) {\n    return domNode.getAttribute('src');\n  }\n  format(name, value) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n  html() {\n    const {\n      video\n    } = this.value();\n    return `<a href=\"${video}\">${video}</a>`;\n  }\n}\nexport default Video;\n//# sourceMappingURL=video.js.map","import Delta from 'quill-delta';\nimport { ClassAttributor, Scope } from 'parchment';\nimport Inline from '../blots/inline.js';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport { blockDelta } from '../blots/block.js';\nimport BreakBlot from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport CodeBlock, { CodeBlockContainer } from '../formats/code.js';\nimport { traverse } from './clipboard.js';\nconst TokenAttributor = new ClassAttributor('code-token', 'hljs', {\n  scope: Scope.INLINE\n});\nclass CodeToken extends Inline {\n  static formats(node, scroll) {\n    while (node != null && node !== scroll.domNode) {\n      if (node.classList && node.classList.contains(CodeBlock.className)) {\n        // @ts-expect-error\n        return super.formats(node, scroll);\n      }\n      // @ts-expect-error\n      node = node.parentNode;\n    }\n    return undefined;\n  }\n  constructor(scroll, domNode, value) {\n    // @ts-expect-error\n    super(scroll, domNode, value);\n    TokenAttributor.add(this.domNode, value);\n  }\n  format(format, value) {\n    if (format !== CodeToken.blotName) {\n      super.format(format, value);\n    } else if (value) {\n      TokenAttributor.add(this.domNode, value);\n    } else {\n      TokenAttributor.remove(this.domNode);\n      this.domNode.classList.remove(this.statics.className);\n    }\n  }\n  optimize() {\n    // @ts-expect-error\n    super.optimize(...arguments);\n    if (!TokenAttributor.value(this.domNode)) {\n      this.unwrap();\n    }\n  }\n}\nCodeToken.blotName = 'code-token';\nCodeToken.className = 'ql-token';\nclass SyntaxCodeBlock extends CodeBlock {\n  static create(value) {\n    const domNode = super.create(value);\n    if (typeof value === 'string') {\n      domNode.setAttribute('data-language', value);\n    }\n    return domNode;\n  }\n  static formats(domNode) {\n    // @ts-expect-error\n    return domNode.getAttribute('data-language') || 'plain';\n  }\n  static register() {} // Syntax module will register\n\n  format(name, value) {\n    if (name === this.statics.blotName && value) {\n      // @ts-expect-error\n      this.domNode.setAttribute('data-language', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n  replaceWith(name, value) {\n    this.formatAt(0, this.length(), CodeToken.blotName, false);\n    return super.replaceWith(name, value);\n  }\n}\nclass SyntaxCodeBlockContainer extends CodeBlockContainer {\n  attach() {\n    super.attach();\n    this.forceNext = false;\n    // @ts-expect-error\n    this.scroll.emitMount(this);\n  }\n  format(name, value) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n      this.children.forEach(child => {\n        // @ts-expect-error\n        child.format(name, value);\n      });\n    }\n  }\n  formatAt(index, length, name, value) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n    }\n    super.formatAt(index, length, name, value);\n  }\n  highlight(highlight) {\n    let forced = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (this.children.head == null) return;\n    const nodes = Array.from(this.domNode.childNodes).filter(node => node !== this.uiNode);\n    const text = `${nodes.map(node => node.textContent).join('\\n')}\\n`;\n    const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n    if (forced || this.forceNext || this.cachedText !== text) {\n      if (text.trim().length > 0 || this.cachedText == null) {\n        const oldDelta = this.children.reduce((delta, child) => {\n          // @ts-expect-error\n          return delta.concat(blockDelta(child, false));\n        }, new Delta());\n        const delta = highlight(text, language);\n        oldDelta.diff(delta).reduce((index, _ref) => {\n          let {\n            retain,\n            attributes\n          } = _ref;\n          // Should be all retains\n          if (!retain) return index;\n          if (attributes) {\n            Object.keys(attributes).forEach(format => {\n              if ([SyntaxCodeBlock.blotName, CodeToken.blotName].includes(format)) {\n                // @ts-expect-error\n                this.formatAt(index, retain, format, attributes[format]);\n              }\n            });\n          }\n          // @ts-expect-error\n          return index + retain;\n        }, 0);\n      }\n      this.cachedText = text;\n      this.forceNext = false;\n    }\n  }\n  html(index, length) {\n    const [codeBlock] = this.children.find(index);\n    const language = codeBlock ? SyntaxCodeBlock.formats(codeBlock.domNode) : 'plain';\n    return `<pre data-language=\"${language}\">\\n${escapeText(this.code(index, length))}\\n</pre>`;\n  }\n  optimize(context) {\n    super.optimize(context);\n    if (this.parent != null && this.children.head != null && this.uiNode != null) {\n      const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n      // @ts-expect-error\n      if (language !== this.uiNode.value) {\n        // @ts-expect-error\n        this.uiNode.value = language;\n      }\n    }\n  }\n}\nSyntaxCodeBlockContainer.allowedChildren = [SyntaxCodeBlock];\nSyntaxCodeBlock.requiredContainer = SyntaxCodeBlockContainer;\nSyntaxCodeBlock.allowedChildren = [CodeToken, CursorBlot, TextBlot, BreakBlot];\nconst highlight = (lib, language, text) => {\n  if (typeof lib.versionString === 'string') {\n    const majorVersion = lib.versionString.split('.')[0];\n    if (parseInt(majorVersion, 10) >= 11) {\n      return lib.highlight(text, {\n        language\n      }).value;\n    }\n  }\n  return lib.highlight(language, text).value;\n};\nclass Syntax extends Module {\n  static register() {\n    Quill.register(CodeToken, true);\n    Quill.register(SyntaxCodeBlock, true);\n    Quill.register(SyntaxCodeBlockContainer, true);\n  }\n  constructor(quill, options) {\n    super(quill, options);\n    if (this.options.hljs == null) {\n      throw new Error('Syntax module requires highlight.js. Please include the library on the page before Quill.');\n    }\n    // @ts-expect-error Fix me later\n    this.languages = this.options.languages.reduce((memo, _ref2) => {\n      let {\n        key\n      } = _ref2;\n      memo[key] = true;\n      return memo;\n    }, {});\n    this.highlightBlot = this.highlightBlot.bind(this);\n    this.initListener();\n    this.initTimer();\n  }\n  initListener() {\n    this.quill.on(Quill.events.SCROLL_BLOT_MOUNT, blot => {\n      if (!(blot instanceof SyntaxCodeBlockContainer)) return;\n      const select = this.quill.root.ownerDocument.createElement('select');\n      // @ts-expect-error Fix me later\n      this.options.languages.forEach(_ref3 => {\n        let {\n          key,\n          label\n        } = _ref3;\n        const option = select.ownerDocument.createElement('option');\n        option.textContent = label;\n        option.setAttribute('value', key);\n        select.appendChild(option);\n      });\n      select.addEventListener('change', () => {\n        blot.format(SyntaxCodeBlock.blotName, select.value);\n        this.quill.root.focus(); // Prevent scrolling\n        this.highlight(blot, true);\n      });\n      if (blot.uiNode == null) {\n        blot.attachUI(select);\n        if (blot.children.head) {\n          select.value = SyntaxCodeBlock.formats(blot.children.head.domNode);\n        }\n      }\n    });\n  }\n  initTimer() {\n    let timer = null;\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n      if (timer) {\n        clearTimeout(timer);\n      }\n      timer = setTimeout(() => {\n        this.highlight();\n        timer = null;\n      }, this.options.interval);\n    });\n  }\n  highlight() {\n    let blot = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    let force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (this.quill.selection.composing) return;\n    this.quill.update(Quill.sources.USER);\n    const range = this.quill.getSelection();\n    const blots = blot == null ? this.quill.scroll.descendants(SyntaxCodeBlockContainer) : [blot];\n    blots.forEach(container => {\n      container.highlight(this.highlightBlot, force);\n    });\n    this.quill.update(Quill.sources.SILENT);\n    if (range != null) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    }\n  }\n  highlightBlot(text) {\n    let language = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'plain';\n    language = this.languages[language] ? language : 'plain';\n    if (language === 'plain') {\n      return escapeText(text).split('\\n').reduce((delta, line, i) => {\n        if (i !== 0) {\n          delta.insert('\\n', {\n            [CodeBlock.blotName]: language\n          });\n        }\n        return delta.insert(line);\n      }, new Delta());\n    }\n    const container = this.quill.root.ownerDocument.createElement('div');\n    container.classList.add(CodeBlock.className);\n    container.innerHTML = highlight(this.options.hljs, language, text);\n    return traverse(this.quill.scroll, container, [(node, delta) => {\n      // @ts-expect-error\n      const value = TokenAttributor.value(node);\n      if (value) {\n        return delta.compose(new Delta().retain(delta.length(), {\n          [CodeToken.blotName]: value\n        }));\n      }\n      return delta;\n    }], [(node, delta) => {\n      // @ts-expect-error\n      return node.data.split('\\n').reduce((memo, nodeText, i) => {\n        if (i !== 0) memo.insert('\\n', {\n          [CodeBlock.blotName]: language\n        });\n        return memo.insert(nodeText);\n      }, delta);\n    }], new WeakMap());\n  }\n}\nSyntax.DEFAULTS = {\n  hljs: (() => {\n    return window.hljs;\n  })(),\n  interval: 1000,\n  languages: [{\n    key: 'plain',\n    label: 'Plain'\n  }, {\n    key: 'bash',\n    label: 'Bash'\n  }, {\n    key: 'cpp',\n    label: 'C++'\n  }, {\n    key: 'cs',\n    label: 'C#'\n  }, {\n    key: 'css',\n    label: 'CSS'\n  }, {\n    key: 'diff',\n    label: 'Diff'\n  }, {\n    key: 'xml',\n    label: 'HTML/XML'\n  }, {\n    key: 'java',\n    label: 'Java'\n  }, {\n    key: 'javascript',\n    label: 'JavaScript'\n  }, {\n    key: 'markdown',\n    label: 'Markdown'\n  }, {\n    key: 'php',\n    label: 'PHP'\n  }, {\n    key: 'python',\n    label: 'Python'\n  }, {\n    key: 'ruby',\n    label: 'Ruby'\n  }, {\n    key: 'sql',\n    label: 'SQL'\n  }]\n};\nexport { SyntaxCodeBlock as CodeBlock, CodeToken, Syntax as default };\n//# sourceMappingURL=syntax.js.map","import Block from '../blots/block.js';\nimport Container from '../blots/container.js';\nclass TableCell extends Block {\n  static blotName = 'table';\n  static tagName = 'TD';\n  static create(value) {\n    const node = super.create();\n    if (value) {\n      node.setAttribute('data-row', value);\n    } else {\n      node.setAttribute('data-row', tableId());\n    }\n    return node;\n  }\n  static formats(domNode) {\n    if (domNode.hasAttribute('data-row')) {\n      return domNode.getAttribute('data-row');\n    }\n    return undefined;\n  }\n  cellOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n    return -1;\n  }\n  format(name, value) {\n    if (name === TableCell.blotName && value) {\n      this.domNode.setAttribute('data-row', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n  row() {\n    return this.parent;\n  }\n  rowOffset() {\n    if (this.row()) {\n      return this.row().rowOffset();\n    }\n    return -1;\n  }\n  table() {\n    return this.row() && this.row().table();\n  }\n}\nclass TableRow extends Container {\n  static blotName = 'table-row';\n  static tagName = 'TR';\n  checkMerge() {\n    // @ts-expect-error\n    if (super.checkMerge() && this.next.children.head != null) {\n      // @ts-expect-error\n      const thisHead = this.children.head.formats();\n      // @ts-expect-error\n      const thisTail = this.children.tail.formats();\n      // @ts-expect-error\n      const nextHead = this.next.children.head.formats();\n      // @ts-expect-error\n      const nextTail = this.next.children.tail.formats();\n      return thisHead.table === thisTail.table && thisHead.table === nextHead.table && thisHead.table === nextTail.table;\n    }\n    return false;\n  }\n  optimize(context) {\n    super.optimize(context);\n    this.children.forEach(child => {\n      if (child.next == null) return;\n      const childFormats = child.formats();\n      const nextFormats = child.next.formats();\n      if (childFormats.table !== nextFormats.table) {\n        const next = this.splitAfter(child);\n        if (next) {\n          // @ts-expect-error TODO: parameters of optimize() should be a optional\n          next.optimize();\n        }\n        // We might be able to merge with prev now\n        if (this.prev) {\n          // @ts-expect-error TODO: parameters of optimize() should be a optional\n          this.prev.optimize();\n        }\n      }\n    });\n  }\n  rowOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n    return -1;\n  }\n  table() {\n    return this.parent && this.parent.parent;\n  }\n}\nclass TableBody extends Container {\n  static blotName = 'table-body';\n  static tagName = 'TBODY';\n}\nclass TableContainer extends Container {\n  static blotName = 'table-container';\n  static tagName = 'TABLE';\n  balanceCells() {\n    const rows = this.descendants(TableRow);\n    const maxColumns = rows.reduce((max, row) => {\n      return Math.max(row.children.length, max);\n    }, 0);\n    rows.forEach(row => {\n      new Array(maxColumns - row.children.length).fill(0).forEach(() => {\n        let value;\n        if (row.children.head != null) {\n          value = TableCell.formats(row.children.head.domNode);\n        }\n        const blot = this.scroll.create(TableCell.blotName, value);\n        row.appendChild(blot);\n        // @ts-expect-error TODO: parameters of optimize() should be a optional\n        blot.optimize(); // Add break blot\n      });\n    });\n  }\n  cells(column) {\n    return this.rows().map(row => row.children.at(column));\n  }\n  deleteColumn(index) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    body.children.forEach(row => {\n      const cell = row.children.at(index);\n      if (cell != null) {\n        cell.remove();\n      }\n    });\n  }\n  insertColumn(index) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    body.children.forEach(row => {\n      const ref = row.children.at(index);\n      // @ts-expect-error\n      const value = TableCell.formats(row.children.head.domNode);\n      const cell = this.scroll.create(TableCell.blotName, value);\n      row.insertBefore(cell, ref);\n    });\n  }\n  insertRow(index) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    const id = tableId();\n    const row = this.scroll.create(TableRow.blotName);\n    body.children.head.children.forEach(() => {\n      const cell = this.scroll.create(TableCell.blotName, id);\n      row.appendChild(cell);\n    });\n    const ref = body.children.at(index);\n    body.insertBefore(row, ref);\n  }\n  rows() {\n    const body = this.children.head;\n    if (body == null) return [];\n    return body.children.map(row => row);\n  }\n}\nTableContainer.allowedChildren = [TableBody];\nTableBody.requiredContainer = TableContainer;\nTableBody.allowedChildren = [TableRow];\nTableRow.requiredContainer = TableBody;\nTableRow.allowedChildren = [TableCell];\nTableCell.requiredContainer = TableRow;\nfunction tableId() {\n  const id = Math.random().toString(36).slice(2, 6);\n  return `row-${id}`;\n}\nexport { TableCell, TableRow, TableBody, TableContainer, tableId };\n//# sourceMappingURL=table.js.map","import Delta from 'quill-delta';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport { TableCell, TableRow, TableBody, TableContainer, tableId } from '../formats/table.js';\nclass Table extends Module {\n  static register() {\n    Quill.register(TableCell);\n    Quill.register(TableRow);\n    Quill.register(TableBody);\n    Quill.register(TableContainer);\n  }\n  constructor() {\n    super(...arguments);\n    this.listenBalanceCells();\n  }\n  balanceTables() {\n    this.quill.scroll.descendants(TableContainer).forEach(table => {\n      table.balanceCells();\n    });\n  }\n  deleteColumn() {\n    const [table,, cell] = this.getTable();\n    if (cell == null) return;\n    // @ts-expect-error\n    table.deleteColumn(cell.cellOffset());\n    this.quill.update(Quill.sources.USER);\n  }\n  deleteRow() {\n    const [, row] = this.getTable();\n    if (row == null) return;\n    row.remove();\n    this.quill.update(Quill.sources.USER);\n  }\n  deleteTable() {\n    const [table] = this.getTable();\n    if (table == null) return;\n    // @ts-expect-error\n    const offset = table.offset();\n    // @ts-expect-error\n    table.remove();\n    this.quill.update(Quill.sources.USER);\n    this.quill.setSelection(offset, Quill.sources.SILENT);\n  }\n  getTable() {\n    let range = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.quill.getSelection();\n    if (range == null) return [null, null, null, -1];\n    const [cell, offset] = this.quill.getLine(range.index);\n    if (cell == null || cell.statics.blotName !== TableCell.blotName) {\n      return [null, null, null, -1];\n    }\n    const row = cell.parent;\n    const table = row.parent.parent;\n    // @ts-expect-error\n    return [table, row, cell, offset];\n  }\n  insertColumn(offset) {\n    const range = this.quill.getSelection();\n    if (!range) return;\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const column = cell.cellOffset();\n    table.insertColumn(column + offset);\n    this.quill.update(Quill.sources.USER);\n    let shift = row.rowOffset();\n    if (offset === 0) {\n      shift += 1;\n    }\n    this.quill.setSelection(range.index + shift, range.length, Quill.sources.SILENT);\n  }\n  insertColumnLeft() {\n    this.insertColumn(0);\n  }\n  insertColumnRight() {\n    this.insertColumn(1);\n  }\n  insertRow(offset) {\n    const range = this.quill.getSelection();\n    if (!range) return;\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const index = row.rowOffset();\n    table.insertRow(index + offset);\n    this.quill.update(Quill.sources.USER);\n    if (offset > 0) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    } else {\n      this.quill.setSelection(range.index + row.children.length, range.length, Quill.sources.SILENT);\n    }\n  }\n  insertRowAbove() {\n    this.insertRow(0);\n  }\n  insertRowBelow() {\n    this.insertRow(1);\n  }\n  insertTable(rows, columns) {\n    const range = this.quill.getSelection();\n    if (range == null) return;\n    const delta = new Array(rows).fill(0).reduce(memo => {\n      const text = new Array(columns).fill('\\n').join('');\n      return memo.insert(text, {\n        table: tableId()\n      });\n    }, new Delta().retain(range.index));\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index, Quill.sources.SILENT);\n    this.balanceTables();\n  }\n  listenBalanceCells() {\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, mutations => {\n      mutations.some(mutation => {\n        if (['TD', 'TR', 'TBODY', 'TABLE'].includes(mutation.target.tagName)) {\n          this.quill.once(Quill.events.TEXT_CHANGE, (delta, old, source) => {\n            if (source !== Quill.sources.USER) return;\n            this.balanceTables();\n          });\n          return true;\n        }\n        return false;\n      });\n    });\n  }\n}\nexport default Table;\n//# sourceMappingURL=table.js.map","import Delta from 'quill-delta';\nimport { EmbedBlot, Scope } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nconst debug = logger('quill:toolbar');\nclass Toolbar extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    if (Array.isArray(this.options.container)) {\n      const container = document.createElement('div');\n      container.setAttribute('role', 'toolbar');\n      addControls(container, this.options.container);\n      quill.container?.parentNode?.insertBefore(container, quill.container);\n      this.container = container;\n    } else if (typeof this.options.container === 'string') {\n      this.container = document.querySelector(this.options.container);\n    } else {\n      this.container = this.options.container;\n    }\n    if (!(this.container instanceof HTMLElement)) {\n      debug.error('Container required for toolbar', this.options);\n      return;\n    }\n    this.container.classList.add('ql-toolbar');\n    this.controls = [];\n    this.handlers = {};\n    if (this.options.handlers) {\n      Object.keys(this.options.handlers).forEach(format => {\n        const handler = this.options.handlers?.[format];\n        if (handler) {\n          this.addHandler(format, handler);\n        }\n      });\n    }\n    Array.from(this.container.querySelectorAll('button, select')).forEach(input => {\n      // @ts-expect-error\n      this.attach(input);\n    });\n    this.quill.on(Quill.events.EDITOR_CHANGE, () => {\n      const [range] = this.quill.selection.getRange(); // quill.getSelection triggers update\n      this.update(range);\n    });\n  }\n  addHandler(format, handler) {\n    this.handlers[format] = handler;\n  }\n  attach(input) {\n    let format = Array.from(input.classList).find(className => {\n      return className.indexOf('ql-') === 0;\n    });\n    if (!format) return;\n    format = format.slice('ql-'.length);\n    if (input.tagName === 'BUTTON') {\n      input.setAttribute('type', 'button');\n    }\n    if (this.handlers[format] == null && this.quill.scroll.query(format) == null) {\n      debug.warn('ignoring attaching to nonexistent format', format, input);\n      return;\n    }\n    const eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n    input.addEventListener(eventName, e => {\n      let value;\n      if (input.tagName === 'SELECT') {\n        // @ts-expect-error\n        if (input.selectedIndex < 0) return;\n        // @ts-expect-error\n        const selected = input.options[input.selectedIndex];\n        if (selected.hasAttribute('selected')) {\n          value = false;\n        } else {\n          value = selected.value || false;\n        }\n      } else {\n        if (input.classList.contains('ql-active')) {\n          value = false;\n        } else {\n          // @ts-expect-error\n          value = input.value || !input.hasAttribute('value');\n        }\n        e.preventDefault();\n      }\n      this.quill.focus();\n      const [range] = this.quill.selection.getRange();\n      if (this.handlers[format] != null) {\n        this.handlers[format].call(this, value);\n      } else if (\n      // @ts-expect-error\n      this.quill.scroll.query(format).prototype instanceof EmbedBlot) {\n        value = prompt(`Enter ${format}`); // eslint-disable-line no-alert\n        if (!value) return;\n        this.quill.updateContents(new Delta()\n        // @ts-expect-error Fix me later\n        .retain(range.index)\n        // @ts-expect-error Fix me later\n        .delete(range.length).insert({\n          [format]: value\n        }), Quill.sources.USER);\n      } else {\n        this.quill.format(format, value, Quill.sources.USER);\n      }\n      this.update(range);\n    });\n    this.controls.push([format, input]);\n  }\n  update(range) {\n    const formats = range == null ? {} : this.quill.getFormat(range);\n    this.controls.forEach(pair => {\n      const [format, input] = pair;\n      if (input.tagName === 'SELECT') {\n        let option = null;\n        if (range == null) {\n          option = null;\n        } else if (formats[format] == null) {\n          option = input.querySelector('option[selected]');\n        } else if (!Array.isArray(formats[format])) {\n          let value = formats[format];\n          if (typeof value === 'string') {\n            value = value.replace(/\"/g, '\\\\\"');\n          }\n          option = input.querySelector(`option[value=\"${value}\"]`);\n        }\n        if (option == null) {\n          // @ts-expect-error TODO fix me later\n          input.value = ''; // TODO make configurable?\n          // @ts-expect-error TODO fix me later\n          input.selectedIndex = -1;\n        } else {\n          option.selected = true;\n        }\n      } else if (range == null) {\n        input.classList.remove('ql-active');\n        input.setAttribute('aria-pressed', 'false');\n      } else if (input.hasAttribute('value')) {\n        // both being null should match (default values)\n        // '1' should match with 1 (headers)\n        const value = formats[format];\n        const isActive = value === input.getAttribute('value') || value != null && value.toString() === input.getAttribute('value') || value == null && !input.getAttribute('value');\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      } else {\n        const isActive = formats[format] != null;\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      }\n    });\n  }\n}\nToolbar.DEFAULTS = {};\nfunction addButton(container, format, value) {\n  const input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add(`ql-${format}`);\n  input.setAttribute('aria-pressed', 'false');\n  if (value != null) {\n    input.value = value;\n    input.setAttribute('aria-label', `${format}: ${value}`);\n  } else {\n    input.setAttribute('aria-label', format);\n  }\n  container.appendChild(input);\n}\nfunction addControls(container, groups) {\n  if (!Array.isArray(groups[0])) {\n    // @ts-expect-error\n    groups = [groups];\n  }\n  groups.forEach(controls => {\n    const group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach(control => {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        const format = Object.keys(control)[0];\n        const value = control[format];\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\nfunction addSelect(container, format, values) {\n  const input = document.createElement('select');\n  input.classList.add(`ql-${format}`);\n  values.forEach(value => {\n    const option = document.createElement('option');\n    if (value !== false) {\n      option.setAttribute('value', String(value));\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean() {\n      const range = this.quill.getSelection();\n      if (range == null) return;\n      if (range.length === 0) {\n        const formats = this.quill.getFormat();\n        Object.keys(formats).forEach(name => {\n          // Clean functionality in existing apps only clean inline formats\n          if (this.quill.scroll.query(name, Scope.INLINE) != null) {\n            this.quill.format(name, false, Quill.sources.USER);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range.index, range.length, Quill.sources.USER);\n      }\n    },\n    direction(value) {\n      const {\n        align\n      } = this.quill.getFormat();\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', Quill.sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, Quill.sources.USER);\n      }\n      this.quill.format('direction', value, Quill.sources.USER);\n    },\n    indent(value) {\n      const range = this.quill.getSelection();\n      // @ts-expect-error\n      const formats = this.quill.getFormat(range);\n      // @ts-expect-error\n      const indent = parseInt(formats.indent || 0, 10);\n      if (value === '+1' || value === '-1') {\n        let modifier = value === '+1' ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, Quill.sources.USER);\n      }\n    },\n    link(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:'); // eslint-disable-line no-alert\n      }\n      this.quill.format('link', value, Quill.sources.USER);\n    },\n    list(value) {\n      const range = this.quill.getSelection();\n      // @ts-expect-error\n      const formats = this.quill.getFormat(range);\n      if (value === 'check') {\n        if (formats.list === 'checked' || formats.list === 'unchecked') {\n          this.quill.format('list', false, Quill.sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', Quill.sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, Quill.sources.USER);\n      }\n    }\n  }\n};\nexport { Toolbar as default, addControls };\n//# sourceMappingURL=toolbar.js.map","const alignLeftIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"13\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"9\\\" y1=\\\"4\\\" y2=\\\"4\\\"/></svg>\";\nconst alignCenterIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"14\\\" x2=\\\"4\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"12\\\" x2=\\\"6\\\" y1=\\\"4\\\" y2=\\\"4\\\"/></svg>\";\nconst alignRightIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"5\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"9\\\" y1=\\\"4\\\" y2=\\\"4\\\"/></svg>\";\nconst alignJustifyIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"4\\\" y2=\\\"4\\\"/></svg>\";\nconst backgroundIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><g class=\\\"ql-fill ql-color-label\\\"><polygon points=\\\"6 6.868 6 6 5 6 5 7 5.942 7 6 6.868\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"4\\\" y=\\\"4\\\"/><polygon points=\\\"6.817 5 6 5 6 6 6.38 6 6.817 5\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"6\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"3\\\" y=\\\"5\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"4\\\" y=\\\"7\\\"/><polygon points=\\\"4 11.439 4 11 3 11 3 12 3.755 12 4 11.439\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"12\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"9\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"15\\\"/><polygon points=\\\"4.63 10 4 10 4 11 4.192 11 4.63 10\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"3\\\" y=\\\"8\\\"/><path d=\\\"M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z\\\"/><path d=\\\"M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z\\\"/><path d=\\\"M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"12\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"11\\\" y=\\\"3\\\"/><path d=\\\"M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"3\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"6\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"3\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"5\\\" y=\\\"3\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"9\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"14\\\"/><polygon points=\\\"13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"13\\\" y=\\\"7\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"5\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"14\\\" y=\\\"6\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"8\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"14\\\" y=\\\"9\\\"/><path d=\\\"M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"14\\\" y=\\\"3\\\"/><polygon points=\\\"12 6.868 12 6 11.62 6 12 6.868\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"12\\\" y=\\\"5\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"13\\\" y=\\\"4\\\"/><polygon points=\\\"12.933 9 13 9 13 8 12.495 8 12.933 9\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"9\\\" y=\\\"14\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"8\\\" y=\\\"15\\\"/><path d=\\\"M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"5\\\" y=\\\"15\\\"/><path d=\\\"M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"11\\\" y=\\\"15\\\"/><path d=\\\"M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"14\\\" y=\\\"15\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"11\\\"/></g><polyline class=\\\"ql-stroke\\\" points=\\\"5.5 13 9 5 12.5 13\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"11.63\\\" x2=\\\"6.38\\\" y1=\\\"11\\\" y2=\\\"11\\\"/></svg>\";\nconst blockquoteIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><rect class=\\\"ql-fill ql-stroke\\\" height=\\\"3\\\" width=\\\"3\\\" x=\\\"4\\\" y=\\\"5\\\"/><rect class=\\\"ql-fill ql-stroke\\\" height=\\\"3\\\" width=\\\"3\\\" x=\\\"11\\\" y=\\\"5\\\"/><path class=\\\"ql-even ql-fill ql-stroke\\\" d=\\\"M7,8c0,4.031-3,5-3,5\\\"/><path class=\\\"ql-even ql-fill ql-stroke\\\" d=\\\"M14,8c0,4.031-3,5-3,5\\\"/></svg>\";\nconst boldIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-stroke\\\" d=\\\"M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z\\\"/><path class=\\\"ql-stroke\\\" d=\\\"M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z\\\"/></svg>\";\nconst cleanIcon = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"5\\\" x2=\\\"13\\\" y1=\\\"3\\\" y2=\\\"3\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"6\\\" x2=\\\"9.35\\\" y1=\\\"12\\\" y2=\\\"3\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"11\\\" x2=\\\"15\\\" y1=\\\"11\\\" y2=\\\"15\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"11\\\" y1=\\\"11\\\" y2=\\\"15\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" rx=\\\"0.5\\\" ry=\\\"0.5\\\" width=\\\"7\\\" x=\\\"2\\\" y=\\\"14\\\"/></svg>\";\nconst codeIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><polyline class=\\\"ql-even ql-stroke\\\" points=\\\"5 7 3 9 5 11\\\"/><polyline class=\\\"ql-even ql-stroke\\\" points=\\\"13 7 15 9 13 11\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"10\\\" x2=\\\"8\\\" y1=\\\"5\\\" y2=\\\"13\\\"/></svg>\";\nconst colorIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-color-label ql-stroke ql-transparent\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"15\\\" y2=\\\"15\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"5.5 11 9 3 12.5 11\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"11.63\\\" x2=\\\"6.38\\\" y1=\\\"9\\\" y2=\\\"9\\\"/></svg>\";\nconst directionLeftToRightIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"3 11 5 9 3 7 3 11\\\"/><line class=\\\"ql-stroke ql-fill\\\" x1=\\\"15\\\" x2=\\\"11\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><path class=\\\"ql-fill\\\" d=\\\"M11,3a3,3,0,0,0,0,6h1V3H11Z\\\"/><rect class=\\\"ql-fill\\\" height=\\\"11\\\" width=\\\"1\\\" x=\\\"11\\\" y=\\\"4\\\"/><rect class=\\\"ql-fill\\\" height=\\\"11\\\" width=\\\"1\\\" x=\\\"13\\\" y=\\\"4\\\"/></svg>\";\nconst directionRightToLeftIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"15 12 13 10 15 8 15 12\\\"/><line class=\\\"ql-stroke ql-fill\\\" x1=\\\"9\\\" x2=\\\"5\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><path class=\\\"ql-fill\\\" d=\\\"M5,3A3,3,0,0,0,5,9H6V3H5Z\\\"/><rect class=\\\"ql-fill\\\" height=\\\"11\\\" width=\\\"1\\\" x=\\\"5\\\" y=\\\"4\\\"/><rect class=\\\"ql-fill\\\" height=\\\"11\\\" width=\\\"1\\\" x=\\\"7\\\" y=\\\"4\\\"/></svg>\";\nconst formulaIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1.6\\\" rx=\\\"0.8\\\" ry=\\\"0.8\\\" width=\\\"5\\\" x=\\\"5.15\\\" y=\\\"6.2\\\"/><path class=\\\"ql-fill\\\" d=\\\"M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z\\\"/></svg>\";\nconst headerIcon = \"<svg viewBox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z\\\"/></svg>\";\nconst header2Icon = \"<svg viewBox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z\\\"/></svg>\";\nconst header3Icon = \"<svg viewBox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z\\\"/></svg>\";\nconst header4Icon = \"<svg viewBox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z\\\"/></svg>\";\nconst header5Icon = \"<svg viewBox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z\\\"/></svg>\";\nconst header6Icon = \"<svg viewBox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z\\\"/></svg>\";\nconst italicIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"13\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"5\\\" x2=\\\"11\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"8\\\" x2=\\\"10\\\" y1=\\\"14\\\" y2=\\\"4\\\"/></svg>\";\nconst imageIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><rect class=\\\"ql-stroke\\\" height=\\\"10\\\" width=\\\"12\\\" x=\\\"3\\\" y=\\\"4\\\"/><circle class=\\\"ql-fill\\\" cx=\\\"6\\\" cy=\\\"7\\\" r=\\\"1\\\"/><polyline class=\\\"ql-even ql-fill\\\" points=\\\"5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12\\\"/></svg>\";\nconst indentIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><polyline class=\\\"ql-fill ql-stroke\\\" points=\\\"3 7 3 11 5 9 3 7\\\"/></svg>\";\nconst outdentIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"5 7 5 11 3 9 5 7\\\"/></svg>\";\nconst linkIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"11\\\" y1=\\\"7\\\" y2=\\\"11\\\"/><path class=\\\"ql-even ql-stroke\\\" d=\\\"M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z\\\"/><path class=\\\"ql-even ql-stroke\\\" d=\\\"M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z\\\"/></svg>\";\nconst listBulletIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"6\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"6\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"6\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"3\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"3\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"3\\\" y1=\\\"14\\\" y2=\\\"14\\\"/></svg>\";\nconst listCheckIcon = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"3 4 4 5 6 3\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"3 14 4 15 6 13\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"3 9 4 10 6 8\\\"/></svg>\";\nconst listOrderedIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke ql-thin\\\" x1=\\\"2.5\\\" x2=\\\"4.5\\\" y1=\\\"5.5\\\" y2=\\\"5.5\\\"/><path class=\\\"ql-fill\\\" d=\\\"M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z\\\"/><path class=\\\"ql-stroke ql-thin\\\" d=\\\"M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156\\\"/><path class=\\\"ql-stroke ql-thin\\\" d=\\\"M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109\\\"/></svg>\";\nconst subscriptIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z\\\"/><path class=\\\"ql-fill\\\" d=\\\"M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z\\\"/></svg>\";\nconst superscriptIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z\\\"/><path class=\\\"ql-fill\\\" d=\\\"M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z\\\"/></svg>\";\nconst strikeIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke ql-thin\\\" x1=\\\"15.5\\\" x2=\\\"2.5\\\" y1=\\\"8.5\\\" y2=\\\"9.5\\\"/><path class=\\\"ql-fill\\\" d=\\\"M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z\\\"/><path class=\\\"ql-fill\\\" d=\\\"M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z\\\"/></svg>\";\nconst tableIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><rect class=\\\"ql-stroke\\\" height=\\\"12\\\" width=\\\"12\\\" x=\\\"3\\\" y=\\\"3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"2\\\" width=\\\"3\\\" x=\\\"5\\\" y=\\\"5\\\"/><rect class=\\\"ql-fill\\\" height=\\\"2\\\" width=\\\"4\\\" x=\\\"9\\\" y=\\\"5\\\"/><g class=\\\"ql-fill ql-transparent\\\"><rect height=\\\"2\\\" width=\\\"3\\\" x=\\\"5\\\" y=\\\"8\\\"/><rect height=\\\"2\\\" width=\\\"4\\\" x=\\\"9\\\" y=\\\"8\\\"/><rect height=\\\"2\\\" width=\\\"3\\\" x=\\\"5\\\" y=\\\"11\\\"/><rect height=\\\"2\\\" width=\\\"4\\\" x=\\\"9\\\" y=\\\"11\\\"/></g></svg>\";\nconst underlineIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-stroke\\\" d=\\\"M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" rx=\\\"0.5\\\" ry=\\\"0.5\\\" width=\\\"12\\\" x=\\\"3\\\" y=\\\"15\\\"/></svg>\";\nconst videoIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><rect class=\\\"ql-stroke\\\" height=\\\"12\\\" width=\\\"12\\\" x=\\\"3\\\" y=\\\"3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"12\\\" width=\\\"1\\\" x=\\\"5\\\" y=\\\"3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"12\\\" width=\\\"1\\\" x=\\\"12\\\" y=\\\"3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"2\\\" width=\\\"8\\\" x=\\\"5\\\" y=\\\"8\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"3\\\" y=\\\"5\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"3\\\" y=\\\"7\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"3\\\" y=\\\"10\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"3\\\" y=\\\"12\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"12\\\" y=\\\"5\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"12\\\" y=\\\"7\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"12\\\" y=\\\"10\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"12\\\" y=\\\"12\\\"/></svg>\";\nexport default {\n  align: {\n    '': alignLeftIcon,\n    center: alignCenterIcon,\n    right: alignRightIcon,\n    justify: alignJustifyIcon\n  },\n  background: backgroundIcon,\n  blockquote: blockquoteIcon,\n  bold: boldIcon,\n  clean: cleanIcon,\n  code: codeIcon,\n  'code-block': codeIcon,\n  color: colorIcon,\n  direction: {\n    '': directionLeftToRightIcon,\n    rtl: directionRightToLeftIcon\n  },\n  formula: formulaIcon,\n  header: {\n    '1': headerIcon,\n    '2': header2Icon,\n    '3': header3Icon,\n    '4': header4Icon,\n    '5': header5Icon,\n    '6': header6Icon\n  },\n  italic: italicIcon,\n  image: imageIcon,\n  indent: {\n    '+1': indentIcon,\n    '-1': outdentIcon\n  },\n  link: linkIcon,\n  list: {\n    bullet: listBulletIcon,\n    check: listCheckIcon,\n    ordered: listOrderedIcon\n  },\n  script: {\n    sub: subscriptIcon,\n    super: superscriptIcon\n  },\n  strike: strikeIcon,\n  table: tableIcon,\n  underline: underlineIcon,\n  video: videoIcon\n};\n//# sourceMappingURL=icons.js.map","const DropdownIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><polygon class=\\\"ql-stroke\\\" points=\\\"7 11 9 13 11 11 7 11\\\"/><polygon class=\\\"ql-stroke\\\" points=\\\"7 7 9 5 11 7 7 7\\\"/></svg>\";\nlet optionsCounter = 0;\nfunction toggleAriaAttribute(element, attribute) {\n  element.setAttribute(attribute, `${!(element.getAttribute(attribute) === 'true')}`);\n}\nclass Picker {\n  constructor(select) {\n    this.select = select;\n    this.container = document.createElement('span');\n    this.buildPicker();\n    this.select.style.display = 'none';\n    // @ts-expect-error Fix me later\n    this.select.parentNode.insertBefore(this.container, this.select);\n    this.label.addEventListener('mousedown', () => {\n      this.togglePicker();\n    });\n    this.label.addEventListener('keydown', event => {\n      switch (event.key) {\n        case 'Enter':\n          this.togglePicker();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    this.select.addEventListener('change', this.update.bind(this));\n  }\n  togglePicker() {\n    this.container.classList.toggle('ql-expanded');\n    // Toggle aria-expanded and aria-hidden to make the picker accessible\n    toggleAriaAttribute(this.label, 'aria-expanded');\n    // @ts-expect-error\n    toggleAriaAttribute(this.options, 'aria-hidden');\n  }\n  buildItem(option) {\n    const item = document.createElement('span');\n    // @ts-expect-error\n    item.tabIndex = '0';\n    item.setAttribute('role', 'button');\n    item.classList.add('ql-picker-item');\n    const value = option.getAttribute('value');\n    if (value) {\n      item.setAttribute('data-value', value);\n    }\n    if (option.textContent) {\n      item.setAttribute('data-label', option.textContent);\n    }\n    item.addEventListener('click', () => {\n      this.selectItem(item, true);\n    });\n    item.addEventListener('keydown', event => {\n      switch (event.key) {\n        case 'Enter':\n          this.selectItem(item, true);\n          event.preventDefault();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    return item;\n  }\n  buildLabel() {\n    const label = document.createElement('span');\n    label.classList.add('ql-picker-label');\n    label.innerHTML = DropdownIcon;\n    // @ts-expect-error\n    label.tabIndex = '0';\n    label.setAttribute('role', 'button');\n    label.setAttribute('aria-expanded', 'false');\n    this.container.appendChild(label);\n    return label;\n  }\n  buildOptions() {\n    const options = document.createElement('span');\n    options.classList.add('ql-picker-options');\n\n    // Don't want screen readers to read this until options are visible\n    options.setAttribute('aria-hidden', 'true');\n    // @ts-expect-error\n    options.tabIndex = '-1';\n\n    // Need a unique id for aria-controls\n    options.id = `ql-picker-options-${optionsCounter}`;\n    optionsCounter += 1;\n    this.label.setAttribute('aria-controls', options.id);\n\n    // @ts-expect-error\n    this.options = options;\n    Array.from(this.select.options).forEach(option => {\n      const item = this.buildItem(option);\n      options.appendChild(item);\n      if (option.selected === true) {\n        this.selectItem(item);\n      }\n    });\n    this.container.appendChild(options);\n  }\n  buildPicker() {\n    Array.from(this.select.attributes).forEach(item => {\n      this.container.setAttribute(item.name, item.value);\n    });\n    this.container.classList.add('ql-picker');\n    this.label = this.buildLabel();\n    this.buildOptions();\n  }\n  escape() {\n    // Close menu and return focus to trigger label\n    this.close();\n    // Need setTimeout for accessibility to ensure that the browser executes\n    // focus on the next process thread and after any DOM content changes\n    setTimeout(() => this.label.focus(), 1);\n  }\n  close() {\n    this.container.classList.remove('ql-expanded');\n    this.label.setAttribute('aria-expanded', 'false');\n    // @ts-expect-error\n    this.options.setAttribute('aria-hidden', 'true');\n  }\n  selectItem(item) {\n    let trigger = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    const selected = this.container.querySelector('.ql-selected');\n    if (item === selected) return;\n    if (selected != null) {\n      selected.classList.remove('ql-selected');\n    }\n    if (item == null) return;\n    item.classList.add('ql-selected');\n    // @ts-expect-error Fix me later\n    this.select.selectedIndex = Array.from(item.parentNode.children).indexOf(item);\n    if (item.hasAttribute('data-value')) {\n      // @ts-expect-error Fix me later\n      this.label.setAttribute('data-value', item.getAttribute('data-value'));\n    } else {\n      this.label.removeAttribute('data-value');\n    }\n    if (item.hasAttribute('data-label')) {\n      // @ts-expect-error Fix me later\n      this.label.setAttribute('data-label', item.getAttribute('data-label'));\n    } else {\n      this.label.removeAttribute('data-label');\n    }\n    if (trigger) {\n      this.select.dispatchEvent(new Event('change'));\n      this.close();\n    }\n  }\n  update() {\n    let option;\n    if (this.select.selectedIndex > -1) {\n      const item =\n      // @ts-expect-error Fix me later\n      this.container.querySelector('.ql-picker-options').children[this.select.selectedIndex];\n      option = this.select.options[this.select.selectedIndex];\n      // @ts-expect-error\n      this.selectItem(item);\n    } else {\n      this.selectItem(null);\n    }\n    const isActive = option != null && option !== this.select.querySelector('option[selected]');\n    this.label.classList.toggle('ql-active', isActive);\n  }\n}\nexport default Picker;\n//# sourceMappingURL=picker.js.map","import Picker from './picker.js';\nclass ColorPicker extends Picker {\n  constructor(select, label) {\n    super(select);\n    this.label.innerHTML = label;\n    this.container.classList.add('ql-color-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).slice(0, 7).forEach(item => {\n      item.classList.add('ql-primary');\n    });\n  }\n  buildItem(option) {\n    const item = super.buildItem(option);\n    item.style.backgroundColor = option.getAttribute('value') || '';\n    return item;\n  }\n  selectItem(item, trigger) {\n    super.selectItem(item, trigger);\n    const colorLabel = this.label.querySelector('.ql-color-label');\n    const value = item ? item.getAttribute('data-value') || '' : '';\n    if (colorLabel) {\n      if (colorLabel.tagName === 'line') {\n        colorLabel.style.stroke = value;\n      } else {\n        colorLabel.style.fill = value;\n      }\n    }\n  }\n}\nexport default ColorPicker;\n//# sourceMappingURL=color-picker.js.map","import Picker from './picker.js';\nclass IconPicker extends Picker {\n  constructor(select, icons) {\n    super(select);\n    this.container.classList.add('ql-icon-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).forEach(item => {\n      item.innerHTML = icons[item.getAttribute('data-value') || ''];\n    });\n    this.defaultItem = this.container.querySelector('.ql-selected');\n    this.selectItem(this.defaultItem);\n  }\n  selectItem(target, trigger) {\n    super.selectItem(target, trigger);\n    const item = target || this.defaultItem;\n    if (item != null) {\n      if (this.label.innerHTML === item.innerHTML) return;\n      this.label.innerHTML = item.innerHTML;\n    }\n  }\n}\nexport default IconPicker;\n//# sourceMappingURL=icon-picker.js.map","const isScrollable = el => {\n  const {\n    overflowY\n  } = getComputedStyle(el, null);\n  return overflowY !== 'visible' && overflowY !== 'clip';\n};\nclass Tooltip {\n  constructor(quill, boundsContainer) {\n    this.quill = quill;\n    this.boundsContainer = boundsContainer || document.body;\n    this.root = quill.addContainer('ql-tooltip');\n    // @ts-expect-error\n    this.root.innerHTML = this.constructor.TEMPLATE;\n    if (isScrollable(this.quill.root)) {\n      this.quill.root.addEventListener('scroll', () => {\n        this.root.style.marginTop = `${-1 * this.quill.root.scrollTop}px`;\n      });\n    }\n    this.hide();\n  }\n  hide() {\n    this.root.classList.add('ql-hidden');\n  }\n  position(reference) {\n    const left = reference.left + reference.width / 2 - this.root.offsetWidth / 2;\n    // root.scrollTop should be 0 if scrollContainer !== root\n    const top = reference.bottom + this.quill.root.scrollTop;\n    this.root.style.left = `${left}px`;\n    this.root.style.top = `${top}px`;\n    this.root.classList.remove('ql-flip');\n    const containerBounds = this.boundsContainer.getBoundingClientRect();\n    const rootBounds = this.root.getBoundingClientRect();\n    let shift = 0;\n    if (rootBounds.right > containerBounds.right) {\n      shift = containerBounds.right - rootBounds.right;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.left < containerBounds.left) {\n      shift = containerBounds.left - rootBounds.left;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.bottom > containerBounds.bottom) {\n      const height = rootBounds.bottom - rootBounds.top;\n      const verticalShift = reference.bottom - reference.top + height;\n      this.root.style.top = `${top - verticalShift}px`;\n      this.root.classList.add('ql-flip');\n    }\n    return shift;\n  }\n  show() {\n    this.root.classList.remove('ql-editing');\n    this.root.classList.remove('ql-hidden');\n  }\n}\nexport default Tooltip;\n//# sourceMappingURL=tooltip.js.map","import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport Theme from '../core/theme.js';\nimport ColorPicker from '../ui/color-picker.js';\nimport IconPicker from '../ui/icon-picker.js';\nimport Picker from '../ui/picker.js';\nimport Tooltip from '../ui/tooltip.js';\nconst ALIGNS = [false, 'center', 'right', 'justify'];\nconst COLORS = ['#000000', '#e60000', '#ff9900', '#ffff00', '#008a00', '#0066cc', '#9933ff', '#ffffff', '#facccc', '#ffebcc', '#ffffcc', '#cce8cc', '#cce0f5', '#ebd6ff', '#bbbbbb', '#f06666', '#ffc266', '#ffff66', '#66b966', '#66a3e0', '#c285ff', '#888888', '#a10000', '#b26b00', '#b2b200', '#006100', '#0047b2', '#6b24b2', '#444444', '#5c0000', '#663d00', '#666600', '#003700', '#002966', '#3d1466'];\nconst FONTS = [false, 'serif', 'monospace'];\nconst HEADERS = ['1', '2', '3', false];\nconst SIZES = ['small', false, 'large', 'huge'];\nclass BaseTheme extends Theme {\n  constructor(quill, options) {\n    super(quill, options);\n    const listener = e => {\n      if (!document.body.contains(quill.root)) {\n        document.body.removeEventListener('click', listener);\n        return;\n      }\n      if (this.tooltip != null &&\n      // @ts-expect-error\n      !this.tooltip.root.contains(e.target) &&\n      // @ts-expect-error\n      document.activeElement !== this.tooltip.textbox && !this.quill.hasFocus()) {\n        this.tooltip.hide();\n      }\n      if (this.pickers != null) {\n        this.pickers.forEach(picker => {\n          // @ts-expect-error\n          if (!picker.container.contains(e.target)) {\n            picker.close();\n          }\n        });\n      }\n    };\n    quill.emitter.listenDOM('click', document.body, listener);\n  }\n  addModule(name) {\n    const module = super.addModule(name);\n    if (name === 'toolbar') {\n      // @ts-expect-error\n      this.extendToolbar(module);\n    }\n    return module;\n  }\n  buildButtons(buttons, icons) {\n    Array.from(buttons).forEach(button => {\n      const className = button.getAttribute('class') || '';\n      className.split(/\\s+/).forEach(name => {\n        if (!name.startsWith('ql-')) return;\n        name = name.slice('ql-'.length);\n        if (icons[name] == null) return;\n        if (name === 'direction') {\n          // @ts-expect-error\n          button.innerHTML = icons[name][''] + icons[name].rtl;\n        } else if (typeof icons[name] === 'string') {\n          // @ts-expect-error\n          button.innerHTML = icons[name];\n        } else {\n          // @ts-expect-error\n          const value = button.value || '';\n          // @ts-expect-error\n          if (value != null && icons[name][value]) {\n            // @ts-expect-error\n            button.innerHTML = icons[name][value];\n          }\n        }\n      });\n    });\n  }\n  buildPickers(selects, icons) {\n    this.pickers = Array.from(selects).map(select => {\n      if (select.classList.contains('ql-align')) {\n        if (select.querySelector('option') == null) {\n          fillSelect(select, ALIGNS);\n        }\n        if (typeof icons.align === 'object') {\n          return new IconPicker(select, icons.align);\n        }\n      }\n      if (select.classList.contains('ql-background') || select.classList.contains('ql-color')) {\n        const format = select.classList.contains('ql-background') ? 'background' : 'color';\n        if (select.querySelector('option') == null) {\n          fillSelect(select, COLORS, format === 'background' ? '#ffffff' : '#000000');\n        }\n        return new ColorPicker(select, icons[format]);\n      }\n      if (select.querySelector('option') == null) {\n        if (select.classList.contains('ql-font')) {\n          fillSelect(select, FONTS);\n        } else if (select.classList.contains('ql-header')) {\n          fillSelect(select, HEADERS);\n        } else if (select.classList.contains('ql-size')) {\n          fillSelect(select, SIZES);\n        }\n      }\n      return new Picker(select);\n    });\n    const update = () => {\n      this.pickers.forEach(picker => {\n        picker.update();\n      });\n    };\n    this.quill.on(Emitter.events.EDITOR_CHANGE, update);\n  }\n}\nBaseTheme.DEFAULTS = merge({}, Theme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        formula() {\n          this.quill.theme.tooltip.edit('formula');\n        },\n        image() {\n          let fileInput = this.container.querySelector('input.ql-image[type=file]');\n          if (fileInput == null) {\n            fileInput = document.createElement('input');\n            fileInput.setAttribute('type', 'file');\n            fileInput.setAttribute('accept', this.quill.uploader.options.mimetypes.join(', '));\n            fileInput.classList.add('ql-image');\n            fileInput.addEventListener('change', () => {\n              const range = this.quill.getSelection(true);\n              this.quill.uploader.upload(range, fileInput.files);\n              fileInput.value = '';\n            });\n            this.container.appendChild(fileInput);\n          }\n          fileInput.click();\n        },\n        video() {\n          this.quill.theme.tooltip.edit('video');\n        }\n      }\n    }\n  }\n});\nclass BaseTooltip extends Tooltip {\n  constructor(quill, boundsContainer) {\n    super(quill, boundsContainer);\n    this.textbox = this.root.querySelector('input[type=\"text\"]');\n    this.listen();\n  }\n  listen() {\n    // @ts-expect-error Fix me later\n    this.textbox.addEventListener('keydown', event => {\n      if (event.key === 'Enter') {\n        this.save();\n        event.preventDefault();\n      } else if (event.key === 'Escape') {\n        this.cancel();\n        event.preventDefault();\n      }\n    });\n  }\n  cancel() {\n    this.hide();\n    this.restoreFocus();\n  }\n  edit() {\n    let mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'link';\n    let preview = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    this.root.classList.remove('ql-hidden');\n    this.root.classList.add('ql-editing');\n    if (this.textbox == null) return;\n    if (preview != null) {\n      this.textbox.value = preview;\n    } else if (mode !== this.root.getAttribute('data-mode')) {\n      this.textbox.value = '';\n    }\n    const bounds = this.quill.getBounds(this.quill.selection.savedRange);\n    if (bounds != null) {\n      this.position(bounds);\n    }\n    this.textbox.select();\n    this.textbox.setAttribute('placeholder', this.textbox.getAttribute(`data-${mode}`) || '');\n    this.root.setAttribute('data-mode', mode);\n  }\n  restoreFocus() {\n    this.quill.focus({\n      preventScroll: true\n    });\n  }\n  save() {\n    // @ts-expect-error Fix me later\n    let {\n      value\n    } = this.textbox;\n    switch (this.root.getAttribute('data-mode')) {\n      case 'link':\n        {\n          const {\n            scrollTop\n          } = this.quill.root;\n          if (this.linkRange) {\n            this.quill.formatText(this.linkRange, 'link', value, Emitter.sources.USER);\n            delete this.linkRange;\n          } else {\n            this.restoreFocus();\n            this.quill.format('link', value, Emitter.sources.USER);\n          }\n          this.quill.root.scrollTop = scrollTop;\n          break;\n        }\n      case 'video':\n        {\n          value = extractVideoUrl(value);\n        }\n      // eslint-disable-next-line no-fallthrough\n      case 'formula':\n        {\n          if (!value) break;\n          const range = this.quill.getSelection(true);\n          if (range != null) {\n            const index = range.index + range.length;\n            this.quill.insertEmbed(index,\n            // @ts-expect-error Fix me later\n            this.root.getAttribute('data-mode'), value, Emitter.sources.USER);\n            if (this.root.getAttribute('data-mode') === 'formula') {\n              this.quill.insertText(index + 1, ' ', Emitter.sources.USER);\n            }\n            this.quill.setSelection(index + 2, Emitter.sources.USER);\n          }\n          break;\n        }\n      default:\n    }\n    // @ts-expect-error Fix me later\n    this.textbox.value = '';\n    this.hide();\n  }\n}\nfunction extractVideoUrl(url) {\n  let match = url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/) || url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\n  if (match) {\n    return `${match[1] || 'https'}://www.youtube.com/embed/${match[2]}?showinfo=0`;\n  }\n  // eslint-disable-next-line no-cond-assign\n  if (match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/)) {\n    return `${match[1] || 'https'}://player.vimeo.com/video/${match[2]}/`;\n  }\n  return url;\n}\nfunction fillSelect(select, values) {\n  let defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  values.forEach(value => {\n    const option = document.createElement('option');\n    if (value === defaultValue) {\n      option.setAttribute('selected', 'selected');\n    } else {\n      option.setAttribute('value', String(value));\n    }\n    select.appendChild(option);\n  });\n}\nexport { BaseTooltip, BaseTheme as default };\n//# sourceMappingURL=base.js.map","import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport { Range } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nimport Quill from '../core/quill.js';\nconst TOOLBAR_CONFIG = [['bold', 'italic', 'link'], [{\n  header: 1\n}, {\n  header: 2\n}, 'blockquote']];\nclass BubbleTooltip extends BaseTooltip {\n  static TEMPLATE = ['<span class=\"ql-tooltip-arrow\"></span>', '<div class=\"ql-tooltip-editor\">', '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">', '<a class=\"ql-close\"></a>', '</div>'].join('');\n  constructor(quill, bounds) {\n    super(quill, bounds);\n    this.quill.on(Emitter.events.EDITOR_CHANGE, (type, range, oldRange, source) => {\n      if (type !== Emitter.events.SELECTION_CHANGE) return;\n      if (range != null && range.length > 0 && source === Emitter.sources.USER) {\n        this.show();\n        // Lock our width so we will expand beyond our offsetParent boundaries\n        this.root.style.left = '0px';\n        this.root.style.width = '';\n        this.root.style.width = `${this.root.offsetWidth}px`;\n        const lines = this.quill.getLines(range.index, range.length);\n        if (lines.length === 1) {\n          const bounds = this.quill.getBounds(range);\n          if (bounds != null) {\n            this.position(bounds);\n          }\n        } else {\n          const lastLine = lines[lines.length - 1];\n          const index = this.quill.getIndex(lastLine);\n          const length = Math.min(lastLine.length() - 1, range.index + range.length - index);\n          const indexBounds = this.quill.getBounds(new Range(index, length));\n          if (indexBounds != null) {\n            this.position(indexBounds);\n          }\n        }\n      } else if (document.activeElement !== this.textbox && this.quill.hasFocus()) {\n        this.hide();\n      }\n    });\n  }\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root.querySelector('.ql-close').addEventListener('click', () => {\n      this.root.classList.remove('ql-editing');\n    });\n    this.quill.on(Emitter.events.SCROLL_OPTIMIZE, () => {\n      // Let selection be restored by toolbar handlers before repositioning\n      setTimeout(() => {\n        if (this.root.classList.contains('ql-hidden')) return;\n        const range = this.quill.getSelection();\n        if (range != null) {\n          const bounds = this.quill.getBounds(range);\n          if (bounds != null) {\n            this.position(bounds);\n          }\n        }\n      }, 1);\n    });\n  }\n  cancel() {\n    this.show();\n  }\n  position(reference) {\n    const shift = super.position(reference);\n    const arrow = this.root.querySelector('.ql-tooltip-arrow');\n    // @ts-expect-error\n    arrow.style.marginLeft = '';\n    if (shift !== 0) {\n      // @ts-expect-error\n      arrow.style.marginLeft = `${-1 * shift - arrow.offsetWidth / 2}px`;\n    }\n    return shift;\n  }\n}\nclass BubbleTheme extends BaseTheme {\n  constructor(quill, options) {\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-bubble');\n  }\n  extendToolbar(toolbar) {\n    // @ts-expect-error\n    this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\n    if (toolbar.container != null) {\n      this.tooltip.root.appendChild(toolbar.container);\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n    }\n  }\n}\nBubbleTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value) {\n          if (!value) {\n            this.quill.format('link', false, Quill.sources.USER);\n          } else {\n            // @ts-expect-error\n            this.quill.theme.tooltip.edit();\n          }\n        }\n      }\n    }\n  }\n});\nexport { BubbleTooltip, BubbleTheme as default };\n//# sourceMappingURL=bubble.js.map","import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport LinkBlot from '../formats/link.js';\nimport { Range } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nimport Quill from '../core/quill.js';\nconst TOOLBAR_CONFIG = [[{\n  header: ['1', '2', '3', false]\n}], ['bold', 'italic', 'underline', 'link'], [{\n  list: 'ordered'\n}, {\n  list: 'bullet'\n}], ['clean']];\nclass SnowTooltip extends BaseTooltip {\n  static TEMPLATE = ['<a class=\"ql-preview\" rel=\"noopener noreferrer\" target=\"_blank\" href=\"about:blank\"></a>', '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">', '<a class=\"ql-action\"></a>', '<a class=\"ql-remove\"></a>'].join('');\n  preview = this.root.querySelector('a.ql-preview');\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root.querySelector('a.ql-action').addEventListener('click', event => {\n      if (this.root.classList.contains('ql-editing')) {\n        this.save();\n      } else {\n        // @ts-expect-error Fix me later\n        this.edit('link', this.preview.textContent);\n      }\n      event.preventDefault();\n    });\n    // @ts-expect-error Fix me later\n    this.root.querySelector('a.ql-remove').addEventListener('click', event => {\n      if (this.linkRange != null) {\n        const range = this.linkRange;\n        this.restoreFocus();\n        this.quill.formatText(range, 'link', false, Emitter.sources.USER);\n        delete this.linkRange;\n      }\n      event.preventDefault();\n      this.hide();\n    });\n    this.quill.on(Emitter.events.SELECTION_CHANGE, (range, oldRange, source) => {\n      if (range == null) return;\n      if (range.length === 0 && source === Emitter.sources.USER) {\n        const [link, offset] = this.quill.scroll.descendant(LinkBlot, range.index);\n        if (link != null) {\n          this.linkRange = new Range(range.index - offset, link.length());\n          const preview = LinkBlot.formats(link.domNode);\n          // @ts-expect-error Fix me later\n          this.preview.textContent = preview;\n          // @ts-expect-error Fix me later\n          this.preview.setAttribute('href', preview);\n          this.show();\n          const bounds = this.quill.getBounds(this.linkRange);\n          if (bounds != null) {\n            this.position(bounds);\n          }\n          return;\n        }\n      } else {\n        delete this.linkRange;\n      }\n      this.hide();\n    });\n  }\n  show() {\n    super.show();\n    this.root.removeAttribute('data-mode');\n  }\n}\nclass SnowTheme extends BaseTheme {\n  constructor(quill, options) {\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-snow');\n  }\n  extendToolbar(toolbar) {\n    if (toolbar.container != null) {\n      toolbar.container.classList.add('ql-snow');\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n      // @ts-expect-error\n      this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\n      if (toolbar.container.querySelector('.ql-link')) {\n        this.quill.keyboard.addBinding({\n          key: 'k',\n          shortKey: true\n        }, (_range, context) => {\n          toolbar.handlers.link.call(toolbar, !context.format.link);\n        });\n      }\n    }\n  }\n}\nSnowTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value) {\n          if (value) {\n            const range = this.quill.getSelection();\n            if (range == null || range.length === 0) return;\n            let preview = this.quill.getText(range);\n            if (/^\\S+@\\S+\\.\\S+$/.test(preview) && preview.indexOf('mailto:') !== 0) {\n              preview = `mailto:${preview}`;\n            }\n            // @ts-expect-error\n            const {\n              tooltip\n            } = this.quill.theme;\n            tooltip.edit('link', preview);\n          } else {\n            this.quill.format('link', false, Quill.sources.USER);\n          }\n        }\n      }\n    }\n  }\n});\nexport default SnowTheme;\n//# sourceMappingURL=snow.js.map","import Quill from './core.js';\nimport { AlignClass, AlignStyle } from './formats/align.js';\nimport { DirectionAttribute, DirectionClass, DirectionStyle } from './formats/direction.js';\nimport Indent from './formats/indent.js';\nimport Blockquote from './formats/blockquote.js';\nimport Header from './formats/header.js';\nimport List from './formats/list.js';\nimport { BackgroundClass, BackgroundStyle } from './formats/background.js';\nimport { ColorClass, ColorStyle } from './formats/color.js';\nimport { FontClass, FontStyle } from './formats/font.js';\nimport { SizeClass, SizeStyle } from './formats/size.js';\nimport Bold from './formats/bold.js';\nimport Italic from './formats/italic.js';\nimport Link from './formats/link.js';\nimport Script from './formats/script.js';\nimport Strike from './formats/strike.js';\nimport Underline from './formats/underline.js';\nimport Formula from './formats/formula.js';\nimport Image from './formats/image.js';\nimport Video from './formats/video.js';\nimport CodeBlock, { Code as InlineCode } from './formats/code.js';\nimport Syntax from './modules/syntax.js';\nimport Table from './modules/table.js';\nimport Toolbar from './modules/toolbar.js';\nimport Icons from './ui/icons.js';\nimport Picker from './ui/picker.js';\nimport ColorPicker from './ui/color-picker.js';\nimport IconPicker from './ui/icon-picker.js';\nimport Tooltip from './ui/tooltip.js';\nimport BubbleTheme from './themes/bubble.js';\nimport SnowTheme from './themes/snow.js';\nQuill.register({\n  'attributors/attribute/direction': DirectionAttribute,\n  'attributors/class/align': AlignClass,\n  'attributors/class/background': BackgroundClass,\n  'attributors/class/color': ColorClass,\n  'attributors/class/direction': DirectionClass,\n  'attributors/class/font': FontClass,\n  'attributors/class/size': SizeClass,\n  'attributors/style/align': AlignStyle,\n  'attributors/style/background': BackgroundStyle,\n  'attributors/style/color': ColorStyle,\n  'attributors/style/direction': DirectionStyle,\n  'attributors/style/font': FontStyle,\n  'attributors/style/size': SizeStyle\n}, true);\nQuill.register({\n  'formats/align': AlignClass,\n  'formats/direction': DirectionClass,\n  'formats/indent': Indent,\n  'formats/background': BackgroundStyle,\n  'formats/color': ColorStyle,\n  'formats/font': FontClass,\n  'formats/size': SizeClass,\n  'formats/blockquote': Blockquote,\n  'formats/code-block': CodeBlock,\n  'formats/header': Header,\n  'formats/list': List,\n  'formats/bold': Bold,\n  'formats/code': InlineCode,\n  'formats/italic': Italic,\n  'formats/link': Link,\n  'formats/script': Script,\n  'formats/strike': Strike,\n  'formats/underline': Underline,\n  'formats/formula': Formula,\n  'formats/image': Image,\n  'formats/video': Video,\n  'modules/syntax': Syntax,\n  'modules/table': Table,\n  'modules/toolbar': Toolbar,\n  'themes/bubble': BubbleTheme,\n  'themes/snow': SnowTheme,\n  'ui/icons': Icons,\n  'ui/picker': Picker,\n  'ui/icon-picker': IconPicker,\n  'ui/color-picker': ColorPicker,\n  'ui/tooltip': Tooltip\n}, true);\nexport { AttributeMap, Delta, Module, Op, OpIterator, Parchment, Range } from './core.js';\nexport default Quill;\n//# sourceMappingURL=quill.js.map","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","var EventEmitter = require('events').EventEmitter;\n\nexports.EventEmitter = EventEmitter;\nexports.mixin = mixin;\n\nfunction mixin(Constructor) {\n  for (var key in EventEmitter.prototype) {\n    Constructor.prototype[key] = EventEmitter.prototype[key];\n  }\n}\n","var SUPPORTED_METHODS = [\n  'info',\n  'warn',\n  'error'\n];\n\nfunction Logger() {\n  var defaultMethods = Object.create(null);\n  SUPPORTED_METHODS.forEach(function(method) {\n    // Deal with Chrome issue: https://bugs.chromium.org/p/chromium/issues/detail?id=179628\n    defaultMethods[method] = console[method].bind(console);\n  });\n  this.setMethods(defaultMethods);\n}\nmodule.exports = Logger;\n\nLogger.prototype.setMethods = function(overrides) {\n  overrides = overrides || {};\n  var logger = this;\n\n  SUPPORTED_METHODS.forEach(function(method) {\n    if (typeof overrides[method] === 'function') {\n      logger[method] = overrides[method];\n    }\n  });\n};\n","var Logger = require('./logger');\nvar logger = new Logger();\nmodule.exports = logger;\n","function ShareDBError(code, message) {\n  this.code = code;\n  this.message = message || '';\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, ShareDBError);\n  } else {\n    this.stack = new Error().stack;\n  }\n}\n\nShareDBError.prototype = Object.create(Error.prototype);\nShareDBError.prototype.constructor = ShareDBError;\nShareDBError.prototype.name = 'ShareDBError';\n\nShareDBError.CODES = {\n  ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT: 'ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT',\n  ERR_APPLY_SNAPSHOT_NOT_PROVIDED: 'ERR_APPLY_SNAPSHOT_NOT_PROVIDED',\n  ERR_FIXUP_IS_ONLY_VALID_ON_APPLY: 'ERR_FIXUP_IS_ONLY_VALID_ON_APPLY',\n  ERR_CANNOT_FIXUP_DELETION: 'ERR_CANNOT_FIXUP_DELETION',\n  ERR_CLIENT_ID_BADLY_FORMED: 'ERR_CLIENT_ID_BADLY_FORMED',\n  ERR_CANNOT_PING_OFFLINE: 'ERR_CANNOT_PING_OFFLINE',\n  ERR_CONNECTION_SEQ_INTEGER_OVERFLOW: 'ERR_CONNECTION_SEQ_INTEGER_OVERFLOW',\n  ERR_CONNECTION_STATE_TRANSITION_INVALID: 'ERR_CONNECTION_STATE_TRANSITION_INVALID',\n  ERR_DATABASE_ADAPTER_NOT_FOUND: 'ERR_DATABASE_ADAPTER_NOT_FOUND',\n  ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE: 'ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE',\n  ERR_DATABASE_METHOD_NOT_IMPLEMENTED: 'ERR_DATABASE_METHOD_NOT_IMPLEMENTED',\n  ERR_DEFAULT_TYPE_MISMATCH: 'ERR_DEFAULT_TYPE_MISMATCH',\n  ERR_DOC_MISSING_VERSION: 'ERR_DOC_MISSING_VERSION',\n  ERR_DOC_ALREADY_CREATED: 'ERR_DOC_ALREADY_CREATED',\n  ERR_DOC_DOES_NOT_EXIST: 'ERR_DOC_DOES_NOT_EXIST',\n  ERR_DOC_TYPE_NOT_RECOGNIZED: 'ERR_DOC_TYPE_NOT_RECOGNIZED',\n  ERR_DOC_WAS_DELETED: 'ERR_DOC_WAS_DELETED',\n  ERR_DOC_IN_HARD_ROLLBACK: 'ERR_DOC_IN_HARD_ROLLBACK',\n  ERR_INFLIGHT_OP_MISSING: 'ERR_INFLIGHT_OP_MISSING',\n  ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION: 'ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION',\n  ERR_MAX_SUBMIT_RETRIES_EXCEEDED: 'ERR_MAX_SUBMIT_RETRIES_EXCEEDED',\n  ERR_MESSAGE_BADLY_FORMED: 'ERR_MESSAGE_BADLY_FORMED',\n  ERR_MILESTONE_ARGUMENT_INVALID: 'ERR_MILESTONE_ARGUMENT_INVALID',\n  ERR_NO_OP: 'ERR_NO_OP',\n  ERR_OP_ALREADY_SUBMITTED: 'ERR_OP_ALREADY_SUBMITTED',\n  ERR_OP_NOT_ALLOWED_IN_PROJECTION: 'ERR_OP_NOT_ALLOWED_IN_PROJECTION',\n  ERR_OP_SUBMIT_REJECTED: 'ERR_OP_SUBMIT_REJECTED',\n  ERR_PENDING_OP_REMOVED_BY_OP_SUBMIT_REJECTED: 'ERR_PENDING_OP_REMOVED_BY_OP_SUBMIT_REJECTED',\n  ERR_HARD_ROLLBACK_FETCH_FAILED: 'ERR_HARD_ROLLBACK_FETCH_FAILED',\n  ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM: 'ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM',\n  ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM: 'ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM',\n  ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT: 'ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT',\n  ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED: 'ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED',\n  ERR_OT_OP_BADLY_FORMED: 'ERR_OT_OP_BADLY_FORMED',\n  ERR_OT_OP_NOT_APPLIED: 'ERR_OT_OP_NOT_APPLIED',\n  ERR_OT_OP_NOT_PROVIDED: 'ERR_OT_OP_NOT_PROVIDED',\n  ERR_PRESENCE_TRANSFORM_FAILED: 'ERR_PRESENCE_TRANSFORM_FAILED',\n  ERR_PROTOCOL_VERSION_NOT_SUPPORTED: 'ERR_PROTOCOL_VERSION_NOT_SUPPORTED',\n  ERR_QUERY_CHANNEL_MISSING: 'ERR_QUERY_CHANNEL_MISSING',\n  ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED: 'ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED',\n  /**\n   * A special error that a \"readSnapshots\" middleware implementation can use to indicate that it\n   * wishes for the ShareDB client to treat it as a silent rejection, not passing the error back to\n   * user code.\n   *\n   * For subscribes, the ShareDB client will still cancel the document subscription.\n   */\n  ERR_SNAPSHOT_READ_SILENT_REJECTION: 'ERR_SNAPSHOT_READ_SILENT_REJECTION',\n  /**\n   * A \"readSnapshots\" middleware rejected the reads of specific snapshots.\n   *\n   * This error code is mostly for server use and generally will not be encountered on the client.\n   * Instead, each specific doc that encountered an error will receive its specific error.\n   *\n   * The one exception is for queries, where a \"readSnapshots\" rejection of specific snapshots will\n   * cause the client to receive this error for the whole query, since queries don't support\n   * doc-specific errors.\n   */\n  ERR_SNAPSHOT_READS_REJECTED: 'ERR_SNAPSHOT_READS_REJECTED',\n  ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND: 'ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND',\n  ERR_TYPE_CANNOT_BE_PROJECTED: 'ERR_TYPE_CANNOT_BE_PROJECTED',\n  ERR_TYPE_DOES_NOT_SUPPORT_COMPOSE: 'ERR_TYPE_DOES_NOT_SUPPORT_COMPOSE',\n  ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE: 'ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE',\n  ERR_UNKNOWN_ERROR: 'ERR_UNKNOWN_ERROR'\n};\n\nmodule.exports = ShareDBError;\n","// These methods let you build a transform function from a transformComponent\n// function for OT types like JSON0 in which operations are lists of components\n// and transforming them requires N^2 work. I find it kind of nasty that I need\n// this, but I'm not really sure what a better solution is. Maybe I should do\n// this automatically to types that don't have a compose function defined.\n\n// Add transform and transformX functions for an OT type which has\n// transformComponent defined.  transformComponent(destination array,\n// component, other component, side)\nmodule.exports = bootstrapTransform\nfunction bootstrapTransform(type, transformComponent, checkValidOp, append) {\n  var transformComponentX = function(left, right, destLeft, destRight) {\n    transformComponent(destLeft, left, right, 'left');\n    transformComponent(destRight, right, left, 'right');\n  };\n\n  var transformX = type.transformX = function(leftOp, rightOp) {\n    checkValidOp(leftOp);\n    checkValidOp(rightOp);\n    var newRightOp = [];\n\n    for (var i = 0; i < rightOp.length; i++) {\n      var rightComponent = rightOp[i];\n\n      // Generate newLeftOp by composing leftOp by rightComponent\n      var newLeftOp = [];\n      var k = 0;\n      while (k < leftOp.length) {\n        var nextC = [];\n        transformComponentX(leftOp[k], rightComponent, newLeftOp, nextC);\n        k++;\n\n        if (nextC.length === 1) {\n          rightComponent = nextC[0];\n        } else if (nextC.length === 0) {\n          for (var j = k; j < leftOp.length; j++) {\n            append(newLeftOp, leftOp[j]);\n          }\n          rightComponent = null;\n          break;\n        } else {\n          // Recurse.\n          var pair = transformX(leftOp.slice(k), nextC);\n          for (var l = 0; l < pair[0].length; l++) {\n            append(newLeftOp, pair[0][l]);\n          }\n          for (var r = 0; r < pair[1].length; r++) {\n            append(newRightOp, pair[1][r]);\n          }\n          rightComponent = null;\n          break;\n        }\n      }\n\n      if (rightComponent != null) {\n        append(newRightOp, rightComponent);\n      }\n      leftOp = newLeftOp;\n    }\n    return [leftOp, newRightOp];\n  };\n\n  // Transforms op with specified type ('left' or 'right') by otherOp.\n  type.transform = function(op, otherOp, type) {\n    if (!(type === 'left' || type === 'right'))\n      throw new Error(\"type must be 'left' or 'right'\");\n\n    if (otherOp.length === 0) return op;\n\n    if (op.length === 1 && otherOp.length === 1)\n      return transformComponent([], op[0], otherOp[0], type);\n\n    if (type === 'left')\n      return transformX(op, otherOp)[0];\n    else\n      return transformX(otherOp, op)[1];\n  };\n};\n","// DEPRECATED!\n//\n// This type works, but is not exported. Its included here because the JSON0\n// embedded string operations use this library.\n\n\n// A simple text implementation\n//\n// Operations are lists of components. Each component either inserts or deletes\n// at a specified position in the document.\n//\n// Components are either:\n//  {i:'str', p:100}: Insert 'str' at position 100 in the document\n//  {d:'str', p:100}: Delete 'str' at position 100 in the document\n//\n// Components in an operation are executed sequentially, so the position of components\n// assumes previous components have already executed.\n//\n// Eg: This op:\n//   [{i:'abc', p:0}]\n// is equivalent to this op:\n//   [{i:'a', p:0}, {i:'b', p:1}, {i:'c', p:2}]\n\nvar text = module.exports = {\n  name: 'text0',\n  uri: 'http://sharejs.org/types/textv0',\n  create: function(initial) {\n    if ((initial != null) && typeof initial !== 'string') {\n      throw new Error('Initial data must be a string');\n    }\n    return initial || '';\n  }\n};\n\n/** Insert s2 into s1 at pos. */\nvar strInject = function(s1, pos, s2) {\n  return s1.slice(0, pos) + s2 + s1.slice(pos);\n};\n\n/** Check that an operation component is valid. Throws if its invalid. */\nvar checkValidComponent = function(c) {\n  if (typeof c.p !== 'number')\n    throw new Error('component missing position field');\n\n  if ((typeof c.i === 'string') === (typeof c.d === 'string'))\n    throw new Error('component needs an i or d field');\n\n  if (c.p < 0)\n    throw new Error('position cannot be negative');\n};\n\n/** Check that an operation is valid */\nvar checkValidOp = function(op) {\n  for (var i = 0; i < op.length; i++) {\n    checkValidComponent(op[i]);\n  }\n};\n\n/** Apply op to snapshot */\ntext.apply = function(snapshot, op) {\n  var deleted;\n\n  checkValidOp(op);\n  for (var i = 0; i < op.length; i++) {\n    var component = op[i];\n    if (component.i != null) {\n      snapshot = strInject(snapshot, component.p, component.i);\n    } else {\n      deleted = snapshot.slice(component.p, component.p + component.d.length);\n      if (component.d !== deleted)\n        throw new Error(\"Delete component '\" + component.d + \"' does not match deleted text '\" + deleted + \"'\");\n\n      snapshot = snapshot.slice(0, component.p) + snapshot.slice(component.p + component.d.length);\n    }\n  }\n  return snapshot;\n};\n\n/**\n * Append a component to the end of newOp. Exported for use by the random op\n * generator and the JSON0 type.\n */\nvar append = text._append = function(newOp, c) {\n  if (c.i === '' || c.d === '') return;\n\n  if (newOp.length === 0) {\n    newOp.push(c);\n  } else {\n    var last = newOp[newOp.length - 1];\n\n    if (last.i != null && c.i != null && last.p <= c.p && c.p <= last.p + last.i.length) {\n      // Compose the insert into the previous insert\n      newOp[newOp.length - 1] = {i:strInject(last.i, c.p - last.p, c.i), p:last.p};\n\n    } else if (last.d != null && c.d != null && c.p <= last.p && last.p <= c.p + c.d.length) {\n      // Compose the deletes together\n      newOp[newOp.length - 1] = {d:strInject(c.d, last.p - c.p, last.d), p:c.p};\n\n    } else {\n      newOp.push(c);\n    }\n  }\n};\n\n/** Compose op1 and op2 together */\ntext.compose = function(op1, op2) {\n  checkValidOp(op1);\n  checkValidOp(op2);\n  var newOp = op1.slice();\n  for (var i = 0; i < op2.length; i++) {\n    append(newOp, op2[i]);\n  }\n  return newOp;\n};\n\n/** Clean up an op */\ntext.normalize = function(op) {\n  var newOp = [];\n\n  // Normalize should allow ops which are a single (unwrapped) component:\n  // {i:'asdf', p:23}.\n  // There's no good way to test if something is an array:\n  // http://perfectionkills.com/instanceof-considered-harmful-or-how-to-write-a-robust-isarray/\n  // so this is probably the least bad solution.\n  if (op.i != null || op.p != null) op = [op];\n\n  for (var i = 0; i < op.length; i++) {\n    var c = op[i];\n    if (c.p == null) c.p = 0;\n\n    append(newOp, c);\n  }\n\n  return newOp;\n};\n\n// This helper method transforms a position by an op component.\n//\n// If c is an insert, insertAfter specifies whether the transform\n// is pushed after the insert (true) or before it (false).\n//\n// insertAfter is optional for deletes.\nvar transformPosition = function(pos, c, insertAfter) {\n  // This will get collapsed into a giant ternary by uglify.\n  if (c.i != null) {\n    if (c.p < pos || (c.p === pos && insertAfter)) {\n      return pos + c.i.length;\n    } else {\n      return pos;\n    }\n  } else {\n    // I think this could also be written as: Math.min(c.p, Math.min(c.p -\n    // otherC.p, otherC.d.length)) but I think its harder to read that way, and\n    // it compiles using ternary operators anyway so its no slower written like\n    // this.\n    if (pos <= c.p) {\n      return pos;\n    } else if (pos <= c.p + c.d.length) {\n      return c.p;\n    } else {\n      return pos - c.d.length;\n    }\n  }\n};\n\n// Helper method to transform a cursor position as a result of an op.\n//\n// Like transformPosition above, if c is an insert, insertAfter specifies\n// whether the cursor position is pushed after an insert (true) or before it\n// (false).\ntext.transformCursor = function(position, op, side) {\n  var insertAfter = side === 'right';\n  for (var i = 0; i < op.length; i++) {\n    position = transformPosition(position, op[i], insertAfter);\n  }\n\n  return position;\n};\n\n// Transform an op component by another op component. Asymmetric.\n// The result will be appended to destination.\n//\n// exported for use in JSON type\nvar transformComponent = text._tc = function(dest, c, otherC, side) {\n  //var cIntersect, intersectEnd, intersectStart, newC, otherIntersect, s;\n\n  checkValidComponent(c);\n  checkValidComponent(otherC);\n\n  if (c.i != null) {\n    // Insert.\n    append(dest, {i:c.i, p:transformPosition(c.p, otherC, side === 'right')});\n  } else {\n    // Delete\n    if (otherC.i != null) {\n      // Delete vs insert\n      var s = c.d;\n      if (c.p < otherC.p) {\n        append(dest, {d:s.slice(0, otherC.p - c.p), p:c.p});\n        s = s.slice(otherC.p - c.p);\n      }\n      if (s !== '')\n        append(dest, {d: s, p: c.p + otherC.i.length});\n\n    } else {\n      // Delete vs delete\n      if (c.p >= otherC.p + otherC.d.length)\n        append(dest, {d: c.d, p: c.p - otherC.d.length});\n      else if (c.p + c.d.length <= otherC.p)\n        append(dest, c);\n      else {\n        // They overlap somewhere.\n        var newC = {d: '', p: c.p};\n\n        if (c.p < otherC.p)\n          newC.d = c.d.slice(0, otherC.p - c.p);\n\n        if (c.p + c.d.length > otherC.p + otherC.d.length)\n          newC.d += c.d.slice(otherC.p + otherC.d.length - c.p);\n\n        // This is entirely optional - I'm just checking the deleted text in\n        // the two ops matches\n        var intersectStart = Math.max(c.p, otherC.p);\n        var intersectEnd = Math.min(c.p + c.d.length, otherC.p + otherC.d.length);\n        var cIntersect = c.d.slice(intersectStart - c.p, intersectEnd - c.p);\n        var otherIntersect = otherC.d.slice(intersectStart - otherC.p, intersectEnd - otherC.p);\n        if (cIntersect !== otherIntersect)\n          throw new Error('Delete ops delete different text in the same region of the document');\n\n        if (newC.d !== '') {\n          newC.p = transformPosition(newC.p, otherC);\n          append(dest, newC);\n        }\n      }\n    }\n  }\n\n  return dest;\n};\n\nvar invertComponent = function(c) {\n  return (c.i != null) ? {d:c.i, p:c.p} : {i:c.d, p:c.p};\n};\n\n// No need to use append for invert, because the components won't be able to\n// cancel one another.\ntext.invert = function(op) {\n  // Shallow copy & reverse that sucka.\n  op = op.slice().reverse();\n  for (var i = 0; i < op.length; i++) {\n    op[i] = invertComponent(op[i]);\n  }\n  return op;\n};\n\nrequire('./bootstrapTransform')(text, transformComponent, checkValidOp, append);\n","/*\n This is the implementation of the JSON OT type.\n\n Spec is here: https://github.com/josephg/ShareJS/wiki/JSON-Operations\n\n Note: This is being made obsolete. It will soon be replaced by the JSON2 type.\n*/\n\n/**\n * UTILITY FUNCTIONS\n */\n\n/**\n * Checks if the passed object is an Array instance. Can't use Array.isArray\n * yet because its not supported on IE8.\n *\n * @param obj\n * @returns {boolean}\n */\nvar isArray = function(obj) {\n  return Object.prototype.toString.call(obj) == '[object Array]';\n};\n\n/**\n * Checks if the passed object is an Object instance.\n * No function call (fast) version\n *\n * @param obj\n * @returns {boolean}\n */\nvar isObject = function(obj) {\n  return (!!obj) && (obj.constructor === Object);\n};\n\n/**\n * Clones the passed object using JSON serialization (which is slow).\n *\n * hax, copied from test/types/json. Apparently this is still the fastest way\n * to deep clone an object, assuming we have browser support for JSON.  @see\n * http://jsperf.com/cloning-an-object/12\n */\nvar clone = function(o) {\n  return JSON.parse(JSON.stringify(o));\n};\n\n/**\n * JSON OT Type\n * @type {*}\n */\nvar json = {\n  name: 'json0',\n  uri: 'http://sharejs.org/types/JSONv0'\n};\n\n// You can register another OT type as a subtype in a JSON document using\n// the following function. This allows another type to handle certain\n// operations instead of the builtin JSON type.\nvar subtypes = {};\njson.registerSubtype = function(subtype) {\n  subtypes[subtype.name] = subtype;\n};\n\njson.create = function(data) {\n  // Null instead of undefined if you don't pass an argument.\n  return data === undefined ? null : clone(data);\n};\n\njson.invertComponent = function(c) {\n  var c_ = {p: c.p};\n\n  // handle subtype ops\n  if (c.t && subtypes[c.t]) {\n    c_.t = c.t;\n    c_.o = subtypes[c.t].invert(c.o);\n  }\n\n  if (c.si !== void 0) c_.sd = c.si;\n  if (c.sd !== void 0) c_.si = c.sd;\n  if (c.oi !== void 0) c_.od = c.oi;\n  if (c.od !== void 0) c_.oi = c.od;\n  if (c.li !== void 0) c_.ld = c.li;\n  if (c.ld !== void 0) c_.li = c.ld;\n  if (c.na !== void 0) c_.na = -c.na;\n\n  if (c.lm !== void 0) {\n    c_.lm = c.p[c.p.length-1];\n    c_.p = c.p.slice(0,c.p.length-1).concat([c.lm]);\n  }\n\n  return c_;\n};\n\njson.invert = function(op) {\n  var op_ = op.slice().reverse();\n  var iop = [];\n  for (var i = 0; i < op_.length; i++) {\n    iop.push(json.invertComponent(op_[i]));\n  }\n  return iop;\n};\n\njson.checkValidOp = function(op) {\n  for (var i = 0; i < op.length; i++) {\n    if (!isArray(op[i].p)) throw new Error('Missing path');\n  }\n};\n\njson.checkList = function(elem) {\n  if (!isArray(elem))\n    throw new Error('Referenced element not a list');\n};\n\njson.checkObj = function(elem) {\n  if (!isObject(elem)) {\n    throw new Error(\"Referenced element not an object (it was \" + JSON.stringify(elem) + \")\");\n  }\n};\n\n// helper functions to convert old string ops to and from subtype ops\nfunction convertFromText(c) {\n  c.t = 'text0';\n  var o = {p: c.p.pop()};\n  if (c.si != null) o.i = c.si;\n  if (c.sd != null) o.d = c.sd;\n  c.o = [o];\n}\n\nfunction convertToText(c) {\n  c.p.push(c.o[0].p);\n  if (c.o[0].i != null) c.si = c.o[0].i;\n  if (c.o[0].d != null) c.sd = c.o[0].d;\n  delete c.t;\n  delete c.o;\n}\n\njson.apply = function(snapshot, op) {\n  json.checkValidOp(op);\n\n  op = clone(op);\n\n  var container = {\n    data: snapshot\n  };\n\n  for (var i = 0; i < op.length; i++) {\n    var c = op[i];\n\n    // convert old string ops to use subtype for backwards compatibility\n    if (c.si != null || c.sd != null)\n      convertFromText(c);\n\n    var parent = null;\n    var parentKey = null;\n    var elem = container;\n    var key = 'data';\n\n    for (var j = 0; j < c.p.length; j++) {\n      var p = c.p[j];\n\n      parent = elem;\n      parentKey = key;\n      elem = elem[key];\n      key = p;\n\n      if (parent == null)\n        throw new Error('Path invalid');\n    }\n\n    // handle subtype ops\n    if (c.t && c.o !== void 0 && subtypes[c.t]) {\n      elem[key] = subtypes[c.t].apply(elem[key], c.o);\n\n    // Number add\n    } else if (c.na !== void 0) {\n      if (typeof elem[key] != 'number')\n        throw new Error('Referenced element not a number');\n\n      elem[key] += c.na;\n    }\n\n    // List replace\n    else if (c.li !== void 0 && c.ld !== void 0) {\n      json.checkList(elem);\n      // Should check the list element matches c.ld\n      elem[key] = c.li;\n    }\n\n    // List insert\n    else if (c.li !== void 0) {\n      json.checkList(elem);\n      elem.splice(key,0, c.li);\n    }\n\n    // List delete\n    else if (c.ld !== void 0) {\n      json.checkList(elem);\n      // Should check the list element matches c.ld here too.\n      elem.splice(key,1);\n    }\n\n    // List move\n    else if (c.lm !== void 0) {\n      json.checkList(elem);\n      if (c.lm != key) {\n        var e = elem[key];\n        // Remove it...\n        elem.splice(key,1);\n        // And insert it back.\n        elem.splice(c.lm,0,e);\n      }\n    }\n\n    // Object insert / replace\n    else if (c.oi !== void 0) {\n      json.checkObj(elem);\n\n      // Should check that elem[key] == c.od\n      elem[key] = c.oi;\n    }\n\n    // Object delete\n    else if (c.od !== void 0) {\n      json.checkObj(elem);\n\n      // Should check that elem[key] == c.od\n      delete elem[key];\n    }\n\n    else {\n      throw new Error('invalid / missing instruction in op');\n    }\n  }\n\n  return container.data;\n};\n\n// Helper to break an operation up into a bunch of small ops.\njson.shatter = function(op) {\n  var results = [];\n  for (var i = 0; i < op.length; i++) {\n    results.push([op[i]]);\n  }\n  return results;\n};\n\n// Helper for incrementally applying an operation to a snapshot. Calls yield\n// after each op component has been applied.\njson.incrementalApply = function(snapshot, op, _yield) {\n  for (var i = 0; i < op.length; i++) {\n    var smallOp = [op[i]];\n    snapshot = json.apply(snapshot, smallOp);\n    // I'd just call this yield, but thats a reserved keyword. Bah!\n    _yield(smallOp, snapshot);\n  }\n\n  return snapshot;\n};\n\n// Checks if two paths, p1 and p2 match.\nvar pathMatches = json.pathMatches = function(p1, p2, ignoreLast) {\n  if (p1.length != p2.length)\n    return false;\n\n  for (var i = 0; i < p1.length; i++) {\n    if (p1[i] !== p2[i] && (!ignoreLast || i !== p1.length - 1))\n      return false;\n  }\n\n  return true;\n};\n\njson.append = function(dest,c) {\n  c = clone(c);\n\n  if (dest.length === 0) {\n    dest.push(c);\n    return;\n  }\n\n  var last = dest[dest.length - 1];\n\n  // convert old string ops to use subtype for backwards compatibility\n  if ((c.si != null || c.sd != null) && (last.si != null || last.sd != null)) {\n    convertFromText(c);\n    convertFromText(last);\n  }\n\n  if (pathMatches(c.p, last.p)) {\n    // handle subtype ops\n    if (c.t && last.t && c.t === last.t && subtypes[c.t]) {\n      last.o = subtypes[c.t].compose(last.o, c.o);\n\n      // convert back to old string ops\n      if (c.si != null || c.sd != null) {\n        var p = c.p;\n        for (var i = 0; i < last.o.length - 1; i++) {\n          c.o = [last.o.pop()];\n          c.p = p.slice();\n          convertToText(c);\n          dest.push(c);\n        }\n\n        convertToText(last);\n      }\n    } else if (last.na != null && c.na != null) {\n      dest[dest.length - 1] = {p: last.p, na: last.na + c.na};\n    } else if (last.li !== undefined && c.li === undefined && c.ld === last.li) {\n      // insert immediately followed by delete becomes a noop.\n      if (last.ld !== undefined) {\n        // leave the delete part of the replace\n        delete last.li;\n      } else {\n        dest.pop();\n      }\n    } else if (last.od !== undefined && last.oi === undefined && c.oi !== undefined && c.od === undefined) {\n      last.oi = c.oi;\n    } else if (last.oi !== undefined && c.od !== undefined) {\n      // The last path component inserted something that the new component deletes (or replaces).\n      // Just merge them.\n      if (c.oi !== undefined) {\n        last.oi = c.oi;\n      } else if (last.od !== undefined) {\n        delete last.oi;\n      } else {\n        // An insert directly followed by a delete turns into a no-op and can be removed.\n        dest.pop();\n      }\n    } else if (c.lm !== undefined && c.p[c.p.length - 1] === c.lm) {\n      // don't do anything\n    } else {\n      dest.push(c);\n    }\n  } else {\n    // convert string ops back\n    if ((c.si != null || c.sd != null) && (last.si != null || last.sd != null)) {\n      convertToText(c);\n      convertToText(last);\n    }\n\n    dest.push(c);\n  }\n};\n\njson.compose = function(op1,op2) {\n  json.checkValidOp(op1);\n  json.checkValidOp(op2);\n\n  var newOp = clone(op1);\n\n  for (var i = 0; i < op2.length; i++) {\n    json.append(newOp,op2[i]);\n  }\n\n  return newOp;\n};\n\njson.normalize = function(op) {\n  var newOp = [];\n\n  op = isArray(op) ? op : [op];\n\n  for (var i = 0; i < op.length; i++) {\n    var c = op[i];\n    if (c.p == null) c.p = [];\n\n    json.append(newOp,c);\n  }\n\n  return newOp;\n};\n\n// Returns the common length of the paths of ops a and b\njson.commonLengthForOps = function(a, b) {\n  var alen = a.p.length;\n  var blen = b.p.length;\n  if (a.na != null || a.t)\n    alen++;\n\n  if (b.na != null || b.t)\n    blen++;\n\n  if (alen === 0) return -1;\n  if (blen === 0) return null;\n\n  alen--;\n  blen--;\n\n  for (var i = 0; i < alen; i++) {\n    var p = a.p[i];\n    if (i >= blen || p !== b.p[i])\n      return null;\n  }\n\n  return alen;\n};\n\n// Returns true if an op can affect the given path\njson.canOpAffectPath = function(op, path) {\n  return json.commonLengthForOps({p:path}, op) != null;\n};\n\n// transform c so it applies to a document with otherC applied.\njson.transformComponent = function(dest, c, otherC, type) {\n  c = clone(c);\n\n  var common = json.commonLengthForOps(otherC, c);\n  var common2 = json.commonLengthForOps(c, otherC);\n  var cplength = c.p.length;\n  var otherCplength = otherC.p.length;\n\n  if (c.na != null || c.t)\n    cplength++;\n\n  if (otherC.na != null || otherC.t)\n    otherCplength++;\n\n  // if c is deleting something, and that thing is changed by otherC, we need to\n  // update c to reflect that change for invertibility.\n  if (common2 != null && otherCplength > cplength && c.p[common2] == otherC.p[common2]) {\n    if (c.ld !== void 0) {\n      var oc = clone(otherC);\n      oc.p = oc.p.slice(cplength);\n      c.ld = json.apply(clone(c.ld),[oc]);\n    } else if (c.od !== void 0) {\n      var oc = clone(otherC);\n      oc.p = oc.p.slice(cplength);\n      c.od = json.apply(clone(c.od),[oc]);\n    }\n  }\n\n  if (common != null) {\n    var commonOperand = cplength == otherCplength;\n\n    // backward compatibility for old string ops\n    var oc = otherC;\n    if ((c.si != null || c.sd != null) && (otherC.si != null || otherC.sd != null)) {\n      convertFromText(c);\n      oc = clone(otherC);\n      convertFromText(oc);\n    }\n\n    // handle subtype ops\n    if (oc.t && subtypes[oc.t]) {\n      if (c.t && c.t === oc.t) {\n        var res = subtypes[c.t].transform(c.o, oc.o, type);\n\n        // convert back to old string ops\n        if (c.si != null || c.sd != null) {\n          var p = c.p;\n          for (var i = 0; i < res.length; i++) {\n            c.o = [res[i]];\n            c.p = p.slice();\n            convertToText(c);\n            json.append(dest, c);\n          }\n        } else if (!isArray(res) || res.length > 0) {\n          c.o = res;\n          json.append(dest, c);\n        }\n\n        return dest;\n      }\n    }\n\n    // transform based on otherC\n    else if (otherC.na !== void 0) {\n      // this case is handled below\n    } else if (otherC.li !== void 0 && otherC.ld !== void 0) {\n      if (otherC.p[common] === c.p[common]) {\n        // noop\n\n        if (!commonOperand) {\n          return dest;\n        } else if (c.ld !== void 0) {\n          // we're trying to delete the same element, -> noop\n          if (c.li !== void 0 && type === 'left') {\n            // we're both replacing one element with another. only one can survive\n            c.ld = clone(otherC.li);\n          } else {\n            return dest;\n          }\n        }\n      }\n    } else if (otherC.li !== void 0) {\n      if (c.li !== void 0 && c.ld === undefined && commonOperand && c.p[common] === otherC.p[common]) {\n        // in li vs. li, left wins.\n        if (type === 'right')\n          c.p[common]++;\n      } else if (otherC.p[common] <= c.p[common]) {\n        c.p[common]++;\n      }\n\n      if (c.lm !== void 0) {\n        if (commonOperand) {\n          // otherC edits the same list we edit\n          if (otherC.p[common] <= c.lm)\n            c.lm++;\n          // changing c.from is handled above.\n        }\n      }\n    } else if (otherC.ld !== void 0) {\n      if (c.lm !== void 0) {\n        if (commonOperand) {\n          if (otherC.p[common] === c.p[common]) {\n            // they deleted the thing we're trying to move\n            return dest;\n          }\n          // otherC edits the same list we edit\n          var p = otherC.p[common];\n          var from = c.p[common];\n          var to = c.lm;\n          if (p < to || (p === to && from < to))\n            c.lm--;\n\n        }\n      }\n\n      if (otherC.p[common] < c.p[common]) {\n        c.p[common]--;\n      } else if (otherC.p[common] === c.p[common]) {\n        if (otherCplength < cplength) {\n          // we're below the deleted element, so -> noop\n          return dest;\n        } else if (c.ld !== void 0) {\n          if (c.li !== void 0) {\n            // we're replacing, they're deleting. we become an insert.\n            delete c.ld;\n          } else {\n            // we're trying to delete the same element, -> noop\n            return dest;\n          }\n        }\n      }\n\n    } else if (otherC.lm !== void 0) {\n      if (c.lm !== void 0 && cplength === otherCplength) {\n        // lm vs lm, here we go!\n        var from = c.p[common];\n        var to = c.lm;\n        var otherFrom = otherC.p[common];\n        var otherTo = otherC.lm;\n        if (otherFrom !== otherTo) {\n          // if otherFrom == otherTo, we don't need to change our op.\n\n          // where did my thing go?\n          if (from === otherFrom) {\n            // they moved it! tie break.\n            if (type === 'left') {\n              c.p[common] = otherTo;\n              if (from === to) // ugh\n                c.lm = otherTo;\n            } else {\n              return dest;\n            }\n          } else {\n            // they moved around it\n            if (from > otherFrom) c.p[common]--;\n            if (from > otherTo) c.p[common]++;\n            else if (from === otherTo) {\n              if (otherFrom > otherTo) {\n                c.p[common]++;\n                if (from === to) // ugh, again\n                  c.lm++;\n              }\n            }\n\n            // step 2: where am i going to put it?\n            if (to > otherFrom) {\n              c.lm--;\n            } else if (to === otherFrom) {\n              if (to > from)\n                c.lm--;\n            }\n            if (to > otherTo) {\n              c.lm++;\n            } else if (to === otherTo) {\n              // if we're both moving in the same direction, tie break\n              if ((otherTo > otherFrom && to > from) ||\n                  (otherTo < otherFrom && to < from)) {\n                if (type === 'right') c.lm++;\n              } else {\n                if (to > from) c.lm++;\n                else if (to === otherFrom) c.lm--;\n              }\n            }\n          }\n        }\n      } else if (c.li !== void 0 && c.ld === undefined && commonOperand) {\n        // li\n        var from = otherC.p[common];\n        var to = otherC.lm;\n        p = c.p[common];\n        if (p > from) c.p[common]--;\n        if (p > to) c.p[common]++;\n      } else {\n        // ld, ld+li, si, sd, na, oi, od, oi+od, any li on an element beneath\n        // the lm\n        //\n        // i.e. things care about where their item is after the move.\n        var from = otherC.p[common];\n        var to = otherC.lm;\n        p = c.p[common];\n        if (p === from) {\n          c.p[common] = to;\n        } else {\n          if (p > from) c.p[common]--;\n          if (p > to) c.p[common]++;\n          else if (p === to && from > to) c.p[common]++;\n        }\n      }\n    }\n    else if (otherC.oi !== void 0 && otherC.od !== void 0) {\n      if (c.p[common] === otherC.p[common]) {\n        if (c.oi !== void 0 && commonOperand) {\n          // we inserted where someone else replaced\n          if (type === 'right') {\n            // left wins\n            return dest;\n          } else {\n            // we win, make our op replace what they inserted\n            c.od = otherC.oi;\n          }\n        } else {\n          // -> noop if the other component is deleting the same object (or any parent)\n          return dest;\n        }\n      }\n    } else if (otherC.oi !== void 0) {\n      if (c.oi !== void 0 && c.p[common] === otherC.p[common]) {\n        // left wins if we try to insert at the same place\n        if (type === 'left') {\n          json.append(dest,{p: c.p, od:otherC.oi});\n        } else {\n          return dest;\n        }\n      }\n    } else if (otherC.od !== void 0) {\n      if (c.p[common] == otherC.p[common]) {\n        if (!commonOperand)\n          return dest;\n        if (c.oi !== void 0) {\n          delete c.od;\n        } else {\n          return dest;\n        }\n      }\n    }\n  }\n\n  json.append(dest,c);\n  return dest;\n};\n\nrequire('./bootstrapTransform')(json, json.transformComponent, json.checkValidOp, json.append);\n\n/**\n * Register a subtype for string operations, using the text0 type.\n */\nvar text = require('./text0');\n\njson.registerSubtype(text);\nmodule.exports = json;\n\n","// Only the JSON type is exported, because the text type is deprecated\n// otherwise. (If you want to use it somewhere, you're welcome to pull it out\n// into a separate module that json0 can depend on).\n\nmodule.exports = {\n  type: require('./json0')\n};\n","\nexports.defaultType = require('ot-json0').type;\n\nexports.map = Object.create(null);\n\nexports.register = function(type) {\n  if (type.name) exports.map[type.name] = type;\n  if (type.uri) exports.map[type.uri] = type;\n};\n\nexports.register(exports.defaultType);\n","exports.messageChannel = function() {\n  var triggerCallback = createNextTickTrigger(arguments);\n  var channel = new MessageChannel();\n  channel.port1.onmessage = function() {\n    triggerCallback();\n    channel.port1.close();\n  };\n  channel.port2.postMessage('');\n};\n\nexports.setTimeout = function() {\n  var triggerCallback = createNextTickTrigger(arguments);\n  setTimeout(triggerCallback);\n};\n\nfunction createNextTickTrigger(args) {\n  var callback = args[0];\n  var _args = [];\n  for (var i = 1; i < args.length; i++) {\n    _args[i - 1] = args[i];\n  }\n\n  return function triggerCallback() {\n    callback.apply(null, _args);\n  };\n}\n","'use strict';\n\n/** @type {import('./shams')} */\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\t/** @type {{ [k in symbol]?: unknown }} */\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (var _ in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\t// eslint-disable-next-line no-extra-parens\n\t\tvar descriptor = /** @type {PropertyDescriptor} */ (Object.getOwnPropertyDescriptor(obj, sym));\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Object;\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Error;\n","'use strict';\n\n/** @type {import('./eval')} */\nmodule.exports = EvalError;\n","'use strict';\n\n/** @type {import('./range')} */\nmodule.exports = RangeError;\n","'use strict';\n\n/** @type {import('./ref')} */\nmodule.exports = ReferenceError;\n","'use strict';\n\n/** @type {import('./syntax')} */\nmodule.exports = SyntaxError;\n","'use strict';\n\n/** @type {import('./type')} */\nmodule.exports = TypeError;\n","'use strict';\n\n/** @type {import('./uri')} */\nmodule.exports = URIError;\n","'use strict';\n\n/** @type {import('./abs')} */\nmodule.exports = Math.abs;\n","'use strict';\n\n/** @type {import('./floor')} */\nmodule.exports = Math.floor;\n","'use strict';\n\n/** @type {import('./max')} */\nmodule.exports = Math.max;\n","'use strict';\n\n/** @type {import('./min')} */\nmodule.exports = Math.min;\n","'use strict';\n\n/** @type {import('./pow')} */\nmodule.exports = Math.pow;\n","'use strict';\n\n/** @type {import('./round')} */\nmodule.exports = Math.round;\n","'use strict';\n\n/** @type {import('./isNaN')} */\nmodule.exports = Number.isNaN || function isNaN(a) {\n\treturn a !== a;\n};\n","'use strict';\n\nvar $isNaN = require('./isNaN');\n\n/** @type {import('./sign')} */\nmodule.exports = function sign(number) {\n\tif ($isNaN(number) || number === 0) {\n\t\treturn number;\n\t}\n\treturn number < 0 ? -1 : +1;\n};\n","'use strict';\n\n/** @type {import('./gOPD')} */\nmodule.exports = Object.getOwnPropertyDescriptor;\n","'use strict';\n\n/** @type {import('.')} */\nvar $gOPD = require('./gOPD');\n\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nmodule.exports = $gOPD;\n","'use strict';\n\n/** @type {import('.')} */\nvar $defineProperty = Object.defineProperty || false;\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = false;\n\t}\n}\n\nmodule.exports = $defineProperty;\n","'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\n/** @type {import('./Reflect.getPrototypeOf')} */\nmodule.exports = (typeof Reflect !== 'undefined' && Reflect.getPrototypeOf) || null;\n","'use strict';\n\nvar $Object = require('es-object-atoms');\n\n/** @type {import('./Object.getPrototypeOf')} */\nmodule.exports = $Object.getPrototypeOf || null;\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar toStr = Object.prototype.toString;\nvar max = Math.max;\nvar funcType = '[object Function]';\n\nvar concatty = function concatty(a, b) {\n    var arr = [];\n\n    for (var i = 0; i < a.length; i += 1) {\n        arr[i] = a[i];\n    }\n    for (var j = 0; j < b.length; j += 1) {\n        arr[j + a.length] = b[j];\n    }\n\n    return arr;\n};\n\nvar slicy = function slicy(arrLike, offset) {\n    var arr = [];\n    for (var i = offset || 0, j = 0; i < arrLike.length; i += 1, j += 1) {\n        arr[j] = arrLike[i];\n    }\n    return arr;\n};\n\nvar joiny = function (arr, joiner) {\n    var str = '';\n    for (var i = 0; i < arr.length; i += 1) {\n        str += arr[i];\n        if (i + 1 < arr.length) {\n            str += joiner;\n        }\n    }\n    return str;\n};\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.apply(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slicy(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                concatty(args, arguments)\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        }\n        return target.apply(\n            that,\n            concatty(args, arguments)\n        );\n\n    };\n\n    var boundLength = max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs[i] = '$' + i;\n    }\n\n    bound = Function('binder', 'return function (' + joiny(boundArgs, ',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\n/** @type {import('./functionCall')} */\nmodule.exports = Function.prototype.call;\n","'use strict';\n\n/** @type {import('./functionApply')} */\nmodule.exports = Function.prototype.apply;\n","'use strict';\n\n/** @type {import('./reflectApply')} */\nmodule.exports = typeof Reflect !== 'undefined' && Reflect && Reflect.apply;\n","'use strict';\n\nvar bind = require('function-bind');\n\nvar $apply = require('./functionApply');\nvar $call = require('./functionCall');\nvar $reflectApply = require('./reflectApply');\n\n/** @type {import('./actualApply')} */\nmodule.exports = $reflectApply || bind.call($call, $apply);\n","'use strict';\n\nvar bind = require('function-bind');\nvar $TypeError = require('es-errors/type');\n\nvar $call = require('./functionCall');\nvar $actualApply = require('./actualApply');\n\n/** @type {(args: [Function, thisArg?: unknown, ...args: unknown[]]) => Function} TODO FIXME, find a way to use import('.') */\nmodule.exports = function callBindBasic(args) {\n\tif (args.length < 1 || typeof args[0] !== 'function') {\n\t\tthrow new $TypeError('a function is required');\n\t}\n\treturn $actualApply(bind, $call, args);\n};\n","'use strict';\n\nvar callBind = require('call-bind-apply-helpers');\nvar gOPD = require('gopd');\n\nvar hasProtoAccessor;\ntry {\n\t// eslint-disable-next-line no-extra-parens, no-proto\n\thasProtoAccessor = /** @type {{ __proto__?: typeof Array.prototype }} */ ([]).__proto__ === Array.prototype;\n} catch (e) {\n\tif (!e || typeof e !== 'object' || !('code' in e) || e.code !== 'ERR_PROTO_ACCESS') {\n\t\tthrow e;\n\t}\n}\n\n// eslint-disable-next-line no-extra-parens\nvar desc = !!hasProtoAccessor && gOPD && gOPD(Object.prototype, /** @type {keyof typeof Object.prototype} */ ('__proto__'));\n\nvar $Object = Object;\nvar $getPrototypeOf = $Object.getPrototypeOf;\n\n/** @type {import('./get')} */\nmodule.exports = desc && typeof desc.get === 'function'\n\t? callBind([desc.get])\n\t: typeof $getPrototypeOf === 'function'\n\t\t? /** @type {import('./get')} */ function getDunder(value) {\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\treturn $getPrototypeOf(value == null ? value : $Object(value));\n\t\t}\n\t\t: false;\n","'use strict';\n\nvar reflectGetProto = require('./Reflect.getPrototypeOf');\nvar originalGetProto = require('./Object.getPrototypeOf');\n\nvar getDunderProto = require('dunder-proto/get');\n\n/** @type {import('.')} */\nmodule.exports = reflectGetProto\n\t? function getProto(O) {\n\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\treturn reflectGetProto(O);\n\t}\n\t: originalGetProto\n\t\t? function getProto(O) {\n\t\t\tif (!O || (typeof O !== 'object' && typeof O !== 'function')) {\n\t\t\t\tthrow new TypeError('getProto: not an object');\n\t\t\t}\n\t\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\t\treturn originalGetProto(O);\n\t\t}\n\t\t: getDunderProto\n\t\t\t? function getProto(O) {\n\t\t\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\t\t\treturn getDunderProto(O);\n\t\t\t}\n\t\t\t: null;\n","'use strict';\n\nvar call = Function.prototype.call;\nvar $hasOwn = Object.prototype.hasOwnProperty;\nvar bind = require('function-bind');\n\n/** @type {import('.')} */\nmodule.exports = bind.call(call, $hasOwn);\n","'use strict';\n\nvar undefined;\n\nvar $Object = require('es-object-atoms');\n\nvar $Error = require('es-errors');\nvar $EvalError = require('es-errors/eval');\nvar $RangeError = require('es-errors/range');\nvar $ReferenceError = require('es-errors/ref');\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\nvar $URIError = require('es-errors/uri');\n\nvar abs = require('math-intrinsics/abs');\nvar floor = require('math-intrinsics/floor');\nvar max = require('math-intrinsics/max');\nvar min = require('math-intrinsics/min');\nvar pow = require('math-intrinsics/pow');\nvar round = require('math-intrinsics/round');\nvar sign = require('math-intrinsics/sign');\n\nvar $Function = Function;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = require('gopd');\nvar $defineProperty = require('es-define-property');\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\n\nvar getProto = require('get-proto');\nvar $ObjectGPO = require('get-proto/Object.getPrototypeOf');\nvar $ReflectGPO = require('get-proto/Reflect.getPrototypeOf');\n\nvar $apply = require('call-bind-apply-helpers/functionApply');\nvar $call = require('call-bind-apply-helpers/functionCall');\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t__proto__: null,\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': $Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': $EvalError,\n\t'%Float16Array%': typeof Float16Array === 'undefined' ? undefined : Float16Array,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': $Object,\n\t'%Object.getOwnPropertyDescriptor%': $gOPD,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': $RangeError,\n\t'%ReferenceError%': $ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': $URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet,\n\n\t'%Function.prototype.call%': $call,\n\t'%Function.prototype.apply%': $apply,\n\t'%Object.defineProperty%': $defineProperty,\n\t'%Object.getPrototypeOf%': $ObjectGPO,\n\t'%Math.abs%': abs,\n\t'%Math.floor%': floor,\n\t'%Math.max%': max,\n\t'%Math.min%': min,\n\t'%Math.pow%': pow,\n\t'%Math.round%': round,\n\t'%Math.sign%': sign,\n\t'%Reflect.getPrototypeOf%': $ReflectGPO\n};\n\nif (getProto) {\n\ttry {\n\t\tnull.error; // eslint-disable-line no-unused-expressions\n\t} catch (e) {\n\t\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\t\tvar errorProto = getProto(getProto(e));\n\t\tINTRINSICS['%Error.prototype%'] = errorProto;\n\t}\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen && getProto) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t__proto__: null,\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('hasown');\nvar $concat = bind.call($call, Array.prototype.concat);\nvar $spliceApply = bind.call($apply, Array.prototype.splice);\nvar $replace = bind.call($call, String.prototype.replace);\nvar $strSlice = bind.call($call, String.prototype.slice);\nvar $exec = bind.call($call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBindBasic = require('call-bind-apply-helpers');\n\n/** @type {(thisArg: string, searchString: string, position?: number) => number} */\nvar $indexOf = callBindBasic([GetIntrinsic('%String.prototype.indexOf%')]);\n\n/** @type {import('.')} */\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\t/* eslint no-extra-parens: 0 */\n\n\tvar intrinsic = /** @type {(this: unknown, ...args: unknown[]) => unknown} */ (GetIntrinsic(name, !!allowMissing));\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBindBasic(/** @type {const} */ ([intrinsic]));\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar callBound = require('call-bound');\n\nvar $toString = callBound('Object.prototype.toString');\n\n/** @type {import('.')} */\nvar isStandardArguments = function isArguments(value) {\n\tif (\n\t\thasToStringTag\n\t\t&& value\n\t\t&& typeof value === 'object'\n\t\t&& Symbol.toStringTag in value\n\t) {\n\t\treturn false;\n\t}\n\treturn $toString(value) === '[object Arguments]';\n};\n\n/** @type {import('.')} */\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null\n\t\t&& typeof value === 'object'\n\t\t&& 'length' in value\n\t\t&& typeof value.length === 'number'\n\t\t&& value.length >= 0\n\t\t&& $toString(value) !== '[object Array]'\n\t\t&& 'callee' in value\n\t\t&& $toString(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\n// @ts-expect-error TODO make this not error\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\n/** @type {import('.')} */\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","'use strict';\n\nvar callBound = require('call-bound');\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar hasOwn = require('hasown');\nvar gOPD = require('gopd');\n\n/** @type {import('.')} */\nvar fn;\n\nif (hasToStringTag) {\n\t/** @type {(receiver: ThisParameterType<typeof RegExp.prototype.exec>, ...args: Parameters<typeof RegExp.prototype.exec>) => ReturnType<typeof RegExp.prototype.exec>} */\n\tvar $exec = callBound('RegExp.prototype.exec');\n\t/** @type {object} */\n\tvar isRegexMarker = {};\n\n\tvar throwRegexMarker = function () {\n\t\tthrow isRegexMarker;\n\t};\n\t/** @type {{ toString(): never, valueOf(): never, [Symbol.toPrimitive]?(): never }} */\n\tvar badStringifier = {\n\t\ttoString: throwRegexMarker,\n\t\tvalueOf: throwRegexMarker\n\t};\n\n\tif (typeof Symbol.toPrimitive === 'symbol') {\n\t\tbadStringifier[Symbol.toPrimitive] = throwRegexMarker;\n\t}\n\n\t/** @type {import('.')} */\n\t// @ts-expect-error TS can't figure out that the $exec call always throws\n\t// eslint-disable-next-line consistent-return\n\tfn = function isRegex(value) {\n\t\tif (!value || typeof value !== 'object') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// eslint-disable-next-line no-extra-parens\n\t\tvar descriptor = /** @type {NonNullable<typeof gOPD>} */ (gOPD)(/** @type {{ lastIndex?: unknown }} */ (value), 'lastIndex');\n\t\tvar hasLastIndexDataProperty = descriptor && hasOwn(descriptor, 'value');\n\t\tif (!hasLastIndexDataProperty) {\n\t\t\treturn false;\n\t\t}\n\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-extra-parens\n\t\t\t$exec(value, /** @type {string} */ (/** @type {unknown} */ (badStringifier)));\n\t\t} catch (e) {\n\t\t\treturn e === isRegexMarker;\n\t\t}\n\t};\n} else {\n\t/** @type {(receiver: ThisParameterType<typeof Object.prototype.toString>, ...args: Parameters<typeof Object.prototype.toString>) => ReturnType<typeof Object.prototype.toString>} */\n\tvar $toString = callBound('Object.prototype.toString');\n\t/** @const @type {'[object RegExp]'} */\n\tvar regexClass = '[object RegExp]';\n\n\t/** @type {import('.')} */\n\tfn = function isRegex(value) {\n\t\t// In older browsers, typeof regex incorrectly returns 'function'\n\t\tif (!value || (typeof value !== 'object' && typeof value !== 'function')) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn $toString(value) === regexClass;\n\t};\n}\n\nmodule.exports = fn;\n","'use strict';\n\nvar callBound = require('call-bound');\nvar isRegex = require('is-regex');\n\nvar $exec = callBound('RegExp.prototype.exec');\nvar $TypeError = require('es-errors/type');\n\n/** @type {import('.')} */\nmodule.exports = function regexTester(regex) {\n\tif (!isRegex(regex)) {\n\t\tthrow new $TypeError('`regex` must be a RegExp');\n\t}\n\treturn function test(s) {\n\t\treturn $exec(regex, s) !== null;\n\t};\n};\n","'use strict';\n\nvar callBound = require('call-bound');\nvar safeRegexTest = require('safe-regex-test');\nvar isFnRegex = safeRegexTest(/^\\s*(?:function)?\\*/);\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar getProto = require('get-proto');\n\nvar toStr = callBound('Object.prototype.toString');\nvar fnToStr = callBound('Function.prototype.toString');\n\nvar getGeneratorFunc = function () { // eslint-disable-line consistent-return\n\tif (!hasToStringTag) {\n\t\treturn false;\n\t}\n\ttry {\n\t\treturn Function('return function*() {}')();\n\t} catch (e) {\n\t}\n};\n/** @type {undefined | false | null | GeneratorFunctionConstructor} */\nvar GeneratorFunction;\n\n/** @type {import('.')} */\nmodule.exports = function isGeneratorFunction(fn) {\n\tif (typeof fn !== 'function') {\n\t\treturn false;\n\t}\n\tif (isFnRegex(fnToStr(fn))) {\n\t\treturn true;\n\t}\n\tif (!hasToStringTag) {\n\t\tvar str = toStr(fn);\n\t\treturn str === '[object GeneratorFunction]';\n\t}\n\tif (!getProto) {\n\t\treturn false;\n\t}\n\tif (typeof GeneratorFunction === 'undefined') {\n\t\tvar generatorFunc = getGeneratorFunc();\n\t\tGeneratorFunction = generatorFunc\n\t\t\t// eslint-disable-next-line no-extra-parens\n\t\t\t? /** @type {GeneratorFunctionConstructor} */ (getProto(generatorFunc))\n\t\t\t: false;\n\t}\n\treturn getProto(fn) === GeneratorFunction;\n};\n","'use strict';\n\nvar fnToStr = Function.prototype.toString;\nvar reflectApply = typeof Reflect === 'object' && Reflect !== null && Reflect.apply;\nvar badArrayLike;\nvar isCallableMarker;\nif (typeof reflectApply === 'function' && typeof Object.defineProperty === 'function') {\n\ttry {\n\t\tbadArrayLike = Object.defineProperty({}, 'length', {\n\t\t\tget: function () {\n\t\t\t\tthrow isCallableMarker;\n\t\t\t}\n\t\t});\n\t\tisCallableMarker = {};\n\t\t// eslint-disable-next-line no-throw-literal\n\t\treflectApply(function () { throw 42; }, null, badArrayLike);\n\t} catch (_) {\n\t\tif (_ !== isCallableMarker) {\n\t\t\treflectApply = null;\n\t\t}\n\t}\n} else {\n\treflectApply = null;\n}\n\nvar constructorRegex = /^\\s*class\\b/;\nvar isES6ClassFn = function isES6ClassFunction(value) {\n\ttry {\n\t\tvar fnStr = fnToStr.call(value);\n\t\treturn constructorRegex.test(fnStr);\n\t} catch (e) {\n\t\treturn false; // not a function\n\t}\n};\n\nvar tryFunctionObject = function tryFunctionToStr(value) {\n\ttry {\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tfnToStr.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar objectClass = '[object Object]';\nvar fnClass = '[object Function]';\nvar genClass = '[object GeneratorFunction]';\nvar ddaClass = '[object HTMLAllCollection]'; // IE 11\nvar ddaClass2 = '[object HTML document.all class]';\nvar ddaClass3 = '[object HTMLCollection]'; // IE 9-10\nvar hasToStringTag = typeof Symbol === 'function' && !!Symbol.toStringTag; // better: use `has-tostringtag`\n\nvar isIE68 = !(0 in [,]); // eslint-disable-line no-sparse-arrays, comma-spacing\n\nvar isDDA = function isDocumentDotAll() { return false; };\nif (typeof document === 'object') {\n\t// Firefox 3 canonicalizes DDA to undefined when it's not accessed directly\n\tvar all = document.all;\n\tif (toStr.call(all) === toStr.call(document.all)) {\n\t\tisDDA = function isDocumentDotAll(value) {\n\t\t\t/* globals document: false */\n\t\t\t// in IE 6-8, typeof document.all is \"object\" and it's truthy\n\t\t\tif ((isIE68 || !value) && (typeof value === 'undefined' || typeof value === 'object')) {\n\t\t\t\ttry {\n\t\t\t\t\tvar str = toStr.call(value);\n\t\t\t\t\treturn (\n\t\t\t\t\t\tstr === ddaClass\n\t\t\t\t\t\t|| str === ddaClass2\n\t\t\t\t\t\t|| str === ddaClass3 // opera 12.16\n\t\t\t\t\t\t|| str === objectClass // IE 6-8\n\t\t\t\t\t) && value('') == null; // eslint-disable-line eqeqeq\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n}\n\nmodule.exports = reflectApply\n\t? function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\ttry {\n\t\t\treflectApply(value, null, badArrayLike);\n\t\t} catch (e) {\n\t\t\tif (e !== isCallableMarker) { return false; }\n\t\t}\n\t\treturn !isES6ClassFn(value) && tryFunctionObject(value);\n\t}\n\t: function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\tif (hasToStringTag) { return tryFunctionObject(value); }\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tvar strClass = toStr.call(value);\n\t\tif (strClass !== fnClass && strClass !== genClass && !(/^\\[object HTML/).test(strClass)) { return false; }\n\t\treturn tryFunctionObject(value);\n\t};\n","'use strict';\n\nvar isCallable = require('is-callable');\n\nvar toStr = Object.prototype.toString;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/** @type {<This, A extends readonly unknown[]>(arr: A, iterator: (this: This | void, value: A[number], index: number, arr: A) => void, receiver: This | undefined) => void} */\nvar forEachArray = function forEachArray(array, iterator, receiver) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n            if (receiver == null) {\n                iterator(array[i], i, array);\n            } else {\n                iterator.call(receiver, array[i], i, array);\n            }\n        }\n    }\n};\n\n/** @type {<This, S extends string>(string: S, iterator: (this: This | void, value: S[number], index: number, string: S) => void, receiver: This | undefined) => void} */\nvar forEachString = function forEachString(string, iterator, receiver) {\n    for (var i = 0, len = string.length; i < len; i++) {\n        // no such thing as a sparse string.\n        if (receiver == null) {\n            iterator(string.charAt(i), i, string);\n        } else {\n            iterator.call(receiver, string.charAt(i), i, string);\n        }\n    }\n};\n\n/** @type {<This, O>(obj: O, iterator: (this: This | void, value: O[keyof O], index: keyof O, obj: O) => void, receiver: This | undefined) => void} */\nvar forEachObject = function forEachObject(object, iterator, receiver) {\n    for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n            if (receiver == null) {\n                iterator(object[k], k, object);\n            } else {\n                iterator.call(receiver, object[k], k, object);\n            }\n        }\n    }\n};\n\n/** @type {(x: unknown) => x is readonly unknown[]} */\nfunction isArray(x) {\n    return toStr.call(x) === '[object Array]';\n}\n\n/** @type {import('.')._internal} */\nmodule.exports = function forEach(list, iterator, thisArg) {\n    if (!isCallable(iterator)) {\n        throw new TypeError('iterator must be a function');\n    }\n\n    var receiver;\n    if (arguments.length >= 3) {\n        receiver = thisArg;\n    }\n\n    if (isArray(list)) {\n        forEachArray(list, iterator, receiver);\n    } else if (typeof list === 'string') {\n        forEachString(list, iterator, receiver);\n    } else {\n        forEachObject(list, iterator, receiver);\n    }\n};\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = [\n\t'Float16Array',\n\t'Float32Array',\n\t'Float64Array',\n\t'Int8Array',\n\t'Int16Array',\n\t'Int32Array',\n\t'Uint8Array',\n\t'Uint8ClampedArray',\n\t'Uint16Array',\n\t'Uint32Array',\n\t'BigInt64Array',\n\t'BigUint64Array'\n];\n","'use strict';\n\nvar possibleNames = require('possible-typed-array-names');\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\n\n/** @type {import('.')} */\nmodule.exports = function availableTypedArrays() {\n\tvar /** @type {ReturnType<typeof availableTypedArrays>} */ out = [];\n\tfor (var i = 0; i < possibleNames.length; i++) {\n\t\tif (typeof g[possibleNames[i]] === 'function') {\n\t\t\t// @ts-expect-error\n\t\t\tout[out.length] = possibleNames[i];\n\t\t}\n\t}\n\treturn out;\n};\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\n\nvar gopd = require('gopd');\n\n/** @type {import('.')} */\nmodule.exports = function defineDataProperty(\n\tobj,\n\tproperty,\n\tvalue\n) {\n\tif (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {\n\t\tthrow new $TypeError('`obj` must be an object or a function`');\n\t}\n\tif (typeof property !== 'string' && typeof property !== 'symbol') {\n\t\tthrow new $TypeError('`property` must be a string or a symbol`');\n\t}\n\tif (arguments.length > 3 && typeof arguments[3] !== 'boolean' && arguments[3] !== null) {\n\t\tthrow new $TypeError('`nonEnumerable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 4 && typeof arguments[4] !== 'boolean' && arguments[4] !== null) {\n\t\tthrow new $TypeError('`nonWritable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 5 && typeof arguments[5] !== 'boolean' && arguments[5] !== null) {\n\t\tthrow new $TypeError('`nonConfigurable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 6 && typeof arguments[6] !== 'boolean') {\n\t\tthrow new $TypeError('`loose`, if provided, must be a boolean');\n\t}\n\n\tvar nonEnumerable = arguments.length > 3 ? arguments[3] : null;\n\tvar nonWritable = arguments.length > 4 ? arguments[4] : null;\n\tvar nonConfigurable = arguments.length > 5 ? arguments[5] : null;\n\tvar loose = arguments.length > 6 ? arguments[6] : false;\n\n\t/* @type {false | TypedPropertyDescriptor<unknown>} */\n\tvar desc = !!gopd && gopd(obj, property);\n\n\tif ($defineProperty) {\n\t\t$defineProperty(obj, property, {\n\t\t\tconfigurable: nonConfigurable === null && desc ? desc.configurable : !nonConfigurable,\n\t\t\tenumerable: nonEnumerable === null && desc ? desc.enumerable : !nonEnumerable,\n\t\t\tvalue: value,\n\t\t\twritable: nonWritable === null && desc ? desc.writable : !nonWritable\n\t\t});\n\t} else if (loose || (!nonEnumerable && !nonWritable && !nonConfigurable)) {\n\t\t// must fall back to [[Set]], and was not explicitly asked to make non-enumerable, non-writable, or non-configurable\n\t\tobj[property] = value; // eslint-disable-line no-param-reassign\n\t} else {\n\t\tthrow new $SyntaxError('This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.');\n\t}\n};\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar hasPropertyDescriptors = function hasPropertyDescriptors() {\n\treturn !!$defineProperty;\n};\n\nhasPropertyDescriptors.hasArrayLengthDefineBug = function hasArrayLengthDefineBug() {\n\t// node v0.6 has a bug where array lengths can be Set but not Defined\n\tif (!$defineProperty) {\n\t\treturn null;\n\t}\n\ttry {\n\t\treturn $defineProperty([], 'length', { value: 1 }).length !== 1;\n\t} catch (e) {\n\t\t// In Firefox 4-22, defining length on an array throws an exception.\n\t\treturn true;\n\t}\n};\n\nmodule.exports = hasPropertyDescriptors;\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar define = require('define-data-property');\nvar hasDescriptors = require('has-property-descriptors')();\nvar gOPD = require('gopd');\n\nvar $TypeError = require('es-errors/type');\nvar $floor = GetIntrinsic('%Math.floor%');\n\n/** @type {import('.')} */\nmodule.exports = function setFunctionLength(fn, length) {\n\tif (typeof fn !== 'function') {\n\t\tthrow new $TypeError('`fn` is not a function');\n\t}\n\tif (typeof length !== 'number' || length < 0 || length > 0xFFFFFFFF || $floor(length) !== length) {\n\t\tthrow new $TypeError('`length` must be a positive 32-bit integer');\n\t}\n\n\tvar loose = arguments.length > 2 && !!arguments[2];\n\n\tvar functionLengthIsConfigurable = true;\n\tvar functionLengthIsWritable = true;\n\tif ('length' in fn && gOPD) {\n\t\tvar desc = gOPD(fn, 'length');\n\t\tif (desc && !desc.configurable) {\n\t\t\tfunctionLengthIsConfigurable = false;\n\t\t}\n\t\tif (desc && !desc.writable) {\n\t\t\tfunctionLengthIsWritable = false;\n\t\t}\n\t}\n\n\tif (functionLengthIsConfigurable || functionLengthIsWritable || !loose) {\n\t\tif (hasDescriptors) {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length, true, true);\n\t\t} else {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length);\n\t\t}\n\t}\n\treturn fn;\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar $apply = require('./functionApply');\nvar actualApply = require('./actualApply');\n\n/** @type {import('./applyBind')} */\nmodule.exports = function applyBind() {\n\treturn actualApply(bind, $apply, arguments);\n};\n","'use strict';\n\nvar setFunctionLength = require('set-function-length');\n\nvar $defineProperty = require('es-define-property');\n\nvar callBindBasic = require('call-bind-apply-helpers');\nvar applyBind = require('call-bind-apply-helpers/applyBind');\n\nmodule.exports = function callBind(originalFunction) {\n\tvar func = callBindBasic(arguments);\n\tvar adjustedLength = originalFunction.length - (arguments.length - 1);\n\treturn setFunctionLength(\n\t\tfunc,\n\t\t1 + (adjustedLength > 0 ? adjustedLength : 0),\n\t\ttrue\n\t);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","'use strict';\n\nvar forEach = require('for-each');\nvar availableTypedArrays = require('available-typed-arrays');\nvar callBind = require('call-bind');\nvar callBound = require('call-bound');\nvar gOPD = require('gopd');\nvar getProto = require('get-proto');\n\nvar $toString = callBound('Object.prototype.toString');\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\nvar typedArrays = availableTypedArrays();\n\nvar $slice = callBound('String.prototype.slice');\n\n/** @type {<T = unknown>(array: readonly T[], value: unknown) => number} */\nvar $indexOf = callBound('Array.prototype.indexOf', true) || function indexOf(array, value) {\n\tfor (var i = 0; i < array.length; i += 1) {\n\t\tif (array[i] === value) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n/** @typedef {import('./types').Getter} Getter */\n/** @type {import('./types').Cache} */\nvar cache = { __proto__: null };\nif (hasToStringTag && gOPD && getProto) {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tif (Symbol.toStringTag in arr && getProto) {\n\t\t\tvar proto = getProto(arr);\n\t\t\t// @ts-expect-error TS won't narrow inside a closure\n\t\t\tvar descriptor = gOPD(proto, Symbol.toStringTag);\n\t\t\tif (!descriptor && proto) {\n\t\t\t\tvar superProto = getProto(proto);\n\t\t\t\t// @ts-expect-error TS won't narrow inside a closure\n\t\t\t\tdescriptor = gOPD(superProto, Symbol.toStringTag);\n\t\t\t}\n\t\t\t// @ts-expect-error TODO: fix\n\t\t\tcache['$' + typedArray] = callBind(descriptor.get);\n\t\t}\n\t});\n} else {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tvar fn = arr.slice || arr.set;\n\t\tif (fn) {\n\t\t\tcache[\n\t\t\t\t/** @type {`$${import('.').TypedArrayName}`} */ ('$' + typedArray)\n\t\t\t] = /** @type {import('./types').BoundSlice | import('./types').BoundSet} */ (\n\t\t\t\t// @ts-expect-error TODO FIXME\n\t\t\t\tcallBind(fn)\n\t\t\t);\n\t\t}\n\t});\n}\n\n/** @type {(value: object) => false | import('.').TypedArrayName} */\nvar tryTypedArrays = function tryAllTypedArrays(value) {\n\t/** @type {ReturnType<typeof tryAllTypedArrays>} */ var found = false;\n\tforEach(\n\t\t/** @type {Record<`\\$${import('.').TypedArrayName}`, Getter>} */ (cache),\n\t\t/** @type {(getter: Getter, name: `\\$${import('.').TypedArrayName}`) => void} */\n\t\tfunction (getter, typedArray) {\n\t\t\tif (!found) {\n\t\t\t\ttry {\n\t\t\t\t\t// @ts-expect-error a throw is fine here\n\t\t\t\t\tif ('$' + getter(value) === typedArray) {\n\t\t\t\t\t\tfound = /** @type {import('.').TypedArrayName} */ ($slice(typedArray, 1));\n\t\t\t\t\t}\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t}\n\t);\n\treturn found;\n};\n\n/** @type {(value: object) => false | import('.').TypedArrayName} */\nvar trySlices = function tryAllSlices(value) {\n\t/** @type {ReturnType<typeof tryAllSlices>} */ var found = false;\n\tforEach(\n\t\t/** @type {Record<`\\$${import('.').TypedArrayName}`, Getter>} */(cache),\n\t\t/** @type {(getter: Getter, name: `\\$${import('.').TypedArrayName}`) => void} */ function (getter, name) {\n\t\t\tif (!found) {\n\t\t\t\ttry {\n\t\t\t\t\t// @ts-expect-error a throw is fine here\n\t\t\t\t\tgetter(value);\n\t\t\t\t\tfound = /** @type {import('.').TypedArrayName} */ ($slice(name, 1));\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t}\n\t);\n\treturn found;\n};\n\n/** @type {import('.')} */\nmodule.exports = function whichTypedArray(value) {\n\tif (!value || typeof value !== 'object') { return false; }\n\tif (!hasToStringTag) {\n\t\t/** @type {string} */\n\t\tvar tag = $slice($toString(value), 8, -1);\n\t\tif ($indexOf(typedArrays, tag) > -1) {\n\t\t\treturn tag;\n\t\t}\n\t\tif (tag !== 'Object') {\n\t\t\treturn false;\n\t\t}\n\t\t// node < 0.6 hits here on real Typed Arrays\n\t\treturn trySlices(value);\n\t}\n\tif (!gOPD) { return null; } // unknown engine\n\treturn tryTypedArrays(value);\n};\n","'use strict';\n\nvar whichTypedArray = require('which-typed-array');\n\n/** @type {import('.')} */\nmodule.exports = function isTypedArray(value) {\n\treturn !!whichTypedArray(value);\n};\n","// Currently in sync with Node.js lib/internal/util/types.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n\n'use strict';\n\nvar isArgumentsObject = require('is-arguments');\nvar isGeneratorFunction = require('is-generator-function');\nvar whichTypedArray = require('which-typed-array');\nvar isTypedArray = require('is-typed-array');\n\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\n\nvar BigIntSupported = typeof BigInt !== 'undefined';\nvar SymbolSupported = typeof Symbol !== 'undefined';\n\nvar ObjectToString = uncurryThis(Object.prototype.toString);\n\nvar numberValue = uncurryThis(Number.prototype.valueOf);\nvar stringValue = uncurryThis(String.prototype.valueOf);\nvar booleanValue = uncurryThis(Boolean.prototype.valueOf);\n\nif (BigIntSupported) {\n  var bigIntValue = uncurryThis(BigInt.prototype.valueOf);\n}\n\nif (SymbolSupported) {\n  var symbolValue = uncurryThis(Symbol.prototype.valueOf);\n}\n\nfunction checkBoxedPrimitive(value, prototypeValueOf) {\n  if (typeof value !== 'object') {\n    return false;\n  }\n  try {\n    prototypeValueOf(value);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n\nexports.isArgumentsObject = isArgumentsObject;\nexports.isGeneratorFunction = isGeneratorFunction;\nexports.isTypedArray = isTypedArray;\n\n// Taken from here and modified for better browser support\n// https://github.com/sindresorhus/p-is-promise/blob/cda35a513bda03f977ad5cde3a079d237e82d7ef/index.js\nfunction isPromise(input) {\n\treturn (\n\t\t(\n\t\t\ttypeof Promise !== 'undefined' &&\n\t\t\tinput instanceof Promise\n\t\t) ||\n\t\t(\n\t\t\tinput !== null &&\n\t\t\ttypeof input === 'object' &&\n\t\t\ttypeof input.then === 'function' &&\n\t\t\ttypeof input.catch === 'function'\n\t\t)\n\t);\n}\nexports.isPromise = isPromise;\n\nfunction isArrayBufferView(value) {\n  if (typeof ArrayBuffer !== 'undefined' && ArrayBuffer.isView) {\n    return ArrayBuffer.isView(value);\n  }\n\n  return (\n    isTypedArray(value) ||\n    isDataView(value)\n  );\n}\nexports.isArrayBufferView = isArrayBufferView;\n\n\nfunction isUint8Array(value) {\n  return whichTypedArray(value) === 'Uint8Array';\n}\nexports.isUint8Array = isUint8Array;\n\nfunction isUint8ClampedArray(value) {\n  return whichTypedArray(value) === 'Uint8ClampedArray';\n}\nexports.isUint8ClampedArray = isUint8ClampedArray;\n\nfunction isUint16Array(value) {\n  return whichTypedArray(value) === 'Uint16Array';\n}\nexports.isUint16Array = isUint16Array;\n\nfunction isUint32Array(value) {\n  return whichTypedArray(value) === 'Uint32Array';\n}\nexports.isUint32Array = isUint32Array;\n\nfunction isInt8Array(value) {\n  return whichTypedArray(value) === 'Int8Array';\n}\nexports.isInt8Array = isInt8Array;\n\nfunction isInt16Array(value) {\n  return whichTypedArray(value) === 'Int16Array';\n}\nexports.isInt16Array = isInt16Array;\n\nfunction isInt32Array(value) {\n  return whichTypedArray(value) === 'Int32Array';\n}\nexports.isInt32Array = isInt32Array;\n\nfunction isFloat32Array(value) {\n  return whichTypedArray(value) === 'Float32Array';\n}\nexports.isFloat32Array = isFloat32Array;\n\nfunction isFloat64Array(value) {\n  return whichTypedArray(value) === 'Float64Array';\n}\nexports.isFloat64Array = isFloat64Array;\n\nfunction isBigInt64Array(value) {\n  return whichTypedArray(value) === 'BigInt64Array';\n}\nexports.isBigInt64Array = isBigInt64Array;\n\nfunction isBigUint64Array(value) {\n  return whichTypedArray(value) === 'BigUint64Array';\n}\nexports.isBigUint64Array = isBigUint64Array;\n\nfunction isMapToString(value) {\n  return ObjectToString(value) === '[object Map]';\n}\nisMapToString.working = (\n  typeof Map !== 'undefined' &&\n  isMapToString(new Map())\n);\n\nfunction isMap(value) {\n  if (typeof Map === 'undefined') {\n    return false;\n  }\n\n  return isMapToString.working\n    ? isMapToString(value)\n    : value instanceof Map;\n}\nexports.isMap = isMap;\n\nfunction isSetToString(value) {\n  return ObjectToString(value) === '[object Set]';\n}\nisSetToString.working = (\n  typeof Set !== 'undefined' &&\n  isSetToString(new Set())\n);\nfunction isSet(value) {\n  if (typeof Set === 'undefined') {\n    return false;\n  }\n\n  return isSetToString.working\n    ? isSetToString(value)\n    : value instanceof Set;\n}\nexports.isSet = isSet;\n\nfunction isWeakMapToString(value) {\n  return ObjectToString(value) === '[object WeakMap]';\n}\nisWeakMapToString.working = (\n  typeof WeakMap !== 'undefined' &&\n  isWeakMapToString(new WeakMap())\n);\nfunction isWeakMap(value) {\n  if (typeof WeakMap === 'undefined') {\n    return false;\n  }\n\n  return isWeakMapToString.working\n    ? isWeakMapToString(value)\n    : value instanceof WeakMap;\n}\nexports.isWeakMap = isWeakMap;\n\nfunction isWeakSetToString(value) {\n  return ObjectToString(value) === '[object WeakSet]';\n}\nisWeakSetToString.working = (\n  typeof WeakSet !== 'undefined' &&\n  isWeakSetToString(new WeakSet())\n);\nfunction isWeakSet(value) {\n  return isWeakSetToString(value);\n}\nexports.isWeakSet = isWeakSet;\n\nfunction isArrayBufferToString(value) {\n  return ObjectToString(value) === '[object ArrayBuffer]';\n}\nisArrayBufferToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  isArrayBufferToString(new ArrayBuffer())\n);\nfunction isArrayBuffer(value) {\n  if (typeof ArrayBuffer === 'undefined') {\n    return false;\n  }\n\n  return isArrayBufferToString.working\n    ? isArrayBufferToString(value)\n    : value instanceof ArrayBuffer;\n}\nexports.isArrayBuffer = isArrayBuffer;\n\nfunction isDataViewToString(value) {\n  return ObjectToString(value) === '[object DataView]';\n}\nisDataViewToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  typeof DataView !== 'undefined' &&\n  isDataViewToString(new DataView(new ArrayBuffer(1), 0, 1))\n);\nfunction isDataView(value) {\n  if (typeof DataView === 'undefined') {\n    return false;\n  }\n\n  return isDataViewToString.working\n    ? isDataViewToString(value)\n    : value instanceof DataView;\n}\nexports.isDataView = isDataView;\n\n// Store a copy of SharedArrayBuffer in case it's deleted elsewhere\nvar SharedArrayBufferCopy = typeof SharedArrayBuffer !== 'undefined' ? SharedArrayBuffer : undefined;\nfunction isSharedArrayBufferToString(value) {\n  return ObjectToString(value) === '[object SharedArrayBuffer]';\n}\nfunction isSharedArrayBuffer(value) {\n  if (typeof SharedArrayBufferCopy === 'undefined') {\n    return false;\n  }\n\n  if (typeof isSharedArrayBufferToString.working === 'undefined') {\n    isSharedArrayBufferToString.working = isSharedArrayBufferToString(new SharedArrayBufferCopy());\n  }\n\n  return isSharedArrayBufferToString.working\n    ? isSharedArrayBufferToString(value)\n    : value instanceof SharedArrayBufferCopy;\n}\nexports.isSharedArrayBuffer = isSharedArrayBuffer;\n\nfunction isAsyncFunction(value) {\n  return ObjectToString(value) === '[object AsyncFunction]';\n}\nexports.isAsyncFunction = isAsyncFunction;\n\nfunction isMapIterator(value) {\n  return ObjectToString(value) === '[object Map Iterator]';\n}\nexports.isMapIterator = isMapIterator;\n\nfunction isSetIterator(value) {\n  return ObjectToString(value) === '[object Set Iterator]';\n}\nexports.isSetIterator = isSetIterator;\n\nfunction isGeneratorObject(value) {\n  return ObjectToString(value) === '[object Generator]';\n}\nexports.isGeneratorObject = isGeneratorObject;\n\nfunction isWebAssemblyCompiledModule(value) {\n  return ObjectToString(value) === '[object WebAssembly.Module]';\n}\nexports.isWebAssemblyCompiledModule = isWebAssemblyCompiledModule;\n\nfunction isNumberObject(value) {\n  return checkBoxedPrimitive(value, numberValue);\n}\nexports.isNumberObject = isNumberObject;\n\nfunction isStringObject(value) {\n  return checkBoxedPrimitive(value, stringValue);\n}\nexports.isStringObject = isStringObject;\n\nfunction isBooleanObject(value) {\n  return checkBoxedPrimitive(value, booleanValue);\n}\nexports.isBooleanObject = isBooleanObject;\n\nfunction isBigIntObject(value) {\n  return BigIntSupported && checkBoxedPrimitive(value, bigIntValue);\n}\nexports.isBigIntObject = isBigIntObject;\n\nfunction isSymbolObject(value) {\n  return SymbolSupported && checkBoxedPrimitive(value, symbolValue);\n}\nexports.isSymbolObject = isSymbolObject;\n\nfunction isBoxedPrimitive(value) {\n  return (\n    isNumberObject(value) ||\n    isStringObject(value) ||\n    isBooleanObject(value) ||\n    isBigIntObject(value) ||\n    isSymbolObject(value)\n  );\n}\nexports.isBoxedPrimitive = isBoxedPrimitive;\n\nfunction isAnyArrayBuffer(value) {\n  return typeof Uint8Array !== 'undefined' && (\n    isArrayBuffer(value) ||\n    isSharedArrayBuffer(value)\n  );\n}\nexports.isAnyArrayBuffer = isAnyArrayBuffer;\n\n['isProxy', 'isExternal', 'isModuleNamespaceObject'].forEach(function(method) {\n  Object.defineProperty(exports, method, {\n    enumerable: false,\n    value: function() {\n      throw new Error(method + ' is not supported in userland');\n    }\n  });\n});\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnvRegex = /^$/;\n\nif (process.env.NODE_DEBUG) {\n  var debugEnv = process.env.NODE_DEBUG;\n  debugEnv = debugEnv.replace(/[|\\\\{}()[\\]^$+?.]/g, '\\\\$&')\n    .replace(/\\*/g, '.*')\n    .replace(/,/g, '$|^')\n    .toUpperCase();\n  debugEnvRegex = new RegExp('^' + debugEnv + '$', 'i');\n}\nexports.debuglog = function(set) {\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (debugEnvRegex.test(set)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').slice(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.slice(1, -1);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nexports.types = require('./support/types');\n\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\nexports.types.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\nexports.types.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\nexports.types.isNativeError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb.bind(null, null, ret)) },\n            function(rej) { process.nextTick(callbackifyOnRejected.bind(null, rej, cb)) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","var nextTickImpl = require('./next-tick');\n\nexports.doNothing = doNothing;\nfunction doNothing() {}\n\nexports.hasKeys = function(object) {\n  for (var key in object) return true;\n  return false;\n};\n\nvar hasOwn;\nexports.hasOwn = hasOwn = Object.hasOwn || function(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger#Polyfill\nexports.isInteger = Number.isInteger || function(value) {\n  return typeof value === 'number' &&\n    isFinite(value) &&\n    Math.floor(value) === value;\n};\n\nexports.isValidVersion = function(version) {\n  if (version === null) return true;\n  return exports.isInteger(version) && version >= 0;\n};\n\nexports.isValidTimestamp = function(timestamp) {\n  return exports.isValidVersion(timestamp);\n};\n\nexports.MAX_SAFE_INTEGER = 9007199254740991;\n\nexports.dig = function() {\n  var obj = arguments[0];\n  for (var i = 1; i < arguments.length; i++) {\n    var key = arguments[i];\n    obj = hasOwn(obj, key) ? obj[key] : (i === arguments.length - 1 ? undefined : Object.create(null));\n  }\n  return obj;\n};\n\nexports.digOrCreate = function() {\n  var obj = arguments[0];\n  var createCallback = arguments[arguments.length - 1];\n  for (var i = 1; i < arguments.length - 1; i++) {\n    var key = arguments[i];\n    obj = hasOwn(obj, key) ? obj[key] :\n      (obj[key] = i === arguments.length - 2 ? createCallback() : Object.create(null));\n  }\n  return obj;\n};\n\nexports.digAndRemove = function() {\n  var obj = arguments[0];\n  var objects = [obj];\n  for (var i = 1; i < arguments.length - 1; i++) {\n    var key = arguments[i];\n    if (!hasOwn(obj, key)) break;\n    obj = obj[key];\n    objects.push(obj);\n  };\n\n  for (var i = objects.length - 1; i >= 0; i--) {\n    var parent = objects[i];\n    var key = arguments[i + 1];\n    var child = parent[key];\n    if (i === objects.length - 1 || !exports.hasKeys(child)) delete parent[key];\n  }\n};\n\nexports.supportsPresence = function(type) {\n  return type && typeof type.transformPresence === 'function';\n};\n\nexports.callEach = function(callbacks, error) {\n  var called = false;\n  callbacks.forEach(function(callback) {\n    if (callback) {\n      callback(error);\n      called = true;\n    }\n  });\n  return called;\n};\n\nexports.truthy = function(arg) {\n  return !!arg;\n};\n\nif (typeof process !== 'undefined' && typeof process.nextTick === 'function') {\n  exports.nextTick = process.nextTick;\n} else if (typeof MessageChannel !== 'undefined') {\n  exports.nextTick = nextTickImpl.messageChannel;\n} else {\n  exports.nextTick = nextTickImpl.setTimeout;\n}\n\nexports.clone = function(obj) {\n  return (obj === undefined) ? undefined : JSON.parse(JSON.stringify(obj));\n};\n\nvar objectProtoPropNames = Object.create(null);\nObject.getOwnPropertyNames(Object.prototype).forEach(function(prop) {\n  if (prop !== '__proto__') {\n    objectProtoPropNames[prop] = true;\n  }\n});\nexports.isDangerousProperty = function(propName) {\n  return propName === '__proto__' || objectProtoPropNames[propName];\n};\n\ntry {\n  var util = require('util');\n  if (typeof util.inherits !== 'function') throw new Error('Could not find util.inherits()');\n  exports.inherits = util.inherits;\n} catch (e) {\n  try {\n    exports.inherits = require('inherits');\n  } catch (e) {\n    throw new Error('If running sharedb in a browser, please install the \"inherits\" or \"util\" package');\n  }\n}\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","exports.ACTIONS = {\n  initLegacy: 'init',\n  handshake: 'hs',\n  queryFetch: 'qf',\n  querySubscribe: 'qs',\n  queryUnsubscribe: 'qu',\n  queryUpdate: 'q',\n  bulkFetch: 'bf',\n  bulkSubscribe: 'bs',\n  bulkUnsubscribe: 'bu',\n  fetch: 'f',\n  fixup: 'fixup',\n  subscribe: 's',\n  unsubscribe: 'u',\n  op: 'op',\n  snapshotFetch: 'nf',\n  snapshotFetchByTimestamp: 'nt',\n  pingPong: 'pp',\n  presence: 'p',\n  presenceSubscribe: 'ps',\n  presenceUnsubscribe: 'pu',\n  presenceRequest: 'pr'\n};\n","var emitter = require('../emitter');\nvar logger = require('../logger');\nvar ShareDBError = require('../error');\nvar types = require('../types');\nvar util = require('../util');\nvar clone = util.clone;\nvar deepEqual = require('fast-deep-equal');\nvar ACTIONS = require('../message-actions').ACTIONS;\n\nvar ERROR_CODE = ShareDBError.CODES;\n\n/**\n * A Doc is a client's view on a sharejs document.\n *\n * It is is uniquely identified by its `id` and `collection`.  Documents\n * should not be created directly. Create them with connection.get()\n *\n *\n * Subscriptions\n * -------------\n *\n * We can subscribe a document to stay in sync with the server.\n *   doc.subscribe(function(error) {\n *     doc.subscribed // = true\n *   })\n * The server now sends us all changes concerning this document and these are\n * applied to our data. If the subscription was successful the initial\n * data and version sent by the server are loaded into the document.\n *\n * To stop listening to the changes we call `doc.unsubscribe()`.\n *\n * If we just want to load the data but not stay up-to-date, we call\n *   doc.fetch(function(error) {\n *     doc.data // sent by server\n *   })\n *\n *\n * Events\n * ------\n *\n * You can use doc.on(eventName, callback) to subscribe to the following events:\n * - `before op (op, source)` Fired before a partial operation is applied to the data.\n *   It may be used to read the old data just before applying an operation\n * - `op (op, source)` Fired after every partial operation with this operation as the\n *   first argument\n * - `create (source)` The document was created. That means its type was\n *   set and it has some initial data.\n * - `del (data, source)` Fired after the document is deleted, that is\n *   the data is null. It is passed the data before deletion as an\n *   argument\n * - `load ()` Fired when a new snapshot is ingested from a fetch, subscribe, or query\n */\n\nmodule.exports = Doc;\nfunction Doc(connection, collection, id) {\n  emitter.EventEmitter.call(this);\n\n  this.connection = connection;\n\n  this.collection = collection;\n  this.id = id;\n\n  this.version = null;\n  // The OT type of this document. An uncreated document has type `null`\n  this.type = null;\n  this.data = undefined;\n\n  // Array of callbacks or nulls as placeholders\n  this.inflightFetch = [];\n  this.inflightSubscribe = null;\n  this.pendingFetch = [];\n  this.pendingSubscribe = [];\n\n  this._isInHardRollback = false;\n\n  // Whether we think we are subscribed on the server. Synchronously set to\n  // false on calls to unsubscribe and disconnect. Should never be true when\n  // this.wantSubscribe is false\n  this.subscribed = false;\n  // Whether to re-establish the subscription on reconnect\n  this.wantSubscribe = false;\n\n  this._wantsDestroy = false;\n\n  // The op that is currently roundtripping to the server, or null.\n  //\n  // When the connection reconnects, the inflight op is resubmitted.\n  //\n  // This has the same format as an entry in pendingOps\n  this.inflightOp = null;\n\n  // All ops that are waiting for the server to acknowledge this.inflightOp\n  // This used to just be a single operation, but creates & deletes can't be\n  // composed with regular operations.\n  //\n  // This is a list of {[create:{...}], [del:true], [op:...], callbacks:[...]}\n  this.pendingOps = [];\n\n  // The applyStack enables us to track any ops submitted while we are\n  // applying an op incrementally. This value is an array when we are\n  // performing an incremental apply and null otherwise. When it is an array,\n  // all submitted ops should be pushed onto it. The `_otApply` method will\n  // reset it back to null when all incremental apply loops are complete.\n  this.applyStack = null;\n\n  // Disable the default behavior of composing submitted ops. This is read at\n  // the time of op submit, so it may be toggled on before submitting a\n  // specifc op and toggled off afterward\n  this.preventCompose = false;\n\n  // If set to true, the source will be submitted over the connection. This\n  // will also have the side-effect of only composing ops whose sources are\n  // equal\n  this.submitSource = false;\n\n  // Prevent own ops being submitted to the server. If subscribed, remote\n  // ops are still received. Should be toggled through the pause() and\n  // resume() methods to correctly flush on resume.\n  this.paused = false;\n\n  // Internal counter that gets incremented every time doc.data is updated.\n  // Used as a cheap way to check if doc.data has changed.\n  this._dataStateVersion = 0;\n}\nemitter.mixin(Doc);\n\nDoc.prototype.destroy = function(callback) {\n  this._wantsDestroy = true;\n  var doc = this;\n  doc.whenNothingPending(function() {\n    if (doc.wantSubscribe) {\n      doc.unsubscribe(function(err) {\n        if (err) {\n          if (callback) return callback(err);\n          return doc.emit('error', err);\n        }\n        doc.connection._destroyDoc(doc);\n        if (callback) callback();\n      });\n    } else {\n      doc.connection._destroyDoc(doc);\n      if (callback) callback();\n    }\n  });\n};\n\n\n// ****** Manipulating the document data, version and type.\n\n// Set the document's type, and associated properties. Most of the logic in\n// this function exists to update the document based on any added & removed API\n// methods.\n//\n// @param newType OT type provided by the ottypes library or its name or uri\nDoc.prototype._setType = function(newType) {\n  if (typeof newType === 'string') {\n    newType = types.map[newType];\n  }\n\n  if (newType) {\n    this.type = newType;\n  } else if (newType === null) {\n    this.type = newType;\n    // If we removed the type from the object, also remove its data\n    this._setData(undefined);\n  } else {\n    var err = new ShareDBError(ERROR_CODE.ERR_DOC_TYPE_NOT_RECOGNIZED, 'Missing type ' + newType);\n    return this.emit('error', err);\n  }\n};\n\nDoc.prototype._setData = function(data) {\n  this.data = data;\n  this._dataStateVersion++;\n};\n\n// Ingest snapshot data. This data must include a version, snapshot and type.\n// This is used both to ingest data that was exported with a webpage and data\n// that was received from the server during a fetch.\n//\n// @param snapshot.v    version\n// @param snapshot.data\n// @param snapshot.type\n// @param callback\nDoc.prototype.ingestSnapshot = function(snapshot, callback) {\n  if (!snapshot) return callback && callback();\n\n  if (typeof snapshot.v !== 'number') {\n    var err = new ShareDBError(\n      ERROR_CODE.ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION,\n      'Missing version in ingested snapshot. ' + this.collection + '.' + this.id\n    );\n    if (callback) return callback(err);\n    return this.emit('error', err);\n  }\n\n  // If the doc is already created or there are ops pending, we cannot use the\n  // ingested snapshot and need ops in order to update the document\n  if (this.type || this.hasWritePending()) {\n    // The version should only be null on a created document when it was\n    // created locally without fetching\n    if (this.version == null) {\n      if (this.hasWritePending()) {\n        // If we have pending ops and we get a snapshot for a locally created\n        // document, we have to wait for the pending ops to complete, because\n        // we don't know what version to fetch ops from. It is possible that\n        // the snapshot came from our local op, but it is also possible that\n        // the doc was created remotely (which would conflict and be an error)\n        return callback && this.once('no write pending', callback);\n      }\n      // Otherwise, we've encounted an error state\n      var err = new ShareDBError(\n        ERROR_CODE.ERR_DOC_MISSING_VERSION,\n        'Cannot ingest snapshot in doc with null version. ' + this.collection + '.' + this.id\n      );\n      if (callback) return callback(err);\n      return this.emit('error', err);\n    }\n    // If we got a snapshot for a version further along than the document is\n    // currently, issue a fetch to get the latest ops and catch us up\n    if (snapshot.v > this.version) return this.fetch(callback);\n    return callback && callback();\n  }\n\n  // Ignore the snapshot if we are already at a newer version. Under no\n  // circumstance should we ever set the current version backward\n  if (this.version > snapshot.v) return callback && callback();\n\n  this.version = snapshot.v;\n  var type = (snapshot.type === undefined) ? types.defaultType : snapshot.type;\n  this._setType(type);\n  this._setData(\n    (this.type && this.type.deserialize) ?\n      this.type.deserialize(snapshot.data) :\n      snapshot.data\n  );\n  this.emit('load');\n  callback && callback();\n};\n\nDoc.prototype.whenNothingPending = function(callback) {\n  var doc = this;\n  util.nextTick(function() {\n    if (doc.hasPending()) {\n      doc.once('nothing pending', callback);\n      return;\n    }\n    callback();\n  });\n};\n\nDoc.prototype.hasPending = function() {\n  return !!(\n    this.inflightOp ||\n    this.pendingOps.length ||\n    this.inflightFetch.length ||\n    this.inflightSubscribe ||\n    this.pendingFetch.length ||\n    this.pendingSubscribe.length\n  );\n};\n\nDoc.prototype.hasWritePending = function() {\n  return !!(this.inflightOp || this.pendingOps.length);\n};\n\nDoc.prototype._emitNothingPending = function() {\n  if (this.hasWritePending()) return;\n  this.emit('no write pending');\n  if (this.hasPending()) return;\n  this.emit('nothing pending');\n};\n\n// **** Helpers for network messages\n\nDoc.prototype._emitResponseError = function(err, callback) {\n  if (err && err.code === ERROR_CODE.ERR_SNAPSHOT_READ_SILENT_REJECTION) {\n    this.wantSubscribe = false;\n    if (callback) {\n      callback();\n    }\n    this._emitNothingPending();\n    return;\n  }\n  if (callback) {\n    callback(err);\n    this._emitNothingPending();\n    return;\n  }\n  this._emitNothingPending();\n  this.emit('error', err);\n};\n\nDoc.prototype._handleFetch = function(error, snapshot) {\n  var callbacks = this.pendingFetch;\n  this.pendingFetch = [];\n  var callback = this.inflightFetch.shift();\n  if (callback) callbacks.unshift(callback);\n  if (callbacks.length) {\n    callback = function(error) {\n      util.callEach(callbacks, error);\n    };\n  }\n  if (error) return this._emitResponseError(error, callback);\n  this.ingestSnapshot(snapshot, callback);\n  this._emitNothingPending();\n};\n\nDoc.prototype._handleSubscribe = function(error, snapshot) {\n  var request = this.inflightSubscribe;\n  this.inflightSubscribe = null;\n  var callbacks = this.pendingFetch;\n  this.pendingFetch = [];\n  if (request.callback) callbacks.push(request.callback);\n  var callback;\n  if (callbacks.length) {\n    callback = function(error) {\n      util.callEach(callbacks, error);\n    };\n  }\n  if (error) return this._emitResponseError(error, callback);\n  this.subscribed = request.wantSubscribe;\n  if (this.subscribed) this.ingestSnapshot(snapshot, callback);\n  else if (callback) callback();\n  this._emitNothingPending();\n  this._flushSubscribe();\n};\n\nDoc.prototype._handleOp = function(err, message) {\n  if (err) {\n    if (err.code === ERROR_CODE.ERR_NO_OP && message.seq === this.inflightOp.seq) {\n      // Our op was a no-op, either because we submitted a no-op, or - more\n      // likely - because our op was transformed into a no-op by the server\n      // because of a similar remote op. In this case, the server has avoided\n      // committing the op to the database, and we should just clear the in-flight\n      // op and call the callbacks. However, let's first catch ourselves up to\n      // the remote, so that we're in a nice consistent state\n      return this.fetch(this._clearInflightOp.bind(this));\n    }\n    if (this.inflightOp) {\n      return this._rollback(err);\n    }\n    return this.emit('error', err);\n  }\n\n  if (this.inflightOp &&\n      message.src === this.inflightOp.src &&\n      message.seq === this.inflightOp.seq) {\n    // The op has already been applied locally. Just update the version\n    // and pending state appropriately\n    this._opAcknowledged(message);\n    return;\n  }\n\n  if (this.version == null || message.v > this.version) {\n    // This will happen in normal operation if we become subscribed to a\n    // new document via a query. It can also happen if we get an op for\n    // a future version beyond the version we are expecting next. This\n    // could happen if the server doesn't publish an op for whatever reason\n    // or because of a race condition. In any case, we can send a fetch\n    // command to catch back up.\n    //\n    // Fetch only sends a new fetch command if no fetches are inflight, which\n    // will act as a natural debouncing so we don't send multiple fetch\n    // requests for many ops received at once.\n    this.fetch();\n    return;\n  }\n\n  if (message.v < this.version) {\n    // We can safely ignore the old (duplicate) operation.\n    return;\n  }\n\n  if (this.inflightOp) {\n    var transformErr = transformX(this.inflightOp, message);\n    if (transformErr) return this._hardRollback(transformErr);\n  }\n\n  for (var i = 0; i < this.pendingOps.length; i++) {\n    var transformErr = transformX(this.pendingOps[i], message);\n    if (transformErr) return this._hardRollback(transformErr);\n  }\n\n  this.version++;\n  try {\n    this._otApply(message, false);\n  } catch (error) {\n    return this._hardRollback(error);\n  }\n};\n\n// Called whenever (you guessed it!) the connection state changes. This will\n// happen when we get disconnected & reconnect.\nDoc.prototype._onConnectionStateChanged = function() {\n  if (this.connection.canSend) {\n    this.flush();\n    this._resubscribe();\n  } else {\n    if (this.inflightOp) {\n      this.pendingOps.unshift(this.inflightOp);\n      this.inflightOp = null;\n    }\n    this.subscribed = false;\n    if (this.inflightSubscribe) {\n      if (this.inflightSubscribe.wantSubscribe) {\n        this.pendingSubscribe.unshift(this.inflightSubscribe);\n        this.inflightSubscribe = null;\n      } else {\n        this._handleSubscribe();\n      }\n    }\n    if (this.inflightFetch.length) {\n      this.pendingFetch = this.pendingFetch.concat(this.inflightFetch);\n      this.inflightFetch.length = 0;\n    }\n  }\n};\n\nDoc.prototype._resubscribe = function() {\n  if (!this.pendingSubscribe.length && this.wantSubscribe) {\n    return this.subscribe();\n  }\n  var willFetch = this.pendingSubscribe.some(function(request) {\n    return request.wantSubscribe;\n  });\n  if (!willFetch && this.pendingFetch.length) this.fetch();\n  this._flushSubscribe();\n};\n\n// Request the current document snapshot or ops that bring us up to date\nDoc.prototype.fetch = function(callback) {\n  this._fetch({}, callback);\n};\n\nDoc.prototype._fetch = function(options, callback) {\n  this.pendingFetch.push(callback);\n  var shouldSend = this.connection.canSend && (\n    options.force || !this.inflightFetch.length\n  );\n  if (!shouldSend) return;\n  this.inflightFetch.push(this.pendingFetch.shift());\n  this.connection.sendFetch(this);\n};\n\n// Fetch the initial document and keep receiving updates\nDoc.prototype.subscribe = function(callback) {\n  var wantSubscribe = true;\n  this._queueSubscribe(wantSubscribe, callback);\n};\n\n// Unsubscribe. The data will stay around in local memory, but we'll stop\n// receiving updates\nDoc.prototype.unsubscribe = function(callback) {\n  var wantSubscribe = false;\n  this._queueSubscribe(wantSubscribe, callback);\n};\n\nDoc.prototype._queueSubscribe = function(wantSubscribe, callback) {\n  var lastRequest = this.pendingSubscribe[this.pendingSubscribe.length - 1] || this.inflightSubscribe;\n  var isDuplicateRequest = lastRequest && lastRequest.wantSubscribe === wantSubscribe;\n  if (isDuplicateRequest) {\n    lastRequest.callback = combineCallbacks([lastRequest.callback, callback]);\n    return;\n  }\n  this.pendingSubscribe.push({\n    wantSubscribe: !!wantSubscribe,\n    callback: callback\n  });\n  this._flushSubscribe();\n};\n\nDoc.prototype._flushSubscribe = function() {\n  if (this.inflightSubscribe || !this.pendingSubscribe.length) return;\n\n  if (this.connection.canSend) {\n    this.inflightSubscribe = this.pendingSubscribe.shift();\n    this.wantSubscribe = this.inflightSubscribe.wantSubscribe;\n    if (this.wantSubscribe) {\n      this.connection.sendSubscribe(this);\n    } else {\n      // Be conservative about our subscription state. We'll be unsubscribed\n      // some time between sending this request, and receiving the callback,\n      // so let's just set ourselves to unsubscribed now.\n      this.subscribed = false;\n      this.connection.sendUnsubscribe(this);\n    }\n\n    return;\n  }\n\n  // If we're offline, then we're already unsubscribed. Therefore, call back\n  // the next request immediately if it's an unsubscribe request.\n  if (!this.pendingSubscribe[0].wantSubscribe) {\n    this.inflightSubscribe = this.pendingSubscribe.shift();\n    var doc = this;\n    util.nextTick(function() {\n      doc._handleSubscribe();\n    });\n  }\n};\n\nfunction combineCallbacks(callbacks) {\n  callbacks = callbacks.filter(util.truthy);\n  if (!callbacks.length) return null;\n  return function(error) {\n    util.callEach(callbacks, error);\n  };\n}\n\n\n// Operations //\n\n// Send the next pending op to the server, if we can.\n//\n// Only one operation can be in-flight at a time. If an operation is already on\n// its way, or we're not currently connected, this method does nothing.\nDoc.prototype.flush = function() {\n  // Ignore if we can't send or we are already sending an op\n  if (!this.connection.canSend || this.inflightOp) return;\n\n  // Send first pending op unless paused\n  if (!this.paused && this.pendingOps.length) {\n    this._sendOp();\n  }\n};\n\n// Helper function to set op to contain a no-op.\nfunction setNoOp(op) {\n  delete op.op;\n  delete op.create;\n  delete op.del;\n}\n\n// Transform server op data by a client op, and vice versa. Ops are edited in place.\nfunction transformX(client, server) {\n  // Order of statements in this function matters. Be especially careful if\n  // refactoring this function\n\n  // A client delete op should dominate if both the server and the client\n  // delete the document. Thus, any ops following the client delete (such as a\n  // subsequent create) will be maintained, since the server op is transformed\n  // to a no-op\n  if (client.del) return setNoOp(server);\n\n  if (server.del) {\n    return new ShareDBError(ERROR_CODE.ERR_DOC_WAS_DELETED, 'Document was deleted');\n  }\n  if (server.create) {\n    return new ShareDBError(ERROR_CODE.ERR_DOC_ALREADY_CREATED, 'Document already created');\n  }\n\n  // Ignore no-op coming from server\n  if (!('op' in server)) return;\n\n  // I believe that this should not occur, but check just in case\n  if (client.create) {\n    return new ShareDBError(ERROR_CODE.ERR_DOC_ALREADY_CREATED, 'Document already created');\n  }\n\n  // They both edited the document. This is the normal case for this function -\n  // as in, most of the time we'll end up down here.\n  //\n  // You should be wondering why I'm using client.type instead of this.type.\n  // The reason is, if we get ops at an old version of the document, this.type\n  // might be undefined or a totally different type. By pinning the type to the\n  // op data, we make sure the right type has its transform function called.\n  if (client.type.transformX) {\n    var result = client.type.transformX(client.op, server.op);\n    client.op = result[0];\n    server.op = result[1];\n  } else {\n    var clientOp = client.type.transform(client.op, server.op, 'left');\n    var serverOp = client.type.transform(server.op, client.op, 'right');\n    client.op = clientOp;\n    server.op = serverOp;\n  }\n};\n\n/**\n * Applies the operation to the snapshot\n *\n * If the operation is create or delete it emits `create` or `del`. Then the\n * operation is applied to the snapshot and `op` and `after op` are emitted.\n * If the type supports incremental updates and `this.incremental` is true we\n * fire `op` after every small operation.\n *\n * This is the only function to fire the above mentioned events.\n *\n * @private\n */\nDoc.prototype._otApply = function(op, source) {\n  if ('op' in op) {\n    if (!this.type) {\n      // Throw here, because all usage of _otApply should be wrapped with a try/catch\n      throw new ShareDBError(\n        ERROR_CODE.ERR_DOC_DOES_NOT_EXIST,\n        'Cannot apply op to uncreated document. ' + this.collection + '.' + this.id\n      );\n    }\n\n    // NB: If we need to add another argument to this event, we should consider\n    // the fact that the 'op' event has op.src as its 3rd argument\n    this.emit('before op batch', op.op, source);\n\n    // Iteratively apply multi-component remote operations and rollback ops\n    // (source === false) for the default JSON0 OT type. It could use\n    // type.shatter(), but since this code is so specific to use cases for the\n    // JSON0 type and ShareDB explicitly bundles the default type, we might as\n    // well write it this way and save needing to iterate through the op\n    // components twice.\n    //\n    // Ideally, we would not need this extra complexity. However, it is\n    // helpful for implementing bindings that update DOM nodes and other\n    // stateful objects by translating op events directly into corresponding\n    // mutations. Such bindings are most easily written as responding to\n    // individual op components one at a time in order, and it is important\n    // that the snapshot only include updates from the particular op component\n    // at the time of emission. Eliminating this would require rethinking how\n    // such external bindings are implemented.\n    if (!source && this.type === types.defaultType && op.op.length > 1) {\n      if (!this.applyStack) this.applyStack = [];\n      var stackLength = this.applyStack.length;\n      for (var i = 0; i < op.op.length; i++) {\n        var component = op.op[i];\n        var componentOp = {op: [component]};\n        // Apply the individual op component\n        this.emit('before op', componentOp.op, source, op.src);\n        // Transform componentOp against any ops that have been submitted\n        // sychronously inside of an op event handler since we began apply of\n        // our operation\n        for (var j = stackLength; j < this.applyStack.length; j++) {\n          var transformErr = transformX(this.applyStack[j], componentOp);\n          if (transformErr) return this._hardRollback(transformErr);\n        }\n        this._setData(this.type.apply(this.data, componentOp.op));\n        this.emit('op', componentOp.op, source, op.src);\n      }\n      this.emit('op batch', op.op, source);\n      // Pop whatever was submitted since we started applying this op\n      this._popApplyStack(stackLength);\n      return;\n    }\n\n    // The 'before op' event enables clients to pull any necessary data out of\n    // the snapshot before it gets changed\n    this.emit('before op', op.op, source, op.src);\n    // Apply the operation to the local data, mutating it in place\n    this._setData(this.type.apply(this.data, op.op));\n    // Emit an 'op' event once the local data includes the changes from the\n    // op. For locally submitted ops, this will be synchronously with\n    // submission and before the server or other clients have received the op.\n    // For ops from other clients, this will be after the op has been\n    // committed to the database and published\n    this.emit('op', op.op, source, op.src);\n    this.emit('op batch', op.op, source);\n    return;\n  }\n\n  if (op.create) {\n    this._setType(op.create.type);\n    if (this.type.deserialize) {\n      if (this.type.createDeserialized) {\n        this._setData(this.type.createDeserialized(op.create.data));\n      } else {\n        this._setData(this.type.deserialize(this.type.create(op.create.data)));\n      }\n    } else {\n      this._setData(this.type.create(op.create.data));\n    }\n    this.emit('create', source);\n    return;\n  }\n\n  if (op.del) {\n    var oldData = this.data;\n    this._setType(null);\n    this.emit('del', oldData, source);\n    return;\n  }\n};\n\n\n// ***** Sending operations\n\n// Actually send op to the server.\nDoc.prototype._sendOp = function() {\n  if (!this.connection.canSend) return;\n  var src = this.connection.id;\n\n  // When there is no inflightOp, send the first item in pendingOps. If\n  // there is inflightOp, try sending it again\n  if (!this.inflightOp) {\n    // Send first pending op\n    this.inflightOp = this.pendingOps.shift();\n  }\n  var op = this.inflightOp;\n  if (!op) {\n    var err = new ShareDBError(ERROR_CODE.ERR_INFLIGHT_OP_MISSING, 'No op to send on call to _sendOp');\n    return this.emit('error', err);\n  }\n\n  // Track data for retrying ops\n  op.sentAt = Date.now();\n  op.retries = (op.retries == null) ? 0 : op.retries + 1;\n\n  // The src + seq number is a unique ID representing this operation. This tuple\n  // is used on the server to detect when ops have been sent multiple times and\n  // on the client to match acknowledgement of an op back to the inflightOp.\n  // Note that the src could be different from this.connection.id after a\n  // reconnect, since an op may still be pending after the reconnection and\n  // this.connection.id will change. In case an op is sent multiple times, we\n  // also need to be careful not to override the original seq value.\n  if (op.seq == null) {\n    if (this.connection.seq >= util.MAX_SAFE_INTEGER) {\n      return this.emit('error', new ShareDBError(\n        ERROR_CODE.ERR_CONNECTION_SEQ_INTEGER_OVERFLOW,\n        'Connection seq has exceeded the max safe integer, maybe from being open for too long'\n      ));\n    }\n\n    op.seq = this.connection.seq++;\n  }\n\n  this.connection.sendOp(this, op);\n\n  // src isn't needed on the first try, since the server session will have the\n  // same id, but it must be set on the inflightOp in case it is sent again\n  // after a reconnect and the connection's id has changed by then\n  if (op.src == null) op.src = src;\n};\n\n\n// Queues the operation for submission to the server and applies it locally.\n//\n// Internal method called to do the actual work for submit(), create() and del().\n// @private\n//\n// @param op\n// @param [op.op]\n// @param [op.del]\n// @param [op.create]\n// @param [callback] called when operation is submitted\nDoc.prototype._submit = function(op, source, callback) {\n  // Locally submitted ops must always have a truthy source\n  if (!source) source = true;\n\n  // The op contains either op, create, delete, or none of the above (a no-op).\n  if ('op' in op) {\n    if (!this.type) {\n      if (this._isInHardRollback) {\n        var err = new ShareDBError(\n          ERROR_CODE.ERR_DOC_IN_HARD_ROLLBACK,\n          'Cannot submit op. Document is performing hard rollback. ' + this.collection + '.' + this.id\n        );\n      } else {\n        var err = new ShareDBError(\n          ERROR_CODE.ERR_DOC_DOES_NOT_EXIST,\n          'Cannot submit op. Document has not been created. ' + this.collection + '.' + this.id\n        );\n      }\n\n      if (callback) return callback(err);\n      return this.emit('error', err);\n    }\n    // Try to normalize the op. This removes trailing skip:0's and things like that.\n    if (this.type.normalize) op.op = this.type.normalize(op.op);\n  }\n\n  try {\n    this._pushOp(op, source, callback);\n    this._otApply(op, source);\n  } catch (error) {\n    return this._hardRollback(error);\n  }\n\n  // The call to flush is delayed so if submit() is called multiple times\n  // synchronously, all the ops are combined before being sent to the server.\n  var doc = this;\n  util.nextTick(function() {\n    doc.flush();\n  });\n};\n\nDoc.prototype._pushOp = function(op, source, callback) {\n  op.source = source;\n  if (this.applyStack) {\n    // If we are in the process of incrementally applying an operation, don't\n    // compose the op and push it onto the applyStack so it can be transformed\n    // against other components from the op or ops being applied\n    this.applyStack.push(op);\n  } else {\n    // If the type supports composes, try to compose the operation onto the\n    // end of the last pending operation.\n    var composed = this._tryCompose(op);\n    if (composed) {\n      composed.callbacks.push(callback);\n      return;\n    }\n  }\n  // Push on to the pendingOps queue of ops to submit if we didn't compose\n  op.type = this.type;\n  op.callbacks = [callback];\n  this.pendingOps.push(op);\n};\n\nDoc.prototype._popApplyStack = function(to) {\n  if (to > 0) {\n    this.applyStack.length = to;\n    return;\n  }\n  // Once we have completed the outermost apply loop, reset to null and no\n  // longer add ops to the applyStack as they are submitted\n  var op = this.applyStack[0];\n  this.applyStack = null;\n  if (!op) return;\n  // Compose the ops added since the beginning of the apply stack, since we\n  // had to skip compose when they were originally pushed\n  var i = this.pendingOps.indexOf(op);\n  if (i === -1) return;\n  var ops = this.pendingOps.splice(i);\n  for (var i = 0; i < ops.length; i++) {\n    var op = ops[i];\n    var composed = this._tryCompose(op);\n    if (composed) {\n      composed.callbacks = composed.callbacks.concat(op.callbacks);\n    } else {\n      this.pendingOps.push(op);\n    }\n  }\n};\n\n// Try to compose a submitted op into the last pending op. Returns the\n// composed op if it succeeds, undefined otherwise\nDoc.prototype._tryCompose = function(op) {\n  if (this.preventCompose) return;\n\n  // We can only compose into the last pending op. Inflight ops have already\n  // been sent to the server, so we can't modify them\n  var last = this.pendingOps[this.pendingOps.length - 1];\n  if (!last || last.sentAt) return;\n\n  // If we're submitting the op source, we can only combine ops that have\n  // a matching source\n  if (this.submitSource && !deepEqual(op.source, last.source)) return;\n\n  // Compose an op into a create by applying it. This effectively makes the op\n  // invisible, as if the document were created including the op originally\n  if (last.create && 'op' in op) {\n    last.create.data = this.type.apply(last.create.data, op.op);\n    return last;\n  }\n\n  // Compose two ops into a single op if supported by the type. Types that\n  // support compose must be able to compose any two ops together\n  if ('op' in last && 'op' in op && this.type.compose) {\n    last.op = this.type.compose(last.op, op.op);\n    return last;\n  }\n};\n\n// *** Client OT entrypoints.\n\n// Submit an operation to the document.\n//\n// @param operation handled by the OT type\n// @param options  {source: ...}\n// @param [callback] called after operation submitted\n//\n// @fires before op, op, after op\nDoc.prototype.submitOp = function(component, options, callback) {\n  if (typeof options === 'function') {\n    callback = options;\n    options = null;\n  }\n  var op = {op: component};\n  var source = options && options.source;\n  this._submit(op, source, callback);\n};\n\n// Create the document, which in ShareJS semantics means to set its type. Every\n// object implicitly exists in the database but has no data and no type. Create\n// sets the type of the object and can optionally set some initial data on the\n// object, depending on the type.\n//\n// @param data  initial\n// @param type  OT type\n// @param options  {source: ...}\n// @param callback  called when operation submitted\nDoc.prototype.create = function(data, type, options, callback) {\n  if (typeof type === 'function') {\n    callback = type;\n    options = null;\n    type = null;\n  } else if (typeof options === 'function') {\n    callback = options;\n    options = null;\n  }\n  if (!type) {\n    type = types.defaultType.uri;\n  }\n  if (this.type) {\n    var err = new ShareDBError(ERROR_CODE.ERR_DOC_ALREADY_CREATED, 'Document already exists');\n    if (callback) return callback(err);\n    return this.emit('error', err);\n  }\n  var op = {create: {type: type, data: data}};\n  var source = options && options.source;\n  this._submit(op, source, callback);\n};\n\n// Delete the document. This creates and submits a delete operation to the\n// server. Deleting resets the object's type to null and deletes its data. The\n// document still exists, and still has the version it used to have before you\n// deleted it (well, old version +1).\n//\n// @param options  {source: ...}\n// @param callback  called when operation submitted\nDoc.prototype.del = function(options, callback) {\n  if (typeof options === 'function') {\n    callback = options;\n    options = null;\n  }\n  if (!this.type) {\n    var err = new ShareDBError(ERROR_CODE.ERR_DOC_DOES_NOT_EXIST, 'Document does not exist');\n    if (callback) return callback(err);\n    return this.emit('error', err);\n  }\n  var op = {del: true};\n  var source = options && options.source;\n  this._submit(op, source, callback);\n};\n\n\n// Stops the document from sending any operations to the server.\nDoc.prototype.pause = function() {\n  this.paused = true;\n};\n\n// Continue sending operations to the server\nDoc.prototype.resume = function() {\n  this.paused = false;\n  this.flush();\n};\n\n// Create a snapshot that can be serialized, deserialized, and passed into `Doc.ingestSnapshot`.\nDoc.prototype.toSnapshot = function() {\n  return {\n    v: this.version,\n    data: clone(this.data),\n    type: this.type.uri\n  };\n};\n\n// *** Receiving operations\n\n// This is called when the server acknowledges an operation from the client.\nDoc.prototype._opAcknowledged = function(message) {\n  if (this.inflightOp.create) {\n    this.version = message.v;\n  } else if (message.v !== this.version) {\n    // We should already be at the same version, because the server should\n    // have sent all the ops that have happened before acknowledging our op\n    logger.warn('Invalid version from server. Expected: ' + this.version + ' Received: ' + message.v, message);\n\n    // Fetching should get us back to a working document state\n    return this.fetch();\n  }\n\n  if (message[ACTIONS.fixup]) {\n    for (var i = 0; i < message[ACTIONS.fixup].length; i++) {\n      var fixupOp = message[ACTIONS.fixup][i];\n\n      for (var j = 0; j < this.pendingOps.length; j++) {\n        var transformErr = transformX(this.pendingOps[i], fixupOp);\n        if (transformErr) return this._hardRollback(transformErr);\n      }\n\n      try {\n        this._otApply(fixupOp, false);\n      } catch (error) {\n        return this._hardRollback(error);\n      }\n    }\n  }\n\n  // The op was committed successfully. Increment the version number\n  this.version++;\n\n  this._clearInflightOp();\n};\n\nDoc.prototype._rollback = function(err) {\n  // The server has rejected submission of the current operation. Invert by\n  // just the inflight op if possible. If not possible to invert, cancel all\n  // pending ops and fetch the latest from the server to get us back into a\n  // working state, then call back\n  var op = this.inflightOp;\n\n  if (!('op' in op && op.type.invert)) {\n    return this._hardRollback(err);\n  }\n\n  try {\n    op.op = op.type.invert(op.op);\n  } catch (error) {\n    // If the op doesn't support `.invert()`, we just reload the doc\n    // instead of trying to locally revert it.\n    return this._hardRollback(err);\n  }\n\n  // Transform the undo operation by any pending ops.\n  for (var i = 0; i < this.pendingOps.length; i++) {\n    var transformErr = transformX(this.pendingOps[i], op);\n    if (transformErr) return this._hardRollback(transformErr);\n  }\n\n  // ... and apply it locally, reverting the changes.\n  //\n  // This operation is applied to look like it comes from a remote source.\n  // I'm still not 100% sure about this functionality, because its really a\n  // local op. Basically, the problem is that if the client's op is rejected\n  // by the server, the editor window should update to reflect the undo.\n  try {\n    this._otApply(op, false);\n  } catch (error) {\n    return this._hardRollback(error);\n  }\n\n  // The server has rejected submission of the current operation. If we get\n  // an \"Op submit rejected\" error, this was done intentionally\n  // and we should roll back but not return an error to the user.\n  if (err.code === ERROR_CODE.ERR_OP_SUBMIT_REJECTED) {\n    return this._clearInflightOp(null);\n  }\n\n  this._clearInflightOp(err);\n};\n\nDoc.prototype._hardRollback = function(err) {\n  this._isInHardRollback = true;\n  // Store pending ops so that we can notify their callbacks of the error.\n  // We combine the inflight op and the pending ops, because it's possible\n  // to hit a condition where we have no inflight op, but we do have pending\n  // ops. This can happen when an invalid op is submitted, which causes us\n  // to hard rollback before the pending op was flushed.\n  var pendingOps = this.pendingOps;\n  var inflightOp = this.inflightOp;\n\n  // Cancel all pending ops and reset if we can't invert\n  this._setType(null);\n  this.version = null;\n  this.inflightOp = null;\n  this.pendingOps = [];\n\n  // Fetch the latest version from the server to get us back into a working state\n  var doc = this;\n  this._fetch({force: true}, function(fetchError) {\n    doc._isInHardRollback = false;\n\n    // We want to check that no errors are swallowed, so we check that:\n    // - there are callbacks to call, and\n    // - that every single pending op called a callback\n    // If there are no ops queued, or one of them didn't handle the error,\n    // then we emit the error.\n\n    if (fetchError) {\n      // This is critical error as it means that our doc is not in usable state\n      // anymore, we should throw doc error.\n      logger.error('Hard rollback doc fetch failed.', fetchError, inflightOp);\n\n      doc.emit('error', new ShareDBError(\n        ERROR_CODE.ERR_HARD_ROLLBACK_FETCH_FAILED,\n        'Hard rollback fetch failed: ' + fetchError.message\n      ));\n    }\n\n    if (err.code === ERROR_CODE.ERR_OP_SUBMIT_REJECTED) {\n      /**\n       * Handle special case of ERR_OP_SUBMIT_REJECTED\n       * This ensures that we resolve the main op callback and reject\n       * all the pending ops. This is hard rollback so all the pending ops will be\n       * discarded. This will ensure that the user is at least informed about it.\n       * more info: https://github.com/share/sharedb/pull/626\n       */\n      if (inflightOp) {\n        util.callEach(inflightOp.callbacks);\n        inflightOp = null;\n      }\n\n      if (!pendingOps.length) return;\n      err = new ShareDBError(\n        ERROR_CODE.ERR_PENDING_OP_REMOVED_BY_OP_SUBMIT_REJECTED,\n        'Discarding pending op because of hard rollback during ERR_OP_SUBMIT_REJECTED'\n      );\n    }\n\n    if (inflightOp) pendingOps.unshift(inflightOp);\n    var allOpsHadCallbacks = !!pendingOps.length;\n    for (var i = 0; i < pendingOps.length; i++) {\n      allOpsHadCallbacks = util.callEach(pendingOps[i].callbacks, err) && allOpsHadCallbacks;\n    }\n    if (err && !allOpsHadCallbacks) doc.emit('error', err);\n  });\n};\n\nDoc.prototype._clearInflightOp = function(err) {\n  var inflightOp = this.inflightOp;\n\n  this.inflightOp = null;\n\n  var called = util.callEach(inflightOp.callbacks, err);\n\n  this.flush();\n  this._emitNothingPending();\n\n  if (err && !called) return this.emit('error', err);\n};\n\n\n","var emitter = require('../emitter');\nvar ACTIONS = require('../message-actions').ACTIONS;\nvar util = require('../util');\n\n// Queries are live requests to the database for particular sets of fields.\n//\n// The server actively tells the client when there's new data that matches\n// a set of conditions.\nmodule.exports = Query;\nfunction Query(action, connection, id, collection, query, options, callback) {\n  emitter.EventEmitter.call(this);\n\n  // 'qf' or 'qs'\n  this.action = action;\n\n  this.connection = connection;\n  this.id = id;\n  this.collection = collection;\n\n  // The query itself. For mongo, this should look something like {\"data.x\":5}\n  this.query = query;\n\n  // A list of resulting documents. These are actual documents, complete with\n  // data and all the rest. It is possible to pass in an initial results set,\n  // so that a query can be serialized and then re-established\n  this.results = null;\n  if (options && options.results) {\n    this.results = options.results;\n    delete options.results;\n  }\n  this.extra = undefined;\n\n  // Options to pass through with the query\n  this.options = options;\n\n  this.callback = callback;\n  this.ready = false;\n  this.sent = false;\n}\nemitter.mixin(Query);\n\nQuery.prototype.hasPending = function() {\n  return !this.ready;\n};\n\n// Helper for subscribe & fetch, since they share the same message format.\n//\n// This function actually issues the query.\nQuery.prototype.send = function() {\n  if (!this.connection.canSend) return;\n\n  var message = {\n    a: this.action,\n    id: this.id,\n    c: this.collection,\n    q: this.query\n  };\n  if (this.options) {\n    message.o = this.options;\n  }\n  if (this.results) {\n    // Collect the version of all the documents in the current result set so we\n    // don't need to be sent their snapshots again.\n    var results = [];\n    for (var i = 0; i < this.results.length; i++) {\n      var doc = this.results[i];\n      results.push([doc.id, doc.version]);\n    }\n    message.r = results;\n  }\n\n  this.connection.send(message);\n  this.sent = true;\n};\n\n// Destroy the query object. Any subsequent messages for the query will be\n// ignored by the connection.\nQuery.prototype.destroy = function(callback) {\n  if (this.connection.canSend && this.action === ACTIONS.querySubscribe) {\n    this.connection.send({a: ACTIONS.queryUnsubscribe, id: this.id});\n  }\n  this.connection._destroyQuery(this);\n  // There is a callback for consistency, but we don't actually wait for the\n  // server's unsubscribe message currently\n  if (callback) util.nextTick(callback);\n};\n\nQuery.prototype._onConnectionStateChanged = function() {\n  if (this.connection.canSend && !this.sent) {\n    this.send();\n  } else {\n    this.sent = false;\n  }\n};\n\nQuery.prototype._handleFetch = function(err, data, extra) {\n  // Once a fetch query gets its data, it is destroyed.\n  this.connection._destroyQuery(this);\n  this._handleResponse(err, data, extra);\n};\n\nQuery.prototype._handleSubscribe = function(err, data, extra) {\n  this._handleResponse(err, data, extra);\n};\n\nQuery.prototype._handleResponse = function(err, data, extra) {\n  var callback = this.callback;\n  this.callback = null;\n  if (err) return this._finishResponse(err, callback);\n  if (!data) return this._finishResponse(null, callback);\n\n  var query = this;\n  var wait = 1;\n  var finish = function(err) {\n    if (err) return query._finishResponse(err, callback);\n    if (--wait) return;\n    query._finishResponse(null, callback);\n  };\n\n  if (Array.isArray(data)) {\n    wait += data.length;\n    this.results = this._ingestSnapshots(data, finish);\n    this.extra = extra;\n  } else {\n    for (var id in data) {\n      wait++;\n      var snapshot = data[id];\n      var doc = this.connection.get(snapshot.c || this.collection, id);\n      doc.ingestSnapshot(snapshot, finish);\n    }\n  }\n\n  finish();\n};\n\nQuery.prototype._ingestSnapshots = function(snapshots, finish) {\n  var results = [];\n  for (var i = 0; i < snapshots.length; i++) {\n    var snapshot = snapshots[i];\n    var doc = this.connection.get(snapshot.c || this.collection, snapshot.d);\n    doc.ingestSnapshot(snapshot, finish);\n    results.push(doc);\n  }\n  return results;\n};\n\nQuery.prototype._finishResponse = function(err, callback) {\n  this.emit('ready');\n  this.ready = true;\n  if (err) {\n    this.connection._destroyQuery(this);\n    if (callback) return callback(err);\n    return this.emit('error', err);\n  }\n  if (callback) callback(null, this.results, this.extra);\n};\n\nQuery.prototype._handleError = function(err) {\n  this.emit('error', err);\n};\n\nQuery.prototype._handleDiff = function(diff) {\n  // We need to go through the list twice. First, we'll ingest all the new\n  // documents. After that we'll emit events and actually update our list.\n  // This avoids race conditions around setting documents to be subscribed &\n  // unsubscribing documents in event callbacks.\n  for (var i = 0; i < diff.length; i++) {\n    var d = diff[i];\n    if (d.type === 'insert') d.values = this._ingestSnapshots(d.values);\n  }\n\n  for (var i = 0; i < diff.length; i++) {\n    var d = diff[i];\n    switch (d.type) {\n      case 'insert':\n        var newDocs = d.values;\n        Array.prototype.splice.apply(this.results, [d.index, 0].concat(newDocs));\n        this.emit('insert', newDocs, d.index);\n        break;\n      case 'remove':\n        var howMany = d.howMany || 1;\n        var removed = this.results.splice(d.index, howMany);\n        this.emit('remove', removed, d.index);\n        break;\n      case 'move':\n        var howMany = d.howMany || 1;\n        var docs = this.results.splice(d.from, howMany);\n        Array.prototype.splice.apply(this.results, [d.to, 0].concat(docs));\n        this.emit('move', docs, d.from, d.to);\n        break;\n    }\n  }\n\n  this.emit('changed', this.results);\n};\n\nQuery.prototype._handleExtra = function(extra) {\n  this.extra = extra;\n  this.emit('extra', extra);\n};\n","var emitter = require('../../emitter');\nvar ACTIONS = require('../../message-actions').ACTIONS;\nvar util = require('../../util');\n\nmodule.exports = LocalPresence;\nfunction LocalPresence(presence, presenceId) {\n  emitter.EventEmitter.call(this);\n\n  if (!presenceId || typeof presenceId !== 'string') {\n    throw new Error('LocalPresence presenceId must be a string');\n  }\n\n  this.presence = presence;\n  this.presenceId = presenceId;\n  this.connection = presence.connection;\n  this.presenceVersion = 0;\n\n  this.value = null;\n\n  this._pendingMessages = [];\n  this._callbacksByPresenceVersion = Object.create(null);\n}\nemitter.mixin(LocalPresence);\n\nLocalPresence.prototype.submit = function(value, callback) {\n  this.value = value;\n  this.send(callback);\n};\n\nLocalPresence.prototype.send = function(callback) {\n  var message = this._message();\n  this._pendingMessages.push(message);\n  this._callbacksByPresenceVersion[message.pv] = callback;\n  this._sendPending();\n};\n\nLocalPresence.prototype.destroy = function(callback) {\n  var presence = this;\n  this.submit(null, function(error) {\n    if (error) return presence._callbackOrEmit(error, callback);\n    delete presence.presence.localPresences[presence.presenceId];\n    if (callback) callback();\n  });\n};\n\nLocalPresence.prototype._sendPending = function() {\n  if (!this.connection.canSend) return;\n  var presence = this;\n  this._pendingMessages.forEach(function(message) {\n    presence.connection.send(message);\n  });\n\n  this._pendingMessages = [];\n};\n\nLocalPresence.prototype._ack = function(error, presenceVersion) {\n  var callback = this._getCallback(presenceVersion);\n  this._callbackOrEmit(error, callback);\n};\n\nLocalPresence.prototype._message = function() {\n  return {\n    a: ACTIONS.presence,\n    ch: this.presence.channel,\n    id: this.presenceId,\n    p: this.value,\n    pv: this.presenceVersion++\n  };\n};\n\nLocalPresence.prototype._getCallback = function(presenceVersion) {\n  var callback = this._callbacksByPresenceVersion[presenceVersion];\n  delete this._callbacksByPresenceVersion[presenceVersion];\n  return callback;\n};\n\nLocalPresence.prototype._callbackOrEmit = function(error, callback) {\n  if (callback) return util.nextTick(callback, error);\n  if (error) this.emit('error', error);\n};\n","var util = require('../../util');\n\nmodule.exports = RemotePresence;\nfunction RemotePresence(presence, presenceId) {\n  this.presence = presence;\n  this.presenceId = presenceId;\n  this.connection = this.presence.connection;\n\n  this.value = null;\n  this.presenceVersion = 0;\n}\n\nRemotePresence.prototype.receiveUpdate = function(message) {\n  if (message.pv < this.presenceVersion) return;\n  this.value = message.p;\n  this.presenceVersion = message.pv;\n  this.presence._updateRemotePresence(this);\n};\n\nRemotePresence.prototype.destroy = function(callback) {\n  delete this.presence._remotePresenceInstances[this.presenceId];\n  delete this.presence.remotePresences[this.presenceId];\n  if (callback) util.nextTick(callback);\n};\n","/**\n * Creates a continuation function with some arguments already applied.\n *\n * Useful as a shorthand when combined with other control flow functions. Any\n * arguments passed to the returned function are added to the arguments\n * originally passed to apply.\n *\n * @name apply\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {Function} fn - The function you want to eventually apply all\n * arguments to. Invokes with (arguments...).\n * @param {...*} arguments... - Any number of arguments to automatically apply\n * when the continuation is called.\n * @returns {Function} the partially-applied function\n * @example\n *\n * // using apply\n * async.parallel([\n *     async.apply(fs.writeFile, 'testfile1', 'test1'),\n *     async.apply(fs.writeFile, 'testfile2', 'test2')\n * ]);\n *\n *\n * // the same process without using apply\n * async.parallel([\n *     function(callback) {\n *         fs.writeFile('testfile1', 'test1', callback);\n *     },\n *     function(callback) {\n *         fs.writeFile('testfile2', 'test2', callback);\n *     }\n * ]);\n *\n * // It's possible to pass any number of additional arguments when calling the\n * // continuation:\n *\n * node> var fn = async.apply(sys.puts, 'one');\n * node> fn('two', 'three');\n * one\n * two\n * three\n */\nfunction apply(fn, ...args) {\n    return (...callArgs) => fn(...args,...callArgs);\n}\n\nfunction initialParams (fn) {\n    return function (...args/*, callback*/) {\n        var callback = args.pop();\n        return fn.call(this, args, callback);\n    };\n}\n\n/* istanbul ignore file */\n\nvar hasQueueMicrotask = typeof queueMicrotask === 'function' && queueMicrotask;\nvar hasSetImmediate = typeof setImmediate === 'function' && setImmediate;\nvar hasNextTick = typeof process === 'object' && typeof process.nextTick === 'function';\n\nfunction fallback(fn) {\n    setTimeout(fn, 0);\n}\n\nfunction wrap(defer) {\n    return (fn, ...args) => defer(() => fn(...args));\n}\n\nvar _defer$1;\n\nif (hasQueueMicrotask) {\n    _defer$1 = queueMicrotask;\n} else if (hasSetImmediate) {\n    _defer$1 = setImmediate;\n} else if (hasNextTick) {\n    _defer$1 = process.nextTick;\n} else {\n    _defer$1 = fallback;\n}\n\nvar setImmediate$1 = wrap(_defer$1);\n\n/**\n * Take a sync function and make it async, passing its return value to a\n * callback. This is useful for plugging sync functions into a waterfall,\n * series, or other async functions. Any arguments passed to the generated\n * function will be passed to the wrapped function (except for the final\n * callback argument). Errors thrown will be passed to the callback.\n *\n * If the function passed to `asyncify` returns a Promise, that promises's\n * resolved/rejected state will be used to call the callback, rather than simply\n * the synchronous return value.\n *\n * This also means you can asyncify ES2017 `async` functions.\n *\n * @name asyncify\n * @static\n * @memberOf module:Utils\n * @method\n * @alias wrapSync\n * @category Util\n * @param {Function} func - The synchronous function, or Promise-returning\n * function to convert to an {@link AsyncFunction}.\n * @returns {AsyncFunction} An asynchronous wrapper of the `func`. To be\n * invoked with `(args..., callback)`.\n * @example\n *\n * // passing a regular synchronous function\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(JSON.parse),\n *     function (data, next) {\n *         // data is the result of parsing the text.\n *         // If there was a parsing error, it would have been caught.\n *     }\n * ], callback);\n *\n * // passing a function returning a promise\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(function (contents) {\n *         return db.model.create(contents);\n *     }),\n *     function (model, next) {\n *         // `model` is the instantiated model object.\n *         // If there was an error, this function would be skipped.\n *     }\n * ], callback);\n *\n * // es2017 example, though `asyncify` is not needed if your JS environment\n * // supports async functions out of the box\n * var q = async.queue(async.asyncify(async function(file) {\n *     var intermediateStep = await processFile(file);\n *     return await somePromise(intermediateStep)\n * }));\n *\n * q.push(files);\n */\nfunction asyncify(func) {\n    if (isAsync(func)) {\n        return function (...args/*, callback*/) {\n            const callback = args.pop();\n            const promise = func.apply(this, args);\n            return handlePromise(promise, callback)\n        }\n    }\n\n    return initialParams(function (args, callback) {\n        var result;\n        try {\n            result = func.apply(this, args);\n        } catch (e) {\n            return callback(e);\n        }\n        // if result is Promise object\n        if (result && typeof result.then === 'function') {\n            return handlePromise(result, callback)\n        } else {\n            callback(null, result);\n        }\n    });\n}\n\nfunction handlePromise(promise, callback) {\n    return promise.then(value => {\n        invokeCallback(callback, null, value);\n    }, err => {\n        invokeCallback(callback, err && (err instanceof Error || err.message) ? err : new Error(err));\n    });\n}\n\nfunction invokeCallback(callback, error, value) {\n    try {\n        callback(error, value);\n    } catch (err) {\n        setImmediate$1(e => { throw e }, err);\n    }\n}\n\nfunction isAsync(fn) {\n    return fn[Symbol.toStringTag] === 'AsyncFunction';\n}\n\nfunction isAsyncGenerator(fn) {\n    return fn[Symbol.toStringTag] === 'AsyncGenerator';\n}\n\nfunction isAsyncIterable(obj) {\n    return typeof obj[Symbol.asyncIterator] === 'function';\n}\n\nfunction wrapAsync(asyncFn) {\n    if (typeof asyncFn !== 'function') throw new Error('expected a function')\n    return isAsync(asyncFn) ? asyncify(asyncFn) : asyncFn;\n}\n\n// conditionally promisify a function.\n// only return a promise if a callback is omitted\nfunction awaitify (asyncFn, arity) {\n    if (!arity) arity = asyncFn.length;\n    if (!arity) throw new Error('arity is undefined')\n    function awaitable (...args) {\n        if (typeof args[arity - 1] === 'function') {\n            return asyncFn.apply(this, args)\n        }\n\n        return new Promise((resolve, reject) => {\n            args[arity - 1] = (err, ...cbArgs) => {\n                if (err) return reject(err)\n                resolve(cbArgs.length > 1 ? cbArgs : cbArgs[0]);\n            };\n            asyncFn.apply(this, args);\n        })\n    }\n\n    return awaitable\n}\n\nfunction applyEach$1 (eachfn) {\n    return function applyEach(fns, ...callArgs) {\n        const go = awaitify(function (callback) {\n            var that = this;\n            return eachfn(fns, (fn, cb) => {\n                wrapAsync(fn).apply(that, callArgs.concat(cb));\n            }, callback);\n        });\n        return go;\n    };\n}\n\nfunction _asyncMap(eachfn, arr, iteratee, callback) {\n    arr = arr || [];\n    var results = [];\n    var counter = 0;\n    var _iteratee = wrapAsync(iteratee);\n\n    return eachfn(arr, (value, _, iterCb) => {\n        var index = counter++;\n        _iteratee(value, (err, v) => {\n            results[index] = v;\n            iterCb(err);\n        });\n    }, err => {\n        callback(err, results);\n    });\n}\n\nfunction isArrayLike(value) {\n    return value &&\n        typeof value.length === 'number' &&\n        value.length >= 0 &&\n        value.length % 1 === 0;\n}\n\n// A temporary value used to identify if the loop should be broken.\n// See #1064, #1293\nconst breakLoop = {};\n\nfunction once(fn) {\n    function wrapper (...args) {\n        if (fn === null) return;\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, args);\n    }\n    Object.assign(wrapper, fn);\n    return wrapper\n}\n\nfunction getIterator (coll) {\n    return coll[Symbol.iterator] && coll[Symbol.iterator]();\n}\n\nfunction createArrayIterator(coll) {\n    var i = -1;\n    var len = coll.length;\n    return function next() {\n        return ++i < len ? {value: coll[i], key: i} : null;\n    }\n}\n\nfunction createES2015Iterator(iterator) {\n    var i = -1;\n    return function next() {\n        var item = iterator.next();\n        if (item.done)\n            return null;\n        i++;\n        return {value: item.value, key: i};\n    }\n}\n\nfunction createObjectIterator(obj) {\n    var okeys = obj ? Object.keys(obj) : [];\n    var i = -1;\n    var len = okeys.length;\n    return function next() {\n        var key = okeys[++i];\n        if (key === '__proto__') {\n            return next();\n        }\n        return i < len ? {value: obj[key], key} : null;\n    };\n}\n\nfunction createIterator(coll) {\n    if (isArrayLike(coll)) {\n        return createArrayIterator(coll);\n    }\n\n    var iterator = getIterator(coll);\n    return iterator ? createES2015Iterator(iterator) : createObjectIterator(coll);\n}\n\nfunction onlyOnce(fn) {\n    return function (...args) {\n        if (fn === null) throw new Error(\"Callback was already called.\");\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, args);\n    };\n}\n\n// for async generators\nfunction asyncEachOfLimit(generator, limit, iteratee, callback) {\n    let done = false;\n    let canceled = false;\n    let awaiting = false;\n    let running = 0;\n    let idx = 0;\n\n    function replenish() {\n        //console.log('replenish')\n        if (running >= limit || awaiting || done) return\n        //console.log('replenish awaiting')\n        awaiting = true;\n        generator.next().then(({value, done: iterDone}) => {\n            //console.log('got value', value)\n            if (canceled || done) return\n            awaiting = false;\n            if (iterDone) {\n                done = true;\n                if (running <= 0) {\n                    //console.log('done nextCb')\n                    callback(null);\n                }\n                return;\n            }\n            running++;\n            iteratee(value, idx, iterateeCallback);\n            idx++;\n            replenish();\n        }).catch(handleError);\n    }\n\n    function iterateeCallback(err, result) {\n        //console.log('iterateeCallback')\n        running -= 1;\n        if (canceled) return\n        if (err) return handleError(err)\n\n        if (err === false) {\n            done = true;\n            canceled = true;\n            return\n        }\n\n        if (result === breakLoop || (done && running <= 0)) {\n            done = true;\n            //console.log('done iterCb')\n            return callback(null);\n        }\n        replenish();\n    }\n\n    function handleError(err) {\n        if (canceled) return\n        awaiting = false;\n        done = true;\n        callback(err);\n    }\n\n    replenish();\n}\n\nvar eachOfLimit$2 = (limit) => {\n    return (obj, iteratee, callback) => {\n        callback = once(callback);\n        if (limit <= 0) {\n            throw new RangeError('concurrency limit cannot be less than 1')\n        }\n        if (!obj) {\n            return callback(null);\n        }\n        if (isAsyncGenerator(obj)) {\n            return asyncEachOfLimit(obj, limit, iteratee, callback)\n        }\n        if (isAsyncIterable(obj)) {\n            return asyncEachOfLimit(obj[Symbol.asyncIterator](), limit, iteratee, callback)\n        }\n        var nextElem = createIterator(obj);\n        var done = false;\n        var canceled = false;\n        var running = 0;\n        var looping = false;\n\n        function iterateeCallback(err, value) {\n            if (canceled) return\n            running -= 1;\n            if (err) {\n                done = true;\n                callback(err);\n            }\n            else if (err === false) {\n                done = true;\n                canceled = true;\n            }\n            else if (value === breakLoop || (done && running <= 0)) {\n                done = true;\n                return callback(null);\n            }\n            else if (!looping) {\n                replenish();\n            }\n        }\n\n        function replenish () {\n            looping = true;\n            while (running < limit && !done) {\n                var elem = nextElem();\n                if (elem === null) {\n                    done = true;\n                    if (running <= 0) {\n                        callback(null);\n                    }\n                    return;\n                }\n                running += 1;\n                iteratee(elem.value, elem.key, onlyOnce(iterateeCallback));\n            }\n            looping = false;\n        }\n\n        replenish();\n    };\n};\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name eachOfLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`. The `key` is the item's key, or index in the case of an\n * array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachOfLimit(coll, limit, iteratee, callback) {\n    return eachOfLimit$2(limit)(coll, wrapAsync(iteratee), callback);\n}\n\nvar eachOfLimit$1 = awaitify(eachOfLimit, 4);\n\n// eachOf implementation optimized for array-likes\nfunction eachOfArrayLike(coll, iteratee, callback) {\n    callback = once(callback);\n    var index = 0,\n        completed = 0,\n        {length} = coll,\n        canceled = false;\n    if (length === 0) {\n        callback(null);\n    }\n\n    function iteratorCallback(err, value) {\n        if (err === false) {\n            canceled = true;\n        }\n        if (canceled === true) return\n        if (err) {\n            callback(err);\n        } else if ((++completed === length) || value === breakLoop) {\n            callback(null);\n        }\n    }\n\n    for (; index < length; index++) {\n        iteratee(coll[index], index, onlyOnce(iteratorCallback));\n    }\n}\n\n// a generic version of eachOf which can handle array, object, and iterator cases.\nfunction eachOfGeneric (coll, iteratee, callback) {\n    return eachOfLimit$1(coll, Infinity, iteratee, callback);\n}\n\n/**\n * Like [`each`]{@link module:Collections.each}, except that it passes the key (or index) as the second argument\n * to the iteratee.\n *\n * @name eachOf\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEachOf\n * @category Collection\n * @see [async.each]{@link module:Collections.each}\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each\n * item in `coll`.\n * The `key` is the item's key, or index in the case of an array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * // dev.json is a file containing a valid json object config for dev environment\n * // dev.json is a file containing a valid json object config for test environment\n * // prod.json is a file containing a valid json object config for prod environment\n * // invalid.json is a file with a malformed json object\n *\n * let configs = {}; //global variable\n * let validConfigFileMap = {dev: 'dev.json', test: 'test.json', prod: 'prod.json'};\n * let invalidConfigFileMap = {dev: 'dev.json', test: 'test.json', invalid: 'invalid.json'};\n *\n * // asynchronous function that reads a json file and parses the contents as json object\n * function parseFile(file, key, callback) {\n *     fs.readFile(file, \"utf8\", function(err, data) {\n *         if (err) return calback(err);\n *         try {\n *             configs[key] = JSON.parse(data);\n *         } catch (e) {\n *             return callback(e);\n *         }\n *         callback();\n *     });\n * }\n *\n * // Using callbacks\n * async.forEachOf(validConfigFileMap, parseFile, function (err) {\n *     if (err) {\n *         console.error(err);\n *     } else {\n *         console.log(configs);\n *         // configs is now a map of JSON data, e.g.\n *         // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n *     }\n * });\n *\n * //Error handing\n * async.forEachOf(invalidConfigFileMap, parseFile, function (err) {\n *     if (err) {\n *         console.error(err);\n *         // JSON parse error exception\n *     } else {\n *         console.log(configs);\n *     }\n * });\n *\n * // Using Promises\n * async.forEachOf(validConfigFileMap, parseFile)\n * .then( () => {\n *     console.log(configs);\n *     // configs is now a map of JSON data, e.g.\n *     // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n * }).catch( err => {\n *     console.error(err);\n * });\n *\n * //Error handing\n * async.forEachOf(invalidConfigFileMap, parseFile)\n * .then( () => {\n *     console.log(configs);\n * }).catch( err => {\n *     console.error(err);\n *     // JSON parse error exception\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let result = await async.forEachOf(validConfigFileMap, parseFile);\n *         console.log(configs);\n *         // configs is now a map of JSON data, e.g.\n *         // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * //Error handing\n * async () => {\n *     try {\n *         let result = await async.forEachOf(invalidConfigFileMap, parseFile);\n *         console.log(configs);\n *     }\n *     catch (err) {\n *         console.log(err);\n *         // JSON parse error exception\n *     }\n * }\n *\n */\nfunction eachOf(coll, iteratee, callback) {\n    var eachOfImplementation = isArrayLike(coll) ? eachOfArrayLike : eachOfGeneric;\n    return eachOfImplementation(coll, wrapAsync(iteratee), callback);\n}\n\nvar eachOf$1 = awaitify(eachOf, 3);\n\n/**\n * Produces a new collection of values by mapping each value in `coll` through\n * the `iteratee` function. The `iteratee` is called with an item from `coll`\n * and a callback for when it has finished processing. Each of these callbacks\n * takes 2 arguments: an `error`, and the transformed item from `coll`. If\n * `iteratee` passes an error to its callback, the main `callback` (for the\n * `map` function) is immediately called with the error.\n *\n * Note, that since this function applies the `iteratee` to each item in\n * parallel, there is no guarantee that the `iteratee` functions will complete\n * in order. However, the results array will be in the same order as the\n * original `coll`.\n *\n * If `map` is passed an Object, the results will be an Array.  The results\n * will roughly be in the order of the original Objects' keys (but this can\n * vary across JavaScript engines).\n *\n * @name map\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an Array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * // file1.txt is a file that is 1000 bytes in size\n * // file2.txt is a file that is 2000 bytes in size\n * // file3.txt is a file that is 3000 bytes in size\n * // file4.txt does not exist\n *\n * const fileList = ['file1.txt','file2.txt','file3.txt'];\n * const withMissingFileList = ['file1.txt','file2.txt','file4.txt'];\n *\n * // asynchronous function that returns the file size in bytes\n * function getFileSizeInBytes(file, callback) {\n *     fs.stat(file, function(err, stat) {\n *         if (err) {\n *             return callback(err);\n *         }\n *         callback(null, stat.size);\n *     });\n * }\n *\n * // Using callbacks\n * async.map(fileList, getFileSizeInBytes, function(err, results) {\n *     if (err) {\n *         console.log(err);\n *     } else {\n *         console.log(results);\n *         // results is now an array of the file size in bytes for each file, e.g.\n *         // [ 1000, 2000, 3000]\n *     }\n * });\n *\n * // Error Handling\n * async.map(withMissingFileList, getFileSizeInBytes, function(err, results) {\n *     if (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *     } else {\n *         console.log(results);\n *     }\n * });\n *\n * // Using Promises\n * async.map(fileList, getFileSizeInBytes)\n * .then( results => {\n *     console.log(results);\n *     // results is now an array of the file size in bytes for each file, e.g.\n *     // [ 1000, 2000, 3000]\n * }).catch( err => {\n *     console.log(err);\n * });\n *\n * // Error Handling\n * async.map(withMissingFileList, getFileSizeInBytes)\n * .then( results => {\n *     console.log(results);\n * }).catch( err => {\n *     console.log(err);\n *     // [ Error: ENOENT: no such file or directory ]\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let results = await async.map(fileList, getFileSizeInBytes);\n *         console.log(results);\n *         // results is now an array of the file size in bytes for each file, e.g.\n *         // [ 1000, 2000, 3000]\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * // Error Handling\n * async () => {\n *     try {\n *         let results = await async.map(withMissingFileList, getFileSizeInBytes);\n *         console.log(results);\n *     }\n *     catch (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *     }\n * }\n *\n */\nfunction map (coll, iteratee, callback) {\n    return _asyncMap(eachOf$1, coll, iteratee, callback)\n}\nvar map$1 = awaitify(map, 3);\n\n/**\n * Applies the provided arguments to each function in the array, calling\n * `callback` after all functions have completed. If you only provide the first\n * argument, `fns`, then it will return a function which lets you pass in the\n * arguments as if it were a single function call. If more arguments are\n * provided, `callback` is required while `args` is still optional. The results\n * for each of the applied async functions are passed to the final callback\n * as an array.\n *\n * @name applyEach\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} fns - A collection of {@link AsyncFunction}s\n * to all call with the same arguments\n * @param {...*} [args] - any number of separate arguments to pass to the\n * function.\n * @param {Function} [callback] - the final argument should be the callback,\n * called when all functions have completed processing.\n * @returns {AsyncFunction} - Returns a function that takes no args other than\n * an optional callback, that is the result of applying the `args` to each\n * of the functions.\n * @example\n *\n * const appliedFn = async.applyEach([enableSearch, updateSchema], 'bucket')\n *\n * appliedFn((err, results) => {\n *     // results[0] is the results for `enableSearch`\n *     // results[1] is the results for `updateSchema`\n * });\n *\n * // partial application example:\n * async.each(\n *     buckets,\n *     async (bucket) => async.applyEach([enableSearch, updateSchema], bucket)(),\n *     callback\n * );\n */\nvar applyEach = applyEach$1(map$1);\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs only a single async operation at a time.\n *\n * @name eachOfSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachOfSeries(coll, iteratee, callback) {\n    return eachOfLimit$1(coll, 1, iteratee, callback)\n}\nvar eachOfSeries$1 = awaitify(eachOfSeries, 3);\n\n/**\n * The same as [`map`]{@link module:Collections.map} but runs only a single async operation at a time.\n *\n * @name mapSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction mapSeries (coll, iteratee, callback) {\n    return _asyncMap(eachOfSeries$1, coll, iteratee, callback)\n}\nvar mapSeries$1 = awaitify(mapSeries, 3);\n\n/**\n * The same as [`applyEach`]{@link module:ControlFlow.applyEach} but runs only a single async operation at a time.\n *\n * @name applyEachSeries\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.applyEach]{@link module:ControlFlow.applyEach}\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} fns - A collection of {@link AsyncFunction}s to all\n * call with the same arguments\n * @param {...*} [args] - any number of separate arguments to pass to the\n * function.\n * @param {Function} [callback] - the final argument should be the callback,\n * called when all functions have completed processing.\n * @returns {AsyncFunction} - A function, that when called, is the result of\n * appling the `args` to the list of functions.  It takes no args, other than\n * a callback.\n */\nvar applyEachSeries = applyEach$1(mapSeries$1);\n\nconst PROMISE_SYMBOL = Symbol('promiseCallback');\n\nfunction promiseCallback () {\n    let resolve, reject;\n    function callback (err, ...args) {\n        if (err) return reject(err)\n        resolve(args.length > 1 ? args : args[0]);\n    }\n\n    callback[PROMISE_SYMBOL] = new Promise((res, rej) => {\n        resolve = res,\n        reject = rej;\n    });\n\n    return callback\n}\n\n/**\n * Determines the best order for running the {@link AsyncFunction}s in `tasks`, based on\n * their requirements. Each function can optionally depend on other functions\n * being completed first, and each function is run as soon as its requirements\n * are satisfied.\n *\n * If any of the {@link AsyncFunction}s pass an error to their callback, the `auto` sequence\n * will stop. Further tasks will not execute (so any other functions depending\n * on it will not run), and the main `callback` is immediately called with the\n * error.\n *\n * {@link AsyncFunction}s also receive an object containing the results of functions which\n * have completed so far as the first argument, if they have dependencies. If a\n * task function has no dependencies, it will only be passed a callback.\n *\n * @name auto\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Object} tasks - An object. Each of its properties is either a\n * function or an array of requirements, with the {@link AsyncFunction} itself the last item\n * in the array. The object's key of a property serves as the name of the task\n * defined by that property, i.e. can be used when specifying requirements for\n * other tasks. The function receives one or two arguments:\n * * a `results` object, containing the results of the previously executed\n *   functions, only passed if the task has any dependencies,\n * * a `callback(err, result)` function, which must be called when finished,\n *   passing an `error` (which can be `null`) and the result of the function's\n *   execution.\n * @param {number} [concurrency=Infinity] - An optional `integer` for\n * determining the maximum number of tasks that can be run in parallel. By\n * default, as many as possible.\n * @param {Function} [callback] - An optional callback which is called when all\n * the tasks have been completed. It receives the `err` argument if any `tasks`\n * pass an error to their callback. Results are always returned; however, if an\n * error occurs, no further `tasks` will be performed, and the results object\n * will only contain partial results. Invoked with (err, results).\n * @returns {Promise} a promise, if a callback is not passed\n * @example\n *\n * //Using Callbacks\n * async.auto({\n *     get_data: function(callback) {\n *         // async code to get some data\n *         callback(null, 'data', 'converted to array');\n *     },\n *     make_folder: function(callback) {\n *         // async code to create a directory to store a file in\n *         // this is run at the same time as getting the data\n *         callback(null, 'folder');\n *     },\n *     write_file: ['get_data', 'make_folder', function(results, callback) {\n *         // once there is some data and the directory exists,\n *         // write the data to a file in the directory\n *         callback(null, 'filename');\n *     }],\n *     email_link: ['write_file', function(results, callback) {\n *         // once the file is written let's email a link to it...\n *         callback(null, {'file':results.write_file, 'email':'user@example.com'});\n *     }]\n * }, function(err, results) {\n *     if (err) {\n *         console.log('err = ', err);\n *     }\n *     console.log('results = ', results);\n *     // results = {\n *     //     get_data: ['data', 'converted to array']\n *     //     make_folder; 'folder',\n *     //     write_file: 'filename'\n *     //     email_link: { file: 'filename', email: 'user@example.com' }\n *     // }\n * });\n *\n * //Using Promises\n * async.auto({\n *     get_data: function(callback) {\n *         console.log('in get_data');\n *         // async code to get some data\n *         callback(null, 'data', 'converted to array');\n *     },\n *     make_folder: function(callback) {\n *         console.log('in make_folder');\n *         // async code to create a directory to store a file in\n *         // this is run at the same time as getting the data\n *         callback(null, 'folder');\n *     },\n *     write_file: ['get_data', 'make_folder', function(results, callback) {\n *         // once there is some data and the directory exists,\n *         // write the data to a file in the directory\n *         callback(null, 'filename');\n *     }],\n *     email_link: ['write_file', function(results, callback) {\n *         // once the file is written let's email a link to it...\n *         callback(null, {'file':results.write_file, 'email':'user@example.com'});\n *     }]\n * }).then(results => {\n *     console.log('results = ', results);\n *     // results = {\n *     //     get_data: ['data', 'converted to array']\n *     //     make_folder; 'folder',\n *     //     write_file: 'filename'\n *     //     email_link: { file: 'filename', email: 'user@example.com' }\n *     // }\n * }).catch(err => {\n *     console.log('err = ', err);\n * });\n *\n * //Using async/await\n * async () => {\n *     try {\n *         let results = await async.auto({\n *             get_data: function(callback) {\n *                 // async code to get some data\n *                 callback(null, 'data', 'converted to array');\n *             },\n *             make_folder: function(callback) {\n *                 // async code to create a directory to store a file in\n *                 // this is run at the same time as getting the data\n *                 callback(null, 'folder');\n *             },\n *             write_file: ['get_data', 'make_folder', function(results, callback) {\n *                 // once there is some data and the directory exists,\n *                 // write the data to a file in the directory\n *                 callback(null, 'filename');\n *             }],\n *             email_link: ['write_file', function(results, callback) {\n *                 // once the file is written let's email a link to it...\n *                 callback(null, {'file':results.write_file, 'email':'user@example.com'});\n *             }]\n *         });\n *         console.log('results = ', results);\n *         // results = {\n *         //     get_data: ['data', 'converted to array']\n *         //     make_folder; 'folder',\n *         //     write_file: 'filename'\n *         //     email_link: { file: 'filename', email: 'user@example.com' }\n *         // }\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n */\nfunction auto(tasks, concurrency, callback) {\n    if (typeof concurrency !== 'number') {\n        // concurrency is optional, shift the args.\n        callback = concurrency;\n        concurrency = null;\n    }\n    callback = once(callback || promiseCallback());\n    var numTasks = Object.keys(tasks).length;\n    if (!numTasks) {\n        return callback(null);\n    }\n    if (!concurrency) {\n        concurrency = numTasks;\n    }\n\n    var results = {};\n    var runningTasks = 0;\n    var canceled = false;\n    var hasError = false;\n\n    var listeners = Object.create(null);\n\n    var readyTasks = [];\n\n    // for cycle detection:\n    var readyToCheck = []; // tasks that have been identified as reachable\n    // without the possibility of returning to an ancestor task\n    var uncheckedDependencies = {};\n\n    Object.keys(tasks).forEach(key => {\n        var task = tasks[key];\n        if (!Array.isArray(task)) {\n            // no dependencies\n            enqueueTask(key, [task]);\n            readyToCheck.push(key);\n            return;\n        }\n\n        var dependencies = task.slice(0, task.length - 1);\n        var remainingDependencies = dependencies.length;\n        if (remainingDependencies === 0) {\n            enqueueTask(key, task);\n            readyToCheck.push(key);\n            return;\n        }\n        uncheckedDependencies[key] = remainingDependencies;\n\n        dependencies.forEach(dependencyName => {\n            if (!tasks[dependencyName]) {\n                throw new Error('async.auto task `' + key +\n                    '` has a non-existent dependency `' +\n                    dependencyName + '` in ' +\n                    dependencies.join(', '));\n            }\n            addListener(dependencyName, () => {\n                remainingDependencies--;\n                if (remainingDependencies === 0) {\n                    enqueueTask(key, task);\n                }\n            });\n        });\n    });\n\n    checkForDeadlocks();\n    processQueue();\n\n    function enqueueTask(key, task) {\n        readyTasks.push(() => runTask(key, task));\n    }\n\n    function processQueue() {\n        if (canceled) return\n        if (readyTasks.length === 0 && runningTasks === 0) {\n            return callback(null, results);\n        }\n        while(readyTasks.length && runningTasks < concurrency) {\n            var run = readyTasks.shift();\n            run();\n        }\n\n    }\n\n    function addListener(taskName, fn) {\n        var taskListeners = listeners[taskName];\n        if (!taskListeners) {\n            taskListeners = listeners[taskName] = [];\n        }\n\n        taskListeners.push(fn);\n    }\n\n    function taskComplete(taskName) {\n        var taskListeners = listeners[taskName] || [];\n        taskListeners.forEach(fn => fn());\n        processQueue();\n    }\n\n\n    function runTask(key, task) {\n        if (hasError) return;\n\n        var taskCallback = onlyOnce((err, ...result) => {\n            runningTasks--;\n            if (err === false) {\n                canceled = true;\n                return\n            }\n            if (result.length < 2) {\n                [result] = result;\n            }\n            if (err) {\n                var safeResults = {};\n                Object.keys(results).forEach(rkey => {\n                    safeResults[rkey] = results[rkey];\n                });\n                safeResults[key] = result;\n                hasError = true;\n                listeners = Object.create(null);\n                if (canceled) return\n                callback(err, safeResults);\n            } else {\n                results[key] = result;\n                taskComplete(key);\n            }\n        });\n\n        runningTasks++;\n        var taskFn = wrapAsync(task[task.length - 1]);\n        if (task.length > 1) {\n            taskFn(results, taskCallback);\n        } else {\n            taskFn(taskCallback);\n        }\n    }\n\n    function checkForDeadlocks() {\n        // Kahn's algorithm\n        // https://en.wikipedia.org/wiki/Topological_sorting#Kahn.27s_algorithm\n        // http://connalle.blogspot.com/2013/10/topological-sortingkahn-algorithm.html\n        var currentTask;\n        var counter = 0;\n        while (readyToCheck.length) {\n            currentTask = readyToCheck.pop();\n            counter++;\n            getDependents(currentTask).forEach(dependent => {\n                if (--uncheckedDependencies[dependent] === 0) {\n                    readyToCheck.push(dependent);\n                }\n            });\n        }\n\n        if (counter !== numTasks) {\n            throw new Error(\n                'async.auto cannot execute tasks due to a recursive dependency'\n            );\n        }\n    }\n\n    function getDependents(taskName) {\n        var result = [];\n        Object.keys(tasks).forEach(key => {\n            const task = tasks[key];\n            if (Array.isArray(task) && task.indexOf(taskName) >= 0) {\n                result.push(key);\n            }\n        });\n        return result;\n    }\n\n    return callback[PROMISE_SYMBOL]\n}\n\nvar FN_ARGS = /^(?:async\\s)?(?:function)?\\s*(?:\\w+\\s*)?\\(([^)]+)\\)(?:\\s*{)/;\nvar ARROW_FN_ARGS = /^(?:async\\s)?\\s*(?:\\(\\s*)?((?:[^)=\\s]\\s*)*)(?:\\)\\s*)?=>/;\nvar FN_ARG_SPLIT = /,/;\nvar FN_ARG = /(=.+)?(\\s*)$/;\n\nfunction stripComments(string) {\n    let stripped = '';\n    let index = 0;\n    let endBlockComment = string.indexOf('*/');\n    while (index < string.length) {\n        if (string[index] === '/' && string[index+1] === '/') {\n            // inline comment\n            let endIndex = string.indexOf('\\n', index);\n            index = (endIndex === -1) ? string.length : endIndex;\n        } else if ((endBlockComment !== -1) && (string[index] === '/') && (string[index+1] === '*')) {\n            // block comment\n            let endIndex = string.indexOf('*/', index);\n            if (endIndex !== -1) {\n                index = endIndex + 2;\n                endBlockComment = string.indexOf('*/', index);\n            } else {\n                stripped += string[index];\n                index++;\n            }\n        } else {\n            stripped += string[index];\n            index++;\n        }\n    }\n    return stripped;\n}\n\nfunction parseParams(func) {\n    const src = stripComments(func.toString());\n    let match = src.match(FN_ARGS);\n    if (!match) {\n        match = src.match(ARROW_FN_ARGS);\n    }\n    if (!match) throw new Error('could not parse args in autoInject\\nSource:\\n' + src)\n    let [, args] = match;\n    return args\n        .replace(/\\s/g, '')\n        .split(FN_ARG_SPLIT)\n        .map((arg) => arg.replace(FN_ARG, '').trim());\n}\n\n/**\n * A dependency-injected version of the [async.auto]{@link module:ControlFlow.auto} function. Dependent\n * tasks are specified as parameters to the function, after the usual callback\n * parameter, with the parameter names matching the names of the tasks it\n * depends on. This can provide even more readable task graphs which can be\n * easier to maintain.\n *\n * If a final callback is specified, the task results are similarly injected,\n * specified as named parameters after the initial error parameter.\n *\n * The autoInject function is purely syntactic sugar and its semantics are\n * otherwise equivalent to [async.auto]{@link module:ControlFlow.auto}.\n *\n * @name autoInject\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.auto]{@link module:ControlFlow.auto}\n * @category Control Flow\n * @param {Object} tasks - An object, each of whose properties is an {@link AsyncFunction} of\n * the form 'func([dependencies...], callback). The object's key of a property\n * serves as the name of the task defined by that property, i.e. can be used\n * when specifying requirements for other tasks.\n * * The `callback` parameter is a `callback(err, result)` which must be called\n *   when finished, passing an `error` (which can be `null`) and the result of\n *   the function's execution. The remaining parameters name other tasks on\n *   which the task is dependent, and the results from those tasks are the\n *   arguments of those parameters.\n * @param {Function} [callback] - An optional callback which is called when all\n * the tasks have been completed. It receives the `err` argument if any `tasks`\n * pass an error to their callback, and a `results` object with any completed\n * task results, similar to `auto`.\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * //  The example from `auto` can be rewritten as follows:\n * async.autoInject({\n *     get_data: function(callback) {\n *         // async code to get some data\n *         callback(null, 'data', 'converted to array');\n *     },\n *     make_folder: function(callback) {\n *         // async code to create a directory to store a file in\n *         // this is run at the same time as getting the data\n *         callback(null, 'folder');\n *     },\n *     write_file: function(get_data, make_folder, callback) {\n *         // once there is some data and the directory exists,\n *         // write the data to a file in the directory\n *         callback(null, 'filename');\n *     },\n *     email_link: function(write_file, callback) {\n *         // once the file is written let's email a link to it...\n *         // write_file contains the filename returned by write_file.\n *         callback(null, {'file':write_file, 'email':'user@example.com'});\n *     }\n * }, function(err, results) {\n *     console.log('err = ', err);\n *     console.log('email_link = ', results.email_link);\n * });\n *\n * // If you are using a JS minifier that mangles parameter names, `autoInject`\n * // will not work with plain functions, since the parameter names will be\n * // collapsed to a single letter identifier.  To work around this, you can\n * // explicitly specify the names of the parameters your task function needs\n * // in an array, similar to Angular.js dependency injection.\n *\n * // This still has an advantage over plain `auto`, since the results a task\n * // depends on are still spread into arguments.\n * async.autoInject({\n *     //...\n *     write_file: ['get_data', 'make_folder', function(get_data, make_folder, callback) {\n *         callback(null, 'filename');\n *     }],\n *     email_link: ['write_file', function(write_file, callback) {\n *         callback(null, {'file':write_file, 'email':'user@example.com'});\n *     }]\n *     //...\n * }, function(err, results) {\n *     console.log('err = ', err);\n *     console.log('email_link = ', results.email_link);\n * });\n */\nfunction autoInject(tasks, callback) {\n    var newTasks = {};\n\n    Object.keys(tasks).forEach(key => {\n        var taskFn = tasks[key];\n        var params;\n        var fnIsAsync = isAsync(taskFn);\n        var hasNoDeps =\n            (!fnIsAsync && taskFn.length === 1) ||\n            (fnIsAsync && taskFn.length === 0);\n\n        if (Array.isArray(taskFn)) {\n            params = [...taskFn];\n            taskFn = params.pop();\n\n            newTasks[key] = params.concat(params.length > 0 ? newTask : taskFn);\n        } else if (hasNoDeps) {\n            // no dependencies, use the function as-is\n            newTasks[key] = taskFn;\n        } else {\n            params = parseParams(taskFn);\n            if ((taskFn.length === 0 && !fnIsAsync) && params.length === 0) {\n                throw new Error(\"autoInject task functions require explicit parameters.\");\n            }\n\n            // remove callback param\n            if (!fnIsAsync) params.pop();\n\n            newTasks[key] = params.concat(newTask);\n        }\n\n        function newTask(results, taskCb) {\n            var newArgs = params.map(name => results[name]);\n            newArgs.push(taskCb);\n            wrapAsync(taskFn)(...newArgs);\n        }\n    });\n\n    return auto(newTasks, callback);\n}\n\n// Simple doubly linked list (https://en.wikipedia.org/wiki/Doubly_linked_list) implementation\n// used for queues. This implementation assumes that the node provided by the user can be modified\n// to adjust the next and last properties. We implement only the minimal functionality\n// for queue support.\nclass DLL {\n    constructor() {\n        this.head = this.tail = null;\n        this.length = 0;\n    }\n\n    removeLink(node) {\n        if (node.prev) node.prev.next = node.next;\n        else this.head = node.next;\n        if (node.next) node.next.prev = node.prev;\n        else this.tail = node.prev;\n\n        node.prev = node.next = null;\n        this.length -= 1;\n        return node;\n    }\n\n    empty () {\n        while(this.head) this.shift();\n        return this;\n    }\n\n    insertAfter(node, newNode) {\n        newNode.prev = node;\n        newNode.next = node.next;\n        if (node.next) node.next.prev = newNode;\n        else this.tail = newNode;\n        node.next = newNode;\n        this.length += 1;\n    }\n\n    insertBefore(node, newNode) {\n        newNode.prev = node.prev;\n        newNode.next = node;\n        if (node.prev) node.prev.next = newNode;\n        else this.head = newNode;\n        node.prev = newNode;\n        this.length += 1;\n    }\n\n    unshift(node) {\n        if (this.head) this.insertBefore(this.head, node);\n        else setInitial(this, node);\n    }\n\n    push(node) {\n        if (this.tail) this.insertAfter(this.tail, node);\n        else setInitial(this, node);\n    }\n\n    shift() {\n        return this.head && this.removeLink(this.head);\n    }\n\n    pop() {\n        return this.tail && this.removeLink(this.tail);\n    }\n\n    toArray() {\n        return [...this]\n    }\n\n    *[Symbol.iterator] () {\n        var cur = this.head;\n        while (cur) {\n            yield cur.data;\n            cur = cur.next;\n        }\n    }\n\n    remove (testFn) {\n        var curr = this.head;\n        while(curr) {\n            var {next} = curr;\n            if (testFn(curr)) {\n                this.removeLink(curr);\n            }\n            curr = next;\n        }\n        return this;\n    }\n}\n\nfunction setInitial(dll, node) {\n    dll.length = 1;\n    dll.head = dll.tail = node;\n}\n\nfunction queue$1(worker, concurrency, payload) {\n    if (concurrency == null) {\n        concurrency = 1;\n    }\n    else if(concurrency === 0) {\n        throw new RangeError('Concurrency must not be zero');\n    }\n\n    var _worker = wrapAsync(worker);\n    var numRunning = 0;\n    var workersList = [];\n    const events = {\n        error: [],\n        drain: [],\n        saturated: [],\n        unsaturated: [],\n        empty: []\n    };\n\n    function on (event, handler) {\n        events[event].push(handler);\n    }\n\n    function once (event, handler) {\n        const handleAndRemove = (...args) => {\n            off(event, handleAndRemove);\n            handler(...args);\n        };\n        events[event].push(handleAndRemove);\n    }\n\n    function off (event, handler) {\n        if (!event) return Object.keys(events).forEach(ev => events[ev] = [])\n        if (!handler) return events[event] = []\n        events[event] = events[event].filter(ev => ev !== handler);\n    }\n\n    function trigger (event, ...args) {\n        events[event].forEach(handler => handler(...args));\n    }\n\n    var processingScheduled = false;\n    function _insert(data, insertAtFront, rejectOnError, callback) {\n        if (callback != null && typeof callback !== 'function') {\n            throw new Error('task callback must be a function');\n        }\n        q.started = true;\n\n        var res, rej;\n        function promiseCallback (err, ...args) {\n            // we don't care about the error, let the global error handler\n            // deal with it\n            if (err) return rejectOnError ? rej(err) : res()\n            if (args.length <= 1) return res(args[0])\n            res(args);\n        }\n\n        var item = q._createTaskItem(\n            data,\n            rejectOnError ? promiseCallback :\n                (callback || promiseCallback)\n        );\n\n        if (insertAtFront) {\n            q._tasks.unshift(item);\n        } else {\n            q._tasks.push(item);\n        }\n\n        if (!processingScheduled) {\n            processingScheduled = true;\n            setImmediate$1(() => {\n                processingScheduled = false;\n                q.process();\n            });\n        }\n\n        if (rejectOnError || !callback) {\n            return new Promise((resolve, reject) => {\n                res = resolve;\n                rej = reject;\n            })\n        }\n    }\n\n    function _createCB(tasks) {\n        return function (err, ...args) {\n            numRunning -= 1;\n\n            for (var i = 0, l = tasks.length; i < l; i++) {\n                var task = tasks[i];\n\n                var index = workersList.indexOf(task);\n                if (index === 0) {\n                    workersList.shift();\n                } else if (index > 0) {\n                    workersList.splice(index, 1);\n                }\n\n                task.callback(err, ...args);\n\n                if (err != null) {\n                    trigger('error', err, task.data);\n                }\n            }\n\n            if (numRunning <= (q.concurrency - q.buffer) ) {\n                trigger('unsaturated');\n            }\n\n            if (q.idle()) {\n                trigger('drain');\n            }\n            q.process();\n        };\n    }\n\n    function _maybeDrain(data) {\n        if (data.length === 0 && q.idle()) {\n            // call drain immediately if there are no tasks\n            setImmediate$1(() => trigger('drain'));\n            return true\n        }\n        return false\n    }\n\n    const eventMethod = (name) => (handler) => {\n        if (!handler) {\n            return new Promise((resolve, reject) => {\n                once(name, (err, data) => {\n                    if (err) return reject(err)\n                    resolve(data);\n                });\n            })\n        }\n        off(name);\n        on(name, handler);\n\n    };\n\n    var isProcessing = false;\n    var q = {\n        _tasks: new DLL(),\n        _createTaskItem (data, callback) {\n            return {\n                data,\n                callback\n            };\n        },\n        *[Symbol.iterator] () {\n            yield* q._tasks[Symbol.iterator]();\n        },\n        concurrency,\n        payload,\n        buffer: concurrency / 4,\n        started: false,\n        paused: false,\n        push (data, callback) {\n            if (Array.isArray(data)) {\n                if (_maybeDrain(data)) return\n                return data.map(datum => _insert(datum, false, false, callback))\n            }\n            return _insert(data, false, false, callback);\n        },\n        pushAsync (data, callback) {\n            if (Array.isArray(data)) {\n                if (_maybeDrain(data)) return\n                return data.map(datum => _insert(datum, false, true, callback))\n            }\n            return _insert(data, false, true, callback);\n        },\n        kill () {\n            off();\n            q._tasks.empty();\n        },\n        unshift (data, callback) {\n            if (Array.isArray(data)) {\n                if (_maybeDrain(data)) return\n                return data.map(datum => _insert(datum, true, false, callback))\n            }\n            return _insert(data, true, false, callback);\n        },\n        unshiftAsync (data, callback) {\n            if (Array.isArray(data)) {\n                if (_maybeDrain(data)) return\n                return data.map(datum => _insert(datum, true, true, callback))\n            }\n            return _insert(data, true, true, callback);\n        },\n        remove (testFn) {\n            q._tasks.remove(testFn);\n        },\n        process () {\n            // Avoid trying to start too many processing operations. This can occur\n            // when callbacks resolve synchronously (#1267).\n            if (isProcessing) {\n                return;\n            }\n            isProcessing = true;\n            while(!q.paused && numRunning < q.concurrency && q._tasks.length){\n                var tasks = [], data = [];\n                var l = q._tasks.length;\n                if (q.payload) l = Math.min(l, q.payload);\n                for (var i = 0; i < l; i++) {\n                    var node = q._tasks.shift();\n                    tasks.push(node);\n                    workersList.push(node);\n                    data.push(node.data);\n                }\n\n                numRunning += 1;\n\n                if (q._tasks.length === 0) {\n                    trigger('empty');\n                }\n\n                if (numRunning === q.concurrency) {\n                    trigger('saturated');\n                }\n\n                var cb = onlyOnce(_createCB(tasks));\n                _worker(data, cb);\n            }\n            isProcessing = false;\n        },\n        length () {\n            return q._tasks.length;\n        },\n        running () {\n            return numRunning;\n        },\n        workersList () {\n            return workersList;\n        },\n        idle() {\n            return q._tasks.length + numRunning === 0;\n        },\n        pause () {\n            q.paused = true;\n        },\n        resume () {\n            if (q.paused === false) { return; }\n            q.paused = false;\n            setImmediate$1(q.process);\n        }\n    };\n    // define these as fixed properties, so people get useful errors when updating\n    Object.defineProperties(q, {\n        saturated: {\n            writable: false,\n            value: eventMethod('saturated')\n        },\n        unsaturated: {\n            writable: false,\n            value: eventMethod('unsaturated')\n        },\n        empty: {\n            writable: false,\n            value: eventMethod('empty')\n        },\n        drain: {\n            writable: false,\n            value: eventMethod('drain')\n        },\n        error: {\n            writable: false,\n            value: eventMethod('error')\n        },\n    });\n    return q;\n}\n\n/**\n * Creates a `cargo` object with the specified payload. Tasks added to the\n * cargo will be processed altogether (up to the `payload` limit). If the\n * `worker` is in progress, the task is queued until it becomes available. Once\n * the `worker` has completed some tasks, each callback of those tasks is\n * called. Check out [these](https://camo.githubusercontent.com/6bbd36f4cf5b35a0f11a96dcd2e97711ffc2fb37/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130382f62626330636662302d356632392d313165322d393734662d3333393763363464633835382e676966) [animations](https://camo.githubusercontent.com/f4810e00e1c5f5f8addbe3e9f49064fd5d102699/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130312f38346339323036362d356632392d313165322d383134662d3964336430323431336266642e676966)\n * for how `cargo` and `queue` work.\n *\n * While [`queue`]{@link module:ControlFlow.queue} passes only one task to one of a group of workers\n * at a time, cargo passes an array of tasks to a single worker, repeating\n * when the worker is finished.\n *\n * @name cargo\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.queue]{@link module:ControlFlow.queue}\n * @category Control Flow\n * @param {AsyncFunction} worker - An asynchronous function for processing an array\n * of queued tasks. Invoked with `(tasks, callback)`.\n * @param {number} [payload=Infinity] - An optional `integer` for determining\n * how many tasks should be processed per round; if omitted, the default is\n * unlimited.\n * @returns {module:ControlFlow.QueueObject} A cargo object to manage the tasks. Callbacks can\n * attached as certain properties to listen for specific events during the\n * lifecycle of the cargo and inner queue.\n * @example\n *\n * // create a cargo object with payload 2\n * var cargo = async.cargo(function(tasks, callback) {\n *     for (var i=0; i<tasks.length; i++) {\n *         console.log('hello ' + tasks[i].name);\n *     }\n *     callback();\n * }, 2);\n *\n * // add some items\n * cargo.push({name: 'foo'}, function(err) {\n *     console.log('finished processing foo');\n * });\n * cargo.push({name: 'bar'}, function(err) {\n *     console.log('finished processing bar');\n * });\n * await cargo.push({name: 'baz'});\n * console.log('finished processing baz');\n */\nfunction cargo$1(worker, payload) {\n    return queue$1(worker, 1, payload);\n}\n\n/**\n * Creates a `cargoQueue` object with the specified payload. Tasks added to the\n * cargoQueue will be processed together (up to the `payload` limit) in `concurrency` parallel workers.\n * If the all `workers` are in progress, the task is queued until one becomes available. Once\n * a `worker` has completed some tasks, each callback of those tasks is\n * called. Check out [these](https://camo.githubusercontent.com/6bbd36f4cf5b35a0f11a96dcd2e97711ffc2fb37/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130382f62626330636662302d356632392d313165322d393734662d3333393763363464633835382e676966) [animations](https://camo.githubusercontent.com/f4810e00e1c5f5f8addbe3e9f49064fd5d102699/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130312f38346339323036362d356632392d313165322d383134662d3964336430323431336266642e676966)\n * for how `cargo` and `queue` work.\n *\n * While [`queue`]{@link module:ControlFlow.queue} passes only one task to one of a group of workers\n * at a time, and [`cargo`]{@link module:ControlFlow.cargo} passes an array of tasks to a single worker,\n * the cargoQueue passes an array of tasks to multiple parallel workers.\n *\n * @name cargoQueue\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.queue]{@link module:ControlFlow.queue}\n * @see [async.cargo]{@link module:ControlFLow.cargo}\n * @category Control Flow\n * @param {AsyncFunction} worker - An asynchronous function for processing an array\n * of queued tasks. Invoked with `(tasks, callback)`.\n * @param {number} [concurrency=1] - An `integer` for determining how many\n * `worker` functions should be run in parallel.  If omitted, the concurrency\n * defaults to `1`.  If the concurrency is `0`, an error is thrown.\n * @param {number} [payload=Infinity] - An optional `integer` for determining\n * how many tasks should be processed per round; if omitted, the default is\n * unlimited.\n * @returns {module:ControlFlow.QueueObject} A cargoQueue object to manage the tasks. Callbacks can\n * attached as certain properties to listen for specific events during the\n * lifecycle of the cargoQueue and inner queue.\n * @example\n *\n * // create a cargoQueue object with payload 2 and concurrency 2\n * var cargoQueue = async.cargoQueue(function(tasks, callback) {\n *     for (var i=0; i<tasks.length; i++) {\n *         console.log('hello ' + tasks[i].name);\n *     }\n *     callback();\n * }, 2, 2);\n *\n * // add some items\n * cargoQueue.push({name: 'foo'}, function(err) {\n *     console.log('finished processing foo');\n * });\n * cargoQueue.push({name: 'bar'}, function(err) {\n *     console.log('finished processing bar');\n * });\n * cargoQueue.push({name: 'baz'}, function(err) {\n *     console.log('finished processing baz');\n * });\n * cargoQueue.push({name: 'boo'}, function(err) {\n *     console.log('finished processing boo');\n * });\n */\nfunction cargo(worker, concurrency, payload) {\n    return queue$1(worker, concurrency, payload);\n}\n\n/**\n * Reduces `coll` into a single value using an async `iteratee` to return each\n * successive step. `memo` is the initial state of the reduction. This function\n * only operates in series.\n *\n * For performance reasons, it may make sense to split a call to this function\n * into a parallel map, and then use the normal `Array.prototype.reduce` on the\n * results. This function is for situations where each step in the reduction\n * needs to be async; if you can get the data before reducing it, then it's\n * probably a good idea to do so.\n *\n * @name reduce\n * @static\n * @memberOf module:Collections\n * @method\n * @alias inject\n * @alias foldl\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {*} memo - The initial state of the reduction.\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * array to produce the next step in the reduction.\n * The `iteratee` should complete with the next state of the reduction.\n * If the iteratee completes with an error, the reduction is stopped and the\n * main `callback` is immediately called with the error.\n * Invoked with (memo, item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the reduced value. Invoked with\n * (err, result).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * // file1.txt is a file that is 1000 bytes in size\n * // file2.txt is a file that is 2000 bytes in size\n * // file3.txt is a file that is 3000 bytes in size\n * // file4.txt does not exist\n *\n * const fileList = ['file1.txt','file2.txt','file3.txt'];\n * const withMissingFileList = ['file1.txt','file2.txt','file3.txt', 'file4.txt'];\n *\n * // asynchronous function that computes the file size in bytes\n * // file size is added to the memoized value, then returned\n * function getFileSizeInBytes(memo, file, callback) {\n *     fs.stat(file, function(err, stat) {\n *         if (err) {\n *             return callback(err);\n *         }\n *         callback(null, memo + stat.size);\n *     });\n * }\n *\n * // Using callbacks\n * async.reduce(fileList, 0, getFileSizeInBytes, function(err, result) {\n *     if (err) {\n *         console.log(err);\n *     } else {\n *         console.log(result);\n *         // 6000\n *         // which is the sum of the file sizes of the three files\n *     }\n * });\n *\n * // Error Handling\n * async.reduce(withMissingFileList, 0, getFileSizeInBytes, function(err, result) {\n *     if (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *     } else {\n *         console.log(result);\n *     }\n * });\n *\n * // Using Promises\n * async.reduce(fileList, 0, getFileSizeInBytes)\n * .then( result => {\n *     console.log(result);\n *     // 6000\n *     // which is the sum of the file sizes of the three files\n * }).catch( err => {\n *     console.log(err);\n * });\n *\n * // Error Handling\n * async.reduce(withMissingFileList, 0, getFileSizeInBytes)\n * .then( result => {\n *     console.log(result);\n * }).catch( err => {\n *     console.log(err);\n *     // [ Error: ENOENT: no such file or directory ]\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let result = await async.reduce(fileList, 0, getFileSizeInBytes);\n *         console.log(result);\n *         // 6000\n *         // which is the sum of the file sizes of the three files\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * // Error Handling\n * async () => {\n *     try {\n *         let result = await async.reduce(withMissingFileList, 0, getFileSizeInBytes);\n *         console.log(result);\n *     }\n *     catch (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *     }\n * }\n *\n */\nfunction reduce(coll, memo, iteratee, callback) {\n    callback = once(callback);\n    var _iteratee = wrapAsync(iteratee);\n    return eachOfSeries$1(coll, (x, i, iterCb) => {\n        _iteratee(memo, x, (err, v) => {\n            memo = v;\n            iterCb(err);\n        });\n    }, err => callback(err, memo));\n}\nvar reduce$1 = awaitify(reduce, 4);\n\n/**\n * Version of the compose function that is more natural to read. Each function\n * consumes the return value of the previous function. It is the equivalent of\n * [compose]{@link module:ControlFlow.compose} with the arguments reversed.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name seq\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.compose]{@link module:ControlFlow.compose}\n * @category Control Flow\n * @param {...AsyncFunction} functions - the asynchronous functions to compose\n * @returns {Function} a function that composes the `functions` in order\n * @example\n *\n * // Requires lodash (or underscore), express3 and dresende's orm2.\n * // Part of an app, that fetches cats of the logged user.\n * // This example uses `seq` function to avoid overnesting and error\n * // handling clutter.\n * app.get('/cats', function(request, response) {\n *     var User = request.models.User;\n *     async.seq(\n *         User.get.bind(User),  // 'User.get' has signature (id, callback(err, data))\n *         function(user, fn) {\n *             user.getCats(fn);      // 'getCats' has signature (callback(err, data))\n *         }\n *     )(req.session.user_id, function (err, cats) {\n *         if (err) {\n *             console.error(err);\n *             response.json({ status: 'error', message: err.message });\n *         } else {\n *             response.json({ status: 'ok', message: 'Cats found', data: cats });\n *         }\n *     });\n * });\n */\nfunction seq(...functions) {\n    var _functions = functions.map(wrapAsync);\n    return function (...args) {\n        var that = this;\n\n        var cb = args[args.length - 1];\n        if (typeof cb == 'function') {\n            args.pop();\n        } else {\n            cb = promiseCallback();\n        }\n\n        reduce$1(_functions, args, (newargs, fn, iterCb) => {\n            fn.apply(that, newargs.concat((err, ...nextargs) => {\n                iterCb(err, nextargs);\n            }));\n        },\n        (err, results) => cb(err, ...results));\n\n        return cb[PROMISE_SYMBOL]\n    };\n}\n\n/**\n * Creates a function which is a composition of the passed asynchronous\n * functions. Each function consumes the return value of the function that\n * follows. Composing functions `f()`, `g()`, and `h()` would produce the result\n * of `f(g(h()))`, only this version uses callbacks to obtain the return values.\n *\n * If the last argument to the composed function is not a function, a promise\n * is returned when you call it.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name compose\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {...AsyncFunction} functions - the asynchronous functions to compose\n * @returns {Function} an asynchronous function that is the composed\n * asynchronous `functions`\n * @example\n *\n * function add1(n, callback) {\n *     setTimeout(function () {\n *         callback(null, n + 1);\n *     }, 10);\n * }\n *\n * function mul3(n, callback) {\n *     setTimeout(function () {\n *         callback(null, n * 3);\n *     }, 10);\n * }\n *\n * var add1mul3 = async.compose(mul3, add1);\n * add1mul3(4, function (err, result) {\n *     // result now equals 15\n * });\n */\nfunction compose(...args) {\n    return seq(...args.reverse());\n}\n\n/**\n * The same as [`map`]{@link module:Collections.map} but runs a maximum of `limit` async operations at a time.\n *\n * @name mapLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction mapLimit (coll, limit, iteratee, callback) {\n    return _asyncMap(eachOfLimit$2(limit), coll, iteratee, callback)\n}\nvar mapLimit$1 = awaitify(mapLimit, 4);\n\n/**\n * The same as [`concat`]{@link module:Collections.concat} but runs a maximum of `limit` async operations at a time.\n *\n * @name concatLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.concat]{@link module:Collections.concat}\n * @category Collection\n * @alias flatMapLimit\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`,\n * which should use an array as its result. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n * @returns A Promise, if no callback is passed\n */\nfunction concatLimit(coll, limit, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    return mapLimit$1(coll, limit, (val, iterCb) => {\n        _iteratee(val, (err, ...args) => {\n            if (err) return iterCb(err);\n            return iterCb(err, args);\n        });\n    }, (err, mapResults) => {\n        var result = [];\n        for (var i = 0; i < mapResults.length; i++) {\n            if (mapResults[i]) {\n                result = result.concat(...mapResults[i]);\n            }\n        }\n\n        return callback(err, result);\n    });\n}\nvar concatLimit$1 = awaitify(concatLimit, 4);\n\n/**\n * Applies `iteratee` to each item in `coll`, concatenating the results. Returns\n * the concatenated list. The `iteratee`s are called in parallel, and the\n * results are concatenated as they return. The results array will be returned in\n * the original order of `coll` passed to the `iteratee` function.\n *\n * @name concat\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @alias flatMap\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`,\n * which should use an array as its result. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n * @returns A Promise, if no callback is passed\n * @example\n *\n * // dir1 is a directory that contains file1.txt, file2.txt\n * // dir2 is a directory that contains file3.txt, file4.txt\n * // dir3 is a directory that contains file5.txt\n * // dir4 does not exist\n *\n * let directoryList = ['dir1','dir2','dir3'];\n * let withMissingDirectoryList = ['dir1','dir2','dir3', 'dir4'];\n *\n * // Using callbacks\n * async.concat(directoryList, fs.readdir, function(err, results) {\n *    if (err) {\n *        console.log(err);\n *    } else {\n *        console.log(results);\n *        // [ 'file1.txt', 'file2.txt', 'file3.txt', 'file4.txt', file5.txt ]\n *    }\n * });\n *\n * // Error Handling\n * async.concat(withMissingDirectoryList, fs.readdir, function(err, results) {\n *    if (err) {\n *        console.log(err);\n *        // [ Error: ENOENT: no such file or directory ]\n *        // since dir4 does not exist\n *    } else {\n *        console.log(results);\n *    }\n * });\n *\n * // Using Promises\n * async.concat(directoryList, fs.readdir)\n * .then(results => {\n *     console.log(results);\n *     // [ 'file1.txt', 'file2.txt', 'file3.txt', 'file4.txt', file5.txt ]\n * }).catch(err => {\n *      console.log(err);\n * });\n *\n * // Error Handling\n * async.concat(withMissingDirectoryList, fs.readdir)\n * .then(results => {\n *     console.log(results);\n * }).catch(err => {\n *     console.log(err);\n *     // [ Error: ENOENT: no such file or directory ]\n *     // since dir4 does not exist\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let results = await async.concat(directoryList, fs.readdir);\n *         console.log(results);\n *         // [ 'file1.txt', 'file2.txt', 'file3.txt', 'file4.txt', file5.txt ]\n *     } catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * // Error Handling\n * async () => {\n *     try {\n *         let results = await async.concat(withMissingDirectoryList, fs.readdir);\n *         console.log(results);\n *     } catch (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *         // since dir4 does not exist\n *     }\n * }\n *\n */\nfunction concat(coll, iteratee, callback) {\n    return concatLimit$1(coll, Infinity, iteratee, callback)\n}\nvar concat$1 = awaitify(concat, 3);\n\n/**\n * The same as [`concat`]{@link module:Collections.concat} but runs only a single async operation at a time.\n *\n * @name concatSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.concat]{@link module:Collections.concat}\n * @category Collection\n * @alias flatMapSeries\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`.\n * The iteratee should complete with an array an array of results.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n * @returns A Promise, if no callback is passed\n */\nfunction concatSeries(coll, iteratee, callback) {\n    return concatLimit$1(coll, 1, iteratee, callback)\n}\nvar concatSeries$1 = awaitify(concatSeries, 3);\n\n/**\n * Returns a function that when called, calls-back with the values provided.\n * Useful as the first function in a [`waterfall`]{@link module:ControlFlow.waterfall}, or for plugging values in to\n * [`auto`]{@link module:ControlFlow.auto}.\n *\n * @name constant\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {...*} arguments... - Any number of arguments to automatically invoke\n * callback with.\n * @returns {AsyncFunction} Returns a function that when invoked, automatically\n * invokes the callback with the previous given arguments.\n * @example\n *\n * async.waterfall([\n *     async.constant(42),\n *     function (value, next) {\n *         // value === 42\n *     },\n *     //...\n * ], callback);\n *\n * async.waterfall([\n *     async.constant(filename, \"utf8\"),\n *     fs.readFile,\n *     function (fileData, next) {\n *         //...\n *     }\n *     //...\n * ], callback);\n *\n * async.auto({\n *     hostname: async.constant(\"https://server.net/\"),\n *     port: findFreePort,\n *     launchServer: [\"hostname\", \"port\", function (options, cb) {\n *         startServer(options, cb);\n *     }],\n *     //...\n * }, callback);\n */\nfunction constant$1(...args) {\n    return function (...ignoredArgs/*, callback*/) {\n        var callback = ignoredArgs.pop();\n        return callback(null, ...args);\n    };\n}\n\nfunction _createTester(check, getResult) {\n    return (eachfn, arr, _iteratee, cb) => {\n        var testPassed = false;\n        var testResult;\n        const iteratee = wrapAsync(_iteratee);\n        eachfn(arr, (value, _, callback) => {\n            iteratee(value, (err, result) => {\n                if (err || err === false) return callback(err);\n\n                if (check(result) && !testResult) {\n                    testPassed = true;\n                    testResult = getResult(true, value);\n                    return callback(null, breakLoop);\n                }\n                callback();\n            });\n        }, err => {\n            if (err) return cb(err);\n            cb(null, testPassed ? testResult : getResult(false));\n        });\n    };\n}\n\n/**\n * Returns the first value in `coll` that passes an async truth test. The\n * `iteratee` is applied in parallel, meaning the first iteratee to return\n * `true` will fire the detect `callback` with that result. That means the\n * result might not be the first item in the original `coll` (in terms of order)\n * that passes the test.\n\n * If order within the original `coll` is important, then look at\n * [`detectSeries`]{@link module:Collections.detectSeries}.\n *\n * @name detect\n * @static\n * @memberOf module:Collections\n * @method\n * @alias find\n * @category Collections\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * // dir1 is a directory that contains file1.txt, file2.txt\n * // dir2 is a directory that contains file3.txt, file4.txt\n * // dir3 is a directory that contains file5.txt\n *\n * // asynchronous function that checks if a file exists\n * function fileExists(file, callback) {\n *    fs.access(file, fs.constants.F_OK, (err) => {\n *        callback(null, !err);\n *    });\n * }\n *\n * async.detect(['file3.txt','file2.txt','dir1/file1.txt'], fileExists,\n *    function(err, result) {\n *        console.log(result);\n *        // dir1/file1.txt\n *        // result now equals the first file in the list that exists\n *    }\n *);\n *\n * // Using Promises\n * async.detect(['file3.txt','file2.txt','dir1/file1.txt'], fileExists)\n * .then(result => {\n *     console.log(result);\n *     // dir1/file1.txt\n *     // result now equals the first file in the list that exists\n * }).catch(err => {\n *     console.log(err);\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let result = await async.detect(['file3.txt','file2.txt','dir1/file1.txt'], fileExists);\n *         console.log(result);\n *         // dir1/file1.txt\n *         // result now equals the file in the list that exists\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n */\nfunction detect(coll, iteratee, callback) {\n    return _createTester(bool => bool, (res, item) => item)(eachOf$1, coll, iteratee, callback)\n}\nvar detect$1 = awaitify(detect, 3);\n\n/**\n * The same as [`detect`]{@link module:Collections.detect} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name detectLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.detect]{@link module:Collections.detect}\n * @alias findLimit\n * @category Collections\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction detectLimit(coll, limit, iteratee, callback) {\n    return _createTester(bool => bool, (res, item) => item)(eachOfLimit$2(limit), coll, iteratee, callback)\n}\nvar detectLimit$1 = awaitify(detectLimit, 4);\n\n/**\n * The same as [`detect`]{@link module:Collections.detect} but runs only a single async operation at a time.\n *\n * @name detectSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.detect]{@link module:Collections.detect}\n * @alias findSeries\n * @category Collections\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction detectSeries(coll, iteratee, callback) {\n    return _createTester(bool => bool, (res, item) => item)(eachOfLimit$2(1), coll, iteratee, callback)\n}\n\nvar detectSeries$1 = awaitify(detectSeries, 3);\n\nfunction consoleFunc(name) {\n    return (fn, ...args) => wrapAsync(fn)(...args, (err, ...resultArgs) => {\n        /* istanbul ignore else */\n        if (typeof console === 'object') {\n            /* istanbul ignore else */\n            if (err) {\n                /* istanbul ignore else */\n                if (console.error) {\n                    console.error(err);\n                }\n            } else if (console[name]) { /* istanbul ignore else */\n                resultArgs.forEach(x => console[name](x));\n            }\n        }\n    })\n}\n\n/**\n * Logs the result of an [`async` function]{@link AsyncFunction} to the\n * `console` using `console.dir` to display the properties of the resulting object.\n * Only works in Node.js or in browsers that support `console.dir` and\n * `console.error` (such as FF and Chrome).\n * If multiple arguments are returned from the async function,\n * `console.dir` is called on each argument in order.\n *\n * @name dir\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} function - The function you want to eventually apply\n * all arguments to.\n * @param {...*} arguments... - Any number of arguments to apply to the function.\n * @example\n *\n * // in a module\n * var hello = function(name, callback) {\n *     setTimeout(function() {\n *         callback(null, {hello: name});\n *     }, 1000);\n * };\n *\n * // in the node repl\n * node> async.dir(hello, 'world');\n * {hello: 'world'}\n */\nvar dir = consoleFunc('dir');\n\n/**\n * The post-check version of [`whilst`]{@link module:ControlFlow.whilst}. To reflect the difference in\n * the order of operations, the arguments `test` and `iteratee` are switched.\n *\n * `doWhilst` is to `whilst` as `do while` is to `while` in plain JavaScript.\n *\n * @name doWhilst\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.whilst]{@link module:ControlFlow.whilst}\n * @category Control Flow\n * @param {AsyncFunction} iteratee - A function which is called each time `test`\n * passes. Invoked with (callback).\n * @param {AsyncFunction} test - asynchronous truth test to perform after each\n * execution of `iteratee`. Invoked with (...args, callback), where `...args` are the\n * non-error args from the previous callback of `iteratee`.\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `iteratee` has stopped.\n * `callback` will be passed an error and any arguments passed to the final\n * `iteratee`'s callback. Invoked with (err, [results]);\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction doWhilst(iteratee, test, callback) {\n    callback = onlyOnce(callback);\n    var _fn = wrapAsync(iteratee);\n    var _test = wrapAsync(test);\n    var results;\n\n    function next(err, ...args) {\n        if (err) return callback(err);\n        if (err === false) return;\n        results = args;\n        _test(...args, check);\n    }\n\n    function check(err, truth) {\n        if (err) return callback(err);\n        if (err === false) return;\n        if (!truth) return callback(null, ...results);\n        _fn(next);\n    }\n\n    return check(null, true);\n}\n\nvar doWhilst$1 = awaitify(doWhilst, 3);\n\n/**\n * Like ['doWhilst']{@link module:ControlFlow.doWhilst}, except the `test` is inverted. Note the\n * argument ordering differs from `until`.\n *\n * @name doUntil\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.doWhilst]{@link module:ControlFlow.doWhilst}\n * @category Control Flow\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` fails. Invoked with (callback).\n * @param {AsyncFunction} test - asynchronous truth test to perform after each\n * execution of `iteratee`. Invoked with (...args, callback), where `...args` are the\n * non-error args from the previous callback of `iteratee`\n * @param {Function} [callback] - A callback which is called after the test\n * function has passed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction doUntil(iteratee, test, callback) {\n    const _test = wrapAsync(test);\n    return doWhilst$1(iteratee, (...args) => {\n        const cb = args.pop();\n        _test(...args, (err, truth) => cb (err, !truth));\n    }, callback);\n}\n\nfunction _withoutIndex(iteratee) {\n    return (value, index, callback) => iteratee(value, callback);\n}\n\n/**\n * Applies the function `iteratee` to each item in `coll`, in parallel.\n * The `iteratee` is called with an item from the list, and a callback for when\n * it has finished. If the `iteratee` passes an error to its `callback`, the\n * main `callback` (for the `each` function) is immediately called with the\n * error.\n *\n * Note, that since this function applies `iteratee` to each item in parallel,\n * there is no guarantee that the iteratee functions will complete in order.\n *\n * @name each\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEach\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to\n * each item in `coll`. Invoked with (item, callback).\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOf`.\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * // dir1 is a directory that contains file1.txt, file2.txt\n * // dir2 is a directory that contains file3.txt, file4.txt\n * // dir3 is a directory that contains file5.txt\n * // dir4 does not exist\n *\n * const fileList = [ 'dir1/file2.txt', 'dir2/file3.txt', 'dir/file5.txt'];\n * const withMissingFileList = ['dir1/file1.txt', 'dir4/file2.txt'];\n *\n * // asynchronous function that deletes a file\n * const deleteFile = function(file, callback) {\n *     fs.unlink(file, callback);\n * };\n *\n * // Using callbacks\n * async.each(fileList, deleteFile, function(err) {\n *     if( err ) {\n *         console.log(err);\n *     } else {\n *         console.log('All files have been deleted successfully');\n *     }\n * });\n *\n * // Error Handling\n * async.each(withMissingFileList, deleteFile, function(err){\n *     console.log(err);\n *     // [ Error: ENOENT: no such file or directory ]\n *     // since dir4/file2.txt does not exist\n *     // dir1/file1.txt could have been deleted\n * });\n *\n * // Using Promises\n * async.each(fileList, deleteFile)\n * .then( () => {\n *     console.log('All files have been deleted successfully');\n * }).catch( err => {\n *     console.log(err);\n * });\n *\n * // Error Handling\n * async.each(fileList, deleteFile)\n * .then( () => {\n *     console.log('All files have been deleted successfully');\n * }).catch( err => {\n *     console.log(err);\n *     // [ Error: ENOENT: no such file or directory ]\n *     // since dir4/file2.txt does not exist\n *     // dir1/file1.txt could have been deleted\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         await async.each(files, deleteFile);\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * // Error Handling\n * async () => {\n *     try {\n *         await async.each(withMissingFileList, deleteFile);\n *     }\n *     catch (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *         // since dir4/file2.txt does not exist\n *         // dir1/file1.txt could have been deleted\n *     }\n * }\n *\n */\nfunction eachLimit$2(coll, iteratee, callback) {\n    return eachOf$1(coll, _withoutIndex(wrapAsync(iteratee)), callback);\n}\n\nvar each = awaitify(eachLimit$2, 3);\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs a maximum of `limit` async operations at a time.\n *\n * @name eachLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfLimit`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachLimit(coll, limit, iteratee, callback) {\n    return eachOfLimit$2(limit)(coll, _withoutIndex(wrapAsync(iteratee)), callback);\n}\nvar eachLimit$1 = awaitify(eachLimit, 4);\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs only a single async operation at a time.\n *\n * Note, that unlike [`each`]{@link module:Collections.each}, this function applies iteratee to each item\n * in series and therefore the iteratee functions will complete in order.\n\n * @name eachSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfSeries`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachSeries(coll, iteratee, callback) {\n    return eachLimit$1(coll, 1, iteratee, callback)\n}\nvar eachSeries$1 = awaitify(eachSeries, 3);\n\n/**\n * Wrap an async function and ensure it calls its callback on a later tick of\n * the event loop.  If the function already calls its callback on a next tick,\n * no extra deferral is added. This is useful for preventing stack overflows\n * (`RangeError: Maximum call stack size exceeded`) and generally keeping\n * [Zalgo](http://blog.izs.me/post/59142742143/designing-apis-for-asynchrony)\n * contained. ES2017 `async` functions are returned as-is -- they are immune\n * to Zalgo's corrupting influences, as they always resolve on a later tick.\n *\n * @name ensureAsync\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - an async function, one that expects a node-style\n * callback as its last argument.\n * @returns {AsyncFunction} Returns a wrapped function with the exact same call\n * signature as the function passed in.\n * @example\n *\n * function sometimesAsync(arg, callback) {\n *     if (cache[arg]) {\n *         return callback(null, cache[arg]); // this would be synchronous!!\n *     } else {\n *         doSomeIO(arg, callback); // this IO would be asynchronous\n *     }\n * }\n *\n * // this has a risk of stack overflows if many results are cached in a row\n * async.mapSeries(args, sometimesAsync, done);\n *\n * // this will defer sometimesAsync's callback if necessary,\n * // preventing stack overflows\n * async.mapSeries(args, async.ensureAsync(sometimesAsync), done);\n */\nfunction ensureAsync(fn) {\n    if (isAsync(fn)) return fn;\n    return function (...args/*, callback*/) {\n        var callback = args.pop();\n        var sync = true;\n        args.push((...innerArgs) => {\n            if (sync) {\n                setImmediate$1(() => callback(...innerArgs));\n            } else {\n                callback(...innerArgs);\n            }\n        });\n        fn.apply(this, args);\n        sync = false;\n    };\n}\n\n/**\n * Returns `true` if every element in `coll` satisfies an async test. If any\n * iteratee call returns `false`, the main `callback` is immediately called.\n *\n * @name every\n * @static\n * @memberOf module:Collections\n * @method\n * @alias all\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in parallel.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n * @example\n *\n * // dir1 is a directory that contains file1.txt, file2.txt\n * // dir2 is a directory that contains file3.txt, file4.txt\n * // dir3 is a directory that contains file5.txt\n * // dir4 does not exist\n *\n * const fileList = ['dir1/file1.txt','dir2/file3.txt','dir3/file5.txt'];\n * const withMissingFileList = ['file1.txt','file2.txt','file4.txt'];\n *\n * // asynchronous function that checks if a file exists\n * function fileExists(file, callback) {\n *    fs.access(file, fs.constants.F_OK, (err) => {\n *        callback(null, !err);\n *    });\n * }\n *\n * // Using callbacks\n * async.every(fileList, fileExists, function(err, result) {\n *     console.log(result);\n *     // true\n *     // result is true since every file exists\n * });\n *\n * async.every(withMissingFileList, fileExists, function(err, result) {\n *     console.log(result);\n *     // false\n *     // result is false since NOT every file exists\n * });\n *\n * // Using Promises\n * async.every(fileList, fileExists)\n * .then( result => {\n *     console.log(result);\n *     // true\n *     // result is true since every file exists\n * }).catch( err => {\n *     console.log(err);\n * });\n *\n * async.every(withMissingFileList, fileExists)\n * .then( result => {\n *     console.log(result);\n *     // false\n *     // result is false since NOT every file exists\n * }).catch( err => {\n *     console.log(err);\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let result = await async.every(fileList, fileExists);\n *         console.log(result);\n *         // true\n *         // result is true since every file exists\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * async () => {\n *     try {\n *         let result = await async.every(withMissingFileList, fileExists);\n *         console.log(result);\n *         // false\n *         // result is false since NOT every file exists\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n */\nfunction every(coll, iteratee, callback) {\n    return _createTester(bool => !bool, res => !res)(eachOf$1, coll, iteratee, callback)\n}\nvar every$1 = awaitify(every, 3);\n\n/**\n * The same as [`every`]{@link module:Collections.every} but runs a maximum of `limit` async operations at a time.\n *\n * @name everyLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.every]{@link module:Collections.every}\n * @alias allLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in parallel.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction everyLimit(coll, limit, iteratee, callback) {\n    return _createTester(bool => !bool, res => !res)(eachOfLimit$2(limit), coll, iteratee, callback)\n}\nvar everyLimit$1 = awaitify(everyLimit, 4);\n\n/**\n * The same as [`every`]{@link module:Collections.every} but runs only a single async operation at a time.\n *\n * @name everySeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.every]{@link module:Collections.every}\n * @alias allSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in series.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction everySeries(coll, iteratee, callback) {\n    return _createTester(bool => !bool, res => !res)(eachOfSeries$1, coll, iteratee, callback)\n}\nvar everySeries$1 = awaitify(everySeries, 3);\n\nfunction filterArray(eachfn, arr, iteratee, callback) {\n    var truthValues = new Array(arr.length);\n    eachfn(arr, (x, index, iterCb) => {\n        iteratee(x, (err, v) => {\n            truthValues[index] = !!v;\n            iterCb(err);\n        });\n    }, err => {\n        if (err) return callback(err);\n        var results = [];\n        for (var i = 0; i < arr.length; i++) {\n            if (truthValues[i]) results.push(arr[i]);\n        }\n        callback(null, results);\n    });\n}\n\nfunction filterGeneric(eachfn, coll, iteratee, callback) {\n    var results = [];\n    eachfn(coll, (x, index, iterCb) => {\n        iteratee(x, (err, v) => {\n            if (err) return iterCb(err);\n            if (v) {\n                results.push({index, value: x});\n            }\n            iterCb(err);\n        });\n    }, err => {\n        if (err) return callback(err);\n        callback(null, results\n            .sort((a, b) => a.index - b.index)\n            .map(v => v.value));\n    });\n}\n\nfunction _filter(eachfn, coll, iteratee, callback) {\n    var filter = isArrayLike(coll) ? filterArray : filterGeneric;\n    return filter(eachfn, coll, wrapAsync(iteratee), callback);\n}\n\n/**\n * Returns a new array of all the values in `coll` which pass an async truth\n * test. This operation is performed in parallel, but the results array will be\n * in the same order as the original.\n *\n * @name filter\n * @static\n * @memberOf module:Collections\n * @method\n * @alias select\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback provided\n * @example\n *\n * // dir1 is a directory that contains file1.txt, file2.txt\n * // dir2 is a directory that contains file3.txt, file4.txt\n * // dir3 is a directory that contains file5.txt\n *\n * const files = ['dir1/file1.txt','dir2/file3.txt','dir3/file6.txt'];\n *\n * // asynchronous function that checks if a file exists\n * function fileExists(file, callback) {\n *    fs.access(file, fs.constants.F_OK, (err) => {\n *        callback(null, !err);\n *    });\n * }\n *\n * // Using callbacks\n * async.filter(files, fileExists, function(err, results) {\n *    if(err) {\n *        console.log(err);\n *    } else {\n *        console.log(results);\n *        // [ 'dir1/file1.txt', 'dir2/file3.txt' ]\n *        // results is now an array of the existing files\n *    }\n * });\n *\n * // Using Promises\n * async.filter(files, fileExists)\n * .then(results => {\n *     console.log(results);\n *     // [ 'dir1/file1.txt', 'dir2/file3.txt' ]\n *     // results is now an array of the existing files\n * }).catch(err => {\n *     console.log(err);\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let results = await async.filter(files, fileExists);\n *         console.log(results);\n *         // [ 'dir1/file1.txt', 'dir2/file3.txt' ]\n *         // results is now an array of the existing files\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n */\nfunction filter (coll, iteratee, callback) {\n    return _filter(eachOf$1, coll, iteratee, callback)\n}\nvar filter$1 = awaitify(filter, 3);\n\n/**\n * The same as [`filter`]{@link module:Collections.filter} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name filterLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @alias selectLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction filterLimit (coll, limit, iteratee, callback) {\n    return _filter(eachOfLimit$2(limit), coll, iteratee, callback)\n}\nvar filterLimit$1 = awaitify(filterLimit, 4);\n\n/**\n * The same as [`filter`]{@link module:Collections.filter} but runs only a single async operation at a time.\n *\n * @name filterSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @alias selectSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results)\n * @returns {Promise} a promise, if no callback provided\n */\nfunction filterSeries (coll, iteratee, callback) {\n    return _filter(eachOfSeries$1, coll, iteratee, callback)\n}\nvar filterSeries$1 = awaitify(filterSeries, 3);\n\n/**\n * Calls the asynchronous function `fn` with a callback parameter that allows it\n * to call itself again, in series, indefinitely.\n\n * If an error is passed to the callback then `errback` is called with the\n * error, and execution stops, otherwise it will never be called.\n *\n * @name forever\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {AsyncFunction} fn - an async function to call repeatedly.\n * Invoked with (next).\n * @param {Function} [errback] - when `fn` passes an error to it's callback,\n * this function will be called, and execution stops. Invoked with (err).\n * @returns {Promise} a promise that rejects if an error occurs and an errback\n * is not passed\n * @example\n *\n * async.forever(\n *     function(next) {\n *         // next is suitable for passing to things that need a callback(err [, whatever]);\n *         // it will result in this function being called again.\n *     },\n *     function(err) {\n *         // if next is called with a value in its first parameter, it will appear\n *         // in here as 'err', and execution will stop.\n *     }\n * );\n */\nfunction forever(fn, errback) {\n    var done = onlyOnce(errback);\n    var task = wrapAsync(ensureAsync(fn));\n\n    function next(err) {\n        if (err) return done(err);\n        if (err === false) return;\n        task(next);\n    }\n    return next();\n}\nvar forever$1 = awaitify(forever, 2);\n\n/**\n * The same as [`groupBy`]{@link module:Collections.groupBy} but runs a maximum of `limit` async operations at a time.\n *\n * @name groupByLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.groupBy]{@link module:Collections.groupBy}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whoses\n * properties are arrays of values which returned the corresponding key.\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction groupByLimit(coll, limit, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    return mapLimit$1(coll, limit, (val, iterCb) => {\n        _iteratee(val, (err, key) => {\n            if (err) return iterCb(err);\n            return iterCb(err, {key, val});\n        });\n    }, (err, mapResults) => {\n        var result = {};\n        // from MDN, handle object having an `hasOwnProperty` prop\n        var {hasOwnProperty} = Object.prototype;\n\n        for (var i = 0; i < mapResults.length; i++) {\n            if (mapResults[i]) {\n                var {key} = mapResults[i];\n                var {val} = mapResults[i];\n\n                if (hasOwnProperty.call(result, key)) {\n                    result[key].push(val);\n                } else {\n                    result[key] = [val];\n                }\n            }\n        }\n\n        return callback(err, result);\n    });\n}\n\nvar groupByLimit$1 = awaitify(groupByLimit, 4);\n\n/**\n * Returns a new object, where each value corresponds to an array of items, from\n * `coll`, that returned the corresponding key. That is, the keys of the object\n * correspond to the values passed to the `iteratee` callback.\n *\n * Note: Since this function applies the `iteratee` to each item in parallel,\n * there is no guarantee that the `iteratee` functions will complete in order.\n * However, the values for each key in the `result` will be in the same order as\n * the original `coll`. For Objects, the values will roughly be in the order of\n * the original Objects' keys (but this can vary across JavaScript engines).\n *\n * @name groupBy\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whoses\n * properties are arrays of values which returned the corresponding key.\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * // dir1 is a directory that contains file1.txt, file2.txt\n * // dir2 is a directory that contains file3.txt, file4.txt\n * // dir3 is a directory that contains file5.txt\n * // dir4 does not exist\n *\n * const files = ['dir1/file1.txt','dir2','dir4']\n *\n * // asynchronous function that detects file type as none, file, or directory\n * function detectFile(file, callback) {\n *     fs.stat(file, function(err, stat) {\n *         if (err) {\n *             return callback(null, 'none');\n *         }\n *         callback(null, stat.isDirectory() ? 'directory' : 'file');\n *     });\n * }\n *\n * //Using callbacks\n * async.groupBy(files, detectFile, function(err, result) {\n *     if(err) {\n *         console.log(err);\n *     } else {\n *\t       console.log(result);\n *         // {\n *         //     file: [ 'dir1/file1.txt' ],\n *         //     none: [ 'dir4' ],\n *         //     directory: [ 'dir2']\n *         // }\n *         // result is object containing the files grouped by type\n *     }\n * });\n *\n * // Using Promises\n * async.groupBy(files, detectFile)\n * .then( result => {\n *     console.log(result);\n *     // {\n *     //     file: [ 'dir1/file1.txt' ],\n *     //     none: [ 'dir4' ],\n *     //     directory: [ 'dir2']\n *     // }\n *     // result is object containing the files grouped by type\n * }).catch( err => {\n *     console.log(err);\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let result = await async.groupBy(files, detectFile);\n *         console.log(result);\n *         // {\n *         //     file: [ 'dir1/file1.txt' ],\n *         //     none: [ 'dir4' ],\n *         //     directory: [ 'dir2']\n *         // }\n *         // result is object containing the files grouped by type\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n */\nfunction groupBy (coll, iteratee, callback) {\n    return groupByLimit$1(coll, Infinity, iteratee, callback)\n}\n\n/**\n * The same as [`groupBy`]{@link module:Collections.groupBy} but runs only a single async operation at a time.\n *\n * @name groupBySeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.groupBy]{@link module:Collections.groupBy}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whose\n * properties are arrays of values which returned the corresponding key.\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction groupBySeries (coll, iteratee, callback) {\n    return groupByLimit$1(coll, 1, iteratee, callback)\n}\n\n/**\n * Logs the result of an `async` function to the `console`. Only works in\n * Node.js or in browsers that support `console.log` and `console.error` (such\n * as FF and Chrome). If multiple arguments are returned from the async\n * function, `console.log` is called on each argument in order.\n *\n * @name log\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} function - The function you want to eventually apply\n * all arguments to.\n * @param {...*} arguments... - Any number of arguments to apply to the function.\n * @example\n *\n * // in a module\n * var hello = function(name, callback) {\n *     setTimeout(function() {\n *         callback(null, 'hello ' + name);\n *     }, 1000);\n * };\n *\n * // in the node repl\n * node> async.log(hello, 'world');\n * 'hello world'\n */\nvar log = consoleFunc('log');\n\n/**\n * The same as [`mapValues`]{@link module:Collections.mapValues} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name mapValuesLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.mapValues]{@link module:Collections.mapValues}\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction mapValuesLimit(obj, limit, iteratee, callback) {\n    callback = once(callback);\n    var newObj = {};\n    var _iteratee = wrapAsync(iteratee);\n    return eachOfLimit$2(limit)(obj, (val, key, next) => {\n        _iteratee(val, key, (err, result) => {\n            if (err) return next(err);\n            newObj[key] = result;\n            next(err);\n        });\n    }, err => callback(err, newObj));\n}\n\nvar mapValuesLimit$1 = awaitify(mapValuesLimit, 4);\n\n/**\n * A relative of [`map`]{@link module:Collections.map}, designed for use with objects.\n *\n * Produces a new Object by mapping each value of `obj` through the `iteratee`\n * function. The `iteratee` is called each `value` and `key` from `obj` and a\n * callback for when it has finished processing. Each of these callbacks takes\n * two arguments: an `error`, and the transformed item from `obj`. If `iteratee`\n * passes an error to its callback, the main `callback` (for the `mapValues`\n * function) is immediately called with the error.\n *\n * Note, the order of the keys in the result is not guaranteed.  The keys will\n * be roughly in the order they complete, (but this is very engine-specific)\n *\n * @name mapValues\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * // file1.txt is a file that is 1000 bytes in size\n * // file2.txt is a file that is 2000 bytes in size\n * // file3.txt is a file that is 3000 bytes in size\n * // file4.txt does not exist\n *\n * const fileMap = {\n *     f1: 'file1.txt',\n *     f2: 'file2.txt',\n *     f3: 'file3.txt'\n * };\n *\n * const withMissingFileMap = {\n *     f1: 'file1.txt',\n *     f2: 'file2.txt',\n *     f3: 'file4.txt'\n * };\n *\n * // asynchronous function that returns the file size in bytes\n * function getFileSizeInBytes(file, key, callback) {\n *     fs.stat(file, function(err, stat) {\n *         if (err) {\n *             return callback(err);\n *         }\n *         callback(null, stat.size);\n *     });\n * }\n *\n * // Using callbacks\n * async.mapValues(fileMap, getFileSizeInBytes, function(err, result) {\n *     if (err) {\n *         console.log(err);\n *     } else {\n *         console.log(result);\n *         // result is now a map of file size in bytes for each file, e.g.\n *         // {\n *         //     f1: 1000,\n *         //     f2: 2000,\n *         //     f3: 3000\n *         // }\n *     }\n * });\n *\n * // Error handling\n * async.mapValues(withMissingFileMap, getFileSizeInBytes, function(err, result) {\n *     if (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *     } else {\n *         console.log(result);\n *     }\n * });\n *\n * // Using Promises\n * async.mapValues(fileMap, getFileSizeInBytes)\n * .then( result => {\n *     console.log(result);\n *     // result is now a map of file size in bytes for each file, e.g.\n *     // {\n *     //     f1: 1000,\n *     //     f2: 2000,\n *     //     f3: 3000\n *     // }\n * }).catch (err => {\n *     console.log(err);\n * });\n *\n * // Error Handling\n * async.mapValues(withMissingFileMap, getFileSizeInBytes)\n * .then( result => {\n *     console.log(result);\n * }).catch (err => {\n *     console.log(err);\n *     // [ Error: ENOENT: no such file or directory ]\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let result = await async.mapValues(fileMap, getFileSizeInBytes);\n *         console.log(result);\n *         // result is now a map of file size in bytes for each file, e.g.\n *         // {\n *         //     f1: 1000,\n *         //     f2: 2000,\n *         //     f3: 3000\n *         // }\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * // Error Handling\n * async () => {\n *     try {\n *         let result = await async.mapValues(withMissingFileMap, getFileSizeInBytes);\n *         console.log(result);\n *     }\n *     catch (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *     }\n * }\n *\n */\nfunction mapValues(obj, iteratee, callback) {\n    return mapValuesLimit$1(obj, Infinity, iteratee, callback)\n}\n\n/**\n * The same as [`mapValues`]{@link module:Collections.mapValues} but runs only a single async operation at a time.\n *\n * @name mapValuesSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.mapValues]{@link module:Collections.mapValues}\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction mapValuesSeries(obj, iteratee, callback) {\n    return mapValuesLimit$1(obj, 1, iteratee, callback)\n}\n\n/**\n * Caches the results of an async function. When creating a hash to store\n * function results against, the callback is omitted from the hash and an\n * optional hash function can be used.\n *\n * **Note: if the async function errs, the result will not be cached and\n * subsequent calls will call the wrapped function.**\n *\n * If no hash function is specified, the first argument is used as a hash key,\n * which may work reasonably if it is a string or a data type that converts to a\n * distinct string. Note that objects and arrays will not behave reasonably.\n * Neither will cases where the other arguments are significant. In such cases,\n * specify your own hash function.\n *\n * The cache of results is exposed as the `memo` property of the function\n * returned by `memoize`.\n *\n * @name memoize\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - The async function to proxy and cache results from.\n * @param {Function} hasher - An optional function for generating a custom hash\n * for storing results. It has all the arguments applied to it apart from the\n * callback, and must be synchronous.\n * @returns {AsyncFunction} a memoized version of `fn`\n * @example\n *\n * var slow_fn = function(name, callback) {\n *     // do something\n *     callback(null, result);\n * };\n * var fn = async.memoize(slow_fn);\n *\n * // fn can now be used as if it were slow_fn\n * fn('some name', function() {\n *     // callback\n * });\n */\nfunction memoize(fn, hasher = v => v) {\n    var memo = Object.create(null);\n    var queues = Object.create(null);\n    var _fn = wrapAsync(fn);\n    var memoized = initialParams((args, callback) => {\n        var key = hasher(...args);\n        if (key in memo) {\n            setImmediate$1(() => callback(null, ...memo[key]));\n        } else if (key in queues) {\n            queues[key].push(callback);\n        } else {\n            queues[key] = [callback];\n            _fn(...args, (err, ...resultArgs) => {\n                // #1465 don't memoize if an error occurred\n                if (!err) {\n                    memo[key] = resultArgs;\n                }\n                var q = queues[key];\n                delete queues[key];\n                for (var i = 0, l = q.length; i < l; i++) {\n                    q[i](err, ...resultArgs);\n                }\n            });\n        }\n    });\n    memoized.memo = memo;\n    memoized.unmemoized = fn;\n    return memoized;\n}\n\n/* istanbul ignore file */\n\n/**\n * Calls `callback` on a later loop around the event loop. In Node.js this just\n * calls `process.nextTick`.  In the browser it will use `setImmediate` if\n * available, otherwise `setTimeout(callback, 0)`, which means other higher\n * priority events may precede the execution of `callback`.\n *\n * This is used internally for browser-compatibility purposes.\n *\n * @name nextTick\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.setImmediate]{@link module:Utils.setImmediate}\n * @category Util\n * @param {Function} callback - The function to call on a later loop around\n * the event loop. Invoked with (args...).\n * @param {...*} args... - any number of additional arguments to pass to the\n * callback on the next tick.\n * @example\n *\n * var call_order = [];\n * async.nextTick(function() {\n *     call_order.push('two');\n *     // call_order now equals ['one','two']\n * });\n * call_order.push('one');\n *\n * async.setImmediate(function (a, b, c) {\n *     // a, b, and c equal 1, 2, and 3\n * }, 1, 2, 3);\n */\nvar _defer;\n\nif (hasNextTick) {\n    _defer = process.nextTick;\n} else if (hasSetImmediate) {\n    _defer = setImmediate;\n} else {\n    _defer = fallback;\n}\n\nvar nextTick = wrap(_defer);\n\nvar _parallel = awaitify((eachfn, tasks, callback) => {\n    var results = isArrayLike(tasks) ? [] : {};\n\n    eachfn(tasks, (task, key, taskCb) => {\n        wrapAsync(task)((err, ...result) => {\n            if (result.length < 2) {\n                [result] = result;\n            }\n            results[key] = result;\n            taskCb(err);\n        });\n    }, err => callback(err, results));\n}, 3);\n\n/**\n * Run the `tasks` collection of functions in parallel, without waiting until\n * the previous function has completed. If any of the functions pass an error to\n * its callback, the main `callback` is immediately called with the value of the\n * error. Once the `tasks` have completed, the results are passed to the final\n * `callback` as an array.\n *\n * **Note:** `parallel` is about kicking-off I/O tasks in parallel, not about\n * parallel execution of code.  If your tasks do not use any timers or perform\n * any I/O, they will actually be executed in series.  Any synchronous setup\n * sections for each task will happen one after the other.  JavaScript remains\n * single-threaded.\n *\n * **Hint:** Use [`reflect`]{@link module:Utils.reflect} to continue the\n * execution of other tasks when a task fails.\n *\n * It is also possible to use an object instead of an array. Each property will\n * be run as a function and the results will be passed to the final `callback`\n * as an object instead of an array. This can be a more readable way of handling\n * results from {@link async.parallel}.\n *\n * @name parallel\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} tasks - A collection of\n * [async functions]{@link AsyncFunction} to run.\n * Each async function can complete with any number of optional `result` values.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed successfully. This function gets a results array\n * (or object) containing all the result arguments passed to the task callbacks.\n * Invoked with (err, results).\n * @returns {Promise} a promise, if a callback is not passed\n *\n * @example\n *\n * //Using Callbacks\n * async.parallel([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ], function(err, results) {\n *     console.log(results);\n *     // results is equal to ['one','two'] even though\n *     // the second function had a shorter timeout.\n * });\n *\n * // an example using an object instead of an array\n * async.parallel({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }, function(err, results) {\n *     console.log(results);\n *     // results is equal to: { one: 1, two: 2 }\n * });\n *\n * //Using Promises\n * async.parallel([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ]).then(results => {\n *     console.log(results);\n *     // results is equal to ['one','two'] even though\n *     // the second function had a shorter timeout.\n * }).catch(err => {\n *     console.log(err);\n * });\n *\n * // an example using an object instead of an array\n * async.parallel({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }).then(results => {\n *     console.log(results);\n *     // results is equal to: { one: 1, two: 2 }\n * }).catch(err => {\n *     console.log(err);\n * });\n *\n * //Using async/await\n * async () => {\n *     try {\n *         let results = await async.parallel([\n *             function(callback) {\n *                 setTimeout(function() {\n *                     callback(null, 'one');\n *                 }, 200);\n *             },\n *             function(callback) {\n *                 setTimeout(function() {\n *                     callback(null, 'two');\n *                 }, 100);\n *             }\n *         ]);\n *         console.log(results);\n *         // results is equal to ['one','two'] even though\n *         // the second function had a shorter timeout.\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * // an example using an object instead of an array\n * async () => {\n *     try {\n *         let results = await async.parallel({\n *             one: function(callback) {\n *                 setTimeout(function() {\n *                     callback(null, 1);\n *                 }, 200);\n *             },\n *            two: function(callback) {\n *                 setTimeout(function() {\n *                     callback(null, 2);\n *                 }, 100);\n *            }\n *         });\n *         console.log(results);\n *         // results is equal to: { one: 1, two: 2 }\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n */\nfunction parallel(tasks, callback) {\n    return _parallel(eachOf$1, tasks, callback);\n}\n\n/**\n * The same as [`parallel`]{@link module:ControlFlow.parallel} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name parallelLimit\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.parallel]{@link module:ControlFlow.parallel}\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} tasks - A collection of\n * [async functions]{@link AsyncFunction} to run.\n * Each async function can complete with any number of optional `result` values.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed successfully. This function gets a results array\n * (or object) containing all the result arguments passed to the task callbacks.\n * Invoked with (err, results).\n * @returns {Promise} a promise, if a callback is not passed\n */\nfunction parallelLimit(tasks, limit, callback) {\n    return _parallel(eachOfLimit$2(limit), tasks, callback);\n}\n\n/**\n * A queue of tasks for the worker function to complete.\n * @typedef {Iterable} QueueObject\n * @memberOf module:ControlFlow\n * @property {Function} length - a function returning the number of items\n * waiting to be processed. Invoke with `queue.length()`.\n * @property {boolean} started - a boolean indicating whether or not any\n * items have been pushed and processed by the queue.\n * @property {Function} running - a function returning the number of items\n * currently being processed. Invoke with `queue.running()`.\n * @property {Function} workersList - a function returning the array of items\n * currently being processed. Invoke with `queue.workersList()`.\n * @property {Function} idle - a function returning false if there are items\n * waiting or being processed, or true if not. Invoke with `queue.idle()`.\n * @property {number} concurrency - an integer for determining how many `worker`\n * functions should be run in parallel. This property can be changed after a\n * `queue` is created to alter the concurrency on-the-fly.\n * @property {number} payload - an integer that specifies how many items are\n * passed to the worker function at a time. only applies if this is a\n * [cargo]{@link module:ControlFlow.cargo} object\n * @property {AsyncFunction} push - add a new task to the `queue`. Calls `callback`\n * once the `worker` has finished processing the task. Instead of a single task,\n * a `tasks` array can be submitted. The respective callback is used for every\n * task in the list. Invoke with `queue.push(task, [callback])`,\n * @property {AsyncFunction} unshift - add a new task to the front of the `queue`.\n * Invoke with `queue.unshift(task, [callback])`.\n * @property {AsyncFunction} pushAsync - the same as `q.push`, except this returns\n * a promise that rejects if an error occurs.\n * @property {AsyncFunction} unshiftAsync - the same as `q.unshift`, except this returns\n * a promise that rejects if an error occurs.\n * @property {Function} remove - remove items from the queue that match a test\n * function.  The test function will be passed an object with a `data` property,\n * and a `priority` property, if this is a\n * [priorityQueue]{@link module:ControlFlow.priorityQueue} object.\n * Invoked with `queue.remove(testFn)`, where `testFn` is of the form\n * `function ({data, priority}) {}` and returns a Boolean.\n * @property {Function} saturated - a function that sets a callback that is\n * called when the number of running workers hits the `concurrency` limit, and\n * further tasks will be queued.  If the callback is omitted, `q.saturated()`\n * returns a promise for the next occurrence.\n * @property {Function} unsaturated - a function that sets a callback that is\n * called when the number of running workers is less than the `concurrency` &\n * `buffer` limits, and further tasks will not be queued. If the callback is\n * omitted, `q.unsaturated()` returns a promise for the next occurrence.\n * @property {number} buffer - A minimum threshold buffer in order to say that\n * the `queue` is `unsaturated`.\n * @property {Function} empty - a function that sets a callback that is called\n * when the last item from the `queue` is given to a `worker`. If the callback\n * is omitted, `q.empty()` returns a promise for the next occurrence.\n * @property {Function} drain - a function that sets a callback that is called\n * when the last item from the `queue` has returned from the `worker`. If the\n * callback is omitted, `q.drain()` returns a promise for the next occurrence.\n * @property {Function} error - a function that sets a callback that is called\n * when a task errors. Has the signature `function(error, task)`. If the\n * callback is omitted, `error()` returns a promise that rejects on the next\n * error.\n * @property {boolean} paused - a boolean for determining whether the queue is\n * in a paused state.\n * @property {Function} pause - a function that pauses the processing of tasks\n * until `resume()` is called. Invoke with `queue.pause()`.\n * @property {Function} resume - a function that resumes the processing of\n * queued tasks when the queue is paused. Invoke with `queue.resume()`.\n * @property {Function} kill - a function that removes the `drain` callback and\n * empties remaining tasks from the queue forcing it to go idle. No more tasks\n * should be pushed to the queue after calling this function. Invoke with `queue.kill()`.\n *\n * @example\n * const q = async.queue(worker, 2)\n * q.push(item1)\n * q.push(item2)\n * q.push(item3)\n * // queues are iterable, spread into an array to inspect\n * const items = [...q] // [item1, item2, item3]\n * // or use for of\n * for (let item of q) {\n *     console.log(item)\n * }\n *\n * q.drain(() => {\n *     console.log('all done')\n * })\n * // or\n * await q.drain()\n */\n\n/**\n * Creates a `queue` object with the specified `concurrency`. Tasks added to the\n * `queue` are processed in parallel (up to the `concurrency` limit). If all\n * `worker`s are in progress, the task is queued until one becomes available.\n * Once a `worker` completes a `task`, that `task`'s callback is called.\n *\n * @name queue\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {AsyncFunction} worker - An async function for processing a queued task.\n * If you want to handle errors from an individual task, pass a callback to\n * `q.push()`. Invoked with (task, callback).\n * @param {number} [concurrency=1] - An `integer` for determining how many\n * `worker` functions should be run in parallel.  If omitted, the concurrency\n * defaults to `1`.  If the concurrency is `0`, an error is thrown.\n * @returns {module:ControlFlow.QueueObject} A queue object to manage the tasks. Callbacks can be\n * attached as certain properties to listen for specific events during the\n * lifecycle of the queue.\n * @example\n *\n * // create a queue object with concurrency 2\n * var q = async.queue(function(task, callback) {\n *     console.log('hello ' + task.name);\n *     callback();\n * }, 2);\n *\n * // assign a callback\n * q.drain(function() {\n *     console.log('all items have been processed');\n * });\n * // or await the end\n * await q.drain()\n *\n * // assign an error callback\n * q.error(function(err, task) {\n *     console.error('task experienced an error');\n * });\n *\n * // add some items to the queue\n * q.push({name: 'foo'}, function(err) {\n *     console.log('finished processing foo');\n * });\n * // callback is optional\n * q.push({name: 'bar'});\n *\n * // add some items to the queue (batch-wise)\n * q.push([{name: 'baz'},{name: 'bay'},{name: 'bax'}], function(err) {\n *     console.log('finished processing item');\n * });\n *\n * // add some items to the front of the queue\n * q.unshift({name: 'bar'}, function (err) {\n *     console.log('finished processing bar');\n * });\n */\nfunction queue (worker, concurrency) {\n    var _worker = wrapAsync(worker);\n    return queue$1((items, cb) => {\n        _worker(items[0], cb);\n    }, concurrency, 1);\n}\n\n// Binary min-heap implementation used for priority queue.\n// Implementation is stable, i.e. push time is considered for equal priorities\nclass Heap {\n    constructor() {\n        this.heap = [];\n        this.pushCount = Number.MIN_SAFE_INTEGER;\n    }\n\n    get length() {\n        return this.heap.length;\n    }\n\n    empty () {\n        this.heap = [];\n        return this;\n    }\n\n    percUp(index) {\n        let p;\n\n        while (index > 0 && smaller(this.heap[index], this.heap[p=parent(index)])) {\n            let t = this.heap[index];\n            this.heap[index] = this.heap[p];\n            this.heap[p] = t;\n\n            index = p;\n        }\n    }\n\n    percDown(index) {\n        let l;\n\n        while ((l=leftChi(index)) < this.heap.length) {\n            if (l+1 < this.heap.length && smaller(this.heap[l+1], this.heap[l])) {\n                l = l+1;\n            }\n\n            if (smaller(this.heap[index], this.heap[l])) {\n                break;\n            }\n\n            let t = this.heap[index];\n            this.heap[index] = this.heap[l];\n            this.heap[l] = t;\n\n            index = l;\n        }\n    }\n\n    push(node) {\n        node.pushCount = ++this.pushCount;\n        this.heap.push(node);\n        this.percUp(this.heap.length-1);\n    }\n\n    unshift(node) {\n        return this.heap.push(node);\n    }\n\n    shift() {\n        let [top] = this.heap;\n\n        this.heap[0] = this.heap[this.heap.length-1];\n        this.heap.pop();\n        this.percDown(0);\n\n        return top;\n    }\n\n    toArray() {\n        return [...this];\n    }\n\n    *[Symbol.iterator] () {\n        for (let i = 0; i < this.heap.length; i++) {\n            yield this.heap[i].data;\n        }\n    }\n\n    remove (testFn) {\n        let j = 0;\n        for (let i = 0; i < this.heap.length; i++) {\n            if (!testFn(this.heap[i])) {\n                this.heap[j] = this.heap[i];\n                j++;\n            }\n        }\n\n        this.heap.splice(j);\n\n        for (let i = parent(this.heap.length-1); i >= 0; i--) {\n            this.percDown(i);\n        }\n\n        return this;\n    }\n}\n\nfunction leftChi(i) {\n    return (i<<1)+1;\n}\n\nfunction parent(i) {\n    return ((i+1)>>1)-1;\n}\n\nfunction smaller(x, y) {\n    if (x.priority !== y.priority) {\n        return x.priority < y.priority;\n    }\n    else {\n        return x.pushCount < y.pushCount;\n    }\n}\n\n/**\n * The same as [async.queue]{@link module:ControlFlow.queue} only tasks are assigned a priority and\n * completed in ascending priority order.\n *\n * @name priorityQueue\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.queue]{@link module:ControlFlow.queue}\n * @category Control Flow\n * @param {AsyncFunction} worker - An async function for processing a queued task.\n * If you want to handle errors from an individual task, pass a callback to\n * `q.push()`.\n * Invoked with (task, callback).\n * @param {number} concurrency - An `integer` for determining how many `worker`\n * functions should be run in parallel.  If omitted, the concurrency defaults to\n * `1`.  If the concurrency is `0`, an error is thrown.\n * @returns {module:ControlFlow.QueueObject} A priorityQueue object to manage the tasks. There are three\n * differences between `queue` and `priorityQueue` objects:\n * * `push(task, priority, [callback])` - `priority` should be a number. If an\n *   array of `tasks` is given, all tasks will be assigned the same priority.\n * * `pushAsync(task, priority, [callback])` - the same as `priorityQueue.push`,\n *   except this returns a promise that rejects if an error occurs.\n * * The `unshift` and `unshiftAsync` methods were removed.\n */\nfunction priorityQueue(worker, concurrency) {\n    // Start with a normal queue\n    var q = queue(worker, concurrency);\n\n    var {\n        push,\n        pushAsync\n    } = q;\n\n    q._tasks = new Heap();\n    q._createTaskItem = ({data, priority}, callback) => {\n        return {\n            data,\n            priority,\n            callback\n        };\n    };\n\n    function createDataItems(tasks, priority) {\n        if (!Array.isArray(tasks)) {\n            return {data: tasks, priority};\n        }\n        return tasks.map(data => { return {data, priority}; });\n    }\n\n    // Override push to accept second parameter representing priority\n    q.push = function(data, priority = 0, callback) {\n        return push(createDataItems(data, priority), callback);\n    };\n\n    q.pushAsync = function(data, priority = 0, callback) {\n        return pushAsync(createDataItems(data, priority), callback);\n    };\n\n    // Remove unshift functions\n    delete q.unshift;\n    delete q.unshiftAsync;\n\n    return q;\n}\n\n/**\n * Runs the `tasks` array of functions in parallel, without waiting until the\n * previous function has completed. Once any of the `tasks` complete or pass an\n * error to its callback, the main `callback` is immediately called. It's\n * equivalent to `Promise.race()`.\n *\n * @name race\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array} tasks - An array containing [async functions]{@link AsyncFunction}\n * to run. Each function can complete with an optional `result` value.\n * @param {Function} callback - A callback to run once any of the functions have\n * completed. This function gets an error or result from the first function that\n * completed. Invoked with (err, result).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * async.race([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ],\n * // main callback\n * function(err, result) {\n *     // the result will be equal to 'two' as it finishes earlier\n * });\n */\nfunction race(tasks, callback) {\n    callback = once(callback);\n    if (!Array.isArray(tasks)) return callback(new TypeError('First argument to race must be an array of functions'));\n    if (!tasks.length) return callback();\n    for (var i = 0, l = tasks.length; i < l; i++) {\n        wrapAsync(tasks[i])(callback);\n    }\n}\n\nvar race$1 = awaitify(race, 2);\n\n/**\n * Same as [`reduce`]{@link module:Collections.reduce}, only operates on `array` in reverse order.\n *\n * @name reduceRight\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reduce]{@link module:Collections.reduce}\n * @alias foldr\n * @category Collection\n * @param {Array} array - A collection to iterate over.\n * @param {*} memo - The initial state of the reduction.\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * array to produce the next step in the reduction.\n * The `iteratee` should complete with the next state of the reduction.\n * If the iteratee completes with an error, the reduction is stopped and the\n * main `callback` is immediately called with the error.\n * Invoked with (memo, item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the reduced value. Invoked with\n * (err, result).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction reduceRight (array, memo, iteratee, callback) {\n    var reversed = [...array].reverse();\n    return reduce$1(reversed, memo, iteratee, callback);\n}\n\n/**\n * Wraps the async function in another function that always completes with a\n * result object, even when it errors.\n *\n * The result object has either the property `error` or `value`.\n *\n * @name reflect\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - The async function you want to wrap\n * @returns {Function} - A function that always passes null to it's callback as\n * the error. The second argument to the callback will be an `object` with\n * either an `error` or a `value` property.\n * @example\n *\n * async.parallel([\n *     async.reflect(function(callback) {\n *         // do some stuff ...\n *         callback(null, 'one');\n *     }),\n *     async.reflect(function(callback) {\n *         // do some more stuff but error ...\n *         callback('bad stuff happened');\n *     }),\n *     async.reflect(function(callback) {\n *         // do some more stuff ...\n *         callback(null, 'two');\n *     })\n * ],\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results[0].value = 'one'\n *     // results[1].error = 'bad stuff happened'\n *     // results[2].value = 'two'\n * });\n */\nfunction reflect(fn) {\n    var _fn = wrapAsync(fn);\n    return initialParams(function reflectOn(args, reflectCallback) {\n        args.push((error, ...cbArgs) => {\n            let retVal = {};\n            if (error) {\n                retVal.error = error;\n            }\n            if (cbArgs.length > 0){\n                var value = cbArgs;\n                if (cbArgs.length <= 1) {\n                    [value] = cbArgs;\n                }\n                retVal.value = value;\n            }\n            reflectCallback(null, retVal);\n        });\n\n        return _fn.apply(this, args);\n    });\n}\n\n/**\n * A helper function that wraps an array or an object of functions with `reflect`.\n *\n * @name reflectAll\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.reflect]{@link module:Utils.reflect}\n * @category Util\n * @param {Array|Object|Iterable} tasks - The collection of\n * [async functions]{@link AsyncFunction} to wrap in `async.reflect`.\n * @returns {Array} Returns an array of async functions, each wrapped in\n * `async.reflect`\n * @example\n *\n * let tasks = [\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         // do some more stuff but error ...\n *         callback(new Error('bad stuff happened'));\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ];\n *\n * async.parallel(async.reflectAll(tasks),\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results[0].value = 'one'\n *     // results[1].error = Error('bad stuff happened')\n *     // results[2].value = 'two'\n * });\n *\n * // an example using an object instead of an array\n * let tasks = {\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         callback('two');\n *     },\n *     three: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'three');\n *         }, 100);\n *     }\n * };\n *\n * async.parallel(async.reflectAll(tasks),\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results.one.value = 'one'\n *     // results.two.error = 'two'\n *     // results.three.value = 'three'\n * });\n */\nfunction reflectAll(tasks) {\n    var results;\n    if (Array.isArray(tasks)) {\n        results = tasks.map(reflect);\n    } else {\n        results = {};\n        Object.keys(tasks).forEach(key => {\n            results[key] = reflect.call(this, tasks[key]);\n        });\n    }\n    return results;\n}\n\nfunction reject$2(eachfn, arr, _iteratee, callback) {\n    const iteratee = wrapAsync(_iteratee);\n    return _filter(eachfn, arr, (value, cb) => {\n        iteratee(value, (err, v) => {\n            cb(err, !v);\n        });\n    }, callback);\n}\n\n/**\n * The opposite of [`filter`]{@link module:Collections.filter}. Removes values that pass an `async` truth test.\n *\n * @name reject\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * // dir1 is a directory that contains file1.txt, file2.txt\n * // dir2 is a directory that contains file3.txt, file4.txt\n * // dir3 is a directory that contains file5.txt\n *\n * const fileList = ['dir1/file1.txt','dir2/file3.txt','dir3/file6.txt'];\n *\n * // asynchronous function that checks if a file exists\n * function fileExists(file, callback) {\n *    fs.access(file, fs.constants.F_OK, (err) => {\n *        callback(null, !err);\n *    });\n * }\n *\n * // Using callbacks\n * async.reject(fileList, fileExists, function(err, results) {\n *    // [ 'dir3/file6.txt' ]\n *    // results now equals an array of the non-existing files\n * });\n *\n * // Using Promises\n * async.reject(fileList, fileExists)\n * .then( results => {\n *     console.log(results);\n *     // [ 'dir3/file6.txt' ]\n *     // results now equals an array of the non-existing files\n * }).catch( err => {\n *     console.log(err);\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let results = await async.reject(fileList, fileExists);\n *         console.log(results);\n *         // [ 'dir3/file6.txt' ]\n *         // results now equals an array of the non-existing files\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n */\nfunction reject (coll, iteratee, callback) {\n    return reject$2(eachOf$1, coll, iteratee, callback)\n}\nvar reject$1 = awaitify(reject, 3);\n\n/**\n * The same as [`reject`]{@link module:Collections.reject} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name rejectLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reject]{@link module:Collections.reject}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction rejectLimit (coll, limit, iteratee, callback) {\n    return reject$2(eachOfLimit$2(limit), coll, iteratee, callback)\n}\nvar rejectLimit$1 = awaitify(rejectLimit, 4);\n\n/**\n * The same as [`reject`]{@link module:Collections.reject} but runs only a single async operation at a time.\n *\n * @name rejectSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reject]{@link module:Collections.reject}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction rejectSeries (coll, iteratee, callback) {\n    return reject$2(eachOfSeries$1, coll, iteratee, callback)\n}\nvar rejectSeries$1 = awaitify(rejectSeries, 3);\n\nfunction constant(value) {\n    return function () {\n        return value;\n    }\n}\n\n/**\n * Attempts to get a successful response from `task` no more than `times` times\n * before returning an error. If the task is successful, the `callback` will be\n * passed the result of the successful task. If all attempts fail, the callback\n * will be passed the error and result (if any) of the final attempt.\n *\n * @name retry\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @see [async.retryable]{@link module:ControlFlow.retryable}\n * @param {Object|number} [opts = {times: 5, interval: 0}| 5] - Can be either an\n * object with `times` and `interval` or a number.\n * * `times` - The number of attempts to make before giving up.  The default\n *   is `5`.\n * * `interval` - The time to wait between retries, in milliseconds.  The\n *   default is `0`. The interval may also be specified as a function of the\n *   retry count (see example).\n * * `errorFilter` - An optional synchronous function that is invoked on\n *   erroneous result. If it returns `true` the retry attempts will continue;\n *   if the function returns `false` the retry flow is aborted with the current\n *   attempt's error and result being returned to the final callback.\n *   Invoked with (err).\n * * If `opts` is a number, the number specifies the number of times to retry,\n *   with the default interval of `0`.\n * @param {AsyncFunction} task - An async function to retry.\n * Invoked with (callback).\n * @param {Function} [callback] - An optional callback which is called when the\n * task has succeeded, or after the final failed attempt. It receives the `err`\n * and `result` arguments of the last attempt at completing the `task`. Invoked\n * with (err, results).\n * @returns {Promise} a promise if no callback provided\n *\n * @example\n *\n * // The `retry` function can be used as a stand-alone control flow by passing\n * // a callback, as shown below:\n *\n * // try calling apiMethod 3 times\n * async.retry(3, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod 3 times, waiting 200 ms between each retry\n * async.retry({times: 3, interval: 200}, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod 10 times with exponential backoff\n * // (i.e. intervals of 100, 200, 400, 800, 1600, ... milliseconds)\n * async.retry({\n *   times: 10,\n *   interval: function(retryCount) {\n *     return 50 * Math.pow(2, retryCount);\n *   }\n * }, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod the default 5 times no delay between each retry\n * async.retry(apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod only when error condition satisfies, all other\n * // errors will abort the retry control flow and return to final callback\n * async.retry({\n *   errorFilter: function(err) {\n *     return err.message === 'Temporary error'; // only retry on a specific error\n *   }\n * }, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // to retry individual methods that are not as reliable within other\n * // control flow functions, use the `retryable` wrapper:\n * async.auto({\n *     users: api.getUsers.bind(api),\n *     payments: async.retryable(3, api.getPayments.bind(api))\n * }, function(err, results) {\n *     // do something with the results\n * });\n *\n */\nconst DEFAULT_TIMES = 5;\nconst DEFAULT_INTERVAL = 0;\n\nfunction retry(opts, task, callback) {\n    var options = {\n        times: DEFAULT_TIMES,\n        intervalFunc: constant(DEFAULT_INTERVAL)\n    };\n\n    if (arguments.length < 3 && typeof opts === 'function') {\n        callback = task || promiseCallback();\n        task = opts;\n    } else {\n        parseTimes(options, opts);\n        callback = callback || promiseCallback();\n    }\n\n    if (typeof task !== 'function') {\n        throw new Error(\"Invalid arguments for async.retry\");\n    }\n\n    var _task = wrapAsync(task);\n\n    var attempt = 1;\n    function retryAttempt() {\n        _task((err, ...args) => {\n            if (err === false) return\n            if (err && attempt++ < options.times &&\n                (typeof options.errorFilter != 'function' ||\n                    options.errorFilter(err))) {\n                setTimeout(retryAttempt, options.intervalFunc(attempt - 1));\n            } else {\n                callback(err, ...args);\n            }\n        });\n    }\n\n    retryAttempt();\n    return callback[PROMISE_SYMBOL]\n}\n\nfunction parseTimes(acc, t) {\n    if (typeof t === 'object') {\n        acc.times = +t.times || DEFAULT_TIMES;\n\n        acc.intervalFunc = typeof t.interval === 'function' ?\n            t.interval :\n            constant(+t.interval || DEFAULT_INTERVAL);\n\n        acc.errorFilter = t.errorFilter;\n    } else if (typeof t === 'number' || typeof t === 'string') {\n        acc.times = +t || DEFAULT_TIMES;\n    } else {\n        throw new Error(\"Invalid arguments for async.retry\");\n    }\n}\n\n/**\n * A close relative of [`retry`]{@link module:ControlFlow.retry}.  This method\n * wraps a task and makes it retryable, rather than immediately calling it\n * with retries.\n *\n * @name retryable\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.retry]{@link module:ControlFlow.retry}\n * @category Control Flow\n * @param {Object|number} [opts = {times: 5, interval: 0}| 5] - optional\n * options, exactly the same as from `retry`, except for a `opts.arity` that\n * is the arity of the `task` function, defaulting to `task.length`\n * @param {AsyncFunction} task - the asynchronous function to wrap.\n * This function will be passed any arguments passed to the returned wrapper.\n * Invoked with (...args, callback).\n * @returns {AsyncFunction} The wrapped function, which when invoked, will\n * retry on an error, based on the parameters specified in `opts`.\n * This function will accept the same parameters as `task`.\n * @example\n *\n * async.auto({\n *     dep1: async.retryable(3, getFromFlakyService),\n *     process: [\"dep1\", async.retryable(3, function (results, cb) {\n *         maybeProcessData(results.dep1, cb);\n *     })]\n * }, callback);\n */\nfunction retryable (opts, task) {\n    if (!task) {\n        task = opts;\n        opts = null;\n    }\n    let arity = (opts && opts.arity) || task.length;\n    if (isAsync(task)) {\n        arity += 1;\n    }\n    var _task = wrapAsync(task);\n    return initialParams((args, callback) => {\n        if (args.length < arity - 1 || callback == null) {\n            args.push(callback);\n            callback = promiseCallback();\n        }\n        function taskFn(cb) {\n            _task(...args, cb);\n        }\n\n        if (opts) retry(opts, taskFn, callback);\n        else retry(taskFn, callback);\n\n        return callback[PROMISE_SYMBOL]\n    });\n}\n\n/**\n * Run the functions in the `tasks` collection in series, each one running once\n * the previous function has completed. If any functions in the series pass an\n * error to its callback, no more functions are run, and `callback` is\n * immediately called with the value of the error. Otherwise, `callback`\n * receives an array of results when `tasks` have completed.\n *\n * It is also possible to use an object instead of an array. Each property will\n * be run as a function, and the results will be passed to the final `callback`\n * as an object instead of an array. This can be a more readable way of handling\n *  results from {@link async.series}.\n *\n * **Note** that while many implementations preserve the order of object\n * properties, the [ECMAScript Language Specification](http://www.ecma-international.org/ecma-262/5.1/#sec-8.6)\n * explicitly states that\n *\n * > The mechanics and order of enumerating the properties is not specified.\n *\n * So if you rely on the order in which your series of functions are executed,\n * and want this to work on all platforms, consider using an array.\n *\n * @name series\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} tasks - A collection containing\n * [async functions]{@link AsyncFunction} to run in series.\n * Each function can complete with any number of optional `result` values.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed. This function gets a results array (or object)\n * containing all the result arguments passed to the `task` callbacks. Invoked\n * with (err, result).\n * @return {Promise} a promise, if no callback is passed\n * @example\n *\n * //Using Callbacks\n * async.series([\n *     function(callback) {\n *         setTimeout(function() {\n *             // do some async task\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             // then do another async task\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ], function(err, results) {\n *     console.log(results);\n *     // results is equal to ['one','two']\n * });\n *\n * // an example using objects instead of arrays\n * async.series({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             // do some async task\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         setTimeout(function() {\n *             // then do another async task\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }, function(err, results) {\n *     console.log(results);\n *     // results is equal to: { one: 1, two: 2 }\n * });\n *\n * //Using Promises\n * async.series([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ]).then(results => {\n *     console.log(results);\n *     // results is equal to ['one','two']\n * }).catch(err => {\n *     console.log(err);\n * });\n *\n * // an example using an object instead of an array\n * async.series({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             // do some async task\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         setTimeout(function() {\n *             // then do another async task\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }).then(results => {\n *     console.log(results);\n *     // results is equal to: { one: 1, two: 2 }\n * }).catch(err => {\n *     console.log(err);\n * });\n *\n * //Using async/await\n * async () => {\n *     try {\n *         let results = await async.series([\n *             function(callback) {\n *                 setTimeout(function() {\n *                     // do some async task\n *                     callback(null, 'one');\n *                 }, 200);\n *             },\n *             function(callback) {\n *                 setTimeout(function() {\n *                     // then do another async task\n *                     callback(null, 'two');\n *                 }, 100);\n *             }\n *         ]);\n *         console.log(results);\n *         // results is equal to ['one','two']\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * // an example using an object instead of an array\n * async () => {\n *     try {\n *         let results = await async.parallel({\n *             one: function(callback) {\n *                 setTimeout(function() {\n *                     // do some async task\n *                     callback(null, 1);\n *                 }, 200);\n *             },\n *            two: function(callback) {\n *                 setTimeout(function() {\n *                     // then do another async task\n *                     callback(null, 2);\n *                 }, 100);\n *            }\n *         });\n *         console.log(results);\n *         // results is equal to: { one: 1, two: 2 }\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n */\nfunction series(tasks, callback) {\n    return _parallel(eachOfSeries$1, tasks, callback);\n}\n\n/**\n * Returns `true` if at least one element in the `coll` satisfies an async test.\n * If any iteratee call returns `true`, the main `callback` is immediately\n * called.\n *\n * @name some\n * @static\n * @memberOf module:Collections\n * @method\n * @alias any\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in parallel.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n * @example\n *\n * // dir1 is a directory that contains file1.txt, file2.txt\n * // dir2 is a directory that contains file3.txt, file4.txt\n * // dir3 is a directory that contains file5.txt\n * // dir4 does not exist\n *\n * // asynchronous function that checks if a file exists\n * function fileExists(file, callback) {\n *    fs.access(file, fs.constants.F_OK, (err) => {\n *        callback(null, !err);\n *    });\n * }\n *\n * // Using callbacks\n * async.some(['dir1/missing.txt','dir2/missing.txt','dir3/file5.txt'], fileExists,\n *    function(err, result) {\n *        console.log(result);\n *        // true\n *        // result is true since some file in the list exists\n *    }\n *);\n *\n * async.some(['dir1/missing.txt','dir2/missing.txt','dir4/missing.txt'], fileExists,\n *    function(err, result) {\n *        console.log(result);\n *        // false\n *        // result is false since none of the files exists\n *    }\n *);\n *\n * // Using Promises\n * async.some(['dir1/missing.txt','dir2/missing.txt','dir3/file5.txt'], fileExists)\n * .then( result => {\n *     console.log(result);\n *     // true\n *     // result is true since some file in the list exists\n * }).catch( err => {\n *     console.log(err);\n * });\n *\n * async.some(['dir1/missing.txt','dir2/missing.txt','dir4/missing.txt'], fileExists)\n * .then( result => {\n *     console.log(result);\n *     // false\n *     // result is false since none of the files exists\n * }).catch( err => {\n *     console.log(err);\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let result = await async.some(['dir1/missing.txt','dir2/missing.txt','dir3/file5.txt'], fileExists);\n *         console.log(result);\n *         // true\n *         // result is true since some file in the list exists\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * async () => {\n *     try {\n *         let result = await async.some(['dir1/missing.txt','dir2/missing.txt','dir4/missing.txt'], fileExists);\n *         console.log(result);\n *         // false\n *         // result is false since none of the files exists\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n */\nfunction some(coll, iteratee, callback) {\n    return _createTester(Boolean, res => res)(eachOf$1, coll, iteratee, callback)\n}\nvar some$1 = awaitify(some, 3);\n\n/**\n * The same as [`some`]{@link module:Collections.some} but runs a maximum of `limit` async operations at a time.\n *\n * @name someLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.some]{@link module:Collections.some}\n * @alias anyLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in parallel.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction someLimit(coll, limit, iteratee, callback) {\n    return _createTester(Boolean, res => res)(eachOfLimit$2(limit), coll, iteratee, callback)\n}\nvar someLimit$1 = awaitify(someLimit, 4);\n\n/**\n * The same as [`some`]{@link module:Collections.some} but runs only a single async operation at a time.\n *\n * @name someSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.some]{@link module:Collections.some}\n * @alias anySeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in series.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction someSeries(coll, iteratee, callback) {\n    return _createTester(Boolean, res => res)(eachOfSeries$1, coll, iteratee, callback)\n}\nvar someSeries$1 = awaitify(someSeries, 3);\n\n/**\n * Sorts a list by the results of running each `coll` value through an async\n * `iteratee`.\n *\n * @name sortBy\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a value to use as the sort criteria as\n * its `result`.\n * Invoked with (item, callback).\n * @param {Function} callback - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is the items\n * from the original `coll` sorted by the values returned by the `iteratee`\n * calls. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback passed\n * @example\n *\n * // bigfile.txt is a file that is 251100 bytes in size\n * // mediumfile.txt is a file that is 11000 bytes in size\n * // smallfile.txt is a file that is 121 bytes in size\n *\n * // asynchronous function that returns the file size in bytes\n * function getFileSizeInBytes(file, callback) {\n *     fs.stat(file, function(err, stat) {\n *         if (err) {\n *             return callback(err);\n *         }\n *         callback(null, stat.size);\n *     });\n * }\n *\n * // Using callbacks\n * async.sortBy(['mediumfile.txt','smallfile.txt','bigfile.txt'], getFileSizeInBytes,\n *     function(err, results) {\n *         if (err) {\n *             console.log(err);\n *         } else {\n *             console.log(results);\n *             // results is now the original array of files sorted by\n *             // file size (ascending by default), e.g.\n *             // [ 'smallfile.txt', 'mediumfile.txt', 'bigfile.txt']\n *         }\n *     }\n * );\n *\n * // By modifying the callback parameter the\n * // sorting order can be influenced:\n *\n * // ascending order\n * async.sortBy(['mediumfile.txt','smallfile.txt','bigfile.txt'], function(file, callback) {\n *     getFileSizeInBytes(file, function(getFileSizeErr, fileSize) {\n *         if (getFileSizeErr) return callback(getFileSizeErr);\n *         callback(null, fileSize);\n *     });\n * }, function(err, results) {\n *         if (err) {\n *             console.log(err);\n *         } else {\n *             console.log(results);\n *             // results is now the original array of files sorted by\n *             // file size (ascending by default), e.g.\n *             // [ 'smallfile.txt', 'mediumfile.txt', 'bigfile.txt']\n *         }\n *     }\n * );\n *\n * // descending order\n * async.sortBy(['bigfile.txt','mediumfile.txt','smallfile.txt'], function(file, callback) {\n *     getFileSizeInBytes(file, function(getFileSizeErr, fileSize) {\n *         if (getFileSizeErr) {\n *             return callback(getFileSizeErr);\n *         }\n *         callback(null, fileSize * -1);\n *     });\n * }, function(err, results) {\n *         if (err) {\n *             console.log(err);\n *         } else {\n *             console.log(results);\n *             // results is now the original array of files sorted by\n *             // file size (ascending by default), e.g.\n *             // [ 'bigfile.txt', 'mediumfile.txt', 'smallfile.txt']\n *         }\n *     }\n * );\n *\n * // Error handling\n * async.sortBy(['mediumfile.txt','smallfile.txt','missingfile.txt'], getFileSizeInBytes,\n *     function(err, results) {\n *         if (err) {\n *             console.log(err);\n *             // [ Error: ENOENT: no such file or directory ]\n *         } else {\n *             console.log(results);\n *         }\n *     }\n * );\n *\n * // Using Promises\n * async.sortBy(['mediumfile.txt','smallfile.txt','bigfile.txt'], getFileSizeInBytes)\n * .then( results => {\n *     console.log(results);\n *     // results is now the original array of files sorted by\n *     // file size (ascending by default), e.g.\n *     // [ 'smallfile.txt', 'mediumfile.txt', 'bigfile.txt']\n * }).catch( err => {\n *     console.log(err);\n * });\n *\n * // Error handling\n * async.sortBy(['mediumfile.txt','smallfile.txt','missingfile.txt'], getFileSizeInBytes)\n * .then( results => {\n *     console.log(results);\n * }).catch( err => {\n *     console.log(err);\n *     // [ Error: ENOENT: no such file or directory ]\n * });\n *\n * // Using async/await\n * (async () => {\n *     try {\n *         let results = await async.sortBy(['bigfile.txt','mediumfile.txt','smallfile.txt'], getFileSizeInBytes);\n *         console.log(results);\n *         // results is now the original array of files sorted by\n *         // file size (ascending by default), e.g.\n *         // [ 'smallfile.txt', 'mediumfile.txt', 'bigfile.txt']\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * })();\n *\n * // Error handling\n * async () => {\n *     try {\n *         let results = await async.sortBy(['missingfile.txt','mediumfile.txt','smallfile.txt'], getFileSizeInBytes);\n *         console.log(results);\n *     }\n *     catch (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *     }\n * }\n *\n */\nfunction sortBy (coll, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    return map$1(coll, (x, iterCb) => {\n        _iteratee(x, (err, criteria) => {\n            if (err) return iterCb(err);\n            iterCb(err, {value: x, criteria});\n        });\n    }, (err, results) => {\n        if (err) return callback(err);\n        callback(null, results.sort(comparator).map(v => v.value));\n    });\n\n    function comparator(left, right) {\n        var a = left.criteria, b = right.criteria;\n        return a < b ? -1 : a > b ? 1 : 0;\n    }\n}\nvar sortBy$1 = awaitify(sortBy, 3);\n\n/**\n * Sets a time limit on an asynchronous function. If the function does not call\n * its callback within the specified milliseconds, it will be called with a\n * timeout error. The code property for the error object will be `'ETIMEDOUT'`.\n *\n * @name timeout\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} asyncFn - The async function to limit in time.\n * @param {number} milliseconds - The specified time limit.\n * @param {*} [info] - Any variable you want attached (`string`, `object`, etc)\n * to timeout Error for more information..\n * @returns {AsyncFunction} Returns a wrapped function that can be used with any\n * of the control flow functions.\n * Invoke this function with the same parameters as you would `asyncFunc`.\n * @example\n *\n * function myFunction(foo, callback) {\n *     doAsyncTask(foo, function(err, data) {\n *         // handle errors\n *         if (err) return callback(err);\n *\n *         // do some stuff ...\n *\n *         // return processed data\n *         return callback(null, data);\n *     });\n * }\n *\n * var wrapped = async.timeout(myFunction, 1000);\n *\n * // call `wrapped` as you would `myFunction`\n * wrapped({ bar: 'bar' }, function(err, data) {\n *     // if `myFunction` takes < 1000 ms to execute, `err`\n *     // and `data` will have their expected values\n *\n *     // else `err` will be an Error with the code 'ETIMEDOUT'\n * });\n */\nfunction timeout(asyncFn, milliseconds, info) {\n    var fn = wrapAsync(asyncFn);\n\n    return initialParams((args, callback) => {\n        var timedOut = false;\n        var timer;\n\n        function timeoutCallback() {\n            var name = asyncFn.name || 'anonymous';\n            var error  = new Error('Callback function \"' + name + '\" timed out.');\n            error.code = 'ETIMEDOUT';\n            if (info) {\n                error.info = info;\n            }\n            timedOut = true;\n            callback(error);\n        }\n\n        args.push((...cbArgs) => {\n            if (!timedOut) {\n                callback(...cbArgs);\n                clearTimeout(timer);\n            }\n        });\n\n        // setup timer and call original function\n        timer = setTimeout(timeoutCallback, milliseconds);\n        fn(...args);\n    });\n}\n\nfunction range(size) {\n    var result = Array(size);\n    while (size--) {\n        result[size] = size;\n    }\n    return result;\n}\n\n/**\n * The same as [times]{@link module:ControlFlow.times} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name timesLimit\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.times]{@link module:ControlFlow.times}\n * @category Control Flow\n * @param {number} count - The number of times to run the function.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see [async.map]{@link module:Collections.map}.\n * @returns {Promise} a promise, if no callback is provided\n */\nfunction timesLimit(count, limit, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    return mapLimit$1(range(count), limit, _iteratee, callback);\n}\n\n/**\n * Calls the `iteratee` function `n` times, and accumulates results in the same\n * manner you would use with [map]{@link module:Collections.map}.\n *\n * @name times\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Control Flow\n * @param {number} n - The number of times to run the function.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see {@link module:Collections.map}.\n * @returns {Promise} a promise, if no callback is provided\n * @example\n *\n * // Pretend this is some complicated async factory\n * var createUser = function(id, callback) {\n *     callback(null, {\n *         id: 'user' + id\n *     });\n * };\n *\n * // generate 5 users\n * async.times(5, function(n, next) {\n *     createUser(n, function(err, user) {\n *         next(err, user);\n *     });\n * }, function(err, users) {\n *     // we should now have 5 users\n * });\n */\nfunction times (n, iteratee, callback) {\n    return timesLimit(n, Infinity, iteratee, callback)\n}\n\n/**\n * The same as [times]{@link module:ControlFlow.times} but runs only a single async operation at a time.\n *\n * @name timesSeries\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.times]{@link module:ControlFlow.times}\n * @category Control Flow\n * @param {number} n - The number of times to run the function.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see {@link module:Collections.map}.\n * @returns {Promise} a promise, if no callback is provided\n */\nfunction timesSeries (n, iteratee, callback) {\n    return timesLimit(n, 1, iteratee, callback)\n}\n\n/**\n * A relative of `reduce`.  Takes an Object or Array, and iterates over each\n * element in parallel, each step potentially mutating an `accumulator` value.\n * The type of the accumulator defaults to the type of collection passed in.\n *\n * @name transform\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {*} [accumulator] - The initial state of the transform.  If omitted,\n * it will default to an empty Object or Array, depending on the type of `coll`\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * collection that potentially modifies the accumulator.\n * Invoked with (accumulator, item, key, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the transformed accumulator.\n * Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n * @example\n *\n * // file1.txt is a file that is 1000 bytes in size\n * // file2.txt is a file that is 2000 bytes in size\n * // file3.txt is a file that is 3000 bytes in size\n *\n * // helper function that returns human-readable size format from bytes\n * function formatBytes(bytes, decimals = 2) {\n *   // implementation not included for brevity\n *   return humanReadbleFilesize;\n * }\n *\n * const fileList = ['file1.txt','file2.txt','file3.txt'];\n *\n * // asynchronous function that returns the file size, transformed to human-readable format\n * // e.g. 1024 bytes = 1KB, 1234 bytes = 1.21 KB, 1048576 bytes = 1MB, etc.\n * function transformFileSize(acc, value, key, callback) {\n *     fs.stat(value, function(err, stat) {\n *         if (err) {\n *             return callback(err);\n *         }\n *         acc[key] = formatBytes(stat.size);\n *         callback(null);\n *     });\n * }\n *\n * // Using callbacks\n * async.transform(fileList, transformFileSize, function(err, result) {\n *     if(err) {\n *         console.log(err);\n *     } else {\n *         console.log(result);\n *         // [ '1000 Bytes', '1.95 KB', '2.93 KB' ]\n *     }\n * });\n *\n * // Using Promises\n * async.transform(fileList, transformFileSize)\n * .then(result => {\n *     console.log(result);\n *     // [ '1000 Bytes', '1.95 KB', '2.93 KB' ]\n * }).catch(err => {\n *     console.log(err);\n * });\n *\n * // Using async/await\n * (async () => {\n *     try {\n *         let result = await async.transform(fileList, transformFileSize);\n *         console.log(result);\n *         // [ '1000 Bytes', '1.95 KB', '2.93 KB' ]\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * })();\n *\n * @example\n *\n * // file1.txt is a file that is 1000 bytes in size\n * // file2.txt is a file that is 2000 bytes in size\n * // file3.txt is a file that is 3000 bytes in size\n *\n * // helper function that returns human-readable size format from bytes\n * function formatBytes(bytes, decimals = 2) {\n *   // implementation not included for brevity\n *   return humanReadbleFilesize;\n * }\n *\n * const fileMap = { f1: 'file1.txt', f2: 'file2.txt', f3: 'file3.txt' };\n *\n * // asynchronous function that returns the file size, transformed to human-readable format\n * // e.g. 1024 bytes = 1KB, 1234 bytes = 1.21 KB, 1048576 bytes = 1MB, etc.\n * function transformFileSize(acc, value, key, callback) {\n *     fs.stat(value, function(err, stat) {\n *         if (err) {\n *             return callback(err);\n *         }\n *         acc[key] = formatBytes(stat.size);\n *         callback(null);\n *     });\n * }\n *\n * // Using callbacks\n * async.transform(fileMap, transformFileSize, function(err, result) {\n *     if(err) {\n *         console.log(err);\n *     } else {\n *         console.log(result);\n *         // { f1: '1000 Bytes', f2: '1.95 KB', f3: '2.93 KB' }\n *     }\n * });\n *\n * // Using Promises\n * async.transform(fileMap, transformFileSize)\n * .then(result => {\n *     console.log(result);\n *     // { f1: '1000 Bytes', f2: '1.95 KB', f3: '2.93 KB' }\n * }).catch(err => {\n *     console.log(err);\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let result = await async.transform(fileMap, transformFileSize);\n *         console.log(result);\n *         // { f1: '1000 Bytes', f2: '1.95 KB', f3: '2.93 KB' }\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n */\nfunction transform (coll, accumulator, iteratee, callback) {\n    if (arguments.length <= 3 && typeof accumulator === 'function') {\n        callback = iteratee;\n        iteratee = accumulator;\n        accumulator = Array.isArray(coll) ? [] : {};\n    }\n    callback = once(callback || promiseCallback());\n    var _iteratee = wrapAsync(iteratee);\n\n    eachOf$1(coll, (v, k, cb) => {\n        _iteratee(accumulator, v, k, cb);\n    }, err => callback(err, accumulator));\n    return callback[PROMISE_SYMBOL]\n}\n\n/**\n * It runs each task in series but stops whenever any of the functions were\n * successful. If one of the tasks were successful, the `callback` will be\n * passed the result of the successful task. If all tasks fail, the callback\n * will be passed the error and result (if any) of the final attempt.\n *\n * @name tryEach\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} tasks - A collection containing functions to\n * run, each function is passed a `callback(err, result)` it must call on\n * completion with an error `err` (which can be `null`) and an optional `result`\n * value.\n * @param {Function} [callback] - An optional callback which is called when one\n * of the tasks has succeeded, or all have failed. It receives the `err` and\n * `result` arguments of the last attempt at completing the `task`. Invoked with\n * (err, results).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n * async.tryEach([\n *     function getDataFromFirstWebsite(callback) {\n *         // Try getting the data from the first website\n *         callback(err, data);\n *     },\n *     function getDataFromSecondWebsite(callback) {\n *         // First website failed,\n *         // Try getting the data from the backup website\n *         callback(err, data);\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     Now do something with the data.\n * });\n *\n */\nfunction tryEach(tasks, callback) {\n    var error = null;\n    var result;\n    return eachSeries$1(tasks, (task, taskCb) => {\n        wrapAsync(task)((err, ...args) => {\n            if (err === false) return taskCb(err);\n\n            if (args.length < 2) {\n                [result] = args;\n            } else {\n                result = args;\n            }\n            error = err;\n            taskCb(err ? null : {});\n        });\n    }, () => callback(error, result));\n}\n\nvar tryEach$1 = awaitify(tryEach);\n\n/**\n * Undoes a [memoize]{@link module:Utils.memoize}d function, reverting it to the original,\n * unmemoized form. Handy for testing.\n *\n * @name unmemoize\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.memoize]{@link module:Utils.memoize}\n * @category Util\n * @param {AsyncFunction} fn - the memoized function\n * @returns {AsyncFunction} a function that calls the original unmemoized function\n */\nfunction unmemoize(fn) {\n    return (...args) => {\n        return (fn.unmemoized || fn)(...args);\n    };\n}\n\n/**\n * Repeatedly call `iteratee`, while `test` returns `true`. Calls `callback` when\n * stopped, or an error occurs.\n *\n * @name whilst\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {AsyncFunction} test - asynchronous truth test to perform before each\n * execution of `iteratee`. Invoked with (callback).\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` passes. Invoked with (callback).\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * var count = 0;\n * async.whilst(\n *     function test(cb) { cb(null, count < 5); },\n *     function iter(callback) {\n *         count++;\n *         setTimeout(function() {\n *             callback(null, count);\n *         }, 1000);\n *     },\n *     function (err, n) {\n *         // 5 seconds have passed, n = 5\n *     }\n * );\n */\nfunction whilst(test, iteratee, callback) {\n    callback = onlyOnce(callback);\n    var _fn = wrapAsync(iteratee);\n    var _test = wrapAsync(test);\n    var results = [];\n\n    function next(err, ...rest) {\n        if (err) return callback(err);\n        results = rest;\n        if (err === false) return;\n        _test(check);\n    }\n\n    function check(err, truth) {\n        if (err) return callback(err);\n        if (err === false) return;\n        if (!truth) return callback(null, ...results);\n        _fn(next);\n    }\n\n    return _test(check);\n}\nvar whilst$1 = awaitify(whilst, 3);\n\n/**\n * Repeatedly call `iteratee` until `test` returns `true`. Calls `callback` when\n * stopped, or an error occurs. `callback` will be passed an error and any\n * arguments passed to the final `iteratee`'s callback.\n *\n * The inverse of [whilst]{@link module:ControlFlow.whilst}.\n *\n * @name until\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.whilst]{@link module:ControlFlow.whilst}\n * @category Control Flow\n * @param {AsyncFunction} test - asynchronous truth test to perform before each\n * execution of `iteratee`. Invoked with (callback).\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` fails. Invoked with (callback).\n * @param {Function} [callback] - A callback which is called after the test\n * function has passed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n * @returns {Promise} a promise, if a callback is not passed\n *\n * @example\n * const results = []\n * let finished = false\n * async.until(function test(cb) {\n *     cb(null, finished)\n * }, function iter(next) {\n *     fetchPage(url, (err, body) => {\n *         if (err) return next(err)\n *         results = results.concat(body.objects)\n *         finished = !!body.next\n *         next(err)\n *     })\n * }, function done (err) {\n *     // all pages have been fetched\n * })\n */\nfunction until(test, iteratee, callback) {\n    const _test = wrapAsync(test);\n    return whilst$1((cb) => _test((err, truth) => cb (err, !truth)), iteratee, callback);\n}\n\n/**\n * Runs the `tasks` array of functions in series, each passing their results to\n * the next in the array. However, if any of the `tasks` pass an error to their\n * own callback, the next function is not executed, and the main `callback` is\n * immediately called with the error.\n *\n * @name waterfall\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array} tasks - An array of [async functions]{@link AsyncFunction}\n * to run.\n * Each function should complete with any number of `result` values.\n * The `result` values will be passed as arguments, in order, to the next task.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed. This will be passed the results of the last task's\n * callback. Invoked with (err, [results]).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * async.waterfall([\n *     function(callback) {\n *         callback(null, 'one', 'two');\n *     },\n *     function(arg1, arg2, callback) {\n *         // arg1 now equals 'one' and arg2 now equals 'two'\n *         callback(null, 'three');\n *     },\n *     function(arg1, callback) {\n *         // arg1 now equals 'three'\n *         callback(null, 'done');\n *     }\n * ], function (err, result) {\n *     // result now equals 'done'\n * });\n *\n * // Or, with named functions:\n * async.waterfall([\n *     myFirstFunction,\n *     mySecondFunction,\n *     myLastFunction,\n * ], function (err, result) {\n *     // result now equals 'done'\n * });\n * function myFirstFunction(callback) {\n *     callback(null, 'one', 'two');\n * }\n * function mySecondFunction(arg1, arg2, callback) {\n *     // arg1 now equals 'one' and arg2 now equals 'two'\n *     callback(null, 'three');\n * }\n * function myLastFunction(arg1, callback) {\n *     // arg1 now equals 'three'\n *     callback(null, 'done');\n * }\n */\nfunction waterfall (tasks, callback) {\n    callback = once(callback);\n    if (!Array.isArray(tasks)) return callback(new Error('First argument to waterfall must be an array of functions'));\n    if (!tasks.length) return callback();\n    var taskIndex = 0;\n\n    function nextTask(args) {\n        var task = wrapAsync(tasks[taskIndex++]);\n        task(...args, onlyOnce(next));\n    }\n\n    function next(err, ...args) {\n        if (err === false) return\n        if (err || taskIndex === tasks.length) {\n            return callback(err, ...args);\n        }\n        nextTask(args);\n    }\n\n    nextTask([]);\n}\n\nvar waterfall$1 = awaitify(waterfall);\n\n/**\n * An \"async function\" in the context of Async is an asynchronous function with\n * a variable number of parameters, with the final parameter being a callback.\n * (`function (arg1, arg2, ..., callback) {}`)\n * The final callback is of the form `callback(err, results...)`, which must be\n * called once the function is completed.  The callback should be called with a\n * Error as its first argument to signal that an error occurred.\n * Otherwise, if no error occurred, it should be called with `null` as the first\n * argument, and any additional `result` arguments that may apply, to signal\n * successful completion.\n * The callback must be called exactly once, ideally on a later tick of the\n * JavaScript event loop.\n *\n * This type of function is also referred to as a \"Node-style async function\",\n * or a \"continuation passing-style function\" (CPS). Most of the methods of this\n * library are themselves CPS/Node-style async functions, or functions that\n * return CPS/Node-style async functions.\n *\n * Wherever we accept a Node-style async function, we also directly accept an\n * [ES2017 `async` function]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function}.\n * In this case, the `async` function will not be passed a final callback\n * argument, and any thrown error will be used as the `err` argument of the\n * implicit callback, and the return value will be used as the `result` value.\n * (i.e. a `rejected` of the returned Promise becomes the `err` callback\n * argument, and a `resolved` value becomes the `result`.)\n *\n * Note, due to JavaScript limitations, we can only detect native `async`\n * functions and not transpilied implementations.\n * Your environment must have `async`/`await` support for this to work.\n * (e.g. Node > v7.6, or a recent version of a modern browser).\n * If you are using `async` functions through a transpiler (e.g. Babel), you\n * must still wrap the function with [asyncify]{@link module:Utils.asyncify},\n * because the `async function` will be compiled to an ordinary function that\n * returns a promise.\n *\n * @typedef {Function} AsyncFunction\n * @static\n */\n\n\nvar index = {\n    apply,\n    applyEach,\n    applyEachSeries,\n    asyncify,\n    auto,\n    autoInject,\n    cargo: cargo$1,\n    cargoQueue: cargo,\n    compose,\n    concat: concat$1,\n    concatLimit: concatLimit$1,\n    concatSeries: concatSeries$1,\n    constant: constant$1,\n    detect: detect$1,\n    detectLimit: detectLimit$1,\n    detectSeries: detectSeries$1,\n    dir,\n    doUntil,\n    doWhilst: doWhilst$1,\n    each,\n    eachLimit: eachLimit$1,\n    eachOf: eachOf$1,\n    eachOfLimit: eachOfLimit$1,\n    eachOfSeries: eachOfSeries$1,\n    eachSeries: eachSeries$1,\n    ensureAsync,\n    every: every$1,\n    everyLimit: everyLimit$1,\n    everySeries: everySeries$1,\n    filter: filter$1,\n    filterLimit: filterLimit$1,\n    filterSeries: filterSeries$1,\n    forever: forever$1,\n    groupBy,\n    groupByLimit: groupByLimit$1,\n    groupBySeries,\n    log,\n    map: map$1,\n    mapLimit: mapLimit$1,\n    mapSeries: mapSeries$1,\n    mapValues,\n    mapValuesLimit: mapValuesLimit$1,\n    mapValuesSeries,\n    memoize,\n    nextTick,\n    parallel,\n    parallelLimit,\n    priorityQueue,\n    queue,\n    race: race$1,\n    reduce: reduce$1,\n    reduceRight,\n    reflect,\n    reflectAll,\n    reject: reject$1,\n    rejectLimit: rejectLimit$1,\n    rejectSeries: rejectSeries$1,\n    retry,\n    retryable,\n    seq,\n    series,\n    setImmediate: setImmediate$1,\n    some: some$1,\n    someLimit: someLimit$1,\n    someSeries: someSeries$1,\n    sortBy: sortBy$1,\n    timeout,\n    times,\n    timesLimit,\n    timesSeries,\n    transform,\n    tryEach: tryEach$1,\n    unmemoize,\n    until,\n    waterfall: waterfall$1,\n    whilst: whilst$1,\n\n    // aliases\n    all: every$1,\n    allLimit: everyLimit$1,\n    allSeries: everySeries$1,\n    any: some$1,\n    anyLimit: someLimit$1,\n    anySeries: someSeries$1,\n    find: detect$1,\n    findLimit: detectLimit$1,\n    findSeries: detectSeries$1,\n    flatMap: concat$1,\n    flatMapLimit: concatLimit$1,\n    flatMapSeries: concatSeries$1,\n    forEach: each,\n    forEachSeries: eachSeries$1,\n    forEachLimit: eachLimit$1,\n    forEachOf: eachOf$1,\n    forEachOfSeries: eachOfSeries$1,\n    forEachOfLimit: eachOfLimit$1,\n    inject: reduce$1,\n    foldl: reduce$1,\n    foldr: reduceRight,\n    select: filter$1,\n    selectLimit: filterLimit$1,\n    selectSeries: filterSeries$1,\n    wrapSync: asyncify,\n    during: whilst$1,\n    doDuring: doWhilst$1\n};\n\nexport { every$1 as all, everyLimit$1 as allLimit, everySeries$1 as allSeries, some$1 as any, someLimit$1 as anyLimit, someSeries$1 as anySeries, apply, applyEach, applyEachSeries, asyncify, auto, autoInject, cargo$1 as cargo, cargo as cargoQueue, compose, concat$1 as concat, concatLimit$1 as concatLimit, concatSeries$1 as concatSeries, constant$1 as constant, index as default, detect$1 as detect, detectLimit$1 as detectLimit, detectSeries$1 as detectSeries, dir, doWhilst$1 as doDuring, doUntil, doWhilst$1 as doWhilst, whilst$1 as during, each, eachLimit$1 as eachLimit, eachOf$1 as eachOf, eachOfLimit$1 as eachOfLimit, eachOfSeries$1 as eachOfSeries, eachSeries$1 as eachSeries, ensureAsync, every$1 as every, everyLimit$1 as everyLimit, everySeries$1 as everySeries, filter$1 as filter, filterLimit$1 as filterLimit, filterSeries$1 as filterSeries, detect$1 as find, detectLimit$1 as findLimit, detectSeries$1 as findSeries, concat$1 as flatMap, concatLimit$1 as flatMapLimit, concatSeries$1 as flatMapSeries, reduce$1 as foldl, reduceRight as foldr, each as forEach, eachLimit$1 as forEachLimit, eachOf$1 as forEachOf, eachOfLimit$1 as forEachOfLimit, eachOfSeries$1 as forEachOfSeries, eachSeries$1 as forEachSeries, forever$1 as forever, groupBy, groupByLimit$1 as groupByLimit, groupBySeries, reduce$1 as inject, log, map$1 as map, mapLimit$1 as mapLimit, mapSeries$1 as mapSeries, mapValues, mapValuesLimit$1 as mapValuesLimit, mapValuesSeries, memoize, nextTick, parallel, parallelLimit, priorityQueue, queue, race$1 as race, reduce$1 as reduce, reduceRight, reflect, reflectAll, reject$1 as reject, rejectLimit$1 as rejectLimit, rejectSeries$1 as rejectSeries, retry, retryable, filter$1 as select, filterLimit$1 as selectLimit, filterSeries$1 as selectSeries, seq, series, setImmediate$1 as setImmediate, some$1 as some, someLimit$1 as someLimit, someSeries$1 as someSeries, sortBy$1 as sortBy, timeout, times, timesLimit, timesSeries, transform, tryEach$1 as tryEach, unmemoize, until, waterfall$1 as waterfall, whilst$1 as whilst, asyncify as wrapSync };\n","var hat = module.exports = function (bits, base) {\n    if (!base) base = 16;\n    if (bits === undefined) bits = 128;\n    if (bits <= 0) return '0';\n    \n    var digits = Math.log(Math.pow(2, bits)) / Math.log(base);\n    for (var i = 2; digits === Infinity; i *= 2) {\n        digits = Math.log(Math.pow(2, bits / i)) / Math.log(base) * i;\n    }\n    \n    var rem = digits - Math.floor(digits);\n    \n    var res = '';\n    \n    for (var i = 0; i < Math.floor(digits); i++) {\n        var x = Math.floor(Math.random() * base).toString(base);\n        res = x + res;\n    }\n    \n    if (rem) {\n        var b = Math.pow(base, rem);\n        var x = Math.floor(Math.random() * b).toString(base);\n        res = x + res;\n    }\n    \n    var parsed = parseInt(res, base);\n    if (parsed !== Infinity && parsed >= Math.pow(2, bits)) {\n        return hat(bits, base)\n    }\n    else return res;\n};\n\nhat.rack = function (bits, base, expandBy) {\n    var fn = function (data) {\n        var iters = 0;\n        do {\n            if (iters ++ > 10) {\n                if (expandBy) bits += expandBy;\n                else throw new Error('too many ID collisions, use more bits')\n            }\n            \n            var id = hat(bits, base);\n        } while (Object.hasOwnProperty.call(hats, id));\n        \n        hats[id] = data;\n        return id;\n    };\n    var hats = fn.hats = {};\n    \n    fn.get = function (id) {\n        return fn.hats[id];\n    };\n    \n    fn.set = function (id, value) {\n        fn.hats[id] = value;\n        return fn;\n    };\n    \n    fn.bits = bits || 128;\n    fn.base = base || 16;\n    return fn;\n};\n","var emitter = require('../../emitter');\nvar LocalPresence = require('./local-presence');\nvar RemotePresence = require('./remote-presence');\nvar util = require('../../util');\nvar async = require('async');\nvar hat = require('hat');\nvar ACTIONS = require('../../message-actions').ACTIONS;\n\nmodule.exports = Presence;\nfunction Presence(connection, channel) {\n  emitter.EventEmitter.call(this);\n\n  if (!channel || typeof channel !== 'string') {\n    throw new Error('Presence channel must be provided');\n  }\n\n  this.connection = connection;\n  this.channel = channel;\n\n  this.wantSubscribe = false;\n  this.subscribed = false;\n  this.remotePresences = Object.create(null);\n  this.localPresences = Object.create(null);\n\n  this._remotePresenceInstances = Object.create(null);\n  this._subscriptionCallbacksBySeq = Object.create(null);\n  this._wantsDestroy = false;\n}\nemitter.mixin(Presence);\n\nPresence.prototype.subscribe = function(callback) {\n  this._sendSubscriptionAction(true, callback);\n};\n\nPresence.prototype.unsubscribe = function(callback) {\n  this._sendSubscriptionAction(false, callback);\n};\n\nPresence.prototype.create = function(id) {\n  if (this._wantsDestroy) {\n    throw new Error('Presence is being destroyed');\n  }\n  id = id || hat();\n  var localPresence = this._createLocalPresence(id);\n  this.localPresences[id] = localPresence;\n  return localPresence;\n};\n\nPresence.prototype.destroy = function(callback) {\n  this._wantsDestroy = true;\n  var presence = this;\n  // Store these at the time of destruction: any LocalPresence on this\n  // instance at this time will be destroyed, but if the destroy is\n  // cancelled, any future LocalPresence objects will be kept.\n  // See: https://github.com/share/sharedb/pull/579\n  var localIds = Object.keys(presence.localPresences);\n  this.unsubscribe(function(error) {\n    if (error) return presence._callbackOrEmit(error, callback);\n    var remoteIds = Object.keys(presence._remotePresenceInstances);\n    async.parallel(\n      [\n        function(next) {\n          async.each(localIds, function(presenceId, next) {\n            var localPresence = presence.localPresences[presenceId];\n            if (!localPresence) return next();\n            localPresence.destroy(next);\n          }, next);\n        },\n        function(next) {\n          // We don't bother stashing the RemotePresence instances because\n          // they're not really bound to our local state: if we want to\n          // destroy, we destroy them all, but if we cancel the destroy,\n          // we'll want to keep them all\n          if (!presence._wantsDestroy) return next();\n          async.each(remoteIds, function(presenceId, next) {\n            presence._remotePresenceInstances[presenceId].destroy(next);\n          }, next);\n        }\n      ],\n      function(error) {\n        if (presence._wantsDestroy) delete presence.connection._presences[presence.channel];\n        presence._callbackOrEmit(error, callback);\n      }\n    );\n  });\n};\n\nPresence.prototype._sendSubscriptionAction = function(wantSubscribe, callback) {\n  wantSubscribe = !!wantSubscribe;\n  if (wantSubscribe === this.wantSubscribe) {\n    if (!callback) return;\n    if (wantSubscribe === this.subscribed) return util.nextTick(callback);\n    if (Object.keys(this._subscriptionCallbacksBySeq).length) {\n      return this._combineSubscribeCallbackWithLastAdded(callback);\n    }\n  }\n  this.wantSubscribe = wantSubscribe;\n  var action = this.wantSubscribe ? ACTIONS.presenceSubscribe : ACTIONS.presenceUnsubscribe;\n  var seq = this.connection._presenceSeq++;\n  this._subscriptionCallbacksBySeq[seq] = callback;\n  if (this.connection.canSend) {\n    this.connection._sendPresenceAction(action, seq, this);\n  }\n};\n\nPresence.prototype._requestRemotePresence = function() {\n  this.connection._requestRemotePresence(this.channel);\n};\n\nPresence.prototype._handleSubscribe = function(error, seq) {\n  if (this.wantSubscribe) this.subscribed = true;\n  var callback = this._subscriptionCallback(seq);\n  this._callbackOrEmit(error, callback);\n};\n\nPresence.prototype._handleUnsubscribe = function(error, seq) {\n  this.subscribed = false;\n  var callback = this._subscriptionCallback(seq);\n  this._callbackOrEmit(error, callback);\n};\n\nPresence.prototype._receiveUpdate = function(error, message) {\n  var localPresence = util.dig(this.localPresences, message.id);\n  if (localPresence) return localPresence._ack(error, message.pv);\n\n  if (error) return this.emit('error', error);\n  var presence = this;\n  var remotePresence = util.digOrCreate(this._remotePresenceInstances, message.id, function() {\n    return presence._createRemotePresence(message.id);\n  });\n\n  remotePresence.receiveUpdate(message);\n};\n\nPresence.prototype._updateRemotePresence = function(remotePresence) {\n  this.remotePresences[remotePresence.presenceId] = remotePresence.value;\n  if (remotePresence.value === null) this._removeRemotePresence(remotePresence.presenceId);\n  this.emit('receive', remotePresence.presenceId, remotePresence.value);\n};\n\nPresence.prototype._broadcastAllLocalPresence = function(error) {\n  if (error) return this.emit('error', error);\n  for (var id in this.localPresences) {\n    var localPresence = this.localPresences[id];\n    if (localPresence.value !== null) localPresence.send();\n  }\n};\n\nPresence.prototype._removeRemotePresence = function(id) {\n  this._remotePresenceInstances[id].destroy();\n  delete this._remotePresenceInstances[id];\n  delete this.remotePresences[id];\n};\n\nPresence.prototype._onConnectionStateChanged = function() {\n  if (!this.connection.canSend) {\n    this.subscribed = false;\n    return;\n  }\n  this._resubscribe();\n  for (var id in this.localPresences) {\n    this.localPresences[id]._sendPending();\n  }\n};\n\nPresence.prototype._resubscribe = function() {\n  var callbacks = [];\n  for (var seq in this._subscriptionCallbacksBySeq) {\n    var callback = this._subscriptionCallback(seq);\n    callbacks.push(callback);\n  }\n\n  if (!this.wantSubscribe) return this._callEachOrEmit(callbacks);\n\n  var presence = this;\n  this.subscribe(function(error) {\n    presence._callEachOrEmit(callbacks, error);\n  });\n};\n\nPresence.prototype._subscriptionCallback = function(seq) {\n  var callback = this._subscriptionCallbacksBySeq[seq];\n  delete this._subscriptionCallbacksBySeq[seq];\n  return callback;\n};\n\nPresence.prototype._callbackOrEmit = function(error, callback) {\n  if (callback) return util.nextTick(callback, error);\n  if (error) this.emit('error', error);\n};\n\nPresence.prototype._createLocalPresence = function(id) {\n  return new LocalPresence(this, id);\n};\n\nPresence.prototype._createRemotePresence = function(id) {\n  return new RemotePresence(this, id);\n};\n\nPresence.prototype._callEachOrEmit = function(callbacks, error) {\n  var called = util.callEach(callbacks, error);\n  if (!called && error) this.emit('error', error);\n};\n\nPresence.prototype._combineSubscribeCallbackWithLastAdded = function(callback) {\n  var seqs = Object.keys(this._subscriptionCallbacksBySeq);\n  var lastSeq = seqs[seqs.length - 1];\n  var originalCallback = this._subscriptionCallbacksBySeq[lastSeq];\n  if (!originalCallback) return this._subscriptionCallbacksBySeq[lastSeq] = callback;\n  this._subscriptionCallbacksBySeq[lastSeq] = function(error) {\n    originalCallback(error);\n    callback(error);\n  };\n};\n","var LocalPresence = require('./local-presence');\nvar ShareDBError = require('../../error');\nvar util = require('../../util');\nvar ERROR_CODE = ShareDBError.CODES;\n\nmodule.exports = LocalDocPresence;\nfunction LocalDocPresence(presence, presenceId) {\n  LocalPresence.call(this, presence, presenceId);\n\n  this.collection = this.presence.collection;\n  this.id = this.presence.id;\n\n  this._doc = this.connection.get(this.collection, this.id);\n  this._emitter = this.connection._docPresenceEmitter;\n  this._isSending = false;\n  this._docDataVersionByPresenceVersion = Object.create(null);\n\n  this._opHandler = this._transformAgainstOp.bind(this);\n  this._createOrDelHandler = this._handleCreateOrDel.bind(this);\n  this._loadHandler = this._handleLoad.bind(this);\n  this._destroyHandler = this.destroy.bind(this);\n  this._registerWithDoc();\n}\n\nLocalDocPresence.prototype = Object.create(LocalPresence.prototype);\n\nLocalDocPresence.prototype.submit = function(value, callback) {\n  if (!this._doc.type) {\n    // If the Doc hasn't been created, we already assume all presence to\n    // be null. Let's early return, instead of error since this is a harmless\n    // no-op\n    if (value === null) return this._callbackOrEmit(null, callback);\n\n    var error = null;\n    if (this._doc._isInHardRollback) {\n      error = {\n        code: ERROR_CODE.ERR_DOC_IN_HARD_ROLLBACK,\n        message: 'Cannot submit presence. Document is processing hard rollback'\n      };\n    } else {\n      error = {\n        code: ERROR_CODE.ERR_DOC_DOES_NOT_EXIST,\n        message: 'Cannot submit presence. Document has not been created'\n      };\n    }\n\n    return this._callbackOrEmit(error, callback);\n  };\n\n  // Record the current data state version to check if we need to transform\n  // the presence later\n  this._docDataVersionByPresenceVersion[this.presenceVersion] = this._doc._dataStateVersion;\n  LocalPresence.prototype.submit.call(this, value, callback);\n};\n\nLocalDocPresence.prototype.destroy = function(callback) {\n  this._emitter.removeEventListener(this._doc, 'op', this._opHandler);\n  this._emitter.removeEventListener(this._doc, 'create', this._createOrDelHandler);\n  this._emitter.removeEventListener(this._doc, 'del', this._createOrDelHandler);\n  this._emitter.removeEventListener(this._doc, 'load', this._loadHandler);\n  this._emitter.removeEventListener(this._doc, 'destroy', this._destroyHandler);\n\n  LocalPresence.prototype.destroy.call(this, callback);\n};\n\nLocalDocPresence.prototype._sendPending = function() {\n  if (this._isSending) return;\n  this._isSending = true;\n  var presence = this;\n  this._doc.whenNothingPending(function() {\n    presence._isSending = false;\n    if (!presence.connection.canSend) return;\n\n    presence._pendingMessages.forEach(function(message) {\n      message.t = presence._doc.type.uri;\n      message.v = presence._doc.version;\n      presence.connection.send(message);\n    });\n\n    presence._pendingMessages = [];\n    presence._docDataVersionByPresenceVersion = Object.create(null);\n  });\n};\n\nLocalDocPresence.prototype._registerWithDoc = function() {\n  this._emitter.addEventListener(this._doc, 'op', this._opHandler);\n  this._emitter.addEventListener(this._doc, 'create', this._createOrDelHandler);\n  this._emitter.addEventListener(this._doc, 'del', this._createOrDelHandler);\n  this._emitter.addEventListener(this._doc, 'load', this._loadHandler);\n  this._emitter.addEventListener(this._doc, 'destroy', this._destroyHandler);\n};\n\nLocalDocPresence.prototype._transformAgainstOp = function(op, source) {\n  var presence = this;\n  var docDataVersion = this._doc._dataStateVersion;\n\n  this._pendingMessages.forEach(function(message) {\n    // Check if the presence needs transforming against the op - this is to check against\n    // edge cases where presence is submitted from an 'op' event\n    var messageDocDataVersion = presence._docDataVersionByPresenceVersion[message.pv];\n    if (messageDocDataVersion >= docDataVersion) return;\n    try {\n      message.p = presence._transformPresence(message.p, op, source);\n      // Ensure the presence's data version is kept consistent to deal with \"deep\" op\n      // submissions\n      presence._docDataVersionByPresenceVersion[message.pv] = docDataVersion;\n    } catch (error) {\n      var callback = presence._getCallback(message.pv);\n      presence._callbackOrEmit(error, callback);\n    }\n  });\n\n  try {\n    this.value = this._transformPresence(this.value, op, source);\n  } catch (error) {\n    this.emit('error', error);\n  }\n};\n\nLocalDocPresence.prototype._handleCreateOrDel = function() {\n  this._pendingMessages.forEach(function(message) {\n    message.p = null;\n  });\n\n  this.value = null;\n};\n\nLocalDocPresence.prototype._handleLoad = function() {\n  this.value = null;\n  this._pendingMessages = [];\n  this._docDataVersionByPresenceVersion = Object.create(null);\n};\n\nLocalDocPresence.prototype._message = function() {\n  var message = LocalPresence.prototype._message.call(this);\n  message.c = this.collection,\n  message.d = this.id,\n  message.v = null;\n  message.t = null;\n  return message;\n};\n\nLocalDocPresence.prototype._transformPresence = function(value, op, source) {\n  var type = this._doc.type;\n  if (!util.supportsPresence(type)) {\n    throw new ShareDBError(\n      ERROR_CODE.ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE,\n      'Type does not support presence: ' + type.name\n    );\n  }\n  return type.transformPresence(value, op, source);\n};\n","// This contains the master OT functions for the database. They look like\n// ot-types style operational transform functions, but they're a bit different.\n// These functions understand versions and can deal with out of bound create &\n// delete operations.\n\nvar types = require('./types');\nvar ShareDBError = require('./error');\nvar util = require('./util');\n\nvar ERROR_CODE = ShareDBError.CODES;\n\n// Returns an error string on failure. Rockin' it C style.\nexports.checkOp = function(op) {\n  if (op == null || typeof op !== 'object') {\n    return new ShareDBError(ERROR_CODE.ERR_OT_OP_BADLY_FORMED, 'Op must be an object');\n  }\n\n  if (op.create != null) {\n    if (typeof op.create !== 'object') {\n      return new ShareDBError(ERROR_CODE.ERR_OT_OP_BADLY_FORMED, 'Create data must be an object');\n    }\n    var typeName = op.create.type;\n    if (typeof typeName !== 'string') {\n      return new ShareDBError(ERROR_CODE.ERR_OT_OP_BADLY_FORMED, 'Missing create type');\n    }\n    var type = types.map[typeName];\n    if (type == null || typeof type !== 'object') {\n      return new ShareDBError(ERROR_CODE.ERR_DOC_TYPE_NOT_RECOGNIZED, 'Unknown type');\n    }\n  } else if (op.del != null) {\n    if (op.del !== true) return new ShareDBError(ERROR_CODE.ERR_OT_OP_BADLY_FORMED, 'del value must be true');\n  } else if (!('op' in op)) {\n    return new ShareDBError(ERROR_CODE.ERR_OT_OP_BADLY_FORMED, 'Missing op, create, or del');\n  }\n\n  if (op.src != null && typeof op.src !== 'string') {\n    return new ShareDBError(ERROR_CODE.ERR_OT_OP_BADLY_FORMED, 'src must be a string');\n  }\n  if (op.seq != null && typeof op.seq !== 'number') {\n    return new ShareDBError(ERROR_CODE.ERR_OT_OP_BADLY_FORMED, 'seq must be a number');\n  }\n  if (\n    (op.src == null && op.seq != null) ||\n    (op.src != null && op.seq == null)\n  ) {\n    return new ShareDBError(ERROR_CODE.ERR_OT_OP_BADLY_FORMED, 'Both src and seq must be set together');\n  }\n\n  if (op.m != null && typeof op.m !== 'object') {\n    return new ShareDBError(ERROR_CODE.ERR_OT_OP_BADLY_FORMED, 'op.m must be an object or null');\n  }\n};\n\n// Takes in a string (type name or URI) and returns the normalized name (uri)\nexports.normalizeType = function(typeName) {\n  return types.map[typeName] && types.map[typeName].uri;\n};\n\n// This is the super apply function that takes in snapshot data (including the\n// type) and edits it in-place. Returns an error or null for success.\nexports.apply = function(snapshot, op) {\n  if (typeof snapshot !== 'object') {\n    return new ShareDBError(ERROR_CODE.ERR_APPLY_SNAPSHOT_NOT_PROVIDED, 'Missing snapshot');\n  }\n  if (snapshot.v != null && op.v != null && snapshot.v !== op.v) {\n    return new ShareDBError(ERROR_CODE.ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT, 'Version mismatch');\n  }\n\n  // Create operation\n  if (op.create) {\n    if (snapshot.type) return new ShareDBError(ERROR_CODE.ERR_DOC_ALREADY_CREATED, 'Document already exists');\n\n    // The document doesn't exist, although it might have once existed\n    var create = op.create;\n    var type = types.map[create.type];\n    if (!type) return new ShareDBError(ERROR_CODE.ERR_DOC_TYPE_NOT_RECOGNIZED, 'Unknown type');\n\n    try {\n      snapshot.data = type.create(create.data);\n      snapshot.type = type.uri;\n      snapshot.v++;\n    } catch (err) {\n      return err;\n    }\n\n  // Delete operation\n  } else if (op.del) {\n    snapshot.data = undefined;\n    snapshot.type = null;\n    snapshot.v++;\n\n  // Edit operation\n  } else if ('op' in op) {\n    var err = applyOpEdit(snapshot, op.op);\n    if (err) return err;\n    snapshot.v++;\n\n  // No-op, and we don't have to do anything\n  } else {\n    snapshot.v++;\n  }\n};\n\nfunction applyOpEdit(snapshot, edit) {\n  if (!snapshot.type) return new ShareDBError(ERROR_CODE.ERR_DOC_DOES_NOT_EXIST, 'Document does not exist');\n\n  if (edit === undefined) return new ShareDBError(ERROR_CODE.ERR_OT_OP_NOT_PROVIDED, 'Missing op');\n  var type = types.map[snapshot.type];\n  if (!type) return new ShareDBError(ERROR_CODE.ERR_DOC_TYPE_NOT_RECOGNIZED, 'Unknown type');\n\n  if (type.name === 'json0' && Array.isArray(edit)) {\n    for (var i = 0; i < edit.length; i++) {\n      var opComponent = edit[i];\n      if (Array.isArray(opComponent.p)) {\n        for (var j = 0; j < opComponent.p.length; j++) {\n          var pathSegment = opComponent.p[j];\n          if (util.isDangerousProperty(pathSegment)) {\n            return new ShareDBError(ERROR_CODE.ERR_OT_OP_NOT_APPLIED, 'Invalid path segment');\n          }\n        }\n      }\n    }\n  }\n\n  try {\n    snapshot.data = type.apply(snapshot.data, edit);\n  } catch (err) {\n    return new ShareDBError(ERROR_CODE.ERR_OT_OP_NOT_APPLIED, err.message);\n  }\n}\n\nexports.transform = function(type, op, appliedOp) {\n  // There are 16 cases this function needs to deal with - which are all the\n  // combinations of create/delete/op/noop from both op and appliedOp\n  if (op.v != null && op.v !== appliedOp.v) {\n    return new ShareDBError(ERROR_CODE.ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM, 'Version mismatch');\n  }\n\n  if (appliedOp.del) {\n    if (op.create || 'op' in op) {\n      return new ShareDBError(ERROR_CODE.ERR_DOC_WAS_DELETED, 'Document was deleted');\n    }\n  } else if (\n    (appliedOp.create && ('op' in op || op.create || op.del)) ||\n    ('op' in appliedOp && op.create)\n  ) {\n    // If appliedOp.create is not true, appliedOp contains an op - which\n    // also means the document exists remotely.\n    return new ShareDBError(ERROR_CODE.ERR_DOC_ALREADY_CREATED, 'Document was created remotely');\n  } else if ('op' in appliedOp && 'op' in op) {\n    // If we reach here, they both have a .op property.\n    if (!type) return new ShareDBError(ERROR_CODE.ERR_DOC_DOES_NOT_EXIST, 'Document does not exist');\n\n    if (typeof type === 'string') {\n      type = types.map[type];\n      if (!type) return new ShareDBError(ERROR_CODE.ERR_DOC_TYPE_NOT_RECOGNIZED, 'Unknown type');\n    }\n\n    try {\n      op.op = type.transform(op.op, appliedOp.op, 'left');\n    } catch (err) {\n      return err;\n    }\n  }\n\n  if (op.v != null) op.v++;\n};\n\n/**\n * Apply an array of ops to the provided snapshot.\n *\n * @param snapshot - a Snapshot object which will be mutated by the provided ops\n * @param ops - an array of ops to apply to the snapshot\n * @param options - options (currently for internal use only)\n * @return an error object if applicable\n */\nexports.applyOps = function(snapshot, ops, options) {\n  options = options || {};\n  for (var index = 0; index < ops.length; index++) {\n    var op = ops[index];\n    if (options._normalizeLegacyJson0Ops) {\n      try {\n        normalizeLegacyJson0Ops(snapshot, op);\n      } catch (error) {\n        return new ShareDBError(\n          ERROR_CODE.ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED,\n          'Cannot normalize legacy json0 op'\n        );\n      }\n    }\n    snapshot.v = op.v;\n    var error = exports.apply(snapshot, op);\n    if (error) return error;\n  }\n};\n\nexports.transformPresence = function(presence, op, isOwnOp) {\n  var opError = this.checkOp(op);\n  if (opError) return opError;\n\n  var type = presence.t;\n  if (typeof type === 'string') {\n    type = types.map[type];\n  }\n  if (!type) return {code: ERROR_CODE.ERR_DOC_TYPE_NOT_RECOGNIZED, message: 'Unknown type'};\n  if (!util.supportsPresence(type)) {\n    return {code: ERROR_CODE.ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE, message: 'Type does not support presence'};\n  }\n\n  if (op.create || op.del) {\n    presence.p = null;\n    presence.v++;\n    return;\n  }\n\n  try {\n    presence.p = presence.p === null ?\n      null :\n      type.transformPresence(presence.p, op.op, isOwnOp);\n  } catch (error) {\n    return {code: ERROR_CODE.ERR_PRESENCE_TRANSFORM_FAILED, message: error.message || error};\n  }\n\n  presence.v++;\n};\n\n/**\n * json0 had a breaking change in https://github.com/ottypes/json0/pull/40\n * The change added stricter type checking, which breaks fetchSnapshot()\n * when trying to rebuild a snapshot from old, committed ops that didn't\n * have this stricter validation. This method fixes up legacy ops to\n * pass the stricter validation\n */\nfunction normalizeLegacyJson0Ops(snapshot, json0Op) {\n  if (snapshot.type !== types.defaultType.uri) return;\n  var components = json0Op.op;\n  if (!components) return;\n  var data = snapshot.data;\n\n  // type.apply() makes no guarantees about mutating the original data, so\n  // we need to clone. However, we only need to apply() if we have multiple\n  // components, so avoid cloning if we don't have to.\n  if (components.length > 1) data = util.clone(data);\n\n  for (var i = 0; i < components.length; i++) {\n    var component = components[i];\n    if (typeof component.lm === 'string') component.lm = +component.lm;\n    var path = component.p;\n    var element = data;\n    for (var j = 0; j < path.length; j++) {\n      var key = path[j];\n      // https://github.com/ottypes/json0/blob/73db17e86adc5d801951d1a69453b01382e66c7d/lib/json0.js#L21\n      if (Object.prototype.toString.call(element) == '[object Array]') path[j] = +key;\n      // https://github.com/ottypes/json0/blob/73db17e86adc5d801951d1a69453b01382e66c7d/lib/json0.js#L32\n      else if (element.constructor === Object) path[j] = key.toString();\n      element = element[key];\n    }\n\n    // Apply to update the snapshot, so we can correctly check the path for\n    // the next component. We don't need to do this on the final iteration,\n    // since there's no more ops.\n    if (i < components.length - 1) data = types.defaultType.apply(data, [component]);\n  }\n}\n","var RemotePresence = require('./remote-presence');\nvar ot = require('../../ot');\n\nmodule.exports = RemoteDocPresence;\nfunction RemoteDocPresence(presence, presenceId) {\n  RemotePresence.call(this, presence, presenceId);\n\n  this.collection = this.presence.collection;\n  this.id = this.presence.id;\n  this.src = null;\n  this.presenceVersion = null;\n\n  this._doc = this.connection.get(this.collection, this.id);\n  this._emitter = this.connection._docPresenceEmitter;\n  this._pending = null;\n  this._opCache = null;\n  this._pendingSetPending = false;\n\n  this._opHandler = this._handleOp.bind(this);\n  this._createDelHandler = this._handleCreateDel.bind(this);\n  this._loadHandler = this._handleLoad.bind(this);\n  this._registerWithDoc();\n}\n\nRemoteDocPresence.prototype = Object.create(RemotePresence.prototype);\n\nRemoteDocPresence.prototype.receiveUpdate = function(message) {\n  if (this._pending && message.pv < this._pending.pv) return;\n  this.src = message.src;\n  this._pending = message;\n  this._setPendingPresence();\n};\n\nRemoteDocPresence.prototype.destroy = function(callback) {\n  this._emitter.removeEventListener(this._doc, 'op', this._opHandler);\n  this._emitter.removeEventListener(this._doc, 'create', this._createDelHandler);\n  this._emitter.removeEventListener(this._doc, 'del', this._createDelHandler);\n  this._emitter.removeEventListener(this._doc, 'load', this._loadHandler);\n\n  RemotePresence.prototype.destroy.call(this, callback);\n};\n\nRemoteDocPresence.prototype._registerWithDoc = function() {\n  this._emitter.addEventListener(this._doc, 'op', this._opHandler);\n  this._emitter.addEventListener(this._doc, 'create', this._createDelHandler);\n  this._emitter.addEventListener(this._doc, 'del', this._createDelHandler);\n  this._emitter.addEventListener(this._doc, 'load', this._loadHandler);\n};\n\nRemoteDocPresence.prototype._setPendingPresence = function() {\n  if (this._pendingSetPending) return;\n  this._pendingSetPending = true;\n  var presence = this;\n  this._doc.whenNothingPending(function() {\n    presence._pendingSetPending = false;\n    if (!presence._pending) return;\n    if (presence._pending.pv < presence.presenceVersion) return presence._pending = null;\n\n    if (presence._pending.v > presence._doc.version) {\n      return presence._doc.fetch();\n    }\n\n    if (!presence._catchUpStalePresence()) return;\n\n    presence.value = presence._pending.p;\n    presence.presenceVersion = presence._pending.pv;\n    presence._pending = null;\n    presence.presence._updateRemotePresence(presence);\n  });\n};\n\nRemoteDocPresence.prototype._handleOp = function(op, source, connectionId) {\n  var isOwnOp = connectionId === this.src;\n  this._transformAgainstOp(op, isOwnOp);\n  this._cacheOp(op, isOwnOp);\n  this._setPendingPresence();\n};\n\nRemotePresence.prototype._handleCreateDel = function() {\n  this._cacheOp(null);\n  this._setPendingPresence();\n};\n\nRemotePresence.prototype._handleLoad = function() {\n  this.value = null;\n  this._pending = null;\n  this._opCache = null;\n  this.presence._updateRemotePresence(this);\n};\n\nRemoteDocPresence.prototype._transformAgainstOp = function(op, isOwnOp) {\n  if (!this.value) return;\n\n  try {\n    this.value = this._doc.type.transformPresence(this.value, op, isOwnOp);\n  } catch (error) {\n    return this.presence.emit('error', error);\n  }\n  this.presence._updateRemotePresence(this);\n};\n\nRemoteDocPresence.prototype._catchUpStalePresence = function() {\n  if (this._pending.v >= this._doc.version) return true;\n\n  if (!this._opCache) {\n    this._startCachingOps();\n    this._doc.fetch();\n    this.presence._requestRemotePresence();\n    return false;\n  }\n\n  while (this._opCache[this._pending.v]) {\n    var item = this._opCache[this._pending.v];\n    var op = item.op;\n    var isOwnOp = item.isOwnOp;\n    // We use a null op to signify a create or a delete operation. In both\n    // cases we just want to reset the presence (which doesn't make sense\n    // in a new document), so just set the presence to null.\n    if (op === null) {\n      this._pending.p = null;\n      this._pending.v++;\n    } else {\n      ot.transformPresence(this._pending, op, isOwnOp);\n    }\n  }\n\n  var hasCaughtUp = this._pending.v >= this._doc.version;\n  if (hasCaughtUp) {\n    this._stopCachingOps();\n  }\n\n  return hasCaughtUp;\n};\n\nRemoteDocPresence.prototype._startCachingOps = function() {\n  this._opCache = [];\n};\n\nRemoteDocPresence.prototype._stopCachingOps = function() {\n  this._opCache = null;\n};\n\nRemoteDocPresence.prototype._cacheOp = function(op, isOwnOp) {\n  if (this._opCache) {\n    op = op ? {op: op} : null;\n    // Subtract 1 from the current doc version, because an op with v3\n    // should be read as the op that takes a doc from v3 -> v4\n    this._opCache[this._doc.version - 1] = {op: op, isOwnOp: isOwnOp};\n  }\n};\n","var Presence = require('./presence');\nvar LocalDocPresence = require('./local-doc-presence');\nvar RemoteDocPresence = require('./remote-doc-presence');\n\nfunction DocPresence(connection, collection, id) {\n  var channel = DocPresence.channel(collection, id);\n  Presence.call(this, connection, channel);\n\n  this.collection = collection;\n  this.id = id;\n}\nmodule.exports = DocPresence;\n\nDocPresence.prototype = Object.create(Presence.prototype);\n\nDocPresence.channel = function(collection, id) {\n  return collection + '.' + id;\n};\n\nDocPresence.prototype._createLocalPresence = function(id) {\n  return new LocalDocPresence(this, id);\n};\n\nDocPresence.prototype._createRemotePresence = function(id) {\n  return new RemoteDocPresence(this, id);\n};\n","module.exports = Snapshot;\nfunction Snapshot(id, version, type, data, meta) {\n  this.id = id;\n  this.v = version;\n  this.type = type;\n  this.data = data;\n  this.m = meta;\n}\n","var Snapshot = require('../../snapshot');\nvar emitter = require('../../emitter');\n\nmodule.exports = SnapshotRequest;\n\nfunction SnapshotRequest(connection, requestId, collection, id, callback) {\n  emitter.EventEmitter.call(this);\n\n  if (typeof callback !== 'function') {\n    throw new Error('Callback is required for SnapshotRequest');\n  }\n\n  this.requestId = requestId;\n  this.connection = connection;\n  this.id = id;\n  this.collection = collection;\n  this.callback = callback;\n\n  this.sent = false;\n}\nemitter.mixin(SnapshotRequest);\n\nSnapshotRequest.prototype.send = function() {\n  if (!this.connection.canSend) {\n    return;\n  }\n\n  this.connection.send(this._message());\n  this.sent = true;\n};\n\nSnapshotRequest.prototype._onConnectionStateChanged = function() {\n  if (this.connection.canSend) {\n    if (!this.sent) this.send();\n  } else {\n    // If the connection can't send, then we've had a disconnection, and even if we've already sent\n    // the request previously, we need to re-send it over this reconnected client, so reset the\n    // sent flag to false.\n    this.sent = false;\n  }\n};\n\nSnapshotRequest.prototype._handleResponse = function(error, message) {\n  this.emit('ready');\n\n  if (error) {\n    return this.callback(error);\n  }\n\n  var metadata = message.meta ? message.meta : null;\n  var snapshot = new Snapshot(this.id, message.v, message.type, message.data, metadata);\n\n  this.callback(null, snapshot);\n};\n","var SnapshotRequest = require('./snapshot-request');\nvar util = require('../../util');\nvar ACTIONS = require('../../message-actions').ACTIONS;\n\nmodule.exports = SnapshotVersionRequest;\n\nfunction SnapshotVersionRequest(connection, requestId, collection, id, version, callback) {\n  SnapshotRequest.call(this, connection, requestId, collection, id, callback);\n\n  if (!util.isValidVersion(version)) {\n    throw new Error('Snapshot version must be a positive integer or null');\n  }\n\n  this.version = version;\n}\n\nSnapshotVersionRequest.prototype = Object.create(SnapshotRequest.prototype);\n\nSnapshotVersionRequest.prototype._message = function() {\n  return {\n    a: ACTIONS.snapshotFetch,\n    id: this.requestId,\n    c: this.collection,\n    d: this.id,\n    v: this.version\n  };\n};\n","var SnapshotRequest = require('./snapshot-request');\nvar util = require('../../util');\nvar ACTIONS = require('../../message-actions').ACTIONS;\n\nmodule.exports = SnapshotTimestampRequest;\n\nfunction SnapshotTimestampRequest(connection, requestId, collection, id, timestamp, callback) {\n  SnapshotRequest.call(this, connection, requestId, collection, id, callback);\n\n  if (!util.isValidTimestamp(timestamp)) {\n    throw new Error('Snapshot timestamp must be a positive integer or null');\n  }\n\n  this.timestamp = timestamp;\n}\n\nSnapshotTimestampRequest.prototype = Object.create(SnapshotRequest.prototype);\n\nSnapshotTimestampRequest.prototype._message = function() {\n  return {\n    a: ACTIONS.snapshotFetchByTimestamp,\n    id: this.requestId,\n    c: this.collection,\n    d: this.id,\n    ts: this.timestamp\n  };\n};\n","var util = require('../../util');\nvar EventEmitter = require('events').EventEmitter;\n\nvar EVENTS = [\n  'create',\n  'del',\n  'destroy',\n  'load',\n  'op'\n];\n\nmodule.exports = DocPresenceEmitter;\n\nfunction DocPresenceEmitter() {\n  this._docs = Object.create(null);\n  this._forwarders = Object.create(null);\n  this._emitters = Object.create(null);\n}\n\nDocPresenceEmitter.prototype.addEventListener = function(doc, event, listener) {\n  this._registerDoc(doc);\n  var emitter = util.dig(this._emitters, doc.collection, doc.id);\n  emitter.on(event, listener);\n};\n\nDocPresenceEmitter.prototype.removeEventListener = function(doc, event, listener) {\n  var emitter = util.dig(this._emitters, doc.collection, doc.id);\n  if (!emitter) return;\n  emitter.off(event, listener);\n  // We'll always have at least one, because of the destroy listener\n  if (emitter._eventsCount === 1) this._unregisterDoc(doc);\n};\n\nDocPresenceEmitter.prototype._registerDoc = function(doc) {\n  var alreadyRegistered = true;\n  util.digOrCreate(this._docs, doc.collection, doc.id, function() {\n    alreadyRegistered = false;\n    return doc;\n  });\n\n  if (alreadyRegistered) return;\n\n  var emitter = util.digOrCreate(this._emitters, doc.collection, doc.id, function() {\n    var e = new EventEmitter();\n    // Set a high limit to avoid unnecessary warnings, but still\n    // retain some degree of memory leak detection\n    e.setMaxListeners(1000);\n    return e;\n  });\n\n  var self = this;\n  EVENTS.forEach(function(event) {\n    var forwarder = util.digOrCreate(self._forwarders, doc.collection, doc.id, event, function() {\n      return emitter.emit.bind(emitter, event);\n    });\n\n    doc.on(event, forwarder);\n  });\n\n  this.addEventListener(doc, 'destroy', this._unregisterDoc.bind(this, doc));\n};\n\nDocPresenceEmitter.prototype._unregisterDoc = function(doc) {\n  var forwarders = util.dig(this._forwarders, doc.collection, doc.id);\n  for (var event in forwarders) {\n    doc.off(event, forwarders[event]);\n  }\n\n  var emitter = util.dig(this._emitters, doc.collection, doc.id);\n  emitter.removeAllListeners();\n\n  util.digAndRemove(this._forwarders, doc.collection, doc.id);\n  util.digAndRemove(this._emitters, doc.collection, doc.id);\n  util.digAndRemove(this._docs, doc.collection, doc.id);\n};\n","module.exports = {\n  major: 1,\n  minor: 2,\n  checkAtLeast: checkAtLeast\n};\n\nfunction checkAtLeast(toCheck, checkAgainst) {\n  toCheck = normalizedProtocol(toCheck);\n  checkAgainst = normalizedProtocol(checkAgainst);\n  if (toCheck.major > checkAgainst.major) return true;\n  return toCheck.major === checkAgainst.major &&\n    toCheck.minor >= checkAgainst.minor;\n}\n\nfunction normalizedProtocol(protocol) {\n  if (typeof protocol === 'string') {\n    var segments = protocol.split('.');\n    protocol = {\n      major: segments[0],\n      minor: segments[1]\n    };\n  }\n\n  return {\n    major: +(protocol.protocol || protocol.major || 0),\n    minor: +(protocol.protocolMinor || protocol.minor || 0)\n  };\n}\n","var Doc = require('./doc');\nvar Query = require('./query');\nvar Presence = require('./presence/presence');\nvar DocPresence = require('./presence/doc-presence');\nvar SnapshotVersionRequest = require('./snapshot-request/snapshot-version-request');\nvar SnapshotTimestampRequest = require('./snapshot-request/snapshot-timestamp-request');\nvar emitter = require('../emitter');\nvar ShareDBError = require('../error');\nvar ACTIONS = require('../message-actions').ACTIONS;\nvar types = require('../types');\nvar util = require('../util');\nvar logger = require('../logger');\nvar DocPresenceEmitter = require('./presence/doc-presence-emitter');\nvar protocol = require('../protocol');\n\nvar ERROR_CODE = ShareDBError.CODES;\n\nfunction connectionState(socket) {\n  if (socket.readyState === 0 || socket.readyState === 1) return 'connecting';\n  return 'disconnected';\n}\n\n/**\n * Handles communication with the sharejs server and provides queries and\n * documents.\n *\n * We create a connection with a socket object\n *   connection = new sharejs.Connection(sockset)\n * The socket may be any object handling the websocket protocol. See the\n * documentation of bindToSocket() for details. We then wait for the connection\n * to connect\n *   connection.on('connected', ...)\n * and are finally able to work with shared documents\n *   connection.get('food', 'steak') // Doc\n *\n * @param socket @see bindToSocket\n */\nmodule.exports = Connection;\nfunction Connection(socket) {\n  emitter.EventEmitter.call(this);\n\n  // Map of collection -> id -> doc object for created documents.\n  // (created documents MUST BE UNIQUE)\n  this.collections = Object.create(null);\n\n  // Each query and snapshot request is created with an id that the server uses when it sends us\n  // info about the request (updates, etc)\n  this.nextQueryId = 1;\n  this.nextSnapshotRequestId = 1;\n\n  // Map from query ID -> query object.\n  this.queries = Object.create(null);\n\n  // Maps from channel -> presence objects\n  this._presences = Object.create(null);\n  this._docPresenceEmitter = new DocPresenceEmitter();\n\n  // Map from snapshot request ID -> snapshot request\n  this._snapshotRequests = Object.create(null);\n\n  // A unique message number for the given id\n  this.seq = 1;\n\n  // A unique message number for presence\n  this._presenceSeq = 1;\n\n  // Equals agent.src on the server\n  this.id = null;\n\n  // This direct reference from connection to agent is not used internal to\n  // ShareDB, but it is handy for server-side only user code that may cache\n  // state on the agent and read it in middleware\n  this.agent = null;\n\n  this.debug = false;\n\n  this.state = connectionState(socket);\n\n  this.bindToSocket(socket);\n}\nemitter.mixin(Connection);\n\n\n/**\n * Use socket to communicate with server\n *\n * Socket is an object that can handle the websocket protocol. This method\n * installs the onopen, onclose, onmessage and onerror handlers on the socket to\n * handle communication and sends messages by calling socket.send(message). The\n * sockets `readyState` property is used to determine the initaial state.\n *\n * @param socket Handles the websocket protocol\n * @param socket.readyState\n * @param socket.close\n * @param socket.send\n * @param socket.onopen\n * @param socket.onclose\n * @param socket.onmessage\n * @param socket.onerror\n */\nConnection.prototype.bindToSocket = function(socket) {\n  if (this.socket) {\n    this.socket.close();\n    this.socket.onmessage = null;\n    this.socket.onopen = null;\n    this.socket.onerror = null;\n    this.socket.onclose = null;\n  }\n\n  this.socket = socket;\n\n  // State of the connection. The corresponding events are emitted when this changes\n  //\n  // - 'connecting'   The connection is still being established, or we are still\n  //                    waiting on the server to send us the initialization message\n  // - 'connected'    The connection is open and we have connected to a server\n  //                    and recieved the initialization message\n  // - 'disconnected' Connection is closed, but it will reconnect automatically\n  // - 'closed'       The connection was closed by the client, and will not reconnect\n  // - 'stopped'      The connection was closed by the server, and will not reconnect\n  var newState = connectionState(socket);\n  this._setState(newState);\n\n  // This is a helper variable the document uses to see whether we're\n  // currently in a 'live' state. It is true if and only if we're connected\n  this.canSend = false;\n\n  var connection = this;\n\n  socket.onmessage = function(event) {\n    try {\n      var data = (typeof event.data === 'string') ?\n        JSON.parse(event.data) : event.data;\n    } catch (err) {\n      logger.warn('Failed to parse message', event);\n      return;\n    }\n\n    if (connection.debug) logger.info('RECV', JSON.stringify(data));\n\n    var request = {data: data};\n    connection.emit('receive', request);\n    if (!request.data) return;\n\n    try {\n      connection.handleMessage(request.data);\n    } catch (err) {\n      util.nextTick(function() {\n        connection.emit('error', err);\n      });\n    }\n  };\n\n  // If socket is already open, do handshake immediately.\n  if (socket.readyState === 1) {\n    connection._initializeHandshake();\n  }\n  socket.onopen = function() {\n    connection._setState('connecting');\n    connection._initializeHandshake();\n  };\n\n  socket.onerror = function(err) {\n    // This isn't the same as a regular error, because it will happen normally\n    // from time to time. Your connection should probably automatically\n    // reconnect anyway, but that should be triggered off onclose not onerror.\n    // (onclose happens when onerror gets called anyway).\n    connection.emit('connection error', err);\n  };\n\n  socket.onclose = function(reason) {\n    // node-browserchannel reason values:\n    //   'Closed' - The socket was manually closed by calling socket.close()\n    //   'Stopped by server' - The server sent the stop message to tell the client not to try connecting\n    //   'Request failed' - Server didn't respond to request (temporary, usually offline)\n    //   'Unknown session ID' - Server session for client is missing (temporary, will immediately reestablish)\n\n    if (reason === 'closed' || reason === 'Closed') {\n      connection._setState('closed', reason);\n    } else if (reason === 'stopped' || reason === 'Stopped by server') {\n      connection._setState('stopped', reason);\n    } else {\n      connection._setState('disconnected', reason);\n    }\n  };\n};\n\n/**\n * @param {object} message\n * @param {string} message.a action\n */\nConnection.prototype.handleMessage = function(message) {\n  var err = null;\n  if (message.error) {\n    err = wrapErrorData(message.error, message);\n    delete message.error;\n  }\n  // Switch on the message action. Most messages are for documents and are\n  // handled in the doc class.\n  switch (message.a) {\n    case ACTIONS.initLegacy:\n      // Client initialization packet\n      return this._handleLegacyInit(message);\n    case ACTIONS.handshake:\n      return this._handleHandshake(err, message);\n    case ACTIONS.queryFetch:\n      var query = this.queries[message.id];\n      if (query) query._handleFetch(err, message.data, message.extra);\n      return;\n    case ACTIONS.querySubscribe:\n      var query = this.queries[message.id];\n      if (query) query._handleSubscribe(err, message.data, message.extra);\n      return;\n    case ACTIONS.queryUnsubscribe:\n      // Queries are removed immediately on calls to destroy, so we ignore\n      // replies to query unsubscribes. Perhaps there should be a callback for\n      // destroy, but this is currently unimplemented\n      return;\n    case ACTIONS.queryUpdate:\n      // Query message. Pass this to the appropriate query object.\n      var query = this.queries[message.id];\n      if (!query) return;\n      if (err) return query._handleError(err);\n      if (message.diff) query._handleDiff(message.diff);\n      if (util.hasOwn(message, 'extra')) query._handleExtra(message.extra);\n      return;\n\n    case ACTIONS.bulkFetch:\n      return this._handleBulkMessage(err, message, '_handleFetch');\n    case ACTIONS.bulkSubscribe:\n    case ACTIONS.bulkUnsubscribe:\n      return this._handleBulkMessage(err, message, '_handleSubscribe');\n\n    case ACTIONS.snapshotFetch:\n    case ACTIONS.snapshotFetchByTimestamp:\n      return this._handleSnapshotFetch(err, message);\n\n    case ACTIONS.fetch:\n      var doc = this.getExisting(message.c, message.d);\n      if (doc) doc._handleFetch(err, message.data);\n      return;\n    case ACTIONS.subscribe:\n    case ACTIONS.unsubscribe:\n      var doc = this.getExisting(message.c, message.d);\n      if (doc) doc._handleSubscribe(err, message.data);\n      return;\n    case ACTIONS.op:\n      var doc = this.getExisting(message.c, message.d);\n      if (doc) doc._handleOp(err, message);\n      return;\n    case ACTIONS.presence:\n      return this._handlePresence(err, message);\n    case ACTIONS.presenceSubscribe:\n      return this._handlePresenceSubscribe(err, message);\n    case ACTIONS.presenceUnsubscribe:\n      return this._handlePresenceUnsubscribe(err, message);\n    case ACTIONS.presenceRequest:\n      return this._handlePresenceRequest(err, message);\n    case ACTIONS.pingPong:\n      return this._handlePingPong(err);\n\n    default:\n      logger.warn('Ignoring unrecognized message', message);\n  }\n};\n\nfunction wrapErrorData(errorData, fullMessage) {\n  // wrap in Error object so can be passed through event emitters\n  var err = new Error(errorData.message);\n  err.code = errorData.code;\n  if (fullMessage) {\n    // Add the message data to the error object for more context\n    err.data = fullMessage;\n  }\n  return err;\n}\n\nConnection.prototype._handleBulkMessage = function(err, message, method) {\n  if (message.data) {\n    for (var id in message.data) {\n      var dataForId = message.data[id];\n      var doc = this.getExisting(message.c, id);\n      if (doc) {\n        if (err) {\n          doc[method](err);\n        } else if (dataForId.error) {\n          // Bulk reply snapshot-specific errorr - see agent.js getMapResult\n          doc[method](wrapErrorData(dataForId.error));\n        } else {\n          doc[method](null, dataForId);\n        }\n      }\n    }\n  } else if (Array.isArray(message.b)) {\n    for (var i = 0; i < message.b.length; i++) {\n      var id = message.b[i];\n      var doc = this.getExisting(message.c, id);\n      if (doc) doc[method](err);\n    }\n  } else if (message.b) {\n    for (var id in message.b) {\n      var doc = this.getExisting(message.c, id);\n      if (doc) doc[method](err);\n    }\n  } else {\n    logger.error('Invalid bulk message', message);\n  }\n};\n\nConnection.prototype._reset = function() {\n  this.agent = null;\n};\n\n// Set the connection's state. The connection is basically a state machine.\nConnection.prototype._setState = function(newState, reason) {\n  if (this.state === newState) return;\n\n  // I made a state diagram. The only invalid transitions are getting to\n  // 'connecting' from anywhere other than 'disconnected' and getting to\n  // 'connected' from anywhere other than 'connecting'.\n  if (\n    (\n      newState === 'connecting' &&\n      this.state !== 'disconnected' &&\n      this.state !== 'stopped' &&\n      this.state !== 'closed'\n    ) || (\n      newState === 'connected' &&\n      this.state !== 'connecting'\n    )\n  ) {\n    var err = new ShareDBError(\n      ERROR_CODE.ERR_CONNECTION_STATE_TRANSITION_INVALID,\n      'Cannot transition directly from ' + this.state + ' to ' + newState\n    );\n    return this.emit('error', err);\n  }\n\n  this.state = newState;\n  this.canSend = (newState === 'connected');\n\n  if (\n    newState === 'disconnected' ||\n    newState === 'stopped' ||\n    newState === 'closed'\n  ) {\n    this._reset();\n  }\n\n  // Group subscribes together to help server make more efficient calls\n  this.startBulk();\n  // Emit the event to all queries\n  for (var id in this.queries) {\n    var query = this.queries[id];\n    query._onConnectionStateChanged();\n  }\n  // Emit the event to all documents\n  for (var collection in this.collections) {\n    var docs = this.collections[collection];\n    for (var id in docs) {\n      docs[id]._onConnectionStateChanged();\n    }\n  }\n  // Emit the event to all Presences\n  for (var channel in this._presences) {\n    this._presences[channel]._onConnectionStateChanged();\n  }\n  // Emit the event to all snapshots\n  for (var id in this._snapshotRequests) {\n    var snapshotRequest = this._snapshotRequests[id];\n    snapshotRequest._onConnectionStateChanged();\n  }\n  this.endBulk();\n\n  this.emit(newState, reason);\n  this.emit('state', newState, reason);\n};\n\nConnection.prototype.startBulk = function() {\n  if (!this.bulk) this.bulk = Object.create(null);\n};\n\nConnection.prototype.endBulk = function() {\n  if (this.bulk) {\n    for (var collection in this.bulk) {\n      var actions = this.bulk[collection];\n      this._sendBulk('f', collection, actions.f);\n      this._sendBulk('s', collection, actions.s);\n      this._sendBulk('u', collection, actions.u);\n    }\n  }\n  this.bulk = null;\n};\n\nConnection.prototype._sendBulk = function(action, collection, values) {\n  if (!values) return;\n  var ids = [];\n  var versions = Object.create(null);\n  var versionsCount = 0;\n  var versionId;\n  for (var id in values) {\n    var value = values[id];\n    if (value == null) {\n      ids.push(id);\n    } else {\n      versions[id] = value;\n      versionId = id;\n      versionsCount++;\n    }\n  }\n  if (ids.length === 1) {\n    var id = ids[0];\n    this.send({a: action, c: collection, d: id});\n  } else if (ids.length) {\n    this.send({a: 'b' + action, c: collection, b: ids});\n  }\n  if (versionsCount === 1) {\n    var version = versions[versionId];\n    this.send({a: action, c: collection, d: versionId, v: version});\n  } else if (versionsCount) {\n    this.send({a: 'b' + action, c: collection, b: versions});\n  }\n};\n\nConnection.prototype._sendActions = function(action, doc, version) {\n  // Ensure the doc is registered so that it receives the reply message\n  this._addDoc(doc);\n  if (this.bulk) {\n    // Bulk subscribe\n    var actions = this.bulk[doc.collection] || (this.bulk[doc.collection] = Object.create(null));\n    var versions = actions[action] || (actions[action] = Object.create(null));\n    var isDuplicate = util.hasOwn(versions, doc.id);\n    versions[doc.id] = version;\n    return isDuplicate;\n  } else {\n    // Send single doc subscribe message\n    var message = {a: action, c: doc.collection, d: doc.id, v: version};\n    this.send(message);\n  }\n};\n\nConnection.prototype.sendFetch = function(doc) {\n  return this._sendActions(ACTIONS.fetch, doc, doc.version);\n};\n\nConnection.prototype.sendSubscribe = function(doc) {\n  return this._sendActions(ACTIONS.subscribe, doc, doc.version);\n};\n\nConnection.prototype.sendUnsubscribe = function(doc) {\n  return this._sendActions(ACTIONS.unsubscribe, doc);\n};\n\nConnection.prototype.sendOp = function(doc, op) {\n  // Ensure the doc is registered so that it receives the reply message\n  this._addDoc(doc);\n  var message = {\n    a: ACTIONS.op,\n    c: doc.collection,\n    d: doc.id,\n    v: doc.version,\n    src: op.src,\n    seq: op.seq,\n    x: {}\n  };\n  if ('op' in op) message.op = op.op;\n  if (op.create) message.create = op.create;\n  if (op.del) message.del = op.del;\n  if (doc.submitSource) message.x.source = op.source;\n  this.send(message);\n};\n\n\n/**\n * Sends a message down the socket\n */\nConnection.prototype.send = function(message) {\n  if (this.debug) logger.info('SEND', JSON.stringify(message));\n\n  this.emit('send', message);\n  this.socket.send(JSON.stringify(message));\n};\n\nConnection.prototype.ping = function() {\n  if (!this.canSend) {\n    throw new ShareDBError(\n      ERROR_CODE.ERR_CANNOT_PING_OFFLINE,\n      'Socket must be CONNECTED to ping'\n    );\n  }\n\n  var message = {\n    a: ACTIONS.pingPong\n  };\n  this.send(message);\n};\n\n/**\n * Closes the socket and emits 'closed'\n */\nConnection.prototype.close = function() {\n  this.socket.close();\n};\n\nConnection.prototype.getExisting = function(collection, id) {\n  if (this.collections[collection]) return this.collections[collection][id];\n};\n\n\n/**\n * Get or create a document.\n *\n * @param collection\n * @param id\n * @return {Doc}\n */\nConnection.prototype.get = function(collection, id) {\n  var docs = this.collections[collection] ||\n    (this.collections[collection] = Object.create(null));\n\n  var doc = docs[id];\n  if (!doc) {\n    doc = docs[id] = new Doc(this, collection, id);\n    this.emit('doc', doc);\n  }\n\n  doc._wantsDestroy = false;\n  return doc;\n};\n\n\n/**\n * Remove document from this.collections\n *\n * @private\n */\nConnection.prototype._destroyDoc = function(doc) {\n  if (!doc._wantsDestroy) return;\n  util.digAndRemove(this.collections, doc.collection, doc.id);\n  doc.emit('destroy');\n};\n\nConnection.prototype._addDoc = function(doc) {\n  var docs = this.collections[doc.collection];\n  if (!docs) {\n    docs = this.collections[doc.collection] = Object.create(null);\n  }\n  if (docs[doc.id] !== doc) {\n    docs[doc.id] = doc;\n  }\n};\n\n// Helper for createFetchQuery and createSubscribeQuery, below.\nConnection.prototype._createQuery = function(action, collection, q, options, callback) {\n  var id = this.nextQueryId++;\n  var query = new Query(action, this, id, collection, q, options, callback);\n  this.queries[id] = query;\n  query.send();\n  return query;\n};\n\n// Internal function. Use query.destroy() to remove queries.\nConnection.prototype._destroyQuery = function(query) {\n  delete this.queries[query.id];\n};\n\n// The query options object can contain the following fields:\n//\n// db: Name of the db for the query. You can attach extraDbs to ShareDB and\n//   pick which one the query should hit using this parameter.\n\n// Create a fetch query. Fetch queries are only issued once, returning the\n// results directly into the callback.\n//\n// The callback should have the signature function(error, results, extra)\n// where results is a list of Doc objects.\nConnection.prototype.createFetchQuery = function(collection, q, options, callback) {\n  return this._createQuery(ACTIONS.queryFetch, collection, q, options, callback);\n};\n\n// Create a subscribe query. Subscribe queries return with the initial data\n// through the callback, then update themselves whenever the query result set\n// changes via their own event emitter.\n//\n// If present, the callback should have the signature function(error, results, extra)\n// where results is a list of Doc objects.\nConnection.prototype.createSubscribeQuery = function(collection, q, options, callback) {\n  return this._createQuery(ACTIONS.querySubscribe, collection, q, options, callback);\n};\n\nConnection.prototype.hasPending = function() {\n  return !!(\n    this._firstDoc(hasPending) ||\n    this._firstQuery(hasPending) ||\n    this._firstSnapshotRequest()\n  );\n};\nfunction hasPending(object) {\n  return object.hasPending();\n}\n\nConnection.prototype.hasWritePending = function() {\n  return !!this._firstDoc(hasWritePending);\n};\nfunction hasWritePending(object) {\n  return object.hasWritePending();\n}\n\nConnection.prototype.whenNothingPending = function(callback) {\n  var doc = this._firstDoc(hasPending);\n  if (doc) {\n    // If a document is found with a pending operation, wait for it to emit\n    // that nothing is pending anymore, and then recheck all documents again.\n    // We have to recheck all documents, just in case another mutation has\n    // been made in the meantime as a result of an event callback\n    doc.once('nothing pending', this._nothingPendingRetry(callback));\n    return;\n  }\n  var query = this._firstQuery(hasPending);\n  if (query) {\n    query.once('ready', this._nothingPendingRetry(callback));\n    return;\n  }\n  var snapshotRequest = this._firstSnapshotRequest();\n  if (snapshotRequest) {\n    snapshotRequest.once('ready', this._nothingPendingRetry(callback));\n    return;\n  }\n  // Call back when no pending operations\n  util.nextTick(callback);\n};\nConnection.prototype._nothingPendingRetry = function(callback) {\n  var connection = this;\n  return function() {\n    util.nextTick(function() {\n      connection.whenNothingPending(callback);\n    });\n  };\n};\n\nConnection.prototype._firstDoc = function(fn) {\n  for (var collection in this.collections) {\n    var docs = this.collections[collection];\n    for (var id in docs) {\n      var doc = docs[id];\n      if (fn(doc)) {\n        return doc;\n      }\n    }\n  }\n};\n\nConnection.prototype._firstQuery = function(fn) {\n  for (var id in this.queries) {\n    var query = this.queries[id];\n    if (fn(query)) {\n      return query;\n    }\n  }\n};\n\nConnection.prototype._firstSnapshotRequest = function() {\n  for (var id in this._snapshotRequests) {\n    return this._snapshotRequests[id];\n  }\n};\n\n/**\n * Fetch a read-only snapshot at a given version\n *\n * @param collection - the collection name of the snapshot\n * @param id - the ID of the snapshot\n * @param version (optional) - the version number to fetch. If null, the latest version is fetched.\n * @param callback - (error, snapshot) => void, where snapshot takes the following schema:\n *\n * {\n *   id: string;         // ID of the snapshot\n *   v: number;          // version number of the snapshot\n *   type: string;       // the OT type of the snapshot, or null if it doesn't exist or is deleted\n *   data: any;          // the snapshot\n * }\n *\n */\nConnection.prototype.fetchSnapshot = function(collection, id, version, callback) {\n  if (typeof version === 'function') {\n    callback = version;\n    version = null;\n  }\n\n  var requestId = this.nextSnapshotRequestId++;\n  var snapshotRequest = new SnapshotVersionRequest(this, requestId, collection, id, version, callback);\n  this._snapshotRequests[snapshotRequest.requestId] = snapshotRequest;\n  snapshotRequest.send();\n};\n\n/**\n * Fetch a read-only snapshot at a given timestamp\n *\n * @param collection - the collection name of the snapshot\n * @param id - the ID of the snapshot\n * @param timestamp (optional) - the timestamp to fetch. If null, the latest version is fetched.\n * @param callback - (error, snapshot) => void, where snapshot takes the following schema:\n *\n * {\n *   id: string;         // ID of the snapshot\n *   v: number;          // version number of the snapshot\n *   type: string;       // the OT type of the snapshot, or null if it doesn't exist or is deleted\n *   data: any;          // the snapshot\n * }\n *\n */\nConnection.prototype.fetchSnapshotByTimestamp = function(collection, id, timestamp, callback) {\n  if (typeof timestamp === 'function') {\n    callback = timestamp;\n    timestamp = null;\n  }\n\n  var requestId = this.nextSnapshotRequestId++;\n  var snapshotRequest = new SnapshotTimestampRequest(this, requestId, collection, id, timestamp, callback);\n  this._snapshotRequests[snapshotRequest.requestId] = snapshotRequest;\n  snapshotRequest.send();\n};\n\nConnection.prototype._handleSnapshotFetch = function(error, message) {\n  var snapshotRequest = this._snapshotRequests[message.id];\n  if (!snapshotRequest) return;\n  delete this._snapshotRequests[message.id];\n  snapshotRequest._handleResponse(error, message);\n};\n\nConnection.prototype._handleLegacyInit = function(message) {\n  // If the protocol is at least 1.1, we want to use the\n  // new handshake protocol. Let's send a handshake initialize, because\n  // we now know the server is ready. If we've already sent it, we'll\n  // just ignore the response anyway.\n  if (protocol.checkAtLeast(message, '1.1')) return this._initializeHandshake();\n  this._initialize(message);\n};\n\nConnection.prototype._initializeHandshake = function() {\n  this.send({\n    a: ACTIONS.handshake,\n    id: this.id,\n    protocol: protocol.major,\n    protocolMinor: protocol.minor\n  });\n};\n\nConnection.prototype._handleHandshake = function(error, message) {\n  if (error) return this.emit('error', error);\n  this._initialize(message);\n};\n\nConnection.prototype._handlePingPong = function(error) {\n  if (error) return this.emit('error', error);\n  this.emit('pong');\n};\n\nConnection.prototype._initialize = function(message) {\n  if (this.state !== 'connecting') return;\n\n  if (message.protocol !== protocol.major) {\n    return this.emit('error', new ShareDBError(\n      ERROR_CODE.ERR_PROTOCOL_VERSION_NOT_SUPPORTED,\n      'Unsupported protocol version: ' + message.protocol\n    ));\n  }\n  if (types.map[message.type] !== types.defaultType) {\n    return this.emit('error', new ShareDBError(\n      ERROR_CODE.ERR_DEFAULT_TYPE_MISMATCH,\n      message.type + ' does not match the server default type'\n    ));\n  }\n  if (typeof message.id !== 'string') {\n    return this.emit('error', new ShareDBError(\n      ERROR_CODE.ERR_CLIENT_ID_BADLY_FORMED,\n      'Client id must be a string'\n    ));\n  }\n  this.id = message.id;\n\n  this._setState('connected');\n};\n\nConnection.prototype.getPresence = function(channel) {\n  var connection = this;\n  var presence = util.digOrCreate(this._presences, channel, function() {\n    return new Presence(connection, channel);\n  });\n  presence._wantsDestroy = false;\n  return presence;\n};\n\nConnection.prototype.getDocPresence = function(collection, id) {\n  var channel = DocPresence.channel(collection, id);\n  var connection = this;\n  var presence = util.digOrCreate(this._presences, channel, function() {\n    return new DocPresence(connection, collection, id);\n  });\n  presence._wantsDestroy = false;\n  return presence;\n};\n\nConnection.prototype._sendPresenceAction = function(action, seq, presence) {\n  // Ensure the presence is registered so that it receives the reply message\n  this._addPresence(presence);\n  var message = {a: action, ch: presence.channel, seq: seq};\n  this.send(message);\n  return message.seq;\n};\n\nConnection.prototype._addPresence = function(presence) {\n  util.digOrCreate(this._presences, presence.channel, function() {\n    return presence;\n  });\n};\n\nConnection.prototype._requestRemotePresence = function(channel) {\n  this.send({a: ACTIONS.presenceRequest, ch: channel});\n};\n\nConnection.prototype._handlePresenceSubscribe = function(error, message) {\n  var presence = util.dig(this._presences, message.ch);\n  if (presence) presence._handleSubscribe(error, message.seq);\n};\n\nConnection.prototype._handlePresenceUnsubscribe = function(error, message) {\n  var presence = util.dig(this._presences, message.ch);\n  if (presence) presence._handleUnsubscribe(error, message.seq);\n};\n\nConnection.prototype._handlePresence = function(error, message) {\n  var presence = util.dig(this._presences, message.ch);\n  if (presence) presence._receiveUpdate(error, message);\n};\n\nConnection.prototype._handlePresenceRequest = function(error, message) {\n  var presence = util.dig(this._presences, message.ch);\n  if (presence) presence._broadcastAllLocalPresence(error, message);\n};\n","exports.Connection = require('./connection');\nexports.Doc = require('./doc');\nexports.Error = require('../error');\nexports.Query = require('./query');\nexports.types = require('../types');\nexports.logger = require('../logger');\n","/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int|Object} [cursor_pos] Edit position in text1 or object with more info\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos, _fix_unicode) {\n  // Check for equality\n  if (text1 === text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  if (cursor_pos != null) {\n    var editdiff = find_cursor_edit_diff(text1, text2, cursor_pos);\n    if (editdiff) {\n      return editdiff;\n    }\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs, _fix_unicode);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i !== -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [\n      [DIFF_INSERT, longtext.substring(0, i)],\n      [DIFF_EQUAL, shorttext],\n      [DIFF_INSERT, longtext.substring(i + shorttext.length)]\n    ];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length === 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n};\n\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (delta % 2 !== 0);\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 === -d || (k1 !== d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (\n        x1 < text1_length && y1 < text2_length &&\n        text1.charAt(x1) === text2.charAt(y1)\n      ) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] !== -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 === -d || (k2 !== d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (\n        x2 < text1_length && y2 < text2_length &&\n        text1.charAt(text1_length - x2 - 1) === text2.charAt(text2_length - y2 - 1)\n      ) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] !== -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n};\n\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n};\n\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) !== text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(pointerstart, pointermid) ==\n      text2.substring(pointerstart, pointermid)\n    ) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_start(text1.charCodeAt(pointermid - 1))) {\n    pointermid--;\n  }\n\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.slice(-1) !== text2.slice(-1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n      text2.substring(text2.length - pointermid, text2.length - pointerend)\n    ) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_end(text1.charCodeAt(text1.length - pointermid))) {\n    pointermid--;\n  }\n\n  return pointermid;\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null;  // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) !== -1) {\n      var prefixLength = diff_commonPrefix(\n        longtext.substring(i), shorttext.substring(j));\n      var suffixLength = diff_commonSuffix(\n        longtext.substring(0, i), shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(\n          j - suffixLength, j) + shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [\n        best_longtext_a, best_longtext_b,\n        best_shorttext_a, best_shorttext_b, best_common\n      ];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n * @param {boolean} fix_unicode Whether to normalize to a unicode-correct diff\n */\nfunction diff_cleanupMerge(diffs, fix_unicode) {\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n      diffs.splice(pointer, 1);\n      continue;\n    }\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        var previous_equality = pointer - count_insert - count_delete - 1;\n        if (fix_unicode) {\n          // prevent splitting of unicode surrogate pairs.  when fix_unicode is true,\n          // we assume that the old and new text in the diff are complete and correct\n          // unicode-encoded JS strings, but the tuple boundaries may fall between\n          // surrogate pairs.  we fix this by shaving off stray surrogates from the end\n          // of the previous equality and the beginning of this equality.  this may create\n          // empty equalities or a common prefix or suffix.  for example, if AB and AC are\n          // emojis, `[[0, 'A'], [-1, 'BA'], [0, 'C']]` would turn into deleting 'ABAC' and\n          // inserting 'AC', and then the common suffix 'AC' will be eliminated.  in this\n          // particular case, both equalities go away, we absorb any previous inequalities,\n          // and we keep scanning for the next equality before rewriting the tuples.\n          if (previous_equality >= 0 && ends_with_pair_start(diffs[previous_equality][1])) {\n            var stray = diffs[previous_equality][1].slice(-1);\n            diffs[previous_equality][1] = diffs[previous_equality][1].slice(0, -1);\n            text_delete = stray + text_delete;\n            text_insert = stray + text_insert;\n            if (!diffs[previous_equality][1]) {\n              // emptied out previous equality, so delete it and include previous delete/insert\n              diffs.splice(previous_equality, 1);\n              pointer--;\n              var k = previous_equality - 1;\n              if (diffs[k] && diffs[k][0] === DIFF_INSERT) {\n                count_insert++;\n                text_insert = diffs[k][1] + text_insert;\n                k--;\n              }\n              if (diffs[k] && diffs[k][0] === DIFF_DELETE) {\n                count_delete++;\n                text_delete = diffs[k][1] + text_delete;\n                k--;\n              }\n              previous_equality = k;\n            }\n          }\n          if (starts_with_pair_end(diffs[pointer][1])) {\n            var stray = diffs[pointer][1].charAt(0);\n            diffs[pointer][1] = diffs[pointer][1].slice(1);\n            text_delete += stray;\n            text_insert += stray;\n          }\n        }\n        if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n          // for empty equality not at end, wait for next equality\n          diffs.splice(pointer, 1);\n          break;\n        }\n        if (text_delete.length > 0 || text_insert.length > 0) {\n          // note that diff_commonPrefix and diff_commonSuffix are unicode-aware\n          if (text_delete.length > 0 && text_insert.length > 0) {\n            // Factor out any common prefixes.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if (previous_equality >= 0) {\n                diffs[previous_equality][1] += text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, [DIFF_EQUAL, text_insert.substring(0, commonlength)]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixes.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] =\n                text_insert.substring(text_insert.length - commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length - commonlength);\n              text_delete = text_delete.substring(0, text_delete.length - commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          var n = count_insert + count_delete;\n          if (text_delete.length === 0 && text_insert.length === 0) {\n            diffs.splice(pointer - n, n);\n            pointer = pointer - n;\n          } else if (text_delete.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_INSERT, text_insert]);\n            pointer = pointer - n + 1;\n          } else if (text_insert.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_DELETE, text_delete]);\n            pointer = pointer - n + 1;\n          } else {\n            diffs.splice(pointer - n, n, [DIFF_DELETE, text_delete], [DIFF_INSERT, text_insert]);\n            pointer = pointer - n + 2;\n          }\n        }\n        if (pointer !== 0 && diffs[pointer - 1][0] === DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] === DIFF_EQUAL &&\n      diffs[pointer + 1][0] === DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n        diffs[pointer - 1][1].length) === diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n          diffs[pointer][1].substring(0, diffs[pointer][1].length -\n            diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n        diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n          diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n          diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs, fix_unicode);\n  }\n};\n\nfunction is_surrogate_pair_start(charCode) {\n  return charCode >= 0xD800 && charCode <= 0xDBFF;\n}\n\nfunction is_surrogate_pair_end(charCode) {\n  return charCode >= 0xDC00 && charCode <= 0xDFFF;\n}\n\nfunction starts_with_pair_end(str) {\n  return is_surrogate_pair_end(str.charCodeAt(0));\n}\n\nfunction ends_with_pair_start(str) {\n  return is_surrogate_pair_start(str.charCodeAt(str.length - 1));\n}\n\nfunction remove_empty_tuples(tuples) {\n  var ret = [];\n  for (var i = 0; i < tuples.length; i++) {\n    if (tuples[i][1].length > 0) {\n      ret.push(tuples[i]);\n    }\n  }\n  return ret;\n}\n\nfunction make_edit_splice(before, oldMiddle, newMiddle, after) {\n  if (ends_with_pair_start(before) || starts_with_pair_end(after)) {\n    return null;\n  }\n  return remove_empty_tuples([\n    [DIFF_EQUAL, before],\n    [DIFF_DELETE, oldMiddle],\n    [DIFF_INSERT, newMiddle],\n    [DIFF_EQUAL, after]\n  ]);\n}\n\nfunction find_cursor_edit_diff(oldText, newText, cursor_pos) {\n  // note: this runs after equality check has ruled out exact equality\n  var oldRange = typeof cursor_pos === 'number' ?\n    { index: cursor_pos, length: 0 } : cursor_pos.oldRange;\n  var newRange = typeof cursor_pos === 'number' ?\n    null : cursor_pos.newRange;\n  // take into account the old and new selection to generate the best diff\n  // possible for a text edit.  for example, a text change from \"xxx\" to \"xx\"\n  // could be a delete or forwards-delete of any one of the x's, or the\n  // result of selecting two of the x's and typing \"x\".\n  var oldLength = oldText.length;\n  var newLength = newText.length;\n  if (oldRange.length === 0 && (newRange === null || newRange.length === 0)) {\n    // see if we have an insert or delete before or after cursor\n    var oldCursor = oldRange.index;\n    var oldBefore = oldText.slice(0, oldCursor);\n    var oldAfter = oldText.slice(oldCursor);\n    var maybeNewCursor = newRange ? newRange.index : null;\n    editBefore: {\n      // is this an insert or delete right before oldCursor?\n      var newCursor = oldCursor + newLength - oldLength;\n      if (maybeNewCursor !== null && maybeNewCursor !== newCursor) {\n        break editBefore;\n      }\n      if (newCursor < 0 || newCursor > newLength) {\n        break editBefore;\n      }\n      var newBefore = newText.slice(0, newCursor);\n      var newAfter = newText.slice(newCursor);\n      if (newAfter !== oldAfter) {\n        break editBefore;\n      }\n      var prefixLength = Math.min(oldCursor, newCursor);\n      var oldPrefix = oldBefore.slice(0, prefixLength);\n      var newPrefix = newBefore.slice(0, prefixLength);\n      if (oldPrefix !== newPrefix) {\n        break editBefore;\n      }\n      var oldMiddle = oldBefore.slice(prefixLength);\n      var newMiddle = newBefore.slice(prefixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldAfter);\n    }\n    editAfter: {\n      // is this an insert or delete right after oldCursor?\n      if (maybeNewCursor !== null && maybeNewCursor !== oldCursor) {\n        break editAfter;\n      }\n      var cursor = oldCursor;\n      var newBefore = newText.slice(0, cursor);\n      var newAfter = newText.slice(cursor);\n      if (newBefore !== oldBefore) {\n        break editAfter;\n      }\n      var suffixLength = Math.min(oldLength - cursor, newLength - cursor);\n      var oldSuffix = oldAfter.slice(oldAfter.length - suffixLength);\n      var newSuffix = newAfter.slice(newAfter.length - suffixLength);\n      if (oldSuffix !== newSuffix) {\n        break editAfter;\n      }\n      var oldMiddle = oldAfter.slice(0, oldAfter.length - suffixLength);\n      var newMiddle = newAfter.slice(0, newAfter.length - suffixLength);\n      return make_edit_splice(oldBefore, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n  if (oldRange.length > 0 && newRange && newRange.length === 0) {\n    replaceRange: {\n      // see if diff could be a splice of the old selection range\n      var oldPrefix = oldText.slice(0, oldRange.index);\n      var oldSuffix = oldText.slice(oldRange.index + oldRange.length);\n      var prefixLength = oldPrefix.length;\n      var suffixLength = oldSuffix.length;\n      if (newLength < prefixLength + suffixLength) {\n        break replaceRange;\n      }\n      var newPrefix = newText.slice(0, prefixLength);\n      var newSuffix = newText.slice(newLength - suffixLength);\n      if (oldPrefix !== newPrefix || oldSuffix !== newSuffix) {\n        break replaceRange;\n      }\n      var oldMiddle = oldText.slice(prefixLength, oldLength - suffixLength);\n      var newMiddle = newText.slice(prefixLength, newLength - suffixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n\n  return null;\n}\n\nfunction diff(text1, text2, cursor_pos) {\n  // only pass fix_unicode=true at the top level, not when diff_main is\n  // recursively invoked\n  return diff_main(text1, text2, cursor_pos, true);\n}\n\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lodash_clonedeep_1 = __importDefault(require(\"lodash.clonedeep\"));\nvar lodash_isequal_1 = __importDefault(require(\"lodash.isequal\"));\nvar AttributeMap;\n(function (AttributeMap) {\n    function compose(a, b, keepNull) {\n        if (a === void 0) { a = {}; }\n        if (b === void 0) { b = {}; }\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        var attributes = lodash_clonedeep_1.default(b);\n        if (!keepNull) {\n            attributes = Object.keys(attributes).reduce(function (copy, key) {\n                if (attributes[key] != null) {\n                    copy[key] = attributes[key];\n                }\n                return copy;\n            }, {});\n        }\n        for (var key in a) {\n            if (a[key] !== undefined && b[key] === undefined) {\n                attributes[key] = a[key];\n            }\n        }\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.compose = compose;\n    function diff(a, b) {\n        if (a === void 0) { a = {}; }\n        if (b === void 0) { b = {}; }\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        var attributes = Object.keys(a)\n            .concat(Object.keys(b))\n            .reduce(function (attrs, key) {\n            if (!lodash_isequal_1.default(a[key], b[key])) {\n                attrs[key] = b[key] === undefined ? null : b[key];\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.diff = diff;\n    function invert(attr, base) {\n        if (attr === void 0) { attr = {}; }\n        if (base === void 0) { base = {}; }\n        attr = attr || {};\n        var baseInverted = Object.keys(base).reduce(function (memo, key) {\n            if (base[key] !== attr[key] && attr[key] !== undefined) {\n                memo[key] = base[key];\n            }\n            return memo;\n        }, {});\n        return Object.keys(attr).reduce(function (memo, key) {\n            if (attr[key] !== base[key] && base[key] === undefined) {\n                memo[key] = null;\n            }\n            return memo;\n        }, baseInverted);\n    }\n    AttributeMap.invert = invert;\n    function transform(a, b, priority) {\n        if (priority === void 0) { priority = false; }\n        if (typeof a !== 'object') {\n            return b;\n        }\n        if (typeof b !== 'object') {\n            return undefined;\n        }\n        if (!priority) {\n            return b; // b simply overwrites us without priority\n        }\n        var attributes = Object.keys(b).reduce(function (attrs, key) {\n            if (a[key] === undefined) {\n                attrs[key] = b[key]; // null is a valid value\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.transform = transform;\n})(AttributeMap || (AttributeMap = {}));\nexports.default = AttributeMap;\n//# sourceMappingURL=AttributeMap.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Op_1 = __importDefault(require(\"./Op\"));\nvar Iterator = /** @class */ (function () {\n    function Iterator(ops) {\n        this.ops = ops;\n        this.index = 0;\n        this.offset = 0;\n    }\n    Iterator.prototype.hasNext = function () {\n        return this.peekLength() < Infinity;\n    };\n    Iterator.prototype.next = function (length) {\n        if (!length) {\n            length = Infinity;\n        }\n        var nextOp = this.ops[this.index];\n        if (nextOp) {\n            var offset = this.offset;\n            var opLength = Op_1.default.length(nextOp);\n            if (length >= opLength - offset) {\n                length = opLength - offset;\n                this.index += 1;\n                this.offset = 0;\n            }\n            else {\n                this.offset += length;\n            }\n            if (typeof nextOp.delete === 'number') {\n                return { delete: length };\n            }\n            else {\n                var retOp = {};\n                if (nextOp.attributes) {\n                    retOp.attributes = nextOp.attributes;\n                }\n                if (typeof nextOp.retain === 'number') {\n                    retOp.retain = length;\n                }\n                else if (typeof nextOp.insert === 'string') {\n                    retOp.insert = nextOp.insert.substr(offset, length);\n                }\n                else {\n                    // offset should === 0, length should === 1\n                    retOp.insert = nextOp.insert;\n                }\n                return retOp;\n            }\n        }\n        else {\n            return { retain: Infinity };\n        }\n    };\n    Iterator.prototype.peek = function () {\n        return this.ops[this.index];\n    };\n    Iterator.prototype.peekLength = function () {\n        if (this.ops[this.index]) {\n            // Should never return 0 if our index is being managed correctly\n            return Op_1.default.length(this.ops[this.index]) - this.offset;\n        }\n        else {\n            return Infinity;\n        }\n    };\n    Iterator.prototype.peekType = function () {\n        if (this.ops[this.index]) {\n            if (typeof this.ops[this.index].delete === 'number') {\n                return 'delete';\n            }\n            else if (typeof this.ops[this.index].retain === 'number') {\n                return 'retain';\n            }\n            else {\n                return 'insert';\n            }\n        }\n        return 'retain';\n    };\n    Iterator.prototype.rest = function () {\n        if (!this.hasNext()) {\n            return [];\n        }\n        else if (this.offset === 0) {\n            return this.ops.slice(this.index);\n        }\n        else {\n            var offset = this.offset;\n            var index = this.index;\n            var next = this.next();\n            var rest = this.ops.slice(this.index);\n            this.offset = offset;\n            this.index = index;\n            return [next].concat(rest);\n        }\n    };\n    return Iterator;\n}());\nexports.default = Iterator;\n//# sourceMappingURL=Iterator.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Iterator_1 = __importDefault(require(\"./Iterator\"));\nvar Op;\n(function (Op) {\n    function iterator(ops) {\n        return new Iterator_1.default(ops);\n    }\n    Op.iterator = iterator;\n    function length(op) {\n        if (typeof op.delete === 'number') {\n            return op.delete;\n        }\n        else if (typeof op.retain === 'number') {\n            return op.retain;\n        }\n        else {\n            return typeof op.insert === 'string' ? op.insert.length : 1;\n        }\n    }\n    Op.length = length;\n})(Op || (Op = {}));\nexports.default = Op;\n//# sourceMappingURL=Op.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar fast_diff_1 = __importDefault(require(\"fast-diff\"));\nvar lodash_clonedeep_1 = __importDefault(require(\"lodash.clonedeep\"));\nvar lodash_isequal_1 = __importDefault(require(\"lodash.isequal\"));\nvar AttributeMap_1 = __importDefault(require(\"./AttributeMap\"));\nvar Op_1 = __importDefault(require(\"./Op\"));\nvar NULL_CHARACTER = String.fromCharCode(0); // Placeholder char for embed in diff()\nvar Delta = /** @class */ (function () {\n    function Delta(ops) {\n        // Assume we are given a well formed ops\n        if (Array.isArray(ops)) {\n            this.ops = ops;\n        }\n        else if (ops != null && Array.isArray(ops.ops)) {\n            this.ops = ops.ops;\n        }\n        else {\n            this.ops = [];\n        }\n    }\n    Delta.prototype.insert = function (arg, attributes) {\n        var newOp = {};\n        if (typeof arg === 'string' && arg.length === 0) {\n            return this;\n        }\n        newOp.insert = arg;\n        if (attributes != null &&\n            typeof attributes === 'object' &&\n            Object.keys(attributes).length > 0) {\n            newOp.attributes = attributes;\n        }\n        return this.push(newOp);\n    };\n    Delta.prototype.delete = function (length) {\n        if (length <= 0) {\n            return this;\n        }\n        return this.push({ delete: length });\n    };\n    Delta.prototype.retain = function (length, attributes) {\n        if (length <= 0) {\n            return this;\n        }\n        var newOp = { retain: length };\n        if (attributes != null &&\n            typeof attributes === 'object' &&\n            Object.keys(attributes).length > 0) {\n            newOp.attributes = attributes;\n        }\n        return this.push(newOp);\n    };\n    Delta.prototype.push = function (newOp) {\n        var index = this.ops.length;\n        var lastOp = this.ops[index - 1];\n        newOp = lodash_clonedeep_1.default(newOp);\n        if (typeof lastOp === 'object') {\n            if (typeof newOp.delete === 'number' &&\n                typeof lastOp.delete === 'number') {\n                this.ops[index - 1] = { delete: lastOp.delete + newOp.delete };\n                return this;\n            }\n            // Since it does not matter if we insert before or after deleting at the same index,\n            // always prefer to insert first\n            if (typeof lastOp.delete === 'number' && newOp.insert != null) {\n                index -= 1;\n                lastOp = this.ops[index - 1];\n                if (typeof lastOp !== 'object') {\n                    this.ops.unshift(newOp);\n                    return this;\n                }\n            }\n            if (lodash_isequal_1.default(newOp.attributes, lastOp.attributes)) {\n                if (typeof newOp.insert === 'string' &&\n                    typeof lastOp.insert === 'string') {\n                    this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n                    if (typeof newOp.attributes === 'object') {\n                        this.ops[index - 1].attributes = newOp.attributes;\n                    }\n                    return this;\n                }\n                else if (typeof newOp.retain === 'number' &&\n                    typeof lastOp.retain === 'number') {\n                    this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n                    if (typeof newOp.attributes === 'object') {\n                        this.ops[index - 1].attributes = newOp.attributes;\n                    }\n                    return this;\n                }\n            }\n        }\n        if (index === this.ops.length) {\n            this.ops.push(newOp);\n        }\n        else {\n            this.ops.splice(index, 0, newOp);\n        }\n        return this;\n    };\n    Delta.prototype.chop = function () {\n        var lastOp = this.ops[this.ops.length - 1];\n        if (lastOp && lastOp.retain && !lastOp.attributes) {\n            this.ops.pop();\n        }\n        return this;\n    };\n    Delta.prototype.filter = function (predicate) {\n        return this.ops.filter(predicate);\n    };\n    Delta.prototype.forEach = function (predicate) {\n        this.ops.forEach(predicate);\n    };\n    Delta.prototype.map = function (predicate) {\n        return this.ops.map(predicate);\n    };\n    Delta.prototype.partition = function (predicate) {\n        var passed = [];\n        var failed = [];\n        this.forEach(function (op) {\n            var target = predicate(op) ? passed : failed;\n            target.push(op);\n        });\n        return [passed, failed];\n    };\n    Delta.prototype.reduce = function (predicate, initialValue) {\n        return this.ops.reduce(predicate, initialValue);\n    };\n    Delta.prototype.changeLength = function () {\n        return this.reduce(function (length, elem) {\n            if (elem.insert) {\n                return length + Op_1.default.length(elem);\n            }\n            else if (elem.delete) {\n                return length - elem.delete;\n            }\n            return length;\n        }, 0);\n    };\n    Delta.prototype.length = function () {\n        return this.reduce(function (length, elem) {\n            return length + Op_1.default.length(elem);\n        }, 0);\n    };\n    Delta.prototype.slice = function (start, end) {\n        if (start === void 0) { start = 0; }\n        if (end === void 0) { end = Infinity; }\n        var ops = [];\n        var iter = Op_1.default.iterator(this.ops);\n        var index = 0;\n        while (index < end && iter.hasNext()) {\n            var nextOp = void 0;\n            if (index < start) {\n                nextOp = iter.next(start - index);\n            }\n            else {\n                nextOp = iter.next(end - index);\n                ops.push(nextOp);\n            }\n            index += Op_1.default.length(nextOp);\n        }\n        return new Delta(ops);\n    };\n    Delta.prototype.compose = function (other) {\n        var thisIter = Op_1.default.iterator(this.ops);\n        var otherIter = Op_1.default.iterator(other.ops);\n        var ops = [];\n        var firstOther = otherIter.peek();\n        if (firstOther != null &&\n            typeof firstOther.retain === 'number' &&\n            firstOther.attributes == null) {\n            var firstLeft = firstOther.retain;\n            while (thisIter.peekType() === 'insert' &&\n                thisIter.peekLength() <= firstLeft) {\n                firstLeft -= thisIter.peekLength();\n                ops.push(thisIter.next());\n            }\n            if (firstOther.retain - firstLeft > 0) {\n                otherIter.next(firstOther.retain - firstLeft);\n            }\n        }\n        var delta = new Delta(ops);\n        while (thisIter.hasNext() || otherIter.hasNext()) {\n            if (otherIter.peekType() === 'insert') {\n                delta.push(otherIter.next());\n            }\n            else if (thisIter.peekType() === 'delete') {\n                delta.push(thisIter.next());\n            }\n            else {\n                var length_1 = Math.min(thisIter.peekLength(), otherIter.peekLength());\n                var thisOp = thisIter.next(length_1);\n                var otherOp = otherIter.next(length_1);\n                if (typeof otherOp.retain === 'number') {\n                    var newOp = {};\n                    if (typeof thisOp.retain === 'number') {\n                        newOp.retain = length_1;\n                    }\n                    else {\n                        newOp.insert = thisOp.insert;\n                    }\n                    // Preserve null when composing with a retain, otherwise remove it for inserts\n                    var attributes = AttributeMap_1.default.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n                    if (attributes) {\n                        newOp.attributes = attributes;\n                    }\n                    delta.push(newOp);\n                    // Optimization if rest of other is just retain\n                    if (!otherIter.hasNext() &&\n                        lodash_isequal_1.default(delta.ops[delta.ops.length - 1], newOp)) {\n                        var rest = new Delta(thisIter.rest());\n                        return delta.concat(rest).chop();\n                    }\n                    // Other op should be delete, we could be an insert or retain\n                    // Insert + delete cancels out\n                }\n                else if (typeof otherOp.delete === 'number' &&\n                    typeof thisOp.retain === 'number') {\n                    delta.push(otherOp);\n                }\n            }\n        }\n        return delta.chop();\n    };\n    Delta.prototype.concat = function (other) {\n        var delta = new Delta(this.ops.slice());\n        if (other.ops.length > 0) {\n            delta.push(other.ops[0]);\n            delta.ops = delta.ops.concat(other.ops.slice(1));\n        }\n        return delta;\n    };\n    Delta.prototype.diff = function (other, cursor) {\n        if (this.ops === other.ops) {\n            return new Delta();\n        }\n        var strings = [this, other].map(function (delta) {\n            return delta\n                .map(function (op) {\n                if (op.insert != null) {\n                    return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n                }\n                var prep = delta === other ? 'on' : 'with';\n                throw new Error('diff() called ' + prep + ' non-document');\n            })\n                .join('');\n        });\n        var retDelta = new Delta();\n        var diffResult = fast_diff_1.default(strings[0], strings[1], cursor);\n        var thisIter = Op_1.default.iterator(this.ops);\n        var otherIter = Op_1.default.iterator(other.ops);\n        diffResult.forEach(function (component) {\n            var length = component[1].length;\n            while (length > 0) {\n                var opLength = 0;\n                switch (component[0]) {\n                    case fast_diff_1.default.INSERT:\n                        opLength = Math.min(otherIter.peekLength(), length);\n                        retDelta.push(otherIter.next(opLength));\n                        break;\n                    case fast_diff_1.default.DELETE:\n                        opLength = Math.min(length, thisIter.peekLength());\n                        thisIter.next(opLength);\n                        retDelta.delete(opLength);\n                        break;\n                    case fast_diff_1.default.EQUAL:\n                        opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n                        var thisOp = thisIter.next(opLength);\n                        var otherOp = otherIter.next(opLength);\n                        if (lodash_isequal_1.default(thisOp.insert, otherOp.insert)) {\n                            retDelta.retain(opLength, AttributeMap_1.default.diff(thisOp.attributes, otherOp.attributes));\n                        }\n                        else {\n                            retDelta.push(otherOp).delete(opLength);\n                        }\n                        break;\n                }\n                length -= opLength;\n            }\n        });\n        return retDelta.chop();\n    };\n    Delta.prototype.eachLine = function (predicate, newline) {\n        if (newline === void 0) { newline = '\\n'; }\n        var iter = Op_1.default.iterator(this.ops);\n        var line = new Delta();\n        var i = 0;\n        while (iter.hasNext()) {\n            if (iter.peekType() !== 'insert') {\n                return;\n            }\n            var thisOp = iter.peek();\n            var start = Op_1.default.length(thisOp) - iter.peekLength();\n            var index = typeof thisOp.insert === 'string'\n                ? thisOp.insert.indexOf(newline, start) - start\n                : -1;\n            if (index < 0) {\n                line.push(iter.next());\n            }\n            else if (index > 0) {\n                line.push(iter.next(index));\n            }\n            else {\n                if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n                    return;\n                }\n                i += 1;\n                line = new Delta();\n            }\n        }\n        if (line.length() > 0) {\n            predicate(line, {}, i);\n        }\n    };\n    Delta.prototype.invert = function (base) {\n        var inverted = new Delta();\n        this.reduce(function (baseIndex, op) {\n            if (op.insert) {\n                inverted.delete(Op_1.default.length(op));\n            }\n            else if (op.retain && op.attributes == null) {\n                inverted.retain(op.retain);\n                return baseIndex + op.retain;\n            }\n            else if (op.delete || (op.retain && op.attributes)) {\n                var length_2 = (op.delete || op.retain);\n                var slice = base.slice(baseIndex, baseIndex + length_2);\n                slice.forEach(function (baseOp) {\n                    if (op.delete) {\n                        inverted.push(baseOp);\n                    }\n                    else if (op.retain && op.attributes) {\n                        inverted.retain(Op_1.default.length(baseOp), AttributeMap_1.default.invert(op.attributes, baseOp.attributes));\n                    }\n                });\n                return baseIndex + length_2;\n            }\n            return baseIndex;\n        }, 0);\n        return inverted.chop();\n    };\n    Delta.prototype.transform = function (arg, priority) {\n        if (priority === void 0) { priority = false; }\n        priority = !!priority;\n        if (typeof arg === 'number') {\n            return this.transformPosition(arg, priority);\n        }\n        var other = arg;\n        var thisIter = Op_1.default.iterator(this.ops);\n        var otherIter = Op_1.default.iterator(other.ops);\n        var delta = new Delta();\n        while (thisIter.hasNext() || otherIter.hasNext()) {\n            if (thisIter.peekType() === 'insert' &&\n                (priority || otherIter.peekType() !== 'insert')) {\n                delta.retain(Op_1.default.length(thisIter.next()));\n            }\n            else if (otherIter.peekType() === 'insert') {\n                delta.push(otherIter.next());\n            }\n            else {\n                var length_3 = Math.min(thisIter.peekLength(), otherIter.peekLength());\n                var thisOp = thisIter.next(length_3);\n                var otherOp = otherIter.next(length_3);\n                if (thisOp.delete) {\n                    // Our delete either makes their delete redundant or removes their retain\n                    continue;\n                }\n                else if (otherOp.delete) {\n                    delta.push(otherOp);\n                }\n                else {\n                    // We retain either their retain or insert\n                    delta.retain(length_3, AttributeMap_1.default.transform(thisOp.attributes, otherOp.attributes, priority));\n                }\n            }\n        }\n        return delta.chop();\n    };\n    Delta.prototype.transformPosition = function (index, priority) {\n        if (priority === void 0) { priority = false; }\n        priority = !!priority;\n        var thisIter = Op_1.default.iterator(this.ops);\n        var offset = 0;\n        while (thisIter.hasNext() && offset <= index) {\n            var length_4 = thisIter.peekLength();\n            var nextType = thisIter.peekType();\n            thisIter.next();\n            if (nextType === 'delete') {\n                index -= Math.min(length_4, index - offset);\n                continue;\n            }\n            else if (nextType === 'insert' && (offset < index || !priority)) {\n                index += length_4;\n            }\n            offset += length_4;\n        }\n        return index;\n    };\n    Delta.Op = Op_1.default;\n    Delta.AttributeMap = AttributeMap_1.default;\n    return Delta;\n}());\nmodule.exports = Delta;\n//# sourceMappingURL=Delta.js.map","var Delta = require('quill-delta');\n\n\nmodule.exports = {\n  Delta: Delta,\n  type: {\n    name: 'rich-text',\n    uri: 'http://sharejs.org/types/rich-text/v1',\n\n    create: function (initial) {\n      return new Delta(initial);\n    },\n\n    apply: function (snapshot, delta) {\n      snapshot = new Delta(snapshot);\n      delta = new Delta(delta);\n      return snapshot.compose(delta);\n    },\n\n    compose: function (delta1, delta2) {\n      delta1 = new Delta(delta1);\n      delta2 = new Delta(delta2);\n      return delta1.compose(delta2);\n    },\n\n    diff: function (delta1, delta2) {\n      delta1 = new Delta(delta1);\n      delta2 = new Delta(delta2);\n      return delta1.diff(delta2);\n    },\n\n    transform: function (delta1, delta2, side) {\n      delta1 = new Delta(delta1);\n      delta2 = new Delta(delta2);\n      // Fuzzer specs is in opposite order of delta interface\n      return delta2.transform(delta1, side === 'left');\n    },\n\n    transformCursor: function(cursor, delta, isOwnOp) {\n      return delta.transformPosition(cursor, !isOwnOp);\n    },\n\n    normalize: function(delta) {\n      return delta;   // quill-delta is already canonical\n    },\n\n    serialize: function(delta) {\n      return delta.ops;\n    },\n\n    deserialize: function(ops) {\n      return new Delta(ops);\n    },\n\n    transformPresence: function(range, op, isOwnOp) {\n      if (!range) {\n        return null;\n      }\n\n      const delta = new Delta(op);\n      const start = this.transformCursor(range.index, delta, isOwnOp);\n      const end = this.transformCursor(range.index + range.length, delta, isOwnOp);\n\n      return Object.assign({}, range, {\n        index: start,\n        length: end - start,\n      });\n    },\n  }\n};\n","module.exports = require('./lib/type');\n","// src/ot-main.js\r\nimport Quill from \"quill\";\r\nimport \"quill/dist/quill.snow.css\";\r\n\r\nimport ShareDB from \"sharedb/lib/client\";\r\nimport richText from \"rich-text\";\r\n\r\n// Enregistre le type OT \"rich-text\" côté client\r\nShareDB.types.register(richText.type);\r\n\r\n// Évite un double init si le module est injecté deux fois\r\nif (!window.__OT_V2_INIT__) {\r\n  window.__OT_V2_INIT__ = true;\r\n\r\n  const roomId = window.ROOM_ID;\r\n  if (!roomId) {\r\n    console.warn(\"[OT] Pas de ROOM_ID\");\r\n  } else {\r\n    // WebSocket vers le serveur OT dédié (ot-server.js)\r\n    const proto = location.protocol === \"https:\" ? \"wss\" : \"ws\";\r\n    const host = location.hostname;\r\n    const otPort = Number(import.meta.env?.VITE_OT_PORT) || 3001; // configurables via Vite env\r\n    const cid = Math.random().toString(36).slice(2, 8);\r\n    const socket = new WebSocket(`${proto}://${host}:${otPort}/?cid=${cid}`);\r\n    console.log(\"[OT] socket cid=\", cid, \"→\", `${proto}://${host}:${otPort}/`);\r\n\r\n    const connection = new ShareDB.Connection(socket);\r\n    const doc = connection.get(\"docs\", roomId);\r\n\r\n    // Quill\r\n    const quill = new Quill(\"#editor\", {\r\n      theme: \"snow\",\r\n      placeholder: \"Écris ici… (collab en direct)\",\r\n      modules: {\r\n        toolbar: [\r\n          [{ header: [1, 2, 3, false] }],\r\n          [\"bold\", \"italic\", \"underline\", \"strike\"],\r\n          [{ list: \"ordered\" }, { list: \"bullet\" }],\r\n          [\"link\", \"code-block\", \"blockquote\"],\r\n          [\"clean\"],\r\n        ],\r\n      },\r\n    });\r\n\r\n    let bound = false;\r\n\r\n    // On suppose que le serveur a pré-créé le doc (ensureOTDoc)\r\n    doc.subscribe((err) => {\r\n      if (err) {\r\n        console.error(\"[OT] subscribe error:\", err);\r\n        return;\r\n      }\r\n\r\n      // Snapshot initial\r\n      try {\r\n        quill.setContents(doc.data || [{ insert: \"\\n\" }], \"silent\");\r\n      } catch {\r\n        quill.setContents([{ insert: \"\\n\" }], \"silent\");\r\n      }\r\n\r\n      if (bound) return;\r\n      bound = true;\r\n\r\n      // Quill -> ShareDB (ops locales)\r\n      quill.on(\"text-change\", (delta, _old, source) => {\r\n        if (source !== \"user\") return;\r\n        doc.submitOp(delta, { source: quill }, (e) => {\r\n          if (e) console.warn(\"[OT] submitOp warn:\", e);\r\n        });\r\n      });\r\n\r\n      // ShareDB -> Quill (ops distantes)\r\n      doc.on(\"op\", (op, source) => {\r\n        if (source === quill) return; // ne rejoue pas nos propres ops\r\n        quill.updateContents(op, \"silent\"); // évite de re-déclencher text-change\r\n      });\r\n\r\n      console.log(\"[OT] prêt pour\", roomId, \"cid=\", cid);\r\n    });\r\n  }\r\n} else {\r\n  console.warn(\"[OT] déjà initialisé, on ignore.\");\r\n}\r\n"],"names":["require_ot_main","__commonJSMin","exports","module","freeGlobal","freeSelf","root","Symbol","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","getRawTag","value","isOwn","tag","unmasked","result","objectToString","nullTag","undefinedTag","baseGetTag","isObjectLike","isArray","isObject","type","identity","asyncTag","funcTag","genTag","proxyTag","isFunction","coreJsData","maskSrcKey","uid","isMasked","func","funcProto","funcToString","toSource","reRegExpChar","reIsHostCtor","reIsNative","baseIsNative","pattern","getValue","object","key","getNative","WeakMap","objectCreate","baseCreate","proto","apply","thisArg","args","copyArray","source","array","index","length","HOT_COUNT","HOT_SPAN","nativeNow","shortOut","count","lastCalled","stamp","remaining","constant","defineProperty","baseSetToString","string","setToString","arrayEach","iteratee","MAX_SAFE_INTEGER","reIsUint","isIndex","baseAssignValue","eq","other","assignValue","objValue","copyObject","props","customizer","isNew","newValue","nativeMax","overRest","start","transform","otherArgs","baseRest","isLength","isArrayLike","isIterateeCall","createAssigner","assigner","sources","guard","isPrototype","Ctor","baseTimes","n","argsTag","baseIsArguments","propertyIsEnumerable","isArguments","stubFalse","freeExports","freeModule","moduleExports","Buffer","nativeIsBuffer","isBuffer","arrayTag","boolTag","dateTag","errorTag","mapTag","numberTag","objectTag","regexpTag","setTag","stringTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","typedArrayTags","baseIsTypedArray","baseUnary","freeProcess","nodeUtil","types","nodeIsTypedArray","isTypedArray","arrayLikeKeys","inherited","isArr","isArg","isBuff","isType","skipIndexes","overArg","arg","nativeKeys","baseKeys","keys","nativeKeysIn","baseKeysIn","isProto","keysIn","nativeCreate","hashClear","hashDelete","HASH_UNDEFINED","hashGet","data","hashHas","hashSet","Hash","entries","entry","listCacheClear","assocIndexOf","arrayProto","splice","listCacheDelete","lastIndex","listCacheGet","listCacheHas","listCacheSet","ListCache","Map","mapCacheClear","isKeyable","getMapData","map","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","size","MapCache","arrayPush","values","offset","getPrototype","objectCtorString","isPlainObject","stackClear","stackDelete","stackGet","stackHas","LARGE_ARRAY_SIZE","stackSet","pairs","Stack","allocUnsafe","cloneBuffer","buffer","isDeep","arrayFilter","predicate","resIndex","stubArray","nativeGetSymbols","getSymbols","symbol","baseGetAllKeys","keysFunc","symbolsFunc","getAllKeys","DataView","Promise","Set","promiseTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ctorString","initCloneArray","Uint8Array","cloneArrayBuffer","arrayBuffer","cloneDataView","dataView","reFlags","cloneRegExp","regexp","symbolProto","symbolValueOf","cloneSymbol","cloneTypedArray","typedArray","symbolTag","initCloneByTag","initCloneObject","baseIsMap","nodeIsMap","isMap","baseIsSet","nodeIsSet","isSet","CLONE_DEEP_FLAG","cloneableTags","baseClone","bitmask","stack","isFunc","stacked","subValue","CLONE_SYMBOLS_FLAG","cloneDeep","setCacheAdd","setCacheHas","SetCache","arraySome","cacheHas","cache","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","equalArrays","equalFunc","isPartial","arrLength","othLength","arrStacked","othStacked","seen","arrValue","othValue","compared","othIndex","mapToArray","setToArray","set","equalByTag","convert","equalObjects","objProps","objLength","othProps","objStacked","skipCtor","objCtor","othCtor","baseIsEqualDeep","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","baseIsEqual","createBaseFor","fromRight","iterable","baseFor","assignMergeValue","isArrayLikeObject","safeGet","toPlainObject","baseMergeDeep","srcIndex","mergeFunc","srcValue","isCommon","isTyped","baseMerge","isEqual","merge","Scope","Scope2","Attributor","attrName","keyName","options","attributeBit","node","item","_node","ParchmentError","message","_Registry","bubble","parentNode","scroll","input","match2","blotClass","blot","query","scope","name","definitions","definition","isBlot","isAttr","tagName","Registry","match","prefix","ClassAttributor","ClassAttributor$1","camelize","parts","rest","part","StyleAttributor","StyleAttributor$1","AttributorStore","domNode","attribute","attributes","classes","styles","attr","target","AttributorStore$1","_ShadowBlot","rawValue","parent","def","ref","_context","replacement","_force","_mutations","wrapper","ShadowBlot","_LeafBlot","_domNode","_inclusive","LeafBlot","LeafBlot$1","LinkedList","nodes","next","cur","refNode","curNode","ret","inclusive","callback","startNode","curIndex","curLength","memo","makeAttachedBlot","found","child","_ParentBlot","err","childLength","criteria","descendants","lengthLeft","childIndex","done","childBlot","refBlot","refDomNode","targetParent","context","position","force","after","_length","split","mutations","addedNodes","removedNodes","mutation","a","b","ParentBlot","ParentBlot$1","obj1","obj2","prop","_InlineBlot","format","formats","InlineBlot","InlineBlot$1","_BlockBlot","BlockBlot","BlockBlot$1","_ContainerBlot","ContainerBlot","ContainerBlot$1","EmbedBlot","_scroll","EmbedBlot$1","OBSERVER_CONFIG","MAX_OPTIMIZE_ITERATIONS","_ScrollBlot","registry","mutationsMap","records","mark","markParent","optimize","i","grandChild","ScrollBlot","ScrollBlot$1","_TextBlot","TextBlot","TextBlot$1","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","diff_main","text1","text2","cursor_pos","cleanup","_fix_unicode","editdiff","find_cursor_edit_diff","commonlength","diff_commonPrefix","commonprefix","diff_commonSuffix","commonsuffix","diffs","diff_compute_","diff_cleanupMerge","diff_cleanupSemantic","longtext","shorttext","hm","diff_halfMatch_","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","diff_bisect_","text1_length","text2_length","max_d","v_offset","v_length","v1","v2","x","delta","front","k1start","k1end","k2start","k2end","d","k1","k1_offset","x1","y1","k2_offset","x2","diff_bisectSplit_","k2","y2","y","text1a","text2a","text1b","text2b","diffsb","pointermin","pointermax","pointermid","pointerstart","is_surrogate_pair_start","diff_commonOverlap_","text_length","best","pointerend","is_surrogate_pair_end","diff_halfMatchI_","seed","j","best_common","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","prefixLength","suffixLength","hm1","hm2","changes","equalities","equalitiesLength","lastequality","pointer","length_insertions1","length_deletions1","length_insertions2","length_deletions2","diff_cleanupSemanticLossless","deletion","insertion","overlap_length1","overlap_length2","nonAlphaNumericRegex_","whitespaceRegex_","linebreakRegex_","blanklineEndRegex_","blanklineStartRegex_","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","nonAlphaNumeric2","whitespace1","whitespace2","lineBreak1","lineBreak2","blankLine1","blankLine2","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","fix_unicode","count_delete","count_insert","text_delete","text_insert","previous_equality","ends_with_pair_start","stray","k","starts_with_pair_end","charCode","str","remove_empty_tuples","tuples","make_edit_splice","before","oldMiddle","newMiddle","oldText","newText","oldRange","newRange","oldLength","newLength","oldCursor","oldBefore","oldAfter","maybeNewCursor","editBefore","newCursor","newBefore","newAfter","oldPrefix","newPrefix","editAfter","cursor","oldSuffix","newSuffix","replaceRange","diff","diff_1","addMapEntry","pair","addSetEntry","arrayReduce","accumulator","initAccum","isHostObject","baseAssign","isFull","copySymbols","cloneMap","cloneFunc","cloneSet","AttributeMap_1","require$$0","require$$1","AttributeMap","compose","keepNull","copy","attrs","invert","base","baseInverted","priority","Op_1","Op","op","OpIterator","Iterator","ops","nextOp","opLength","retOp","require$$2","require$$3","require$$4","OpIterator_1","require$$5","NULL_CHARACTER","getEmbedTypeAndData","embedType","Delta","handler","newOp","lastOp","passed","failed","initialValue","elem","end","iter","thisIter","otherIter","firstOther","firstLeft","thisOp","otherOp","action","thisData","otherData","strings","prep","retDelta","diffResult","component","newline","line","inverted","baseIndex","baseOp","slice","opData","baseOpData","transformedData","nextType","Break","entityMap","escapeText","text","s","_Inline","self","selfIndex","otherIndex","__publicField","Text","Inline","NEWLINE_LENGTH","Block","blockDelta","lines","block","lineIndex","head","clone","BlockEmbed","blocks","filter","leaf","bubbleFormats","_Cursor","selection","range","prevTextBlot","prevTextLength","nextTextBlot","nextText","textNode","mergedTextBlot","newTextNode","remapOffset","Cursor","has","Events","EE","fn","once","addListener","emitter","event","listener","evt","clearEvent","EventEmitter","names","events","handlers","l","ee","listeners","a1","a2","a3","a4","a5","len","instances","levels","level","debug","method","_len","_key","namespace","ns","logger","newLevel","EVENTS","eventName","quill","Emitter","_len2","_key2","_len3","_key3","_ref","Range","Selection","native","triggeredByTyping","startOffset","endNode","endOffset","nativeRange","scrollLength","nextLine","side","rect","normalized","contains","positions","indexes","getPosition","leafOffset","lastRange","descendant","ASCII","Editor","normalizedDelta","normalizeDelta","deleteDelta","splitOpLines","isImplicitNewlinePrepended","isImplicitNewlineAppended","isInlineEmbed","prependedLength","addedLength","leaves","path","lineFormats","leafFormats","blots","combineFormats","lineOffset","lineLength","convertHTML","contents","change","embed","suffix","selectionInfo","oldDelta","textBlot","oldValue","CursorBlot","relativeSelectionInfo","shiftRange","convertListHTML","items","lastIndent","endTag","getListType","indent","previousType","isRoot","outerHTML","innerHTML","combined","merged","combinedValue","amount","Module","GUARD_TEXT","Embed","childNode","prevLength","Composition","_Theme","ModuleClass","Theme","getParentElement","element","getElementRect","scaleX","scaleY","paddingValueToInt","number","getScrollDistance","targetStart","targetEnd","scrollStart","scrollEnd","scrollPaddingStart","scrollPaddingEnd","scrollRectIntoView","targetRect","_a","_b","_c","_d","_e","document","current","isDocumentBody","bounding","style","scrollDistanceX","scrollDistanceY","scrollLeft","scrollTop","scrolledLeft","scrolledTop","MAX_REGISTER_ITERATIONS","CORE_FORMATS","createRegistryWithFormats","sourceRegistry","coreBlot","iterations","globalRegistry","Parchment.Registry","Parchment.ParentBlot","_Quill","limit","overwrite","container","expandConfig","html","scrollBlotName","Parchment.ScrollBlot","modify","className","overload","modifier","enabled","Parchment.Scope","bounds","containerBounds","delete1","applied","delete2","Parchment","Quill","resolveSelector","selector","expandModuleConfig","config","expanded","omitUndefinedValuesFromOptions","obj","containerOrSelector","theme","quillModuleDefaults","quillDefaults","themeModuleDefaults","themeDefaults","userModuleOptions","modules","modulesWithDefaults","_ref2","moduleClass","shift","lengthOrSource","pos","Container","isLine","isUpdatable","Scroll","e","first","last","renderBlocks","shouldInsertNewlineChar","insertInlineContents","newlineCharLength","lineEndIndex","refBlotOffset","renderBlock","blockEmbed","getLines","blotIndex","blotLength","currentBlockDelta","insert","splitted","blotName","_ref3","_ref4","inlineContents","AlignAttribute","AlignClass","AlignStyle","ColorAttributor","ColorClass","ColorStyle","BackgroundClass","BackgroundStyle","CodeBlockContainer","CodeBlock","Code","DirectionAttribute","DirectionClass","DirectionStyle","FontClass","FontStyleAttributor","FontStyle","SizeClass","SizeStyle","SHORTKEY","Keyboard","binding","keyBinding","normalize","singleBinding","matches","leafStart","offsetStart","leafEnd","offsetEnd","prefixText","suffixText","curContext","prev","curFormats","prevFormats","formatDelta","nextFormats","deleteRange","defaultOptions","makeFormatHandler","makeCodeBlockHandler","table","row","cell","tableSide","numLines","makeEmbedArrowHandler","makeTableArrowHandler","TAB","shiftKey","up","targetRow","targetCell","targetLine","firstFormats","lastFormats","_table","normalWeightRegexp","blockTagNames","isBlockElement","normalizeEmptyLines","doc","br","normalizeFontWeight","fragment","ignoreRegexp","idRegexp","indentRegexp","parseListItem","idMatch","id","indentMatch","typeRegexp","typeMatch","normalizeListItem","msoList","ignored","others","listItems","parsed","childListItems","ul","listItem","li","NORMALIZERS","msWord","googleDocs","normalizeExternalHTML","CLIPBOARD_CONFIG","matchText","matchNewline","matchBreak","matchBlot","matchAttributor","matchStyles","matchIndent","matchList","matchCodeBlock","matchTable","createMatchAlias","matchIgnore","ATTRIBUTE_ATTRIBUTORS","STYLE_ATTRIBUTORS","Clipboard","matcher","deltaEndsWith","nodeMatches","elementMatchers","textMatchers","traverse","paste","isCut","urlList","url","files","pastedDelta","applyFormat","newDelta","endText","isBetweenInlineElements","preNodes","isPre","childrenDelta","reducedDelta","language","composed","list","checkedAttr","nextSibling","_ref5","History","transformRange","dest","inverseDelta","changeDelta","undoDelta","undoRange","timestamp","transformStack","stackItem","getLastChangeIndex","remoteDelta","oldItem","endsWithNewlineChange","deleteLength","changeIndex","Uploader","uploads","file","promises","resolve","reader","images","update","image","INSERT_TYPES","Input","staticRange","getPlainTextFromInputEvent","isMac","TTL_FOR_VALID_SELECTION_CHANGE","canMoveCaretBeforeUINode","UINode","isRTL","IndentAttributor","normalizedValue","IndentClass","Blockquote","Header","ListContainer","ListItem","ui","listEventHandler","Bold","Italic","Link","sanitize","protocols","anchor","protocol","Script","Strike","Underline","Formula","formula","ATTRIBUTES","Image","Video","video","TokenAttributor","CodeToken","SyntaxCodeBlock","SyntaxCodeBlockContainer","highlight","forced","retain","codeBlock","BreakBlot","lib","majorVersion","Syntax","select","label","option","timer","nodeText","_TableCell","tableId","TableCell","TableRow","thisHead","thisTail","nextHead","nextTail","childFormats","TableBody","TableContainer","rows","maxColumns","max","column","body","Table","columns","old","Toolbar","addControls","selected","isActive","addButton","groups","controls","group","control","addSelect","align","alignLeftIcon","alignCenterIcon","alignRightIcon","alignJustifyIcon","backgroundIcon","blockquoteIcon","boldIcon","cleanIcon","codeIcon","colorIcon","directionLeftToRightIcon","directionRightToLeftIcon","formulaIcon","headerIcon","header2Icon","header3Icon","header4Icon","header5Icon","header6Icon","italicIcon","imageIcon","indentIcon","outdentIcon","linkIcon","listBulletIcon","listCheckIcon","listOrderedIcon","subscriptIcon","superscriptIcon","strikeIcon","tableIcon","underlineIcon","videoIcon","Icons","DropdownIcon","optionsCounter","toggleAriaAttribute","Picker","trigger","ColorPicker","colorLabel","IconPicker","icons","isScrollable","el","overflowY","Tooltip","boundsContainer","reference","left","top","rootBounds","height","verticalShift","ALIGNS","COLORS","FONTS","HEADERS","SIZES","BaseTheme","picker","buttons","button","selects","fillSelect","fileInput","BaseTooltip","mode","preview","extractVideoUrl","defaultValue","TOOLBAR_CONFIG","BubbleTooltip","lastLine","indexBounds","arrow","BubbleTheme","toolbar","SnowTooltip","link","LinkBlot","SnowTheme","_range","tooltip","Indent","List","InlineCode","R","ReflectApply","receiver","ReflectOwnKeys","ProcessEmitWarning","warning","NumberIsNaN","eventsModule","defaultMaxListeners","checkListener","_getMaxListeners","that","doError","er","arrayClone","_addListener","prepend","m","existing","w","onceWrapper","_onceWrap","state","wrapped","originalListener","spliceOne","_listeners","unwrap","evlistener","unwrapListeners","listenerCount","arr","reject","errorListener","resolver","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","flags","wrapListener","mixin","Constructor","SUPPORTED_METHODS","Logger","defaultMethods","overrides","logger_1","ShareDBError","code","error","bootstrapTransform_1","bootstrapTransform","transformComponent","checkValidOp","append","transformComponentX","right","destLeft","destRight","transformX","leftOp","rightOp","newRightOp","rightComponent","newLeftOp","nextC","r","text0Module","initial","strInject","s1","s2","checkValidComponent","c","snapshot","deleted","op1","op2","transformPosition","insertAfter","otherC","newC","intersectStart","intersectEnd","cIntersect","otherIntersect","invertComponent","json","subtypes","subtype","c_","op_","iop","convertFromText","o","convertToText","p","results","_yield","smallOp","pathMatches","p1","p2","ignoreLast","alen","blen","common","common2","cplength","otherCplength","oc","commonOperand","res","from","to","otherFrom","otherTo","json0","nextTick","triggerCallback","createNextTickTrigger","channel","_args","shams","sym","symObj","symVal","_","syms","descriptor","hasSymbols","esObjectAtoms","esErrors","_eval","syntax","uri","abs","floor","min","pow","round","_isNaN","$isNaN","sign","gOPD","$gOPD","gopd","$defineProperty","esDefineProperty","origSymbol","hasSymbolSham","Reflect_getPrototypeOf","$Object","Object_getPrototypeOf","ERROR_MESSAGE","toStr","funcType","concatty","slicy","arrLike","joiny","joiner","implementation","bound","binder","boundLength","boundArgs","Empty","functionBind","functionCall","functionApply","reflectApply","bind","$apply","$call","$reflectApply","actualApply","$TypeError","$actualApply","callBindApplyHelpers","callBind","hasProtoAccessor","desc","$getPrototypeOf","get","reflectGetProto","originalGetProto","getDunderProto","getProto","O","call","$hasOwn","hasown","undefined","$Error","$EvalError","$RangeError","$ReferenceError","$SyntaxError","require$$6","$URIError","require$$7","require$$8","require$$9","require$$10","require$$11","require$$12","require$$13","require$$14","$Function","getEvalledConstructor","expressionSyntax","require$$15","require$$16","throwTypeError","ThrowTypeError","require$$17","require$$18","$ObjectGPO","require$$19","$ReflectGPO","require$$20","require$$21","require$$22","needsEval","TypedArray","INTRINSICS","errorProto","doEval","gen","LEGACY_ALIASES","require$$23","hasOwn","require$$24","$concat","$spliceApply","$replace","$strSlice","$exec","rePropName","reEscapeChar","stringToPath","quote","subString","getBaseIntrinsic","allowMissing","intrinsicName","alias","getIntrinsic","intrinsicBaseName","intrinsic","intrinsicRealName","skipFurtherCaching","GetIntrinsic","callBindBasic","$indexOf","callBound","hasToStringTag","$toString","isStandardArguments","isLegacyArguments","supportsStandardArguments","isRegexMarker","throwRegexMarker","badStringifier","hasLastIndexDataProperty","regexClass","isRegex","safeRegexTest","regex","isFnRegex","fnToStr","getGeneratorFunc","GeneratorFunction","isGeneratorFunction","generatorFunc","badArrayLike","isCallableMarker","constructorRegex","isES6ClassFn","fnStr","tryFunctionObject","objectClass","fnClass","genClass","ddaClass","ddaClass2","ddaClass3","isIE68","isDDA","all","isCallable","strClass","forEachArray","iterator","forEachString","forEachObject","forEach","possibleTypedArrayNames","possibleNames","g","availableTypedArrays","out","defineDataProperty","property","nonEnumerable","nonWritable","nonConfigurable","loose","hasPropertyDescriptors","hasPropertyDescriptors_1","define","hasDescriptors","$floor","setFunctionLength","functionLengthIsConfigurable","functionLengthIsWritable","applyBind","originalFunction","adjustedLength","typedArrays","$slice","superProto","tryTypedArrays","getter","trySlices","whichTypedArray","isArgumentsObject","uncurryThis","f","BigIntSupported","SymbolSupported","ObjectToString","numberValue","stringValue","booleanValue","bigIntValue","symbolValue","checkBoxedPrimitive","prototypeValueOf","isPromise","isArrayBufferView","isDataView","isUint8Array","isUint8ClampedArray","isUint16Array","isUint32Array","isInt8Array","isInt16Array","isInt32Array","isFloat32Array","isFloat64Array","isBigInt64Array","isBigUint64Array","isMapToString","isSetToString","isWeakMapToString","isWeakMap","isWeakSetToString","isWeakSet","isArrayBufferToString","isArrayBuffer","isDataViewToString","SharedArrayBufferCopy","isSharedArrayBufferToString","isSharedArrayBuffer","isAsyncFunction","isMapIterator","isSetIterator","isGeneratorObject","isWebAssemblyCompiledModule","isNumberObject","isStringObject","isBooleanObject","isBigIntObject","isSymbolObject","isBoxedPrimitive","isAnyArrayBuffer","isBufferBrowser","inherits_browserModule","ctor","superCtor","TempCtor","getOwnPropertyDescriptors","descriptors","formatRegExp","isString","objects","inspect","isNull","msg","warned","deprecated","debugs","debugEnvRegex","define_process_env_default","debugEnv","pid","opts","ctx","stylizeNoColor","isBoolean","isUndefined","stylizeWithColor","formatValue","styleType","arrayToHash","hash","val","idx","recurseTimes","primitive","formatPrimitive","visibleKeys","isError","formatError","isRegExp","isDate","braces","output","formatArray","formatProperty","reduceToSingleString","simple","isNumber","ar","isNullOrUndefined","isSymbol","re","isPrimitive","pad","months","time","origin","add","kCustomPromisifiedSymbol","original","promiseResolve","promiseReject","promise","callbackifyOnRejected","reason","cb","newReason","callbackify","callbackified","maybeCb","rej","nextTickImpl","doNothing","version","createCallback","callbacks","called","objectProtoPropNames","propName","util","fastDeepEqual","equal","messageActions","deepEqual","ACTIONS","ERROR_CODE","Doc","connection","collection","newType","request","transformErr","willFetch","shouldSend","wantSubscribe","lastRequest","isDuplicateRequest","combineCallbacks","setNoOp","client","server","clientOp","serverOp","stackLength","componentOp","oldData","src","fixupOp","pendingOps","inflightOp","fetchError","allOpsHadCallbacks","Query","extra","wait","finish","snapshots","newDocs","howMany","removed","docs","localPresence","LocalPresence","presence","presenceId","presenceVersion","remotePresence","RemotePresence","callArgs","initialParams","hasQueueMicrotask","hasSetImmediate","hasNextTick","fallback","wrap","defer","_defer$1","setImmediate$1","asyncify","isAsync","handlePromise","invokeCallback","isAsyncGenerator","isAsyncIterable","wrapAsync","asyncFn","awaitify","arity","awaitable","cbArgs","applyEach$1","eachfn","fns","_asyncMap","counter","_iteratee","iterCb","v","breakLoop","callFn","getIterator","coll","createArrayIterator","createES2015Iterator","createObjectIterator","okeys","createIterator","onlyOnce","asyncEachOfLimit","generator","canceled","awaiting","running","replenish","iterDone","iterateeCallback","handleError","eachOfLimit$2","nextElem","looping","eachOfLimit","eachOfLimit$1","eachOfArrayLike","completed","iteratorCallback","eachOfGeneric","eachOf","eachOfImplementation","eachOf$1","map$1","applyEach","eachOfSeries","eachOfSeries$1","mapSeries","mapSeries$1","applyEachSeries","PROMISE_SYMBOL","promiseCallback","auto","tasks","concurrency","numTasks","runningTasks","hasError","readyTasks","readyToCheck","uncheckedDependencies","task","enqueueTask","dependencies","remainingDependencies","dependencyName","checkForDeadlocks","processQueue","runTask","run","taskName","taskListeners","taskComplete","taskCallback","safeResults","rkey","taskFn","currentTask","getDependents","dependent","FN_ARGS","ARROW_FN_ARGS","FN_ARG_SPLIT","FN_ARG","stripComments","stripped","endBlockComment","endIndex","parseParams","autoInject","newTasks","params","fnIsAsync","hasNoDeps","newTask","taskCb","newArgs","DLL","newNode","setInitial","testFn","curr","dll","queue$1","worker","payload","_worker","numRunning","workersList","on","handleAndRemove","off","ev","processingScheduled","_insert","insertAtFront","rejectOnError","q","_createCB","_maybeDrain","eventMethod","isProcessing","datum","cargo$1","cargo","reduce","reduce$1","seq","functions","_functions","newargs","nextargs","mapLimit","mapLimit$1","concatLimit","mapResults","concatLimit$1","concat","concat$1","concatSeries","concatSeries$1","constant$1","ignoredArgs","_createTester","check","getResult","testPassed","testResult","detect","bool","detect$1","detectLimit","detectLimit$1","detectSeries","detectSeries$1","consoleFunc","resultArgs","dir","doWhilst","test","_fn","_test","truth","doWhilst$1","doUntil","_withoutIndex","eachLimit$2","each","eachLimit","eachLimit$1","eachSeries","eachSeries$1","ensureAsync","sync","innerArgs","every","every$1","everyLimit","everyLimit$1","everySeries","everySeries$1","filterArray","truthValues","filterGeneric","_filter","filter$1","filterLimit","filterLimit$1","filterSeries","filterSeries$1","forever","errback","forever$1","groupByLimit","groupByLimit$1","groupBy","groupBySeries","log","mapValuesLimit","newObj","mapValuesLimit$1","mapValues","mapValuesSeries","memoize","hasher","queues","memoized","_defer","_parallel","parallel","parallelLimit","queue","Heap","smaller","t","leftChi","priorityQueue","push","pushAsync","createDataItems","race","race$1","reduceRight","reversed","reflect","reflectCallback","retVal","reflectAll","reject$2","reject$1","rejectLimit","rejectLimit$1","rejectSeries","rejectSeries$1","DEFAULT_TIMES","DEFAULT_INTERVAL","retry","parseTimes","_task","attempt","retryAttempt","acc","retryable","series","some","some$1","someLimit","someLimit$1","someSeries","someSeries$1","sortBy","comparator","sortBy$1","timeout","milliseconds","info","timedOut","timeoutCallback","timesLimit","times","timesSeries","tryEach","tryEach$1","unmemoize","whilst","whilst$1","until","waterfall","taskIndex","nextTask","waterfall$1","hat","hatModule","bits","digits","rem","expandBy","iters","hats","async","Presence","localIds","remoteIds","seqs","lastSeq","originalCallback","localDocPresence","LocalDocPresence","docDataVersion","messageDocDataVersion","typeName","create","applyOpEdit","opComponent","pathSegment","appliedOp","normalizeLegacyJson0Ops","isOwnOp","opError","json0Op","components","ot","remoteDocPresence","RemoteDocPresence","connectionId","hasCaughtUp","DocPresence","docPresence","Snapshot","meta","snapshotRequest","SnapshotRequest","requestId","metadata","snapshotVersionRequest","SnapshotVersionRequest","snapshotTimestampRequest","SnapshotTimestampRequest","docPresenceEmitter","DocPresenceEmitter","alreadyRegistered","forwarder","forwarders","checkAtLeast","toCheck","checkAgainst","normalizedProtocol","segments","connectionState","socket","Connection","newState","wrapErrorData","errorData","fullMessage","dataForId","actions","ids","versions","versionsCount","versionId","isDuplicate","hasPending","hasWritePending","__importDefault","this","mod","lodash_clonedeep_1","lodash_isequal_1","Iterator_1","fast_diff_1","length_1","length_2","length_3","length_4","Delta_1","delta1","delta2","richText","ShareDB","roomId","host","otPort","__vite_import_meta_env__","cid","_old"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300]}