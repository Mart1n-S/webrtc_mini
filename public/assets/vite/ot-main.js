var tp=Object.defineProperty;var rp=(r,e,t)=>e in r?tp(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var np=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var ue=(r,e,t)=>rp(r,typeof e!="symbol"?e+"":e,t);var gE=np((kt,Bt)=>{var Bf=typeof window=="object"&&window&&window.Object===Object&&window,ip=typeof self=="object"&&self&&self.Object===Object&&self,Sr=Bf||ip||Function("return this")(),Yr=Sr.Symbol,Ff=Object.prototype,sp=Ff.hasOwnProperty,op=Ff.toString,Vn=Yr?Yr.toStringTag:void 0;function ap(r){var e=sp.call(r,Vn),t=r[Vn];try{r[Vn]=void 0;var n=!0}catch{}var i=op.call(r);return n&&(e?r[Vn]=t:delete r[Vn]),i}var lp=Object.prototype,up=lp.toString;function cp(r){return up.call(r)}var fp="[object Null]",hp="[object Undefined]",Hl=Yr?Yr.toStringTag:void 0;function kn(r){return r==null?r===void 0?hp:fp:Hl&&Hl in Object(r)?ap(r):cp(r)}function Lr(r){return r!=null&&typeof r=="object"}var nn=Array.isArray;function Zr(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}function $f(r){return r}var dp="[object AsyncFunction]",pp="[object Function]",gp="[object GeneratorFunction]",vp="[object Proxy]";function ul(r){if(!Zr(r))return!1;var e=kn(r);return e==pp||e==gp||e==dp||e==vp}var zs=Sr["__core-js_shared__"],zl=(function(){var r=/[^.]+$/.exec(zs&&zs.keys&&zs.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function yp(r){return!!zl&&zl in r}var mp=Function.prototype,bp=mp.toString;function an(r){if(r!=null){try{return bp.call(r)}catch{}try{return r+""}catch{}}return""}var _p=/[\\^$.*+?()[\]{}|]/g,Ep=/^\[object .+?Constructor\]$/,Ap=Function.prototype,Op=Object.prototype,Sp=Ap.toString,wp=Op.hasOwnProperty,Tp=RegExp("^"+Sp.call(wp).replace(_p,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rp(r){if(!Zr(r)||yp(r))return!1;var e=ul(r)?Tp:Ep;return e.test(an(r))}function Np(r,e){return r==null?void 0:r[e]}function ln(r,e){var t=Np(r,e);return Rp(t)?t:void 0}var Ba=ln(Sr,"WeakMap"),Vl=Object.create,Lp=(function(){function r(){}return function(e){if(!Zr(e))return{};if(Vl)return Vl(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}})();function Cp(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function qp(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var Ip=800,xp=16,Pp=Date.now;function Dp(r){var e=0,t=0;return function(){var n=Pp(),i=xp-(n-t);if(t=n,i>0){if(++e>=Ip)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function jp(r){return function(){return r}}var Qi=(function(){try{var r=ln(Object,"defineProperty");return r({},"",{}),r}catch{}})(),Mp=Qi?function(r,e){return Qi(r,"toString",{configurable:!0,enumerable:!1,value:jp(e),writable:!0})}:$f,kp=Dp(Mp);function Bp(r,e){for(var t=-1,n=r==null?0:r.length;++t<n&&e(r[t],t,r)!==!1;);return r}var Fp=9007199254740991,$p=/^(?:0|[1-9]\d*)$/;function Uf(r,e){var t=typeof r;return e=e==null?Fp:e,!!e&&(t=="number"||t!="symbol"&&$p.test(r))&&r>-1&&r%1==0&&r<e}function cl(r,e,t){e=="__proto__"&&Qi?Qi(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function gi(r,e){return r===e||r!==r&&e!==e}var Up=Object.prototype,Hp=Up.hasOwnProperty;function Hf(r,e,t){var n=r[e];(!(Hp.call(r,e)&&gi(n,t))||t===void 0&&!(e in r))&&cl(r,e,t)}function zp(r,e,t,n){var i=!t;t||(t={});for(var s=-1,l=e.length;++s<l;){var u=e[s],a=void 0;a===void 0&&(a=r[u]),i?cl(t,u,a):Hf(t,u,a)}return t}var Gl=Math.max;function Vp(r,e,t){return e=Gl(e===void 0?r.length-1:e,0),function(){for(var n=arguments,i=-1,s=Gl(n.length-e,0),l=Array(s);++i<s;)l[i]=n[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=n[i];return u[e]=t(l),Cp(r,this,u)}}function Gp(r,e){return kp(Vp(r,e,$f),r+"")}var Wp=9007199254740991;function zf(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Wp}function Es(r){return r!=null&&zf(r.length)&&!ul(r)}function Kp(r,e,t){if(!Zr(t))return!1;var n=typeof e;return(n=="number"?Es(t)&&Uf(e,t.length):n=="string"&&e in t)?gi(t[e],r):!1}function Yp(r){return Gp(function(e,t){var n=-1,i=t.length,s=i>1?t[i-1]:void 0,l=i>2?t[2]:void 0;for(s=r.length>3&&typeof s=="function"?(i--,s):void 0,l&&Kp(t[0],t[1],l)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var u=t[n];u&&r(e,u,n,s)}return e})}var Zp=Object.prototype;function fl(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||Zp;return r===t}function Xp(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var Jp="[object Arguments]";function Wl(r){return Lr(r)&&kn(r)==Jp}var Vf=Object.prototype,Qp=Vf.hasOwnProperty,eg=Vf.propertyIsEnumerable,Fa=Wl((function(){return arguments})())?Wl:function(r){return Lr(r)&&Qp.call(r,"callee")&&!eg.call(r,"callee")};function tg(){return!1}var Gf=typeof kt=="object"&&kt&&!kt.nodeType&&kt,Kl=Gf&&typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,rg=Kl&&Kl.exports===Gf,Yl=rg?Sr.Buffer:void 0,ng=Yl?Yl.isBuffer:void 0,ni=ng||tg,ig="[object Arguments]",sg="[object Array]",og="[object Boolean]",ag="[object Date]",lg="[object Error]",ug="[object Function]",cg="[object Map]",fg="[object Number]",hg="[object Object]",dg="[object RegExp]",pg="[object Set]",gg="[object String]",vg="[object WeakMap]",yg="[object ArrayBuffer]",mg="[object DataView]",bg="[object Float32Array]",_g="[object Float64Array]",Eg="[object Int8Array]",Ag="[object Int16Array]",Og="[object Int32Array]",Sg="[object Uint8Array]",wg="[object Uint8ClampedArray]",Tg="[object Uint16Array]",Rg="[object Uint32Array]",Je={};Je[bg]=Je[_g]=Je[Eg]=Je[Ag]=Je[Og]=Je[Sg]=Je[wg]=Je[Tg]=Je[Rg]=!0;Je[ig]=Je[sg]=Je[yg]=Je[og]=Je[mg]=Je[ag]=Je[lg]=Je[ug]=Je[cg]=Je[fg]=Je[hg]=Je[dg]=Je[pg]=Je[gg]=Je[vg]=!1;function Ng(r){return Lr(r)&&zf(r.length)&&!!Je[kn(r)]}function hl(r){return function(e){return r(e)}}var Wf=typeof kt=="object"&&kt&&!kt.nodeType&&kt,Qn=Wf&&typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,Lg=Qn&&Qn.exports===Wf,Vs=Lg&&Bf.process,Cn=(function(){try{var r=Qn&&Qn.require&&Qn.require("util").types;return r||Vs&&Vs.binding&&Vs.binding("util")}catch{}})(),Zl=Cn&&Cn.isTypedArray,dl=Zl?hl(Zl):Ng,Cg=Object.prototype,qg=Cg.hasOwnProperty;function Kf(r,e){var t=nn(r),n=!t&&Fa(r),i=!t&&!n&&ni(r),s=!t&&!n&&!i&&dl(r),l=t||n||i||s,u=l?Xp(r.length,String):[],a=u.length;for(var o in r)(e||qg.call(r,o))&&!(l&&(o=="length"||i&&(o=="offset"||o=="parent")||s&&(o=="buffer"||o=="byteLength"||o=="byteOffset")||Uf(o,a)))&&u.push(o);return u}function Yf(r,e){return function(t){return r(e(t))}}var Ig=Yf(Object.keys,Object),xg=Object.prototype,Pg=xg.hasOwnProperty;function Dg(r){if(!fl(r))return Ig(r);var e=[];for(var t in Object(r))Pg.call(r,t)&&t!="constructor"&&e.push(t);return e}function jg(r){return Es(r)?Kf(r):Dg(r)}function Mg(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var kg=Object.prototype,Bg=kg.hasOwnProperty;function Fg(r){if(!Zr(r))return Mg(r);var e=fl(r),t=[];for(var n in r)n=="constructor"&&(e||!Bg.call(r,n))||t.push(n);return t}function Zf(r){return Es(r)?Kf(r,!0):Fg(r)}var ii=ln(Object,"create");function $g(){this.__data__=ii?ii(null):{},this.size=0}function Ug(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var Hg="__lodash_hash_undefined__",zg=Object.prototype,Vg=zg.hasOwnProperty;function Gg(r){var e=this.__data__;if(ii){var t=e[r];return t===Hg?void 0:t}return Vg.call(e,r)?e[r]:void 0}var Wg=Object.prototype,Kg=Wg.hasOwnProperty;function Yg(r){var e=this.__data__;return ii?e[r]!==void 0:Kg.call(e,r)}var Zg="__lodash_hash_undefined__";function Xg(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=ii&&e===void 0?Zg:e,this}function sn(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}sn.prototype.clear=$g;sn.prototype.delete=Ug;sn.prototype.get=Gg;sn.prototype.has=Yg;sn.prototype.set=Xg;function Jg(){this.__data__=[],this.size=0}function As(r,e){for(var t=r.length;t--;)if(gi(r[t][0],e))return t;return-1}var Qg=Array.prototype,ev=Qg.splice;function tv(r){var e=this.__data__,t=As(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():ev.call(e,t,1),--this.size,!0}function rv(r){var e=this.__data__,t=As(e,r);return t<0?void 0:e[t][1]}function nv(r){return As(this.__data__,r)>-1}function iv(r,e){var t=this.__data__,n=As(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}function Ir(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ir.prototype.clear=Jg;Ir.prototype.delete=tv;Ir.prototype.get=rv;Ir.prototype.has=nv;Ir.prototype.set=iv;var si=ln(Sr,"Map");function sv(){this.size=0,this.__data__={hash:new sn,map:new(si||Ir),string:new sn}}function ov(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Os(r,e){var t=r.__data__;return ov(e)?t[typeof e=="string"?"string":"hash"]:t.map}function av(r){var e=Os(this,r).delete(r);return this.size-=e?1:0,e}function lv(r){return Os(this,r).get(r)}function uv(r){return Os(this,r).has(r)}function cv(r,e){var t=Os(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}function un(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}un.prototype.clear=sv;un.prototype.delete=av;un.prototype.get=lv;un.prototype.has=uv;un.prototype.set=cv;function fv(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}var Xf=Yf(Object.getPrototypeOf,Object),hv="[object Object]",dv=Function.prototype,pv=Object.prototype,Jf=dv.toString,gv=pv.hasOwnProperty,vv=Jf.call(Object);function yv(r){if(!Lr(r)||kn(r)!=hv)return!1;var e=Xf(r);if(e===null)return!0;var t=gv.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Jf.call(t)==vv}function mv(){this.__data__=new Ir,this.size=0}function bv(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function _v(r){return this.__data__.get(r)}function Ev(r){return this.__data__.has(r)}var Av=200;function Ov(r,e){var t=this.__data__;if(t instanceof Ir){var n=t.__data__;if(!si||n.length<Av-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new un(n)}return t.set(r,e),this.size=t.size,this}function _r(r){var e=this.__data__=new Ir(r);this.size=e.size}_r.prototype.clear=mv;_r.prototype.delete=bv;_r.prototype.get=_v;_r.prototype.has=Ev;_r.prototype.set=Ov;var Qf=typeof kt=="object"&&kt&&!kt.nodeType&&kt,Xl=Qf&&typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,Sv=Xl&&Xl.exports===Qf,Jl=Sv?Sr.Buffer:void 0,Ql=Jl?Jl.allocUnsafe:void 0;function eh(r,e){if(e)return r.slice();var t=r.length,n=Ql?Ql(t):new r.constructor(t);return r.copy(n),n}function wv(r,e){for(var t=-1,n=r==null?0:r.length,i=0,s=[];++t<n;){var l=r[t];e(l,t,r)&&(s[i++]=l)}return s}function Tv(){return[]}var Rv=Object.prototype,Nv=Rv.propertyIsEnumerable,eu=Object.getOwnPropertySymbols,Lv=eu?function(r){return r==null?[]:(r=Object(r),wv(eu(r),function(e){return Nv.call(r,e)}))}:Tv;function Cv(r,e,t){var n=e(r);return nn(r)?n:fv(n,t(r))}function $a(r){return Cv(r,jg,Lv)}var Ua=ln(Sr,"DataView"),Ha=ln(Sr,"Promise"),za=ln(Sr,"Set"),tu="[object Map]",qv="[object Object]",ru="[object Promise]",nu="[object Set]",iu="[object WeakMap]",su="[object DataView]",Iv=an(Ua),xv=an(si),Pv=an(Ha),Dv=an(za),jv=an(Ba),rr=kn;(Ua&&rr(new Ua(new ArrayBuffer(1)))!=su||si&&rr(new si)!=tu||Ha&&rr(Ha.resolve())!=ru||za&&rr(new za)!=nu||Ba&&rr(new Ba)!=iu)&&(rr=function(r){var e=kn(r),t=e==qv?r.constructor:void 0,n=t?an(t):"";if(n)switch(n){case Iv:return su;case xv:return tu;case Pv:return ru;case Dv:return nu;case jv:return iu}return e});var Mv=Object.prototype,kv=Mv.hasOwnProperty;function Bv(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&kv.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var es=Sr.Uint8Array;function pl(r){var e=new r.constructor(r.byteLength);return new es(e).set(new es(r)),e}function Fv(r,e){var t=pl(r.buffer);return new r.constructor(t,r.byteOffset,r.byteLength)}var $v=/\w*$/;function Uv(r){var e=new r.constructor(r.source,$v.exec(r));return e.lastIndex=r.lastIndex,e}var ou=Yr?Yr.prototype:void 0,au=ou?ou.valueOf:void 0;function Hv(r){return au?Object(au.call(r)):{}}function th(r,e){var t=e?pl(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var zv="[object Boolean]",Vv="[object Date]",Gv="[object Map]",Wv="[object Number]",Kv="[object RegExp]",Yv="[object Set]",Zv="[object String]",Xv="[object Symbol]",Jv="[object ArrayBuffer]",Qv="[object DataView]",ey="[object Float32Array]",ty="[object Float64Array]",ry="[object Int8Array]",ny="[object Int16Array]",iy="[object Int32Array]",sy="[object Uint8Array]",oy="[object Uint8ClampedArray]",ay="[object Uint16Array]",ly="[object Uint32Array]";function uy(r,e,t){var n=r.constructor;switch(e){case Jv:return pl(r);case zv:case Vv:return new n(+r);case Qv:return Fv(r);case ey:case ty:case ry:case ny:case iy:case sy:case oy:case ay:case ly:return th(r,t);case Gv:return new n;case Wv:case Zv:return new n(r);case Kv:return Uv(r);case Yv:return new n;case Xv:return Hv(r)}}function rh(r){return typeof r.constructor=="function"&&!fl(r)?Lp(Xf(r)):{}}var cy="[object Map]";function fy(r){return Lr(r)&&rr(r)==cy}var lu=Cn&&Cn.isMap,hy=lu?hl(lu):fy,dy="[object Set]";function py(r){return Lr(r)&&rr(r)==dy}var uu=Cn&&Cn.isSet,gy=uu?hl(uu):py,vy=1,nh="[object Arguments]",yy="[object Array]",my="[object Boolean]",by="[object Date]",_y="[object Error]",ih="[object Function]",Ey="[object GeneratorFunction]",Ay="[object Map]",Oy="[object Number]",sh="[object Object]",Sy="[object RegExp]",wy="[object Set]",Ty="[object String]",Ry="[object Symbol]",Ny="[object WeakMap]",Ly="[object ArrayBuffer]",Cy="[object DataView]",qy="[object Float32Array]",Iy="[object Float64Array]",xy="[object Int8Array]",Py="[object Int16Array]",Dy="[object Int32Array]",jy="[object Uint8Array]",My="[object Uint8ClampedArray]",ky="[object Uint16Array]",By="[object Uint32Array]",Ye={};Ye[nh]=Ye[yy]=Ye[Ly]=Ye[Cy]=Ye[my]=Ye[by]=Ye[qy]=Ye[Iy]=Ye[xy]=Ye[Py]=Ye[Dy]=Ye[Ay]=Ye[Oy]=Ye[sh]=Ye[Sy]=Ye[wy]=Ye[Ty]=Ye[Ry]=Ye[jy]=Ye[My]=Ye[ky]=Ye[By]=!0;Ye[_y]=Ye[ih]=Ye[Ny]=!1;function Yi(r,e,t,n,i,s){var l,u=e&vy;if(l!==void 0)return l;if(!Zr(r))return r;var a=nn(r);if(a)l=Bv(r);else{var o=rr(r),c=o==ih||o==Ey;if(ni(r))return eh(r,u);if(o==sh||o==nh||c&&!i)l=c?{}:rh(r);else{if(!Ye[o])return i?r:{};l=uy(r,o,u)}}s||(s=new _r);var g=s.get(r);if(g)return g;s.set(r,l),gy(r)?r.forEach(function(m){l.add(Yi(m,e,t,m,r,s))}):hy(r)&&r.forEach(function(m,A){l.set(A,Yi(m,e,t,A,r,s))});var p=$a,d=a?void 0:p(r);return Bp(d||r,function(m,A){d&&(A=m,m=r[A]),Hf(l,A,Yi(m,e,t,A,r,s))}),l}var Fy=1,$y=4;function Rn(r){return Yi(r,Fy|$y)}var Uy="__lodash_hash_undefined__";function Hy(r){return this.__data__.set(r,Uy),this}function zy(r){return this.__data__.has(r)}function ts(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new un;++e<t;)this.add(r[e])}ts.prototype.add=ts.prototype.push=Hy;ts.prototype.has=zy;function Vy(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}function Gy(r,e){return r.has(e)}var Wy=1,Ky=2;function oh(r,e,t,n,i,s){var l=t&Wy,u=r.length,a=e.length;if(u!=a&&!(l&&a>u))return!1;var o=s.get(r),c=s.get(e);if(o&&c)return o==e&&c==r;var g=-1,p=!0,d=t&Ky?new ts:void 0;for(s.set(r,e),s.set(e,r);++g<u;){var m=r[g],A=e[g];if(n)var O=l?n(A,m,g,e,r,s):n(m,A,g,r,e,s);if(O!==void 0){if(O)continue;p=!1;break}if(d){if(!Vy(e,function(E,_){if(!Gy(d,_)&&(m===E||i(m,E,t,n,s)))return d.push(_)})){p=!1;break}}else if(!(m===A||i(m,A,t,n,s))){p=!1;break}}return s.delete(r),s.delete(e),p}function Yy(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t}function Zy(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var Xy=1,Jy=2,Qy="[object Boolean]",em="[object Date]",tm="[object Error]",rm="[object Map]",nm="[object Number]",im="[object RegExp]",sm="[object Set]",om="[object String]",am="[object Symbol]",lm="[object ArrayBuffer]",um="[object DataView]",cu=Yr?Yr.prototype:void 0,Gs=cu?cu.valueOf:void 0;function cm(r,e,t,n,i,s,l){switch(t){case um:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case lm:return!(r.byteLength!=e.byteLength||!s(new es(r),new es(e)));case Qy:case em:case nm:return gi(+r,+e);case tm:return r.name==e.name&&r.message==e.message;case im:case om:return r==e+"";case rm:var u=Yy;case sm:var a=n&Xy;if(u||(u=Zy),r.size!=e.size&&!a)return!1;var o=l.get(r);if(o)return o==e;n|=Jy,l.set(r,e);var c=oh(u(r),u(e),n,i,s,l);return l.delete(r),c;case am:if(Gs)return Gs.call(r)==Gs.call(e)}return!1}var fm=1,hm=Object.prototype,dm=hm.hasOwnProperty;function pm(r,e,t,n,i,s){var l=t&fm,u=$a(r),a=u.length,o=$a(e),c=o.length;if(a!=c&&!l)return!1;for(var g=a;g--;){var p=u[g];if(!(l?p in e:dm.call(e,p)))return!1}var d=s.get(r),m=s.get(e);if(d&&m)return d==e&&m==r;var A=!0;s.set(r,e),s.set(e,r);for(var O=l;++g<a;){p=u[g];var E=r[p],_=e[p];if(n)var h=l?n(_,E,p,e,r,s):n(E,_,p,r,e,s);if(!(h===void 0?E===_||i(E,_,t,n,s):h)){A=!1;break}O||(O=p=="constructor")}if(A&&!O){var f=r.constructor,v=e.constructor;f!=v&&"constructor"in r&&"constructor"in e&&!(typeof f=="function"&&f instanceof f&&typeof v=="function"&&v instanceof v)&&(A=!1)}return s.delete(r),s.delete(e),A}var gm=1,fu="[object Arguments]",hu="[object Array]",Di="[object Object]",vm=Object.prototype,du=vm.hasOwnProperty;function ym(r,e,t,n,i,s){var l=nn(r),u=nn(e),a=l?hu:rr(r),o=u?hu:rr(e);a=a==fu?Di:a,o=o==fu?Di:o;var c=a==Di,g=o==Di,p=a==o;if(p&&ni(r)){if(!ni(e))return!1;l=!0,c=!1}if(p&&!c)return s||(s=new _r),l||dl(r)?oh(r,e,t,n,i,s):cm(r,e,a,t,n,i,s);if(!(t&gm)){var d=c&&du.call(r,"__wrapped__"),m=g&&du.call(e,"__wrapped__");if(d||m){var A=d?r.value():r,O=m?e.value():e;return s||(s=new _r),i(A,O,t,n,s)}}return p?(s||(s=new _r),pm(r,e,t,n,i,s)):!1}function ah(r,e,t,n,i){return r===e?!0:r==null||e==null||!Lr(r)&&!Lr(e)?r!==r&&e!==e:ym(r,e,t,n,ah,i)}function mm(r){return function(e,t,n){for(var i=-1,s=Object(e),l=n(e),u=l.length;u--;){var a=l[++i];if(t(s[a],a,s)===!1)break}return e}}var bm=mm();function Va(r,e,t){(t!==void 0&&!gi(r[e],t)||t===void 0&&!(e in r))&&cl(r,e,t)}function _m(r){return Lr(r)&&Es(r)}function Ga(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}function Em(r){return zp(r,Zf(r))}function Am(r,e,t,n,i,s,l){var u=Ga(r,t),a=Ga(e,t),o=l.get(a);if(o){Va(r,t,o);return}var c=s?s(u,a,t+"",r,e,l):void 0,g=c===void 0;if(g){var p=nn(a),d=!p&&ni(a),m=!p&&!d&&dl(a);c=a,p||d||m?nn(u)?c=u:_m(u)?c=qp(u):d?(g=!1,c=eh(a,!0)):m?(g=!1,c=th(a,!0)):c=[]:yv(a)||Fa(a)?(c=u,Fa(u)?c=Em(u):(!Zr(u)||ul(u))&&(c=rh(a))):g=!1}g&&(l.set(a,c),i(c,a,n,s,l),l.delete(a)),Va(r,t,c)}function lh(r,e,t,n,i){r!==e&&bm(e,function(s,l){if(i||(i=new _r),Zr(s))Am(r,e,l,t,lh,n,i);else{var u=n?n(Ga(r,l),s,l+"",r,e,i):void 0;u===void 0&&(u=s),Va(r,l,u)}},Zf)}function gl(r,e){return ah(r,e)}var Gr=Yp(function(r,e,t){lh(r,e,t)}),pe=(r=>(r[r.TYPE=3]="TYPE",r[r.LEVEL=12]="LEVEL",r[r.ATTRIBUTE=13]="ATTRIBUTE",r[r.BLOT=14]="BLOT",r[r.INLINE=7]="INLINE",r[r.BLOCK=11]="BLOCK",r[r.BLOCK_BLOT=10]="BLOCK_BLOT",r[r.INLINE_BLOT=6]="INLINE_BLOT",r[r.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",r[r.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",r[r.ANY=15]="ANY",r))(pe||{});class Ar{constructor(e,t,n={}){this.attrName=e,this.keyName=t;const i=pe.TYPE&pe.ATTRIBUTE;this.scope=n.scope!=null?n.scope&pe.LEVEL|i:pe.ATTRIBUTE,n.whitelist!=null&&(this.whitelist=n.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}}class Nn extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const uh=class Wa{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let n=null;try{n=e.parentNode}catch{return null}return this.find(n,t)}return null}create(e,t,n){const i=this.query(t);if(i==null)throw new Nn(`Unable to create ${t} blot`);const s=i,l=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:s.create(n),u=new s(e,l,n);return Wa.blots.set(u.domNode,u),u}find(e,t=!1){return Wa.find(e,t)}query(e,t=pe.ANY){let n;return typeof e=="string"?n=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?n=this.types.text:typeof e=="number"?e&pe.LEVEL&pe.BLOCK?n=this.types.block:e&pe.LEVEL&pe.INLINE&&(n=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(i=>(n=this.classes[i],!!n)),n=n||this.tags[e.tagName]),n==null?null:"scope"in n&&t&pe.LEVEL&n.scope&&t&pe.TYPE&n.scope?n:null}register(...e){return e.map(t=>{const n="blotName"in t,i="attrName"in t;if(!n&&!i)throw new Nn("Invalid definition");if(n&&t.blotName==="abstract")throw new Nn("Cannot register abstract class");const s=n?t.blotName:i?t.attrName:void 0;return this.types[s]=t,i?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):n&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(l=>l.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(l=>{(this.tags[l]==null||t.className==null)&&(this.tags[l]=t)}))),t})}};uh.blots=new WeakMap;let qn=uh;function pu(r,e){return(r.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}class Om extends Ar{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){pu(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const t=(pu(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}}const ar=Om;function Ws(r){const e=r.split("-"),t=e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("");return e[0]+t}class Sm extends Ar{static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[Ws(this.keyName)]=t,!0):!1}remove(e){e.style[Ws(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const t=e.style[Ws(this.keyName)];return this.canAdd(e,t)?t:""}}const Xr=Sm;class wm{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=qn.find(this.domNode);if(e==null)return;const t=Ar.keys(this.domNode),n=ar.keys(this.domNode),i=Xr.keys(this.domNode);t.concat(n).concat(i).forEach(s=>{const l=e.scroll.query(s,pe.ATTRIBUTE);l instanceof Ar&&(this.attributes[l.attrName]=l)})}copy(e){Object.keys(this.attributes).forEach(t=>{const n=this.attributes[t].value(this.domNode);e.format(t,n)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}}const Ss=wm,ch=class{constructor(e,t){this.scroll=e,this.domNode=t,qn.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Nn("Blot definition missing tagName");let t,n;return Array.isArray(this.tagName)?(typeof e=="string"?(n=e.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):typeof e=="number"&&(n=e),typeof n=="number"?t=document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?t=document.createElement(n):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),qn.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,n,i){const s=this.isolate(e,t);if(this.scroll.query(n,pe.BLOT)!=null&&i)s.wrap(n,i);else if(this.scroll.query(n,pe.ATTRIBUTE)!=null){const l=this.scroll.create(this.statics.scope);s.wrap(l),l.format(n,i)}}insertAt(e,t,n){const i=n==null?this.scroll.create("text",t):this.scroll.create(t,n),s=this.split(e);this.parent.insertBefore(i,s||void 0)}isolate(e,t){const n=this.split(e);if(n==null)throw new Error("Attempt to isolate at end");return n.split(t),n}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const n=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const n=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(n,this.next||void 0),typeof n.appendChild!="function")throw new Nn(`Cannot wrap ${e}`);return n.appendChild(this),n}};ch.blotName="abstract";let fh=ch;const hh=class extends fh{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};hh.scope=pe.INLINE_BLOT;let Tm=hh;const wt=Tm;class Rm{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const t=e.slice(1);this.append(...t)}}at(e){const t=this.iterator();let n=t();for(;n&&e>0;)e-=1,n=t();return n}contains(e){const t=this.iterator();let n=t();for(;n;){if(n===e)return!0;n=t()}return!1}indexOf(e){const t=this.iterator();let n=t(),i=0;for(;n;){if(n===e)return i;i+=1,n=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,n=this.head;for(;n!=null;){if(n===e)return t;t+=n.length(),n=n.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){const n=this.iterator();let i=n();for(;i;){const s=i.length();if(e<s||t&&e===s&&(i.next==null||i.next.length()!==0))return[i,e];e-=s,i=n()}return[null,0]}forEach(e){const t=this.iterator();let n=t();for(;n;)e(n),n=t()}forEachAt(e,t,n){if(t<=0)return;const[i,s]=this.find(e);let l=e-s;const u=this.iterator(i);let a=u();for(;a&&l<e+t;){const o=a.length();e>l?n(a,e-l,Math.min(t,l+o-e)):n(a,0,Math.min(o,e+t-l)),l+=o,a=u()}}map(e){return this.reduce((t,n)=>(t.push(e(n)),t),[])}reduce(e,t){const n=this.iterator();let i=n();for(;i;)t=e(t,i),i=n();return t}}function gu(r,e){const t=e.find(r);if(t)return t;try{return e.create(r)}catch{const n=e.create(pe.INLINE);return Array.from(r.childNodes).forEach(i=>{n.domNode.appendChild(i)}),r.parentNode&&r.parentNode.replaceChild(n.domNode,r),n.attach(),n}}const dh=class Hr extends fh{constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Hr.uiClass&&this.uiNode.classList.add(Hr.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Rm,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const t=gu(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof Nn)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(n,i,s)=>{n.deleteAt(i,s)})}descendant(e,t=0){const[n,i]=this.children.find(t);return e.blotName==null&&e(n)||e.blotName!=null&&n instanceof e?[n,i]:n instanceof Hr?n.descendant(e,i):[null,-1]}descendants(e,t=0,n=Number.MAX_VALUE){let i=[],s=n;return this.children.forEachAt(t,n,(l,u,a)=>{(e.blotName==null&&e(l)||e.blotName!=null&&l instanceof e)&&i.push(l),l instanceof Hr&&(i=i.concat(l.descendants(e,u,s))),s-=a}),i}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(n=>t instanceof n)||(t.statics.scope===pe.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof Hr?t.unwrap():t.remove())})}formatAt(e,t,n,i){this.children.forEachAt(e,t,(s,l,u)=>{s.formatAt(l,u,n,i)})}insertAt(e,t,n){const[i,s]=this.children.find(e);if(i)i.insertAt(s,t,n);else{const l=n==null?this.scroll.create("text",t):this.scroll.create(t,n);this.appendChild(l)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let n=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(n=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(e.domNode,n),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(n=>{e.insertBefore(n,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){const[n,i]=this.children.find(e,t),s=[[this,e]];return n instanceof Hr?s.concat(n.path(i,t)):(n!=null&&s.push([n,i]),s)}removeChild(e){this.children.remove(e)}replaceWith(e,t){const n=typeof e=="string"?this.scroll.create(e,t):e;return n instanceof Hr&&this.moveChildren(n),super.replaceWith(n)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(e,this.length(),(i,s,l)=>{const u=i.split(s,t);u!=null&&n.appendChild(u)}),n}splitAfter(e){const t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){const n=[],i=[];e.forEach(s=>{s.target===this.domNode&&s.type==="childList"&&(n.push(...s.addedNodes),i.push(...s.removedNodes))}),i.forEach(s=>{if(s.parentNode!=null&&s.tagName!=="IFRAME"&&document.body.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const l=this.scroll.find(s);l!=null&&(l.domNode.parentNode==null||l.domNode.parentNode===this.domNode)&&l.detach()}),n.filter(s=>s.parentNode===this.domNode&&s!==this.uiNode).sort((s,l)=>s===l?0:s.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(s=>{let l=null;s.nextSibling!=null&&(l=this.scroll.find(s.nextSibling));const u=gu(s,this.scroll);(u.next!==l||u.next==null)&&(u.parent!=null&&u.parent.removeChild(this),this.insertBefore(u,l||void 0))}),this.enforceAllowedChildren()}};dh.uiClass="";let Nm=dh;const ir=Nm;function Lm(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}const En=class An extends ir{static create(e){return super.create(e)}static formats(e,t){const n=t.query(An.blotName);if(!(n!=null&&e.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Ss(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(n=>{n instanceof An||(n=n.wrap(An.blotName,!0)),this.attributes.copy(n)}),this.unwrap();else{const n=this.scroll.query(e,pe.INLINE);if(n==null)return;n instanceof Ar?this.attributes.attribute(n,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,n,i){this.formats()[n]!=null||this.scroll.query(n,pe.ATTRIBUTE)?this.isolate(e,t).format(n,i):super.formatAt(e,t,n,i)}optimize(e){super.optimize(e);const t=this.formats();if(Object.keys(t).length===0)return this.unwrap();const n=this.next;n instanceof An&&n.prev===this&&Lm(t,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(e,t){const n=super.replaceWith(e,t);return this.attributes.copy(n),n}update(e,t){super.update(e,t),e.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}wrap(e,t){const n=super.wrap(e,t);return n instanceof An&&this.attributes.move(n),n}};En.allowedChildren=[En,wt],En.blotName="inline",En.scope=pe.INLINE_BLOT,En.tagName="SPAN";let Cm=En;const vl=Cm,On=class Ka extends ir{static create(e){return super.create(e)}static formats(e,t){const n=t.query(Ka.blotName);if(!(n!=null&&e.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Ss(this.domNode)}format(e,t){const n=this.scroll.query(e,pe.BLOCK);n!=null&&(n instanceof Ar?this.attributes.attribute(n,t):e===this.statics.blotName&&!t?this.replaceWith(Ka.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,n,i){this.scroll.query(n,pe.BLOCK)!=null?this.format(n,i):super.formatAt(e,t,n,i)}insertAt(e,t,n){if(n==null||this.scroll.query(t,pe.INLINE)!=null)super.insertAt(e,t,n);else{const i=this.split(e);if(i!=null){const s=this.scroll.create(t,n);i.parent.insertBefore(s,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){const n=super.replaceWith(e,t);return this.attributes.copy(n),n}update(e,t){super.update(e,t),e.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}};On.blotName="block",On.scope=pe.BLOCK_BLOT,On.tagName="P",On.allowedChildren=[vl,On,wt];let qm=On;const oi=qm,Ya=class extends ir{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,n,i){super.formatAt(e,t,n,i),this.enforceAllowedChildren()}insertAt(e,t,n){super.insertAt(e,t,n),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Ya.blotName="container",Ya.scope=pe.BLOCK_BLOT;let Im=Ya;const ws=Im;class xm extends wt{static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,n,i){e===0&&t===this.length()?this.format(n,i):super.formatAt(e,t,n,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const $t=xm,Pm={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Dm=100,Sn=class extends ir{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(n=>{this.update(n)}),this.observer.observe(this.domNode,Pm),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const n=this.registry.find(e,t);return n?n.scroll===this?n:t?this.find(n.scroll.domNode.parentNode,!0):null:null}query(e,t=pe.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(n=>{n.remove()}):super.deleteAt(e,t)}formatAt(e,t,n,i){this.update(),super.formatAt(e,t,n,i)}insertAt(e,t,n){this.update(),super.insertAt(e,t,n)}optimize(e=[],t={}){super.optimize(t);const n=t.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)e.push(i.pop());const s=(a,o=!0)=>{a==null||a===this||a.domNode.parentNode!=null&&(n.has(a.domNode)||n.set(a.domNode,[]),o&&s(a.parent))},l=a=>{n.has(a.domNode)&&(a instanceof ir&&a.children.forEach(l),n.delete(a.domNode),a.optimize(t))};let u=e;for(let a=0;u.length>0;a+=1){if(a>=Dm)throw new Error("[Parchment] Maximum optimize iterations reached");for(u.forEach(o=>{const c=this.find(o.target,!0);c!=null&&(c.domNode===o.target&&(o.type==="childList"?(s(this.find(o.previousSibling,!1)),Array.from(o.addedNodes).forEach(g=>{const p=this.find(g,!1);s(p,!1),p instanceof ir&&p.children.forEach(d=>{s(d,!1)})})):o.type==="attributes"&&s(c.prev)),s(c))}),this.children.forEach(l),u=Array.from(this.observer.takeRecords()),i=u.slice();i.length>0;)e.push(i.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const n=new WeakMap;e.map(i=>{const s=this.find(i.target,!0);return s==null?null:n.has(s.domNode)?(n.get(s.domNode).push(i),null):(n.set(s.domNode,[i]),s)}).forEach(i=>{i!=null&&i!==this&&n.has(i.domNode)&&i.update(n.get(i.domNode)||[],t)}),t.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),t),this.optimize(e,t)}};Sn.blotName="scroll",Sn.defaultChild=oi,Sn.allowedChildren=[oi,ws],Sn.scope=pe.BLOCK_BLOT,Sn.tagName="DIV";let jm=Sn;const yl=jm,Za=class ph extends wt{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,n){n==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,n)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof ph&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(e,t){e.some(n=>n.type==="characterData"&&n.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Za.blotName="text",Za.scope=pe.INLINE_BLOT;let Mm=Za;const rs=Mm,km=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Ar,AttributorStore:Ss,BlockBlot:oi,ClassAttributor:ar,ContainerBlot:ws,EmbedBlot:$t,InlineBlot:vl,LeafBlot:wt,ParentBlot:ir,Registry:qn,Scope:pe,ScrollBlot:yl,StyleAttributor:Xr,TextBlot:rs},Symbol.toStringTag,{value:"Module"}));function vi(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Bm(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var ji={exports:{}},Ks,vu;function Fm(){if(vu)return Ks;vu=1;var r=-1,e=1,t=0;function n(w,j,R,I,D){if(w===j)return w?[[t,w]]:[];if(R!=null){var q=C(w,j,R);if(q)return q}var $=u(w,j),U=w.substring(0,$);w=w.substring($),j=j.substring($),$=o(w,j);var K=w.substring(w.length-$);w=w.substring(0,w.length-$),j=j.substring(0,j.length-$);var V=i(w,j);return U&&V.unshift([t,U]),K&&V.push([t,K]),_(V,D),I&&g(V),V}function i(w,j){var R;if(!w)return[[e,j]];if(!j)return[[r,w]];var I=w.length>j.length?w:j,D=w.length>j.length?j:w,q=I.indexOf(D);if(q!==-1)return R=[[e,I.substring(0,q)],[t,D],[e,I.substring(q+D.length)]],w.length>j.length&&(R[0][0]=R[2][0]=r),R;if(D.length===1)return[[r,w],[e,j]];var $=c(w,j);if($){var U=$[0],K=$[1],V=$[2],ne=$[3],te=$[4],L=n(U,V),B=n(K,ne);return L.concat([[t,te]],B)}return s(w,j)}function s(w,j){for(var R=w.length,I=j.length,D=Math.ceil((R+I)/2),q=D,$=2*D,U=new Array($),K=new Array($),V=0;V<$;V++)U[V]=-1,K[V]=-1;U[q+1]=0,K[q+1]=0;for(var ne=R-I,te=ne%2!==0,L=0,B=0,k=0,Y=0,re=0;re<D;re++){for(var X=-re+L;X<=re-B;X+=2){var ee=q+X,J;X===-re||X!==re&&U[ee-1]<U[ee+1]?J=U[ee+1]:J=U[ee-1]+1;for(var Q=J-X;J<R&&Q<I&&w.charAt(J)===j.charAt(Q);)J++,Q++;if(U[ee]=J,J>R)B+=2;else if(Q>I)L+=2;else if(te){var oe=q+ne-X;if(oe>=0&&oe<$&&K[oe]!==-1){var le=R-K[oe];if(J>=le)return l(w,j,J,Q)}}}for(var he=-re+k;he<=re-Y;he+=2){var oe=q+he,le;he===-re||he!==re&&K[oe-1]<K[oe+1]?le=K[oe+1]:le=K[oe-1]+1;for(var me=le-he;le<R&&me<I&&w.charAt(R-le-1)===j.charAt(I-me-1);)le++,me++;if(K[oe]=le,le>R)Y+=2;else if(me>I)k+=2;else if(!te){var ee=q+ne-he;if(ee>=0&&ee<$&&U[ee]!==-1){var J=U[ee],Q=q+J-ee;if(le=R-le,J>=le)return l(w,j,J,Q)}}}}return[[r,w],[e,j]]}function l(w,j,R,I){var D=w.substring(0,R),q=j.substring(0,I),$=w.substring(R),U=j.substring(I),K=n(D,q),V=n($,U);return K.concat(V)}function u(w,j){if(!w||!j||w.charAt(0)!==j.charAt(0))return 0;for(var R=0,I=Math.min(w.length,j.length),D=I,q=0;R<D;)w.substring(q,D)==j.substring(q,D)?(R=D,q=R):I=D,D=Math.floor((I-R)/2+R);return h(w.charCodeAt(D-1))&&D--,D}function a(w,j){var R=w.length,I=j.length;if(R==0||I==0)return 0;R>I?w=w.substring(R-I):R<I&&(j=j.substring(0,R));var D=Math.min(R,I);if(w==j)return D;for(var q=0,$=1;;){var U=w.substring(D-$),K=j.indexOf(U);if(K==-1)return q;$+=K,(K==0||w.substring(D-$)==j.substring(0,$))&&(q=$,$++)}}function o(w,j){if(!w||!j||w.slice(-1)!==j.slice(-1))return 0;for(var R=0,I=Math.min(w.length,j.length),D=I,q=0;R<D;)w.substring(w.length-D,w.length-q)==j.substring(j.length-D,j.length-q)?(R=D,q=R):I=D,D=Math.floor((I-R)/2+R);return f(w.charCodeAt(w.length-D))&&D--,D}function c(w,j){var R=w.length>j.length?w:j,I=w.length>j.length?j:w;if(R.length<4||I.length*2<R.length)return null;function D(B,k,Y){for(var re=B.substring(Y,Y+Math.floor(B.length/4)),X=-1,ee="",J,Q,oe,le;(X=k.indexOf(re,X+1))!==-1;){var he=u(B.substring(Y),k.substring(X)),me=o(B.substring(0,Y),k.substring(0,X));ee.length<me+he&&(ee=k.substring(X-me,X)+k.substring(X,X+he),J=B.substring(0,Y-me),Q=B.substring(Y+he),oe=k.substring(0,X-me),le=k.substring(X+he))}return ee.length*2>=B.length?[J,Q,oe,le,ee]:null}var q=D(R,I,Math.ceil(R.length/4)),$=D(R,I,Math.ceil(R.length/2)),U;if(!q&&!$)return null;$?q?U=q[4].length>$[4].length?q:$:U=$:U=q;var K,V,ne,te;w.length>j.length?(K=U[0],V=U[1],ne=U[2],te=U[3]):(ne=U[0],te=U[1],K=U[2],V=U[3]);var L=U[4];return[K,V,ne,te,L]}function g(w){for(var j=!1,R=[],I=0,D=null,q=0,$=0,U=0,K=0,V=0;q<w.length;)w[q][0]==t?(R[I++]=q,$=K,U=V,K=0,V=0,D=w[q][1]):(w[q][0]==e?K+=w[q][1].length:V+=w[q][1].length,D&&D.length<=Math.max($,U)&&D.length<=Math.max(K,V)&&(w.splice(R[I-1],0,[r,D]),w[R[I-1]+1][0]=e,I--,I--,q=I>0?R[I-1]:-1,$=0,U=0,K=0,V=0,D=null,j=!0)),q++;for(j&&_(w),E(w),q=1;q<w.length;){if(w[q-1][0]==r&&w[q][0]==e){var ne=w[q-1][1],te=w[q][1],L=a(ne,te),B=a(te,ne);L>=B?(L>=ne.length/2||L>=te.length/2)&&(w.splice(q,0,[t,te.substring(0,L)]),w[q-1][1]=ne.substring(0,ne.length-L),w[q+1][1]=te.substring(L),q++):(B>=ne.length/2||B>=te.length/2)&&(w.splice(q,0,[t,ne.substring(0,B)]),w[q-1][0]=e,w[q-1][1]=te.substring(0,te.length-B),w[q+1][0]=r,w[q+1][1]=ne.substring(B),q++),q++}q++}}var p=/[^a-zA-Z0-9]/,d=/\s/,m=/[\r\n]/,A=/\n\r?\n$/,O=/^\r?\n\r?\n/;function E(w){function j(B,k){if(!B||!k)return 6;var Y=B.charAt(B.length-1),re=k.charAt(0),X=Y.match(p),ee=re.match(p),J=X&&Y.match(d),Q=ee&&re.match(d),oe=J&&Y.match(m),le=Q&&re.match(m),he=oe&&B.match(A),me=le&&k.match(O);return he||me?5:oe||le?4:X&&!J&&Q?3:J||Q?2:X||ee?1:0}for(var R=1;R<w.length-1;){if(w[R-1][0]==t&&w[R+1][0]==t){var I=w[R-1][1],D=w[R][1],q=w[R+1][1],$=o(I,D);if($){var U=D.substring(D.length-$);I=I.substring(0,I.length-$),D=U+D.substring(0,D.length-$),q=U+q}for(var K=I,V=D,ne=q,te=j(I,D)+j(D,q);D.charAt(0)===q.charAt(0);){I+=D.charAt(0),D=D.substring(1)+q.charAt(0),q=q.substring(1);var L=j(I,D)+j(D,q);L>=te&&(te=L,K=I,V=D,ne=q)}w[R-1][1]!=K&&(K?w[R-1][1]=K:(w.splice(R-1,1),R--),w[R][1]=V,ne?w[R+1][1]=ne:(w.splice(R+1,1),R--))}R++}}function _(w,j){w.push([t,""]);for(var R=0,I=0,D=0,q="",$="",U;R<w.length;){if(R<w.length-1&&!w[R][1]){w.splice(R,1);continue}switch(w[R][0]){case e:D++,$+=w[R][1],R++;break;case r:I++,q+=w[R][1],R++;break;case t:var K=R-D-I-1;if(j){if(K>=0&&b(w[K][1])){var V=w[K][1].slice(-1);if(w[K][1]=w[K][1].slice(0,-1),q=V+q,$=V+$,!w[K][1]){w.splice(K,1),R--;var ne=K-1;w[ne]&&w[ne][0]===e&&(D++,$=w[ne][1]+$,ne--),w[ne]&&w[ne][0]===r&&(I++,q=w[ne][1]+q,ne--),K=ne}}if(v(w[R][1])){var V=w[R][1].charAt(0);w[R][1]=w[R][1].slice(1),q+=V,$+=V}}if(R<w.length-1&&!w[R][1]){w.splice(R,1);break}if(q.length>0||$.length>0){q.length>0&&$.length>0&&(U=u($,q),U!==0&&(K>=0?w[K][1]+=$.substring(0,U):(w.splice(0,0,[t,$.substring(0,U)]),R++),$=$.substring(U),q=q.substring(U)),U=o($,q),U!==0&&(w[R][1]=$.substring($.length-U)+w[R][1],$=$.substring(0,$.length-U),q=q.substring(0,q.length-U)));var te=D+I;q.length===0&&$.length===0?(w.splice(R-te,te),R=R-te):q.length===0?(w.splice(R-te,te,[e,$]),R=R-te+1):$.length===0?(w.splice(R-te,te,[r,q]),R=R-te+1):(w.splice(R-te,te,[r,q],[e,$]),R=R-te+2)}R!==0&&w[R-1][0]===t?(w[R-1][1]+=w[R][1],w.splice(R,1)):R++,D=0,I=0,q="",$="";break}}w[w.length-1][1]===""&&w.pop();var L=!1;for(R=1;R<w.length-1;)w[R-1][0]===t&&w[R+1][0]===t&&(w[R][1].substring(w[R][1].length-w[R-1][1].length)===w[R-1][1]?(w[R][1]=w[R-1][1]+w[R][1].substring(0,w[R][1].length-w[R-1][1].length),w[R+1][1]=w[R-1][1]+w[R+1][1],w.splice(R-1,1),L=!0):w[R][1].substring(0,w[R+1][1].length)==w[R+1][1]&&(w[R-1][1]+=w[R+1][1],w[R][1]=w[R][1].substring(w[R+1][1].length)+w[R+1][1],w.splice(R+1,1),L=!0)),R++;L&&_(w,j)}function h(w){return w>=55296&&w<=56319}function f(w){return w>=56320&&w<=57343}function v(w){return f(w.charCodeAt(0))}function b(w){return h(w.charCodeAt(w.length-1))}function S(w){for(var j=[],R=0;R<w.length;R++)w[R][1].length>0&&j.push(w[R]);return j}function N(w,j,R,I){return b(w)||v(I)?null:S([[t,w],[r,j],[e,R],[t,I]])}function C(w,j,R){var I=typeof R=="number"?{index:R,length:0}:R.oldRange,D=typeof R=="number"?null:R.newRange,q=w.length,$=j.length;if(I.length===0&&(D===null||D.length===0)){var U=I.index,K=w.slice(0,U),V=w.slice(U),ne=D?D.index:null;e:{var te=U+$-q;if(ne!==null&&ne!==te||te<0||te>$)break e;var L=j.slice(0,te),B=j.slice(te);if(B!==V)break e;var k=Math.min(U,te),Y=K.slice(0,k),re=L.slice(0,k);if(Y!==re)break e;var X=K.slice(k),ee=L.slice(k);return N(Y,X,ee,V)}e:{if(ne!==null&&ne!==U)break e;var J=U,L=j.slice(0,J),B=j.slice(J);if(L!==K)break e;var Q=Math.min(q-J,$-J),oe=V.slice(V.length-Q),le=B.slice(B.length-Q);if(oe!==le)break e;var X=V.slice(0,V.length-Q),ee=B.slice(0,B.length-Q);return N(K,X,ee,oe)}}if(I.length>0&&D&&D.length===0)e:{var Y=w.slice(0,I.index),oe=w.slice(I.index+I.length),k=Y.length,Q=oe.length;if($<k+Q)break e;var re=j.slice(0,k),le=j.slice($-Q);if(Y!==re||oe!==le)break e;var X=w.slice(k,q-Q),ee=j.slice(k,$-Q);return N(Y,X,ee,oe)}return null}function P(w,j,R,I){return n(w,j,R,I,!0)}return P.INSERT=e,P.DELETE=r,P.EQUAL=t,Ks=P,Ks}var Yn={exports:{}};Yn.exports;var yu;function Ts(){return yu||(yu=1,(function(r,e){var t=200,n="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",l="[object Array]",u="[object Boolean]",a="[object Date]",o="[object Error]",c="[object Function]",g="[object GeneratorFunction]",p="[object Map]",d="[object Number]",m="[object Object]",A="[object Promise]",O="[object RegExp]",E="[object Set]",_="[object String]",h="[object Symbol]",f="[object WeakMap]",v="[object ArrayBuffer]",b="[object DataView]",S="[object Float32Array]",N="[object Float64Array]",C="[object Int8Array]",P="[object Int16Array]",w="[object Int32Array]",j="[object Uint8Array]",R="[object Uint8ClampedArray]",I="[object Uint16Array]",D="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,$=/\w*$/,U=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,V={};V[s]=V[l]=V[v]=V[b]=V[u]=V[a]=V[S]=V[N]=V[C]=V[P]=V[w]=V[p]=V[d]=V[m]=V[O]=V[E]=V[_]=V[h]=V[j]=V[R]=V[I]=V[D]=!0,V[o]=V[c]=V[f]=!1;var ne=typeof window=="object"&&window&&window.Object===Object&&window,te=typeof self=="object"&&self&&self.Object===Object&&self,L=ne||te||Function("return this")(),B=e&&!e.nodeType&&e,k=B&&!0&&r&&!r.nodeType&&r,Y=k&&k.exports===B;function re(y,T){return y.set(T[0],T[1]),y}function X(y,T){return y.add(T),y}function ee(y,T){for(var x=-1,W=y?y.length:0;++x<W&&T(y[x],x,y)!==!1;);return y}function J(y,T){for(var x=-1,W=T.length,Ee=y.length;++x<W;)y[Ee+x]=T[x];return y}function Q(y,T,x,W){for(var Ee=-1,ve=y?y.length:0;++Ee<ve;)x=T(x,y[Ee],Ee,y);return x}function oe(y,T){for(var x=-1,W=Array(y);++x<y;)W[x]=T(x);return W}function le(y,T){return y==null?void 0:y[T]}function he(y){var T=!1;if(y!=null&&typeof y.toString!="function")try{T=!!(y+"")}catch{}return T}function me(y){var T=-1,x=Array(y.size);return y.forEach(function(W,Ee){x[++T]=[Ee,W]}),x}function Ae(y,T){return function(x){return y(T(x))}}function Qe(y){var T=-1,x=Array(y.size);return y.forEach(function(W){x[++T]=W}),x}var Ze=Array.prototype,G=Function.prototype,xe=Object.prototype,Be=L["__core-js_shared__"],Ue=(function(){var y=/[^.]+$/.exec(Be&&Be.keys&&Be.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""})(),De=G.toString,Oe=xe.hasOwnProperty,tt=xe.toString,Ge=RegExp("^"+De.call(Oe).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fe=Y?L.Buffer:void 0,je=L.Symbol,rt=L.Uint8Array,Me=Ae(Object.getPrototypeOf,Object),hr=Object.create,Ut=xe.propertyIsEnumerable,en=Ze.splice,dr=Object.getOwnPropertySymbols,pr=Fe?Fe.isBuffer:void 0,Dr=Ae(Object.keys,Object),Ht=gt(L,"DataView"),bt=gt(L,"Map"),at=gt(L,"Promise"),ft=gt(L,"Set"),lt=gt(L,"WeakMap"),nt=gt(Object,"create"),zt=st(Ht),ht=st(bt),Vt=st(at),jt=st(ft),gr=st(lt),Ct=je?je.prototype:void 0,vr=Ct?Ct.valueOf:void 0;function it(y){var T=-1,x=y?y.length:0;for(this.clear();++T<x;){var W=y[T];this.set(W[0],W[1])}}function dt(){this.__data__=nt?nt(null):{}}function pt(y){return this.has(y)&&delete this.__data__[y]}function Gt(y){var T=this.__data__;if(nt){var x=T[y];return x===n?void 0:x}return Oe.call(T,y)?T[y]:void 0}function _t(y){var T=this.__data__;return nt?T[y]!==void 0:Oe.call(T,y)}function Wt(y,T){var x=this.__data__;return x[y]=nt&&T===void 0?n:T,this}it.prototype.clear=dt,it.prototype.delete=pt,it.prototype.get=Gt,it.prototype.has=_t,it.prototype.set=Wt;function $e(y){var T=-1,x=y?y.length:0;for(this.clear();++T<x;){var W=y[T];this.set(W[0],W[1])}}function yr(){this.__data__=[]}function jr(y){var T=this.__data__,x=ae(T,y);if(x<0)return!1;var W=T.length-1;return x==W?T.pop():en.call(T,x,1),!0}function Mt(y){var T=this.__data__,x=ae(T,y);return x<0?void 0:T[x][1]}function qt(y){return ae(this.__data__,y)>-1}function wr(y,T){var x=this.__data__,W=ae(x,y);return W<0?x.push([y,T]):x[W][1]=T,this}$e.prototype.clear=yr,$e.prototype.delete=jr,$e.prototype.get=Mt,$e.prototype.has=qt,$e.prototype.set=wr;function He(y){var T=-1,x=y?y.length:0;for(this.clear();++T<x;){var W=y[T];this.set(W[0],W[1])}}function Mr(){this.__data__={hash:new it,map:new(bt||$e),string:new it}}function Kt(y){return At(this,y).delete(y)}function It(y){return At(this,y).get(y)}function kr(y){return At(this,y).has(y)}function F(y,T){return At(this,y).set(y,T),this}He.prototype.clear=Mr,He.prototype.delete=Kt,He.prototype.get=It,He.prototype.has=kr,He.prototype.set=F;function H(y){this.__data__=new $e(y)}function ie(){this.__data__=new $e}function ce(y){return this.__data__.delete(y)}function Ne(y){return this.__data__.get(y)}function be(y){return this.__data__.has(y)}function M(y,T){var x=this.__data__;if(x instanceof $e){var W=x.__data__;if(!bt||W.length<t-1)return W.push([y,T]),this;x=this.__data__=new He(W)}return x.set(y,T),this}H.prototype.clear=ie,H.prototype.delete=ce,H.prototype.get=Ne,H.prototype.has=be,H.prototype.set=M;function z(y,T){var x=Un(y)||vn(y)?oe(y.length,String):[],W=x.length,Ee=!!W;for(var ve in y)Oe.call(y,ve)&&!(Ee&&(ve=="length"||Br(ve,W)))&&x.push(ve);return x}function se(y,T,x){var W=y[T];(!(Oe.call(y,T)&&Li(W,x))||x===void 0&&!(T in y))&&(y[T]=x)}function ae(y,T){for(var x=y.length;x--;)if(Li(y[x][0],T))return x;return-1}function ye(y,T){return y&&et(T,zn(T),y)}function Ce(y,T,x,W,Ee,ve,Pe){var Ie;if(W&&(Ie=ve?W(y,Ee,ve,Pe):W(y)),Ie!==void 0)return Ie;if(!mr(y))return y;var ot=Un(y);if(ot){if(Ie=pn(y),!T)return we(y,Ie)}else{var ke=ut(y),Ot=ke==c||ke==g;if(Ci(y))return Et(y,T);if(ke==m||ke==s||Ot&&!ve){if(he(y))return ve?y:{};if(Ie=Lt(Ot?{}:y),!T)return Ke(y,ye(Ie,y))}else{if(!V[ke])return ve?y:{};Ie=tn(y,ke,Ce,T)}}Pe||(Pe=new H);var Dt=Pe.get(y);if(Dt)return Dt;if(Pe.set(y,Ie),!ot)var ct=x?Nt(y):zn(y);return ee(ct||y,function(St,yt){ct&&(yt=St,St=y[yt]),se(Ie,yt,Ce(St,T,x,W,yt,y,Pe))}),Ie}function ze(y){return mr(y)?hr(y):{}}function Se(y,T,x){var W=T(y);return Un(y)?W:J(W,x(y))}function Xe(y){return tt.call(y)}function Ve(y){if(!mr(y)||gn(y))return!1;var T=Hn(y)||he(y)?Ge:U;return T.test(st(y))}function xt(y){if(!Tr(y))return Dr(y);var T=[];for(var x in Object(y))Oe.call(y,x)&&x!="constructor"&&T.push(x);return T}function Et(y,T){if(T)return y.slice();var x=new y.constructor(y.length);return y.copy(x),x}function Pt(y){var T=new y.constructor(y.byteLength);return new rt(T).set(new rt(y)),T}function ge(y,T){var x=T?Pt(y.buffer):y.buffer;return new y.constructor(x,y.byteOffset,y.byteLength)}function qe(y,T,x){var W=T?x(me(y),!0):me(y);return Q(W,re,new y.constructor)}function We(y){var T=new y.constructor(y.source,$.exec(y));return T.lastIndex=y.lastIndex,T}function _e(y,T,x){var W=T?x(Qe(y),!0):Qe(y);return Q(W,X,new y.constructor)}function Te(y){return vr?Object(vr.call(y)):{}}function Rt(y,T){var x=T?Pt(y.buffer):y.buffer;return new y.constructor(x,y.byteOffset,y.length)}function we(y,T){var x=-1,W=y.length;for(T||(T=Array(W));++x<W;)T[x]=y[x];return T}function et(y,T,x,W){x||(x={});for(var Ee=-1,ve=T.length;++Ee<ve;){var Pe=T[Ee],Ie=void 0;se(x,Pe,Ie===void 0?y[Pe]:Ie)}return x}function Ke(y,T){return et(y,vt(y),T)}function Nt(y){return Se(y,zn,vt)}function At(y,T){var x=y.__data__;return Fr(T)?x[typeof T=="string"?"string":"hash"]:x.map}function gt(y,T){var x=le(y,T);return Ve(x)?x:void 0}var vt=dr?Ae(dr,Object):Us,ut=Xe;(Ht&&ut(new Ht(new ArrayBuffer(1)))!=b||bt&&ut(new bt)!=p||at&&ut(at.resolve())!=A||ft&&ut(new ft)!=E||lt&&ut(new lt)!=f)&&(ut=function(y){var T=tt.call(y),x=T==m?y.constructor:void 0,W=x?st(x):void 0;if(W)switch(W){case zt:return b;case ht:return p;case Vt:return A;case jt:return E;case gr:return f}return T});function pn(y){var T=y.length,x=y.constructor(T);return T&&typeof y[0]=="string"&&Oe.call(y,"index")&&(x.index=y.index,x.input=y.input),x}function Lt(y){return typeof y.constructor=="function"&&!Tr(y)?ze(Me(y)):{}}function tn(y,T,x,W){var Ee=y.constructor;switch(T){case v:return Pt(y);case u:case a:return new Ee(+y);case b:return ge(y,W);case S:case N:case C:case P:case w:case j:case R:case I:case D:return Rt(y,W);case p:return qe(y,W,x);case d:case _:return new Ee(y);case O:return We(y);case E:return _e(y,W,x);case h:return Te(y)}}function Br(y,T){return T=T==null?i:T,!!T&&(typeof y=="number"||K.test(y))&&y>-1&&y%1==0&&y<T}function Fr(y){var T=typeof y;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?y!=="__proto__":y===null}function gn(y){return!!Ue&&Ue in y}function Tr(y){var T=y&&y.constructor,x=typeof T=="function"&&T.prototype||xe;return y===x}function st(y){if(y!=null){try{return De.call(y)}catch{}try{return y+""}catch{}}return""}function Ni(y){return Ce(y,!0,!0)}function Li(y,T){return y===T||y!==y&&T!==T}function vn(y){return $s(y)&&Oe.call(y,"callee")&&(!Ut.call(y,"callee")||tt.call(y)==s)}var Un=Array.isArray;function yn(y){return y!=null&&qi(y.length)&&!Hn(y)}function $s(y){return Ii(y)&&yn(y)}var Ci=pr||Hs;function Hn(y){var T=mr(y)?tt.call(y):"";return T==c||T==g}function qi(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=i}function mr(y){var T=typeof y;return!!y&&(T=="object"||T=="function")}function Ii(y){return!!y&&typeof y=="object"}function zn(y){return yn(y)?z(y):xt(y)}function Us(){return[]}function Hs(){return!1}r.exports=Ni})(Yn,Yn.exports)),Yn.exports}var Zn={exports:{}};Zn.exports;var mu;function Rs(){return mu||(mu=1,(function(r,e){var t=200,n="__lodash_hash_undefined__",i=1,s=2,l=9007199254740991,u="[object Arguments]",a="[object Array]",o="[object AsyncFunction]",c="[object Boolean]",g="[object Date]",p="[object Error]",d="[object Function]",m="[object GeneratorFunction]",A="[object Map]",O="[object Number]",E="[object Null]",_="[object Object]",h="[object Promise]",f="[object Proxy]",v="[object RegExp]",b="[object Set]",S="[object String]",N="[object Symbol]",C="[object Undefined]",P="[object WeakMap]",w="[object ArrayBuffer]",j="[object DataView]",R="[object Float32Array]",I="[object Float64Array]",D="[object Int8Array]",q="[object Int16Array]",$="[object Int32Array]",U="[object Uint8Array]",K="[object Uint8ClampedArray]",V="[object Uint16Array]",ne="[object Uint32Array]",te=/[\\^$.*+?()[\]{}|]/g,L=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,k={};k[R]=k[I]=k[D]=k[q]=k[$]=k[U]=k[K]=k[V]=k[ne]=!0,k[u]=k[a]=k[w]=k[c]=k[j]=k[g]=k[p]=k[d]=k[A]=k[O]=k[_]=k[v]=k[b]=k[S]=k[P]=!1;var Y=typeof window=="object"&&window&&window.Object===Object&&window,re=typeof self=="object"&&self&&self.Object===Object&&self,X=Y||re||Function("return this")(),ee=e&&!e.nodeType&&e,J=ee&&!0&&r&&!r.nodeType&&r,Q=J&&J.exports===ee,oe=Q&&Y.process,le=(function(){try{return oe&&oe.binding&&oe.binding("util")}catch{}})(),he=le&&le.isTypedArray;function me(y,T){for(var x=-1,W=y==null?0:y.length,Ee=0,ve=[];++x<W;){var Pe=y[x];T(Pe,x,y)&&(ve[Ee++]=Pe)}return ve}function Ae(y,T){for(var x=-1,W=T.length,Ee=y.length;++x<W;)y[Ee+x]=T[x];return y}function Qe(y,T){for(var x=-1,W=y==null?0:y.length;++x<W;)if(T(y[x],x,y))return!0;return!1}function Ze(y,T){for(var x=-1,W=Array(y);++x<y;)W[x]=T(x);return W}function G(y){return function(T){return y(T)}}function xe(y,T){return y.has(T)}function Be(y,T){return y==null?void 0:y[T]}function Ue(y){var T=-1,x=Array(y.size);return y.forEach(function(W,Ee){x[++T]=[Ee,W]}),x}function De(y,T){return function(x){return y(T(x))}}function Oe(y){var T=-1,x=Array(y.size);return y.forEach(function(W){x[++T]=W}),x}var tt=Array.prototype,Ge=Function.prototype,Fe=Object.prototype,je=X["__core-js_shared__"],rt=Ge.toString,Me=Fe.hasOwnProperty,hr=(function(){var y=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""})(),Ut=Fe.toString,en=RegExp("^"+rt.call(Me).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dr=Q?X.Buffer:void 0,pr=X.Symbol,Dr=X.Uint8Array,Ht=Fe.propertyIsEnumerable,bt=tt.splice,at=pr?pr.toStringTag:void 0,ft=Object.getOwnPropertySymbols,lt=dr?dr.isBuffer:void 0,nt=De(Object.keys,Object),zt=vt(X,"DataView"),ht=vt(X,"Map"),Vt=vt(X,"Promise"),jt=vt(X,"Set"),gr=vt(X,"WeakMap"),Ct=vt(Object,"create"),vr=st(zt),it=st(ht),dt=st(Vt),pt=st(jt),Gt=st(gr),_t=pr?pr.prototype:void 0,Wt=_t?_t.valueOf:void 0;function $e(y){var T=-1,x=y==null?0:y.length;for(this.clear();++T<x;){var W=y[T];this.set(W[0],W[1])}}function yr(){this.__data__=Ct?Ct(null):{},this.size=0}function jr(y){var T=this.has(y)&&delete this.__data__[y];return this.size-=T?1:0,T}function Mt(y){var T=this.__data__;if(Ct){var x=T[y];return x===n?void 0:x}return Me.call(T,y)?T[y]:void 0}function qt(y){var T=this.__data__;return Ct?T[y]!==void 0:Me.call(T,y)}function wr(y,T){var x=this.__data__;return this.size+=this.has(y)?0:1,x[y]=Ct&&T===void 0?n:T,this}$e.prototype.clear=yr,$e.prototype.delete=jr,$e.prototype.get=Mt,$e.prototype.has=qt,$e.prototype.set=wr;function He(y){var T=-1,x=y==null?0:y.length;for(this.clear();++T<x;){var W=y[T];this.set(W[0],W[1])}}function Mr(){this.__data__=[],this.size=0}function Kt(y){var T=this.__data__,x=Et(T,y);if(x<0)return!1;var W=T.length-1;return x==W?T.pop():bt.call(T,x,1),--this.size,!0}function It(y){var T=this.__data__,x=Et(T,y);return x<0?void 0:T[x][1]}function kr(y){return Et(this.__data__,y)>-1}function F(y,T){var x=this.__data__,W=Et(x,y);return W<0?(++this.size,x.push([y,T])):x[W][1]=T,this}He.prototype.clear=Mr,He.prototype.delete=Kt,He.prototype.get=It,He.prototype.has=kr,He.prototype.set=F;function H(y){var T=-1,x=y==null?0:y.length;for(this.clear();++T<x;){var W=y[T];this.set(W[0],W[1])}}function ie(){this.size=0,this.__data__={hash:new $e,map:new(ht||He),string:new $e}}function ce(y){var T=gt(this,y).delete(y);return this.size-=T?1:0,T}function Ne(y){return gt(this,y).get(y)}function be(y){return gt(this,y).has(y)}function M(y,T){var x=gt(this,y),W=x.size;return x.set(y,T),this.size+=x.size==W?0:1,this}H.prototype.clear=ie,H.prototype.delete=ce,H.prototype.get=Ne,H.prototype.has=be,H.prototype.set=M;function z(y){var T=-1,x=y==null?0:y.length;for(this.__data__=new H;++T<x;)this.add(y[T])}function se(y){return this.__data__.set(y,n),this}function ae(y){return this.__data__.has(y)}z.prototype.add=z.prototype.push=se,z.prototype.has=ae;function ye(y){var T=this.__data__=new He(y);this.size=T.size}function Ce(){this.__data__=new He,this.size=0}function ze(y){var T=this.__data__,x=T.delete(y);return this.size=T.size,x}function Se(y){return this.__data__.get(y)}function Xe(y){return this.__data__.has(y)}function Ve(y,T){var x=this.__data__;if(x instanceof He){var W=x.__data__;if(!ht||W.length<t-1)return W.push([y,T]),this.size=++x.size,this;x=this.__data__=new H(W)}return x.set(y,T),this.size=x.size,this}ye.prototype.clear=Ce,ye.prototype.delete=ze,ye.prototype.get=Se,ye.prototype.has=Xe,ye.prototype.set=Ve;function xt(y,T){var x=vn(y),W=!x&&Li(y),Ee=!x&&!W&&yn(y),ve=!x&&!W&&!Ee&&Ii(y),Pe=x||W||Ee||ve,Ie=Pe?Ze(y.length,String):[],ot=Ie.length;for(var ke in y)Me.call(y,ke)&&!(Pe&&(ke=="length"||Ee&&(ke=="offset"||ke=="parent")||ve&&(ke=="buffer"||ke=="byteLength"||ke=="byteOffset")||tn(ke,ot)))&&Ie.push(ke);return Ie}function Et(y,T){for(var x=y.length;x--;)if(Ni(y[x][0],T))return x;return-1}function Pt(y,T,x){var W=T(y);return vn(y)?W:Ae(W,x(y))}function ge(y){return y==null?y===void 0?C:E:at&&at in Object(y)?ut(y):Tr(y)}function qe(y){return mr(y)&&ge(y)==u}function We(y,T,x,W,Ee){return y===T?!0:y==null||T==null||!mr(y)&&!mr(T)?y!==y&&T!==T:_e(y,T,x,W,We,Ee)}function _e(y,T,x,W,Ee,ve){var Pe=vn(y),Ie=vn(T),ot=Pe?a:Lt(y),ke=Ie?a:Lt(T);ot=ot==u?_:ot,ke=ke==u?_:ke;var Ot=ot==_,Dt=ke==_,ct=ot==ke;if(ct&&yn(y)){if(!yn(T))return!1;Pe=!0,Ot=!1}if(ct&&!Ot)return ve||(ve=new ye),Pe||Ii(y)?et(y,T,x,W,Ee,ve):Ke(y,T,ot,x,W,Ee,ve);if(!(x&i)){var St=Ot&&Me.call(y,"__wrapped__"),yt=Dt&&Me.call(T,"__wrapped__");if(St||yt){var $r=St?y.value():y,Rr=yt?T.value():T;return ve||(ve=new ye),Ee($r,Rr,x,W,ve)}}return ct?(ve||(ve=new ye),Nt(y,T,x,W,Ee,ve)):!1}function Te(y){if(!qi(y)||Fr(y))return!1;var T=Ci(y)?en:L;return T.test(st(y))}function Rt(y){return mr(y)&&Hn(y.length)&&!!k[ge(y)]}function we(y){if(!gn(y))return nt(y);var T=[];for(var x in Object(y))Me.call(y,x)&&x!="constructor"&&T.push(x);return T}function et(y,T,x,W,Ee,ve){var Pe=x&i,Ie=y.length,ot=T.length;if(Ie!=ot&&!(Pe&&ot>Ie))return!1;var ke=ve.get(y);if(ke&&ve.get(T))return ke==T;var Ot=-1,Dt=!0,ct=x&s?new z:void 0;for(ve.set(y,T),ve.set(T,y);++Ot<Ie;){var St=y[Ot],yt=T[Ot];if(W)var $r=Pe?W(yt,St,Ot,T,y,ve):W(St,yt,Ot,y,T,ve);if($r!==void 0){if($r)continue;Dt=!1;break}if(ct){if(!Qe(T,function(Rr,rn){if(!xe(ct,rn)&&(St===Rr||Ee(St,Rr,x,W,ve)))return ct.push(rn)})){Dt=!1;break}}else if(!(St===yt||Ee(St,yt,x,W,ve))){Dt=!1;break}}return ve.delete(y),ve.delete(T),Dt}function Ke(y,T,x,W,Ee,ve,Pe){switch(x){case j:if(y.byteLength!=T.byteLength||y.byteOffset!=T.byteOffset)return!1;y=y.buffer,T=T.buffer;case w:return!(y.byteLength!=T.byteLength||!ve(new Dr(y),new Dr(T)));case c:case g:case O:return Ni(+y,+T);case p:return y.name==T.name&&y.message==T.message;case v:case S:return y==T+"";case A:var Ie=Ue;case b:var ot=W&i;if(Ie||(Ie=Oe),y.size!=T.size&&!ot)return!1;var ke=Pe.get(y);if(ke)return ke==T;W|=s,Pe.set(y,T);var Ot=et(Ie(y),Ie(T),W,Ee,ve,Pe);return Pe.delete(y),Ot;case N:if(Wt)return Wt.call(y)==Wt.call(T)}return!1}function Nt(y,T,x,W,Ee,ve){var Pe=x&i,Ie=At(y),ot=Ie.length,ke=At(T),Ot=ke.length;if(ot!=Ot&&!Pe)return!1;for(var Dt=ot;Dt--;){var ct=Ie[Dt];if(!(Pe?ct in T:Me.call(T,ct)))return!1}var St=ve.get(y);if(St&&ve.get(T))return St==T;var yt=!0;ve.set(y,T),ve.set(T,y);for(var $r=Pe;++Dt<ot;){ct=Ie[Dt];var Rr=y[ct],rn=T[ct];if(W)var Ul=Pe?W(rn,Rr,ct,T,y,ve):W(Rr,rn,ct,y,T,ve);if(!(Ul===void 0?Rr===rn||Ee(Rr,rn,x,W,ve):Ul)){yt=!1;break}$r||($r=ct=="constructor")}if(yt&&!$r){var xi=y.constructor,Pi=T.constructor;xi!=Pi&&"constructor"in y&&"constructor"in T&&!(typeof xi=="function"&&xi instanceof xi&&typeof Pi=="function"&&Pi instanceof Pi)&&(yt=!1)}return ve.delete(y),ve.delete(T),yt}function At(y){return Pt(y,zn,pn)}function gt(y,T){var x=y.__data__;return Br(T)?x[typeof T=="string"?"string":"hash"]:x.map}function vt(y,T){var x=Be(y,T);return Te(x)?x:void 0}function ut(y){var T=Me.call(y,at),x=y[at];try{y[at]=void 0;var W=!0}catch{}var Ee=Ut.call(y);return W&&(T?y[at]=x:delete y[at]),Ee}var pn=ft?function(y){return y==null?[]:(y=Object(y),me(ft(y),function(T){return Ht.call(y,T)}))}:Us,Lt=ge;(zt&&Lt(new zt(new ArrayBuffer(1)))!=j||ht&&Lt(new ht)!=A||Vt&&Lt(Vt.resolve())!=h||jt&&Lt(new jt)!=b||gr&&Lt(new gr)!=P)&&(Lt=function(y){var T=ge(y),x=T==_?y.constructor:void 0,W=x?st(x):"";if(W)switch(W){case vr:return j;case it:return A;case dt:return h;case pt:return b;case Gt:return P}return T});function tn(y,T){return T=T==null?l:T,!!T&&(typeof y=="number"||B.test(y))&&y>-1&&y%1==0&&y<T}function Br(y){var T=typeof y;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?y!=="__proto__":y===null}function Fr(y){return!!hr&&hr in y}function gn(y){var T=y&&y.constructor,x=typeof T=="function"&&T.prototype||Fe;return y===x}function Tr(y){return Ut.call(y)}function st(y){if(y!=null){try{return rt.call(y)}catch{}try{return y+""}catch{}}return""}function Ni(y,T){return y===T||y!==y&&T!==T}var Li=qe((function(){return arguments})())?qe:function(y){return mr(y)&&Me.call(y,"callee")&&!Ht.call(y,"callee")},vn=Array.isArray;function Un(y){return y!=null&&Hn(y.length)&&!Ci(y)}var yn=lt||Hs;function $s(y,T){return We(y,T)}function Ci(y){if(!qi(y))return!1;var T=ge(y);return T==d||T==m||T==o||T==f}function Hn(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=l}function qi(y){var T=typeof y;return y!=null&&(T=="object"||T=="function")}function mr(y){return y!=null&&typeof y=="object"}var Ii=he?G(he):Rt;function zn(y){return Un(y)?xt(y):we(y)}function Us(){return[]}function Hs(){return!1}r.exports=$s})(Zn,Zn.exports)),Zn.exports}var Mi={},bu;function $m(){if(bu)return Mi;bu=1,Object.defineProperty(Mi,"__esModule",{value:!0});const r=Ts(),e=Rs();var t;return(function(n){function i(a={},o={},c=!1){typeof a!="object"&&(a={}),typeof o!="object"&&(o={});let g=r(o);c||(g=Object.keys(g).reduce((p,d)=>(g[d]!=null&&(p[d]=g[d]),p),{}));for(const p in a)a[p]!==void 0&&o[p]===void 0&&(g[p]=a[p]);return Object.keys(g).length>0?g:void 0}n.compose=i;function s(a={},o={}){typeof a!="object"&&(a={}),typeof o!="object"&&(o={});const c=Object.keys(a).concat(Object.keys(o)).reduce((g,p)=>(e(a[p],o[p])||(g[p]=o[p]===void 0?null:o[p]),g),{});return Object.keys(c).length>0?c:void 0}n.diff=s;function l(a={},o={}){a=a||{};const c=Object.keys(o).reduce((g,p)=>(o[p]!==a[p]&&a[p]!==void 0&&(g[p]=o[p]),g),{});return Object.keys(a).reduce((g,p)=>(a[p]!==o[p]&&o[p]===void 0&&(g[p]=null),g),c)}n.invert=l;function u(a,o,c=!1){if(typeof a!="object")return o;if(typeof o!="object")return;if(!c)return o;const g=Object.keys(o).reduce((p,d)=>(a[d]===void 0&&(p[d]=o[d]),p),{});return Object.keys(g).length>0?g:void 0}n.transform=u})(t||(t={})),Mi.default=t,Mi}var ki={},_u;function gh(){if(_u)return ki;_u=1,Object.defineProperty(ki,"__esModule",{value:!0});var r;return(function(e){function t(n){return typeof n.delete=="number"?n.delete:typeof n.retain=="number"?n.retain:typeof n.retain=="object"&&n.retain!==null?1:typeof n.insert=="string"?n.insert.length:1}e.length=t})(r||(r={})),ki.default=r,ki}var Bi={},Eu;function Um(){if(Eu)return Bi;Eu=1,Object.defineProperty(Bi,"__esModule",{value:!0});const r=gh();class e{constructor(n){this.ops=n,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(n){n||(n=1/0);const i=this.ops[this.index];if(i){const s=this.offset,l=r.default.length(i);if(n>=l-s?(n=l-s,this.index+=1,this.offset=0):this.offset+=n,typeof i.delete=="number")return{delete:n};{const u={};return i.attributes&&(u.attributes=i.attributes),typeof i.retain=="number"?u.retain=n:typeof i.retain=="object"&&i.retain!==null?u.retain=i.retain:typeof i.insert=="string"?u.insert=i.insert.substr(s,n):u.insert=i.insert,u}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?r.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const n=this.ops[this.index];return n?typeof n.delete=="number"?"delete":typeof n.retain=="number"||typeof n.retain=="object"&&n.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const n=this.offset,i=this.index,s=this.next(),l=this.ops.slice(this.index);return this.offset=n,this.index=i,[s].concat(l)}}else return[]}}return Bi.default=e,Bi}var Au;function Hm(){return Au||(Au=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const t=Fm(),n=Ts(),i=Rs(),s=$m();e.AttributeMap=s.default;const l=gh();e.Op=l.default;const u=Um();e.OpIterator=u.default;const a="\0",o=(g,p)=>{if(typeof g!="object"||g===null)throw new Error(`cannot retain a ${typeof g}`);if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);const d=Object.keys(g)[0];if(!d||d!==Object.keys(p)[0])throw new Error(`embed types not matched: ${d} != ${Object.keys(p)[0]}`);return[d,g[d],p[d]]};class c{constructor(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]}static registerEmbed(p,d){this.handlers[p]=d}static unregisterEmbed(p){delete this.handlers[p]}static getHandler(p){const d=this.handlers[p];if(!d)throw new Error(`no handlers for embed type "${p}"`);return d}insert(p,d){const m={};return typeof p=="string"&&p.length===0?this:(m.insert=p,d!=null&&typeof d=="object"&&Object.keys(d).length>0&&(m.attributes=d),this.push(m))}delete(p){return p<=0?this:this.push({delete:p})}retain(p,d){if(typeof p=="number"&&p<=0)return this;const m={retain:p};return d!=null&&typeof d=="object"&&Object.keys(d).length>0&&(m.attributes=d),this.push(m)}push(p){let d=this.ops.length,m=this.ops[d-1];if(p=n(p),typeof m=="object"){if(typeof p.delete=="number"&&typeof m.delete=="number")return this.ops[d-1]={delete:m.delete+p.delete},this;if(typeof m.delete=="number"&&p.insert!=null&&(d-=1,m=this.ops[d-1],typeof m!="object"))return this.ops.unshift(p),this;if(i(p.attributes,m.attributes)){if(typeof p.insert=="string"&&typeof m.insert=="string")return this.ops[d-1]={insert:m.insert+p.insert},typeof p.attributes=="object"&&(this.ops[d-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof m.retain=="number")return this.ops[d-1]={retain:m.retain+p.retain},typeof p.attributes=="object"&&(this.ops[d-1].attributes=p.attributes),this}}return d===this.ops.length?this.ops.push(p):this.ops.splice(d,0,p),this}chop(){const p=this.ops[this.ops.length-1];return p&&typeof p.retain=="number"&&!p.attributes&&this.ops.pop(),this}filter(p){return this.ops.filter(p)}forEach(p){this.ops.forEach(p)}map(p){return this.ops.map(p)}partition(p){const d=[],m=[];return this.forEach(A=>{(p(A)?d:m).push(A)}),[d,m]}reduce(p,d){return this.ops.reduce(p,d)}changeLength(){return this.reduce((p,d)=>d.insert?p+l.default.length(d):d.delete?p-d.delete:p,0)}length(){return this.reduce((p,d)=>p+l.default.length(d),0)}slice(p=0,d=1/0){const m=[],A=new u.default(this.ops);let O=0;for(;O<d&&A.hasNext();){let E;O<p?E=A.next(p-O):(E=A.next(d-O),m.push(E)),O+=l.default.length(E)}return new c(m)}compose(p){const d=new u.default(this.ops),m=new u.default(p.ops),A=[],O=m.peek();if(O!=null&&typeof O.retain=="number"&&O.attributes==null){let _=O.retain;for(;d.peekType()==="insert"&&d.peekLength()<=_;)_-=d.peekLength(),A.push(d.next());O.retain-_>0&&m.next(O.retain-_)}const E=new c(A);for(;d.hasNext()||m.hasNext();)if(m.peekType()==="insert")E.push(m.next());else if(d.peekType()==="delete")E.push(d.next());else{const _=Math.min(d.peekLength(),m.peekLength()),h=d.next(_),f=m.next(_);if(f.retain){const v={};if(typeof h.retain=="number")v.retain=typeof f.retain=="number"?_:f.retain;else if(typeof f.retain=="number")h.retain==null?v.insert=h.insert:v.retain=h.retain;else{const S=h.retain==null?"insert":"retain",[N,C,P]=o(h[S],f.retain),w=c.getHandler(N);v[S]={[N]:w.compose(C,P,S==="retain")}}const b=s.default.compose(h.attributes,f.attributes,typeof h.retain=="number");if(b&&(v.attributes=b),E.push(v),!m.hasNext()&&i(E.ops[E.ops.length-1],v)){const S=new c(d.rest());return E.concat(S).chop()}}else typeof f.delete=="number"&&(typeof h.retain=="number"||typeof h.retain=="object"&&h.retain!==null)&&E.push(f)}return E.chop()}concat(p){const d=new c(this.ops.slice());return p.ops.length>0&&(d.push(p.ops[0]),d.ops=d.ops.concat(p.ops.slice(1))),d}diff(p,d){if(this.ops===p.ops)return new c;const m=[this,p].map(h=>h.map(f=>{if(f.insert!=null)return typeof f.insert=="string"?f.insert:a;const v=h===p?"on":"with";throw new Error("diff() called "+v+" non-document")}).join("")),A=new c,O=t(m[0],m[1],d,!0),E=new u.default(this.ops),_=new u.default(p.ops);return O.forEach(h=>{let f=h[1].length;for(;f>0;){let v=0;switch(h[0]){case t.INSERT:v=Math.min(_.peekLength(),f),A.push(_.next(v));break;case t.DELETE:v=Math.min(f,E.peekLength()),E.next(v),A.delete(v);break;case t.EQUAL:v=Math.min(E.peekLength(),_.peekLength(),f);const b=E.next(v),S=_.next(v);i(b.insert,S.insert)?A.retain(v,s.default.diff(b.attributes,S.attributes)):A.push(S).delete(v);break}f-=v}}),A.chop()}eachLine(p,d=`
`){const m=new u.default(this.ops);let A=new c,O=0;for(;m.hasNext();){if(m.peekType()!=="insert")return;const E=m.peek(),_=l.default.length(E)-m.peekLength(),h=typeof E.insert=="string"?E.insert.indexOf(d,_)-_:-1;if(h<0)A.push(m.next());else if(h>0)A.push(m.next(h));else{if(p(A,m.next(1).attributes||{},O)===!1)return;O+=1,A=new c}}A.length()>0&&p(A,{},O)}invert(p){const d=new c;return this.reduce((m,A)=>{if(A.insert)d.delete(l.default.length(A));else{if(typeof A.retain=="number"&&A.attributes==null)return d.retain(A.retain),m+A.retain;if(A.delete||typeof A.retain=="number"){const O=A.delete||A.retain;return p.slice(m,m+O).forEach(_=>{A.delete?d.push(_):A.retain&&A.attributes&&d.retain(l.default.length(_),s.default.invert(A.attributes,_.attributes))}),m+O}else if(typeof A.retain=="object"&&A.retain!==null){const O=p.slice(m,m+1),E=new u.default(O.ops).next(),[_,h,f]=o(A.retain,E.insert),v=c.getHandler(_);return d.retain({[_]:v.invert(h,f)},s.default.invert(A.attributes,E.attributes)),m+1}}return m},0),d.chop()}transform(p,d=!1){if(d=!!d,typeof p=="number")return this.transformPosition(p,d);const m=p,A=new u.default(this.ops),O=new u.default(m.ops),E=new c;for(;A.hasNext()||O.hasNext();)if(A.peekType()==="insert"&&(d||O.peekType()!=="insert"))E.retain(l.default.length(A.next()));else if(O.peekType()==="insert")E.push(O.next());else{const _=Math.min(A.peekLength(),O.peekLength()),h=A.next(_),f=O.next(_);if(h.delete)continue;if(f.delete)E.push(f);else{const v=h.retain,b=f.retain;let S=typeof b=="object"&&b!==null?b:_;if(typeof v=="object"&&v!==null&&typeof b=="object"&&b!==null){const N=Object.keys(v)[0];if(N===Object.keys(b)[0]){const C=c.getHandler(N);C&&(S={[N]:C.transform(v[N],b[N],d)})}}E.retain(S,s.default.transform(h.attributes,f.attributes,d))}}return E.chop()}transformPosition(p,d=!1){d=!!d;const m=new u.default(this.ops);let A=0;for(;m.hasNext()&&A<=p;){const O=m.peekLength(),E=m.peekType();if(m.next(),E==="delete"){p-=Math.min(O,p-A);continue}else E==="insert"&&(A<p||!d)&&(p+=O);A+=O}return p}}c.Op=l.default,c.OpIterator=u.default,c.AttributeMap=s.default,c.handlers={},e.default=c,r.exports=c,r.exports.default=c})(ji,ji.exports)),ji.exports}var Qt=Hm();const de=vi(Qt);class lr extends $t{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}lr.blotName="break";lr.tagName="BR";let sr=class extends rs{};const zm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ns(r){return r.replace(/[&<>"']/g,e=>zm[e])}const br=class br extends vl{static compare(e,t){const n=br.order.indexOf(e),i=br.order.indexOf(t);return n>=0||i>=0?n-i:e===t?0:e<t?-1:1}formatAt(e,t,n,i){if(br.compare(this.statics.blotName,n)<0&&this.scroll.query(n,pe.BLOT)){const s=this.isolate(e,t);i&&s.wrap(n,i)}else super.formatAt(e,t,n,i)}optimize(e){if(super.optimize(e),this.parent instanceof br&&br.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}};ue(br,"allowedChildren",[br,lr,$t,sr]),ue(br,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let Or=br;const Ou=1;class mt extends oi{constructor(){super(...arguments);ue(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=vh(this)),this.cache.delta}deleteAt(t,n){super.deleteAt(t,n),this.cache={}}formatAt(t,n,i,s){n<=0||(this.scroll.query(i,pe.BLOCK)?t+n===this.length()&&this.format(i,s):super.formatAt(t,Math.min(n,this.length()-t-1),i,s),this.cache={})}insertAt(t,n,i){if(i!=null){super.insertAt(t,n,i),this.cache={};return}if(n.length===0)return;const s=n.split(`
`),l=s.shift();l.length>0&&(t<this.length()-1||this.children.tail==null?super.insertAt(Math.min(t,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let u=this;s.reduce((a,o)=>(u=u.split(a,!0),u.insertAt(0,o),o.length),t+l.length)}insertBefore(t,n){const{head:i}=this.children;super.insertBefore(t,n),i instanceof lr&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Ou),this.cache.length}moveChildren(t,n){super.moveChildren(t,n),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(t===0||t>=this.length()-Ou)){const s=this.clone();return t===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}const i=super.split(t,n);return this.cache={},i}}mt.blotName="block";mt.tagName="P";mt.defaultChild=lr;mt.allowedChildren=[lr,Or,$t,sr];class Jt extends $t{attach(){super.attach(),this.attributes=new Ss(this.domNode)}delta(){return new de().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){const n=this.scroll.query(e,pe.BLOCK_ATTRIBUTE);n!=null&&this.attributes.attribute(n,t)}formatAt(e,t,n,i){this.format(n,i)}insertAt(e,t,n){if(n!=null){super.insertAt(e,t,n);return}const i=t.split(`
`),s=i.pop(),l=i.map(a=>{const o=this.scroll.create(mt.blotName);return o.insertAt(0,a),o}),u=this.split(e);l.forEach(a=>{this.parent.insertBefore(a,u)}),s&&this.parent.insertBefore(this.scroll.create("text",s),u)}}Jt.scope=pe.BLOCK_BLOT;function vh(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r.descendants(wt).reduce((t,n)=>n.length()===0?t:t.insert(n.value(),Zt(n,{},e)),new de).insert(`
`,Zt(r))}function Zt(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return r==null||("formats"in r&&typeof r.formats=="function"&&(e={...e,...r.formats()},t&&delete e["code-token"]),r.parent==null||r.parent.statics.blotName==="scroll"||r.parent.statics.scope!==r.statics.scope)?e:Zt(r.parent,e,t)}const Yt=class Yt extends $t{static value(){}constructor(e,t,n){super(e,t),this.selection=n,this.textNode=document.createTextNode(Yt.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let n=this,i=0;for(;n!=null&&n.statics.scope!==pe.BLOCK_BLOT;)i+=n.offset(n.parent),n=n.parent;n!=null&&(this.savedLength=Yt.CONTENTS.length,n.optimize(),n.formatAt(i,Yt.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const t=this.prev instanceof sr?this.prev:null,n=t?t.length():0,i=this.next instanceof sr?this.next:null,s=i?i.text:"",{textNode:l}=this,u=l.data.split(Yt.CONTENTS).join("");l.data=Yt.CONTENTS;let a;if(t)a=t,(u||i)&&(t.insertAt(t.length(),u+s),i&&i.remove());else if(i)a=i,i.insertAt(0,u);else{const o=document.createTextNode(u);a=this.scroll.create(o),this.parent.insertBefore(a,this)}if(this.remove(),e){const o=(p,d)=>t&&p===t.domNode?d:p===l?n+d-1:i&&p===i.domNode?n+u.length+d:null,c=o(e.start.node,e.start.offset),g=o(e.end.node,e.end.offset);if(c!==null&&g!==null)return{startNode:a.domNode,startOffset:c,endNode:a.domNode,endOffset:g}}return null}update(e,t){if(e.some(n=>n.type==="characterData"&&n.target===this.textNode)){const n=this.restore();n&&(t.range=n)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=Yt.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}};ue(Yt,"blotName","cursor"),ue(Yt,"className","ql-cursor"),ue(Yt,"tagName","span"),ue(Yt,"CONTENTS","\uFEFF");let In=Yt;var Ys={exports:{}},Su;function Vm(){return Su||(Su=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(a,o,c){this.fn=a,this.context=o,this.once=c||!1}function s(a,o,c,g,p){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new i(c,g||a,p),m=t?t+o:o;return a._events[m]?a._events[m].fn?a._events[m]=[a._events[m],d]:a._events[m].push(d):(a._events[m]=d,a._eventsCount++),a}function l(a,o){--a._eventsCount===0?a._events=new n:delete a._events[o]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var o=[],c,g;if(this._eventsCount===0)return o;for(g in c=this._events)e.call(c,g)&&o.push(t?g.slice(1):g);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(c)):o},u.prototype.listeners=function(o){var c=t?t+o:o,g=this._events[c];if(!g)return[];if(g.fn)return[g.fn];for(var p=0,d=g.length,m=new Array(d);p<d;p++)m[p]=g[p].fn;return m},u.prototype.listenerCount=function(o){var c=t?t+o:o,g=this._events[c];return g?g.fn?1:g.length:0},u.prototype.emit=function(o,c,g,p,d,m){var A=t?t+o:o;if(!this._events[A])return!1;var O=this._events[A],E=arguments.length,_,h;if(O.fn){switch(O.once&&this.removeListener(o,O.fn,void 0,!0),E){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,c),!0;case 3:return O.fn.call(O.context,c,g),!0;case 4:return O.fn.call(O.context,c,g,p),!0;case 5:return O.fn.call(O.context,c,g,p,d),!0;case 6:return O.fn.call(O.context,c,g,p,d,m),!0}for(h=1,_=new Array(E-1);h<E;h++)_[h-1]=arguments[h];O.fn.apply(O.context,_)}else{var f=O.length,v;for(h=0;h<f;h++)switch(O[h].once&&this.removeListener(o,O[h].fn,void 0,!0),E){case 1:O[h].fn.call(O[h].context);break;case 2:O[h].fn.call(O[h].context,c);break;case 3:O[h].fn.call(O[h].context,c,g);break;case 4:O[h].fn.call(O[h].context,c,g,p);break;default:if(!_)for(v=1,_=new Array(E-1);v<E;v++)_[v-1]=arguments[v];O[h].fn.apply(O[h].context,_)}}return!0},u.prototype.on=function(o,c,g){return s(this,o,c,g,!1)},u.prototype.once=function(o,c,g){return s(this,o,c,g,!0)},u.prototype.removeListener=function(o,c,g,p){var d=t?t+o:o;if(!this._events[d])return this;if(!c)return l(this,d),this;var m=this._events[d];if(m.fn)m.fn===c&&(!p||m.once)&&(!g||m.context===g)&&l(this,d);else{for(var A=0,O=[],E=m.length;A<E;A++)(m[A].fn!==c||p&&!m[A].once||g&&m[A].context!==g)&&O.push(m[A]);O.length?this._events[d]=O.length===1?O[0]:O:l(this,d)}return this},u.prototype.removeAllListeners=function(o){var c;return o?(c=t?t+o:o,this._events[c]&&l(this,c)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=t,u.EventEmitter=u,r.exports=u})(Ys)),Ys.exports}var Gm=Vm();const Wm=vi(Gm),Xa=new WeakMap,Ja=["error","warn","log","info"];let Qa="warn";function yh(r){if(Qa&&Ja.indexOf(r)<=Ja.indexOf(Qa)){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];console[r](...t)}}function xr(r){return Ja.reduce((e,t)=>(e[t]=yh.bind(console,t,r),e),{})}xr.level=r=>{Qa=r};yh.level=xr.level;const Zs=xr("quill:events"),Km=["selectionchange","mousedown","mouseup","click"];Km.forEach(r=>{document.addEventListener(r,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const s=Xa.get(i);s&&s.emitter&&s.emitter.handleDOM(...t)})})});class fe extends Wm{constructor(){super(),this.domListeners={},this.on("error",Zs.error)}emit(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zs.log.call(Zs,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];(this.domListeners[e.type]||[]).forEach(s=>{let{node:l,handler:u}=s;(e.target===l||l.contains(e.target))&&u(e,...n)})}listenDOM(e,t,n){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:n})}}ue(fe,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),ue(fe,"sources",{API:"api",SILENT:"silent",USER:"user"});const Xs=xr("quill:selection");class on{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}}class Ym{constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new on(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,fe.sources.USER),1)}),this.emitter.on(fe.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const n=this.getNativeRange();n!=null&&n.start.node!==this.cursor.textNode&&this.emitter.once(fe.events.SCROLL_UPDATE,(i,s)=>{try{this.root.contains(n.start.node)&&this.root.contains(n.end.node)&&this.setNativeRange(n.start.node,n.start.offset,n.end.node,n.end.offset);const l=s.some(u=>u.type==="characterData"||u.type==="childList"||u.type==="attributes"&&u.target===this.root);this.update(l?fe.sources.SILENT:i)}catch{}})}),this.emitter.on(fe.events.SCROLL_OPTIMIZE,(n,i)=>{if(i.range){const{startNode:s,startOffset:l,endNode:u,endOffset:a}=i.range;this.setNativeRange(s,l,u,a),this.update(fe.sources.SILENT)}}),this.update(fe.sources.SILENT)}handleComposition(){this.emitter.on(fe.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(fe.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(fe.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();const n=this.getNativeRange();if(!(n==null||!n.native.collapsed||this.scroll.query(e,pe.BLOCK))){if(n.start.node!==this.cursor.textNode){const i=this.scroll.find(n.start.node,!1);if(i==null)return;if(i instanceof wt){const s=i.split(n.start.offset);i.parent.insertBefore(this.cursor,s)}else i.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=this.scroll.length();e=Math.min(e,n-1),t=Math.min(e+t,n-1)-e;let i,[s,l]=this.scroll.leaf(e);if(s==null)return null;if(t>0&&l===s.length()){const[c]=this.scroll.leaf(e+1);if(c){const[g]=this.scroll.line(e),[p]=this.scroll.line(e+1);g===p&&(s=c,l=0)}}[i,l]=s.position(l,!0);const u=document.createRange();if(t>0)return u.setStart(i,l),[s,l]=this.scroll.leaf(e+t),s==null?null:([i,l]=s.position(l,!0),u.setEnd(i,l),u.getBoundingClientRect());let a="left",o;if(i instanceof Text){if(!i.data.length)return null;l<i.data.length?(u.setStart(i,l),u.setEnd(i,l+1)):(u.setStart(i,l-1),u.setEnd(i,l),a="right"),o=u.getBoundingClientRect()}else{if(!(s.domNode instanceof Element))return null;o=s.domNode.getBoundingClientRect(),l>0&&(a="right")}return{bottom:o.top+o.height,height:o.height,left:o[a],right:o[a],top:o.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const t=e.getRangeAt(0);if(t==null)return null;const n=this.normalizeNative(t);return Xs.info("getNativeRange",n),n}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Js(this.root,document.activeElement)}normalizedToRange(e){const t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);const n=t.map(l=>{const[u,a]=l,o=this.scroll.find(u,!0),c=o.offset(this.scroll);return a===0?c:o instanceof wt?c+o.index(u,a):c+o.length()}),i=Math.min(Math.max(...n),this.scroll.length()-1),s=Math.min(i,...n);return new on(s,i-s)}normalizeNative(e){if(!Js(this.root,e.startContainer)||!e.collapsed&&!Js(this.root,e.endContainer))return null;const t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(n=>{let{node:i,offset:s}=n;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>s)i=i.childNodes[s],s=0;else if(i.childNodes.length===s)i=i.lastChild,i instanceof Text?s=i.data.length:i.childNodes.length>0?s=i.childNodes.length:s=i.childNodes.length+1;else break;n.node=i,n.offset=s}),t}rangeToNative(e){const t=this.scroll.length(),n=(i,s)=>{i=Math.min(t-1,i);const[l,u]=this.scroll.leaf(i);return l?l.position(u,s):[null,-1]};return[...n(e.index,!1),...n(e.index+e.length,!0)]}setNativeRange(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Xs.info("setNativeRange",e,t,n,i),e!=null&&(this.root.parentNode==null||e.parentNode==null||n.parentNode==null))return;const l=document.getSelection();if(l!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:u}=this.getNativeRange()||{};if(u==null||s||e!==u.startContainer||t!==u.startOffset||n!==u.endContainer||i!==u.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),n instanceof Element&&n.tagName==="BR"&&(i=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const a=document.createRange();a.setStart(e,t),a.setEnd(n,i),l.removeAllRanges(),l.addRange(a)}}else l.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fe.sources.API;if(typeof t=="string"&&(n=t,t=!1),Xs.info("setRange",e),e!=null){const i=this.rangeToNative(e);this.setNativeRange(...i,t)}else this.setNativeRange(null);this.update(n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fe.sources.USER;const t=this.lastRange,[n,i]=this.getRange();if(this.lastRange=n,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!gl(t,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const l=this.cursor.restore();l&&this.setNativeRange(l.startNode,l.startOffset,l.endNode,l.endOffset)}const s=[fe.events.SELECTION_CHANGE,Rn(this.lastRange),Rn(t),e];this.emitter.emit(fe.events.EDITOR_CHANGE,...s),e!==fe.sources.SILENT&&this.emitter.emit(...s)}}}function Js(r,e){try{e.parentNode}catch{return!1}return r.contains(e)}const Zm=/^[ -~]*$/;class Xm{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();const n=wu(e),i=new de;return Qm(n.ops.slice()).reduce((l,u)=>{const a=Qt.Op.length(u);let o=u.attributes||{},c=!1,g=!1;if(u.insert!=null){if(i.retain(a),typeof u.insert=="string"){const m=u.insert;g=!m.endsWith(`
`)&&(t<=l||!!this.scroll.descendant(Jt,l)[0]),this.scroll.insertAt(l,m);const[A,O]=this.scroll.line(l);let E=Gr({},Zt(A));if(A instanceof mt){const[_]=A.descendant(wt,O);_&&(E=Gr(E,Zt(_)))}o=Qt.AttributeMap.diff(E,o)||{}}else if(typeof u.insert=="object"){const m=Object.keys(u.insert)[0];if(m==null)return l;const A=this.scroll.query(m,pe.INLINE)!=null;if(A)(t<=l||this.scroll.descendant(Jt,l)[0])&&(g=!0);else if(l>0){const[O,E]=this.scroll.descendant(wt,l-1);O instanceof sr?O.value()[E]!==`
`&&(c=!0):O instanceof $t&&O.statics.scope===pe.INLINE_BLOT&&(c=!0)}if(this.scroll.insertAt(l,m,u.insert[m]),A){const[O]=this.scroll.descendant(wt,l);if(O){const E=Gr({},Zt(O));o=Qt.AttributeMap.diff(E,o)||{}}}}t+=a}else if(i.push(u),u.retain!==null&&typeof u.retain=="object"){const m=Object.keys(u.retain)[0];if(m==null)return l;this.scroll.updateEmbedAt(l,m,u.retain[m])}Object.keys(o).forEach(m=>{this.scroll.formatAt(l,a,m,o[m])});const p=c?1:0,d=g?1:0;return t+=p+d,i.retain(p),i.delete(d),l+a+p+d},0),i.reduce((l,u)=>typeof u.delete=="number"?(this.scroll.deleteAt(l,u.delete),l):l+Qt.Op.length(u),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new de().retain(e).delete(t))}formatLine(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach(s=>{this.scroll.lines(e,Math.max(t,1)).forEach(l=>{l.format(s,n[s])})}),this.scroll.optimize();const i=new de().retain(e).retain(t,Rn(n));return this.update(i)}formatText(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(n).forEach(s=>{this.scroll.formatAt(e,t,s,n[s])});const i=new de().retain(e).retain(t,Rn(n));return this.update(i)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new de)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],i=[];t===0?this.scroll.path(e).forEach(u=>{const[a]=u;a instanceof mt?n.push(a):a instanceof wt&&i.push(a)}):(n=this.scroll.lines(e,t),i=this.scroll.descendants(wt,e,t));const[s,l]=[n,i].map(u=>{const a=u.shift();if(a==null)return{};let o=Zt(a);for(;Object.keys(o).length>0;){const c=u.shift();if(c==null)return o;o=Jm(Zt(c),o)}return o});return{...s,...l}}getHTML(e,t){const[n,i]=this.scroll.line(e);if(n){const s=n.length();return n.length()>=i+t&&!(i===0&&t===s)?ai(n,i,t,!0):ai(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(n=>typeof n.insert=="string").map(n=>n.insert).join("")}insertContents(e,t){const n=wu(t),i=new de().retain(e).concat(n);return this.scroll.insertContents(e,n),this.update(i)}insertEmbed(e,t,n){return this.scroll.insertAt(e,t,n),this.update(new de().retain(e).insert({[t]:n}))}insertText(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(n).forEach(i=>{this.scroll.formatAt(e,t.length,i,n[i])}),this.update(new de().retain(e).insert(t,Rn(n)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if((e==null?void 0:e.statics.blotName)!==mt.blotName)return!1;const t=e;return t.children.length>1?!1:t.children.head instanceof lr}removeFormat(e,t){const n=this.getText(e,t),[i,s]=this.scroll.line(e+t);let l=0,u=new de;i!=null&&(l=i.length()-s,u=i.delta().slice(s,s+l-1).insert(`
`));const o=this.getContents(e,t+l).diff(new de().insert(n).concat(u)),c=new de().retain(e).concat(o);return this.applyDelta(c)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(Zm)&&this.scroll.find(t[0].target)){const s=this.scroll.find(t[0].target),l=Zt(s),u=s.offset(this.scroll),a=t[0].oldValue.replace(In.CONTENTS,""),o=new de().insert(a),c=new de().insert(s.value()),g=n&&{oldRange:Tu(n.oldRange,-u),newRange:Tu(n.newRange,-u)};e=new de().retain(u).concat(o.diff(c,g)).reduce((d,m)=>m.insert?d.insert(m.insert,l):d.push(m),new de),this.delta=i.compose(e)}else this.delta=this.getDelta(),(!e||!gl(i.compose(e),this.delta))&&(e=i.diff(this.delta,n));return e}}function wn(r,e,t){if(r.length===0){const[d]=Qs(t.pop());return e<=0?`</li></${d}>`:`</li></${d}>${wn([],e-1,t)}`}const[{child:n,offset:i,length:s,indent:l,type:u},...a]=r,[o,c]=Qs(u);if(l>e)return t.push(u),l===e+1?`<${o}><li${c}>${ai(n,i,s)}${wn(a,l,t)}`:`<${o}><li>${wn(r,e+1,t)}`;const g=t[t.length-1];if(l===e&&u===g)return`</li><li${c}>${ai(n,i,s)}${wn(a,l,t)}`;const[p]=Qs(t.pop());return`</li></${p}>${wn(r,e-1,t)}`}function ai(r,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in r&&typeof r.html=="function")return r.html(e,t);if(r instanceof sr)return Ns(r.value().slice(e,e+t)).replaceAll(" ","&nbsp;");if(r instanceof ir){if(r.statics.blotName==="list-container"){const o=[];return r.children.forEachAt(e,t,(c,g,p)=>{const d="formats"in c&&typeof c.formats=="function"?c.formats():{};o.push({child:c,offset:g,length:p,indent:d.indent||0,type:d.list})}),wn(o,-1,[])}const i=[];if(r.children.forEachAt(e,t,(o,c,g)=>{i.push(ai(o,c,g))}),n||r.statics.blotName==="list")return i.join("");const{outerHTML:s,innerHTML:l}=r.domNode,[u,a]=s.split(`>${l}<`);return u==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${a}`:`${u}>${i.join("")}<${a}`}return r.domNode instanceof Element?r.domNode.outerHTML:""}function Jm(r,e){return Object.keys(e).reduce((t,n)=>{if(r[n]==null)return t;const i=e[n];return i===r[n]?t[n]=i:Array.isArray(i)?i.indexOf(r[n])<0?t[n]=i.concat([r[n]]):t[n]=i:t[n]=[i,r[n]],t},{})}function Qs(r){const e=r==="ordered"?"ol":"ul";switch(r){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function wu(r){return r.reduce((e,t)=>{if(typeof t.insert=="string"){const n=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(n,t.attributes)}return e.push(t)},new de)}function Tu(r,e){let{index:t,length:n}=r;return new on(t+e,n)}function Qm(r){const e=[];return r.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((i,s)=>{s&&e.push({insert:`
`,attributes:t.attributes}),i&&e.push({insert:i,attributes:t.attributes})}):e.push(t)}),e}class ur{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}}ue(ur,"DEFAULTS",{});const Fi="\uFEFF";class ml extends $t{constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(n=>{this.contentNode.appendChild(n)}),this.leftGuard=document.createTextNode(Fi),this.rightGuard=document.createTextNode(Fi),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,n;const i=e.data.split(Fi).join("");if(e===this.leftGuard)if(this.prev instanceof sr){const s=this.prev.length();this.prev.insertAt(s,i),t={startNode:this.prev.domNode,startOffset:s+i.length}}else n=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(n),this),t={startNode:n,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof sr?(this.next.insertAt(0,i),t={startNode:this.next.domNode,startOffset:i.length}):(n=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(n),this.next),t={startNode:n,startOffset:i.length}));return e.data=Fi,t}update(e,t){e.forEach(n=>{if(n.type==="characterData"&&(n.target===this.leftGuard||n.target===this.rightGuard)){const i=this.restore(n.target);i&&(t.range=i)}})}}class eb{constructor(e,t){ue(this,"isComposing",!1);this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof ml)&&(this.emitter.emit(fe.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(fe.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(fe.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(fe.events.COMPOSITION_END,e),this.isComposing=!1}}const ti=class ti{constructor(e,t){ue(this,"modules",{});this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}};ue(ti,"DEFAULTS",{modules:{}}),ue(ti,"themes",{default:ti});let xn=ti;const tb=r=>r.parentElement||r.getRootNode().host||null,rb=r=>{const e=r.getBoundingClientRect(),t="offsetWidth"in r&&Math.abs(e.width)/r.offsetWidth||1,n="offsetHeight"in r&&Math.abs(e.height)/r.offsetHeight||1;return{top:e.top,right:e.left+r.clientWidth*t,bottom:e.top+r.clientHeight*n,left:e.left}},$i=r=>{const e=parseInt(r,10);return Number.isNaN(e)?0:e},Ru=(r,e,t,n,i,s)=>r<t&&e>n?0:r<t?-(t-r+i):e>n?e-r>n-t?r+i-t:e-n+s:0,nb=(r,e)=>{var s,l,u,a,o;const t=r.ownerDocument;let n=e,i=r;for(;i;){const c=i===t.body,g=c?{top:0,right:(l=(s=window.visualViewport)==null?void 0:s.width)!=null?l:t.documentElement.clientWidth,bottom:(a=(u=window.visualViewport)==null?void 0:u.height)!=null?a:t.documentElement.clientHeight,left:0}:rb(i),p=getComputedStyle(i),d=Ru(n.left,n.right,g.left,g.right,$i(p.scrollPaddingLeft),$i(p.scrollPaddingRight)),m=Ru(n.top,n.bottom,g.top,g.bottom,$i(p.scrollPaddingTop),$i(p.scrollPaddingBottom));if(d||m)if(c)(o=t.defaultView)==null||o.scrollBy(d,m);else{const{scrollLeft:A,scrollTop:O}=i;m&&(i.scrollTop+=m),d&&(i.scrollLeft+=d);const E=i.scrollLeft-A,_=i.scrollTop-O;n={left:n.left-E,top:n.top-_,right:n.right-E,bottom:n.bottom-_}}i=c||p.position==="fixed"?null:tb(i)}},ib=100,sb=["block","break","cursor","inline","scroll","text"],ob=(r,e,t)=>{const n=new qn;return sb.forEach(i=>{const s=e.query(i);s&&n.register(s)}),r.forEach(i=>{var u;let s=e.query(i);s||t.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let l=0;for(;s;)if(n.register(s),s="blotName"in s&&(u=s.requiredContainer)!=null?u:null,l+=1,l>ib){t.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),n},Ln=xr("quill"),Ui=new qn;ir.uiClass="ql-ui";const tr=class tr{static debug(e){e===!0&&(e="log"),xr.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Xa.get(e)||Ui.find(e,t)}static import(e){return this.imports[e]==null&&Ln.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],t=!!(!(arguments.length<=1)&&arguments[1]),n="attrName"in e?e.attrName:e.blotName;typeof n=="string"?this.register(`formats/${n}`,e,t):Object.keys(e).forEach(i=>{this.register(i,e[i],t)})}else{const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!n&&Ln.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&Ui.register(t),typeof t.register=="function"&&t.register(Ui)}}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=ab(e,t),this.container=this.options.container,this.container==null){Ln.error("Invalid Quill container",e);return}this.options.debug&&tr.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Xa.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new fe;const i=yl.blotName,s=this.options.registry.query(i);if(!s||!("blotName"in s))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new s(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Xm(this.scroll),this.selection=new Ym(this.scroll,this.emitter),this.composition=new eb(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(fe.events.EDITOR_CHANGE,l=>{l===fe.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(fe.events.SCROLL_UPDATE,(l,u)=>{const a=this.selection.lastRange,[o]=this.selection.getRange(),c=a&&o?{oldRange:a,newRange:o}:void 0;er.call(this,()=>this.editor.update(null,u,c),l)}),this.emitter.on(fe.events.SCROLL_EMBED_UPDATE,(l,u)=>{const a=this.selection.lastRange,[o]=this.selection.getRange(),c=a&&o?{oldRange:a,newRange:o}:void 0;er.call(this,()=>{const g=new de().retain(l.offset(this)).retain({[l.statics.blotName]:u});return this.editor.update(g,[],c)},tr.sources.USER)}),n){const l=this.clipboard.convert({html:`${n}<p><br></p>`,text:`
`});this.setContents(l)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const n=e;e=document.createElement("div"),e.classList.add(n)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,n){return[e,t,,n]=Nr(e,t,n),er.call(this,()=>this.editor.deleteText(e,t),n,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fe.sources.API;return er.call(this,()=>{const i=this.getSelection(!0);let s=new de;if(i==null)return s;if(this.scroll.query(e,pe.BLOCK))s=this.editor.formatLine(i.index,i.length,{[e]:t});else{if(i.length===0)return this.selection.format(e,t),s;s=this.editor.formatText(i.index,i.length,{[e]:t})}return this.setSelection(i,fe.sources.SILENT),s},n)}formatLine(e,t,n,i,s){let l;return[e,t,l,s]=Nr(e,t,n,i,s),er.call(this,()=>this.editor.formatLine(e,t,l),s,e,0)}formatText(e,t,n,i,s){let l;return[e,t,l,s]=Nr(e,t,n,i,s),er.call(this,()=>this.editor.formatText(e,t,l),s,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=null;if(typeof e=="number"?n=this.selection.getBounds(e,t):n=this.selection.getBounds(e.index,e.length),!n)return null;const i=this.container.getBoundingClientRect();return{bottom:n.bottom-i.top,height:n.height,left:n.left-i.left,right:n.right-i.left,top:n.top-i.top,width:n.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=Nr(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t!=null?t:this.getLength()-e),[e,t]=Nr(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t!=null?t:this.getLength()-e),[e,t]=Nr(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:tr.sources.API;return er.call(this,()=>this.editor.insertEmbed(e,t,n),i,e)}insertText(e,t,n,i,s){let l;return[e,,l,s]=Nr(e,0,n,i,s),er.call(this,()=>this.editor.insertText(e,t,l),s,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,n){return[e,t,,n]=Nr(e,t,n),er.call(this,()=>this.editor.removeFormat(e,t),n,e)}scrollRectIntoView(e){nb(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fe.sources.API;return er.call(this,()=>{e=new de(e);const n=this.getLength(),i=this.editor.deleteText(0,n),s=this.editor.insertContents(0,e),l=this.editor.deleteText(this.getLength()-1,1);return i.compose(s).compose(l)},t)}setSelection(e,t,n){e==null?this.selection.setRange(null,t||tr.sources.API):([e,t,,n]=Nr(e,t,n),this.selection.setRange(new on(Math.max(0,e),t),n),n!==fe.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fe.sources.API;const n=new de().insert(e);return this.setContents(n,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fe.sources.USER;const t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fe.sources.API;return er.call(this,()=>(e=new de(e),this.editor.applyDelta(e)),t,!0)}};ue(tr,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Ui,theme:"default"}),ue(tr,"events",fe.events),ue(tr,"sources",fe.sources),ue(tr,"version","2.0.3"),ue(tr,"imports",{delta:de,parchment:km,"core/module":ur,"core/theme":xn});let Z=tr;function Nu(r){return typeof r=="string"?document.querySelector(r):r}function eo(r){return Object.entries(r!=null?r:{}).reduce((e,t)=>{let[n,i]=t;return{...e,[n]:i===!0?{}:i}},{})}function Lu(r){return Object.fromEntries(Object.entries(r).filter(e=>e[1]!==void 0))}function ab(r,e){const t=Nu(r);if(!t)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===Z.DEFAULTS.theme?xn:Z.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:s,...l}=Z.DEFAULTS,{modules:u,...a}=i.DEFAULTS;let o=eo(e.modules);o!=null&&o.toolbar&&o.toolbar.constructor!==Object&&(o={...o,toolbar:{container:o.toolbar}});const c=Gr({},eo(s),eo(u),o),g={...l,...Lu(a),...Lu(e)};let p=e.registry;return p?e.formats&&Ln.warn('Ignoring "formats" option because "registry" is specified'):p=e.formats?ob(e.formats,g.registry,Ln):g.registry,{...g,registry:p,container:t,theme:i,modules:Object.entries(c).reduce((d,m)=>{let[A,O]=m;if(!O)return d;const E=Z.import(`modules/${A}`);return E==null?(Ln.error(`Cannot load ${A} module. Are you sure you registered it?`),d):{...d,[A]:Gr({},E.DEFAULTS||{},O)}},{}),bounds:Nu(g.bounds)}}function er(r,e,t,n){if(!this.isEnabled()&&e===fe.sources.USER&&!this.allowReadOnlyEdits)return new de;let i=t==null?null:this.getSelection();const s=this.editor.delta,l=r();if(i!=null&&(t===!0&&(t=i.index),n==null?i=Cu(i,l,e):n!==0&&(i=Cu(i,t,n,e)),this.setSelection(i,fe.sources.SILENT)),l.length()>0){const u=[fe.events.TEXT_CHANGE,l,s,e];this.emitter.emit(fe.events.EDITOR_CHANGE,...u),e!==fe.sources.SILENT&&this.emitter.emit(...u)}return l}function Nr(r,e,t,n,i){let s={};return typeof r.index=="number"&&typeof r.length=="number"?typeof e!="number"?(i=n,n=t,t=e,e=r.length,r=r.index):(e=r.length,r=r.index):typeof e!="number"&&(i=n,n=t,t=e,e=0),typeof t=="object"?(s=t,i=n):typeof t=="string"&&(n!=null?s[t]=n:i=t),i=i||fe.sources.API,[r,e,s,i]}function Cu(r,e,t,n){const i=typeof t=="number"?t:0;if(r==null)return null;let s,l;return e&&typeof e.transformPosition=="function"?[s,l]=[r.index,r.index+r.length].map(u=>e.transformPosition(u,n!==fe.sources.USER)):[s,l]=[r.index,r.index+r.length].map(u=>u<e||u===e&&n===fe.sources.USER?u:i>=0?u+i:Math.max(e,u+i)),new on(s,l-s)}class cn extends ws{}function qu(r){return r instanceof mt||r instanceof Jt}function Iu(r){return typeof r.updateContent=="function"}class Tn extends yl{constructor(e,t,n){let{emitter:i}=n;super(e,t),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",s=>this.handleDragStart(s))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(fe.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(fe.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(fe.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){const[n,i]=this.line(e),[s]=this.line(e+t);if(super.deleteAt(e,t),s!=null&&n!==s&&i>0){if(n instanceof Jt||s instanceof Jt){this.optimize();return}const l=s.children.head instanceof lr?null:s.children.head;n.moveChildren(s,l),n.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,n,i){super.formatAt(e,t,n,i),this.optimize()}insertAt(e,t,n){if(e>=this.length())if(n==null||this.scroll.query(t,pe.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),n==null&&t.endsWith(`
`)?i.insertAt(0,t.slice(0,-1),n):i.insertAt(0,t,n)}else{const i=this.scroll.create(t,n);this.appendChild(i)}else super.insertAt(e,t,n);this.optimize()}insertBefore(e,t){if(e.statics.scope===pe.INLINE_BLOT){const n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(e),super.insertBefore(n,t)}else super.insertBefore(e,t)}insertContents(e,t){const n=this.deltaToRenderBlocks(t.concat(new de().insert(`
`))),i=n.pop();if(i==null)return;this.batchStart();const s=n.shift();if(s){const a=s.type==="block"&&(s.delta.length()===0||!this.descendant(Jt,e)[0]&&e<this.length()),o=s.type==="block"?s.delta:new de().insert({[s.key]:s.value});to(this,e,o);const c=s.type==="block"?1:0,g=e+o.length()+c;a&&this.insertAt(g-1,`
`);const p=Zt(this.line(e)[0]),d=Qt.AttributeMap.diff(p,s.attributes)||{};Object.keys(d).forEach(m=>{this.formatAt(g-1,1,m,d[m])}),e=g}let[l,u]=this.children.find(e);if(n.length&&(l&&(l=l.split(u),u=0),n.forEach(a=>{if(a.type==="block"){const o=this.createBlock(a.attributes,l||void 0);to(o,0,a.delta)}else{const o=this.create(a.key,a.value);this.insertBefore(o,l||void 0),Object.keys(a.attributes).forEach(c=>{o.format(c,a.attributes[c])})}})),i.type==="block"&&i.delta.length()){const a=l?l.offset(l.scroll)+u:this.length();to(this,a,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const t=this.path(e).pop();if(!t)return[null,-1];const[n,i]=t;return n instanceof wt?[n,i]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(qu,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const n=(i,s,l)=>{let u=[],a=l;return i.children.forEachAt(s,l,(o,c,g)=>{qu(o)?u.push(o):o instanceof ws&&(u=u.concat(n(o,c,a))),a-=g}),u};return n(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(fe.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=fe.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(n=>{let{target:i}=n;const s=this.find(i,!0);return s&&!Iu(s)}),e.length>0&&this.emitter.emit(fe.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(fe.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,n){const[i]=this.descendant(s=>s instanceof Jt,e);i&&i.statics.blotName===t&&Iu(i)&&i.updateContent(n)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const t=[];let n=new de;return e.forEach(i=>{var l;const s=i==null?void 0:i.insert;if(s)if(typeof s=="string"){const u=s.split(`
`);u.slice(0,-1).forEach(o=>{var c;n.insert(o,i.attributes),t.push({type:"block",delta:n,attributes:(c=i.attributes)!=null?c:{}}),n=new de});const a=u[u.length-1];a&&n.insert(a,i.attributes)}else{const u=Object.keys(s)[0];if(!u)return;this.query(u,pe.INLINE)?n.push(i):(n.length()&&t.push({type:"block",delta:n,attributes:{}}),n=new de,t.push({type:"blockEmbed",key:u,value:s[u],attributes:(l=i.attributes)!=null?l:{}}))}}),n.length()&&t.push({type:"block",delta:n,attributes:{}}),t}createBlock(e,t){let n;const i={};Object.entries(e).forEach(u=>{let[a,o]=u;this.query(a,pe.BLOCK&pe.BLOT)!=null?n=a:i[a]=o});const s=this.create(n||this.statics.defaultChild.blotName,n?e[n]:void 0);this.insertBefore(s,t||void 0);const l=s.length();return Object.entries(i).forEach(u=>{let[a,o]=u;s.formatAt(0,l,a,o)}),s}}ue(Tn,"blotName","scroll"),ue(Tn,"className","ql-editor"),ue(Tn,"tagName","DIV"),ue(Tn,"defaultChild",mt),ue(Tn,"allowedChildren",[mt,Jt,cn]);function to(r,e,t){t.reduce((n,i)=>{const s=Qt.Op.length(i);let l=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const u=i.insert;r.insertAt(n,u);const[a]=r.descendant(wt,n),o=Zt(a);l=Qt.AttributeMap.diff(o,l)||{}}else if(typeof i.insert=="object"){const u=Object.keys(i.insert)[0];if(u==null)return n;if(r.insertAt(n,u,i.insert[u]),r.scroll.query(u,pe.INLINE)!=null){const[o]=r.descendant(wt,n),c=Zt(o);l=Qt.AttributeMap.diff(c,l)||{}}}}return Object.keys(l).forEach(u=>{r.formatAt(n,s,u,l[u])}),n+s},e)}const bl={scope:pe.BLOCK,whitelist:["right","center","justify"]},lb=new Ar("align","align",bl),mh=new ar("align","ql-align",bl),bh=new Xr("align","text-align",bl);class _h extends Xr{value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):t}}const ub=new ar("color","ql-color",{scope:pe.INLINE}),_l=new _h("color","color",{scope:pe.INLINE}),cb=new ar("background","ql-bg",{scope:pe.INLINE}),El=new _h("background","background-color",{scope:pe.INLINE});class fn extends cn{static create(e){const t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(n=>n.length()<=1?"":n.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${Ns(this.code(e,t))}
</pre>`}}class Tt extends mt{static register(){Z.register(fn)}}ue(Tt,"TAB","  ");class Al extends Or{}Al.blotName="code";Al.tagName="CODE";Tt.blotName="code-block";Tt.className="ql-code-block";Tt.tagName="DIV";fn.blotName="code-block-container";fn.className="ql-code-block-container";fn.tagName="DIV";fn.allowedChildren=[Tt];Tt.allowedChildren=[sr,lr,In];Tt.requiredContainer=fn;const Ol={scope:pe.BLOCK,whitelist:["rtl"]},Eh=new Ar("direction","dir",Ol),Ah=new ar("direction","ql-direction",Ol),Oh=new Xr("direction","direction",Ol),Sh={scope:pe.INLINE,whitelist:["serif","monospace"]},wh=new ar("font","ql-font",Sh);class fb extends Xr{value(e){return super.value(e).replace(/["']/g,"")}}const Th=new fb("font","font-family",Sh),Rh=new ar("size","ql-size",{scope:pe.INLINE,whitelist:["small","large","huge"]}),Nh=new Xr("size","font-size",{scope:pe.INLINE,whitelist:["10px","18px","32px"]}),hb=xr("quill:keyboard"),db=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Ls extends ur{static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(n=>!!t[n]!==e[n]&&t[n]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(n=>{this.options.bindings[n]&&this.addBinding(this.options.bindings[n])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=gb(e);if(i==null){hb.warn("Attempted to add invalid keyboard binding",i);return}typeof t=="function"&&(t={handler:t}),typeof n=="function"&&(n={handler:n}),(Array.isArray(i.key)?i.key:[i.key]).forEach(l=>{const u={...i,key:l,...t,...n};this.bindings[u.key]=this.bindings[u.key]||[],this.bindings[u.key].push(u)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const i=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(E=>Ls.match(e,E));if(i.length===0)return;const s=Z.find(e.target,!0);if(s&&s.scroll!==this.quill.scroll)return;const l=this.quill.getSelection();if(l==null||!this.quill.hasFocus())return;const[u,a]=this.quill.getLine(l.index),[o,c]=this.quill.getLeaf(l.index),[g,p]=l.length===0?[o,c]:this.quill.getLeaf(l.index+l.length),d=o instanceof rs?o.value().slice(0,c):"",m=g instanceof rs?g.value().slice(p):"",A={collapsed:l.length===0,empty:l.length===0&&u.length()<=1,format:this.quill.getFormat(l),line:u,offset:a,prefix:d,suffix:m,event:e};i.some(E=>{if(E.collapsed!=null&&E.collapsed!==A.collapsed||E.empty!=null&&E.empty!==A.empty||E.offset!=null&&E.offset!==A.offset)return!1;if(Array.isArray(E.format)){if(E.format.every(_=>A.format[_]==null))return!1}else if(typeof E.format=="object"&&!Object.keys(E.format).every(_=>E.format[_]===!0?A.format[_]!=null:E.format[_]===!1?A.format[_]==null:gl(E.format[_],A.format[_])))return!1;return E.prefix!=null&&!E.prefix.test(A.prefix)||E.suffix!=null&&!E.suffix.test(A.suffix)?!1:E.handler.call(this,l,A,E)!==!0})&&e.preventDefault()})}handleBackspace(e,t){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let i={};const[s]=this.quill.getLine(e.index);let l=new de().retain(e.index-n).delete(n);if(t.offset===0){const[u]=this.quill.getLine(e.index-1);if(u&&!(u.statics.blotName==="block"&&u.length()<=1)){const o=s.formats(),c=this.quill.getFormat(e.index-1,1);if(i=Qt.AttributeMap.diff(o,c)||{},Object.keys(i).length>0){const g=new de().retain(e.index+s.length()-2).retain(1,i);l=l.compose(g)}}}this.quill.updateContents(l,Z.sources.USER),this.quill.focus()}handleDelete(e,t){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-n)return;let i={};const[s]=this.quill.getLine(e.index);let l=new de().retain(e.index).delete(n);if(t.offset>=s.length()-1){const[u]=this.quill.getLine(e.index+1);if(u){const a=s.formats(),o=this.quill.getFormat(e.index,1);i=Qt.AttributeMap.diff(a,o)||{},Object.keys(i).length>0&&(l=l.retain(u.length()-1).retain(1,i))}}this.quill.updateContents(l,Z.sources.USER),this.quill.focus()}handleDeleteRange(e){Sl({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){const n=Object.keys(t.format).reduce((s,l)=>(this.quill.scroll.query(l,pe.BLOCK)&&!Array.isArray(t.format[l])&&(s[l]=t.format[l]),s),{}),i=new de().retain(e.index).delete(e.length).insert(`
`,n);this.quill.updateContents(i,Z.sources.USER),this.quill.setSelection(e.index+1,Z.sources.SILENT),this.quill.focus()}}const pb={bindings:{bold:ro("bold"),italic:ro("italic"),underline:ro("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(r,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",Z.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(r,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",Z.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(r,e){e.format.indent!=null?this.quill.format("indent","-1",Z.sources.USER):e.format.list!=null&&this.quill.format("list",!1,Z.sources.USER)}},"indent code-block":xu(!0),"outdent code-block":xu(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(r){this.quill.deleteText(r.index-1,1,Z.sources.USER)}},tab:{key:"Tab",handler(r,e){if(e.format.table)return!0;this.quill.history.cutoff();const t=new de().retain(r.index).delete(r.length).insert("	");return this.quill.updateContents(t,Z.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index+1,Z.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Z.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(r,e){const t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(r.index,r.length,t,Z.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(r){const[e,t]=this.quill.getLine(r.index),n={...e.formats(),list:"checked"},i=new de().retain(r.index).insert(`
`,n).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,Z.sources.USER),this.quill.setSelection(r.index+1,Z.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(r,e){const[t,n]=this.quill.getLine(r.index),i=new de().retain(r.index).insert(`
`,e.format).retain(t.length()-n-1).retain(1,{header:null});this.quill.updateContents(i,Z.sources.USER),this.quill.setSelection(r.index+1,Z.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(r){const e=this.quill.getModule("table");if(e){const[t,n,i,s]=e.getTable(r),l=vb(t,n,i,s);if(l==null)return;let u=t.offset();if(l<0){const a=new de().retain(u).insert(`
`);this.quill.updateContents(a,Z.sources.USER),this.quill.setSelection(r.index+1,r.length,Z.sources.SILENT)}else if(l>0){u+=t.length();const a=new de().retain(u).insert(`
`);this.quill.updateContents(a,Z.sources.USER),this.quill.setSelection(u,Z.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(r,e){const{event:t,line:n}=e,i=n.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(i-1,Z.sources.USER):this.quill.setSelection(i+n.length(),Z.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(r,e){if(this.quill.scroll.query("list")==null)return!0;const{length:t}=e.prefix,[n,i]=this.quill.getLine(r.index);if(i>t)return!0;let s;switch(e.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(r.index," ",Z.sources.USER),this.quill.history.cutoff();const l=new de().retain(r.index-i).delete(t+1).retain(n.length()-2-i).retain(1,{list:s});return this.quill.updateContents(l,Z.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index-t,Z.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(r){const[e,t]=this.quill.getLine(r.index);let n=2,i=e;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,n-=1,n<=0){const s=new de().retain(r.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(s,Z.sources.USER),this.quill.setSelection(r.index-1,Z.sources.SILENT),!1}return!0}},"embed left":Hi("ArrowLeft",!1),"embed left shift":Hi("ArrowLeft",!0),"embed right":Hi("ArrowRight",!1),"embed right shift":Hi("ArrowRight",!0),"table down":Pu(!1),"table up":Pu(!0)}};Ls.DEFAULTS=pb;function xu(r){return{key:"Tab",shiftKey:!r,format:{"code-block":!0},handler(e,t){let{event:n}=t;const i=this.quill.scroll.query("code-block"),{TAB:s}=i;if(e.length===0&&!n.shiftKey){this.quill.insertText(e.index,s,Z.sources.USER),this.quill.setSelection(e.index+s.length,Z.sources.SILENT);return}const l=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:u,length:a}=e;l.forEach((o,c)=>{r?(o.insertAt(0,s),c===0?u+=s.length:a+=s.length):o.domNode.textContent.startsWith(s)&&(o.deleteAt(0,s.length),c===0?u-=s.length:a-=s.length)}),this.quill.update(Z.sources.USER),this.quill.setSelection(u,a,Z.sources.SILENT)}}}function Hi(r,e){return{key:r,shiftKey:e,altKey:null,[r==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(n){let{index:i}=n;r==="ArrowRight"&&(i+=n.length+1);const[s]=this.quill.getLeaf(i);return s instanceof $t?(r==="ArrowLeft"?e?this.quill.setSelection(n.index-1,n.length+1,Z.sources.USER):this.quill.setSelection(n.index-1,Z.sources.USER):e?this.quill.setSelection(n.index,n.length+1,Z.sources.USER):this.quill.setSelection(n.index+n.length+1,Z.sources.USER),!1):!0}}}function ro(r){return{key:r[0],shortKey:!0,handler(e,t){this.quill.format(r,!t.format[r],Z.sources.USER)}}}function Pu(r){return{key:r?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){const n=r?"prev":"next",i=t.line,s=i.parent[n];if(s!=null){if(s.statics.blotName==="table-row"){let l=s.children.head,u=i;for(;u.prev!=null;)u=u.prev,l=l.next;const a=l.offset(this.quill.scroll)+Math.min(t.offset,l.length()-1);this.quill.setSelection(a,0,Z.sources.USER)}}else{const l=i.table()[n];l!=null&&(r?this.quill.setSelection(l.offset(this.quill.scroll)+l.length()-1,0,Z.sources.USER):this.quill.setSelection(l.offset(this.quill.scroll),0,Z.sources.USER))}return!1}}}function gb(r){if(typeof r=="string"||typeof r=="number")r={key:r};else if(typeof r=="object")r=Rn(r);else return null;return r.shortKey&&(r[db]=r.shortKey,delete r.shortKey),r}function Sl(r){let{quill:e,range:t}=r;const n=e.getLines(t);let i={};if(n.length>1){const s=n[0].formats(),l=n[n.length-1].formats();i=Qt.AttributeMap.diff(l,s)||{}}e.deleteText(t,Z.sources.USER),Object.keys(i).length>0&&e.formatLine(t.index,1,i,Z.sources.USER),e.setSelection(t.index,Z.sources.SILENT)}function vb(r,e,t,n){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?n===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const yb=/font-weight:\s*normal/,mb=["P","OL","UL"],Du=r=>r&&mb.includes(r.tagName),bb=r=>{Array.from(r.querySelectorAll("br")).filter(e=>Du(e.previousElementSibling)&&Du(e.nextElementSibling)).forEach(e=>{var t;(t=e.parentNode)==null||t.removeChild(e)})},_b=r=>{Array.from(r.querySelectorAll('b[style*="font-weight"]')).filter(e=>{var t;return(t=e.getAttribute("style"))==null?void 0:t.match(yb)}).forEach(e=>{var n;const t=r.createDocumentFragment();t.append(...e.childNodes),(n=e.parentNode)==null||n.replaceChild(t,e)})};function Eb(r){r.querySelector('[id^="docs-internal-guid-"]')&&(_b(r),bb(r))}const Ab=/\bmso-list:[^;]*ignore/i,Ob=/\bmso-list:[^;]*\bl(\d+)/i,Sb=/\bmso-list:[^;]*\blevel(\d+)/i,wb=(r,e)=>{const t=r.getAttribute("style"),n=t==null?void 0:t.match(Ob);if(!n)return null;const i=Number(n[1]),s=t==null?void 0:t.match(Sb),l=s?Number(s[1]):1,u=new RegExp(`@list l${i}:level${l}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),a=e.match(u),o=a&&a[1]==="bullet"?"bullet":"ordered";return{id:i,indent:l,type:o,element:r}},Tb=r=>{var l,u;const e=Array.from(r.querySelectorAll("[style*=mso-list]")),t=[],n=[];e.forEach(a=>{(a.getAttribute("style")||"").match(Ab)?t.push(a):n.push(a)}),t.forEach(a=>{var o;return(o=a.parentNode)==null?void 0:o.removeChild(a)});const i=r.documentElement.innerHTML,s=n.map(a=>wb(a,i)).filter(a=>a);for(;s.length;){const a=[];let o=s.shift();for(;o;)a.push(o),o=s.length&&((l=s[0])==null?void 0:l.element)===o.element.nextElementSibling&&s[0].id===o.id?s.shift():null;const c=document.createElement("ul");a.forEach(d=>{const m=document.createElement("li");m.setAttribute("data-list",d.type),d.indent>1&&m.setAttribute("class",`ql-indent-${d.indent-1}`),m.innerHTML=d.element.innerHTML,c.appendChild(m)});const g=(u=a[0])==null?void 0:u.element,{parentNode:p}=g!=null?g:{};g&&(p==null||p.replaceChild(c,g)),a.slice(1).forEach(d=>{let{element:m}=d;p==null||p.removeChild(m)})}};function Rb(r){r.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&Tb(r)}const Nb=[Rb,Eb],Lb=r=>{r.documentElement&&Nb.forEach(e=>{e(r)})},Cb=xr("quill:clipboard"),qb=[[Node.TEXT_NODE,Hb],[Node.TEXT_NODE,Mu],["br",jb],[Node.ELEMENT_NODE,Mu],[Node.ELEMENT_NODE,Db],[Node.ELEMENT_NODE,Pb],[Node.ELEMENT_NODE,$b],["li",Bb],["ol, ul",Fb],["pre",Mb],["tr",Ub],["b",no("bold")],["i",no("italic")],["strike",no("strike")],["style",kb]],Ib=[lb,Eh].reduce((r,e)=>(r[e.keyName]=e,r),{}),ju=[bh,El,_l,Oh,Th,Nh].reduce((r,e)=>(r[e.keyName]=e,r),{});class Lh extends ur{constructor(e,t){var n;super(e,t),this.quill.root.addEventListener("copy",i=>this.onCaptureCopy(i,!1)),this.quill.root.addEventListener("cut",i=>this.onCaptureCopy(i,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],qb.concat((n=this.options.matchers)!=null?n:[]).forEach(i=>{let[s,l]=i;this.addMatcher(s,l)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[Tt.blotName])return new de().insert(n||"",{[Tt.blotName]:i[Tt.blotName]});if(!t)return new de().insert(n||"",i);const s=this.convertHTML(t);return yi(s,`
`)&&(s.ops[s.ops.length-1].attributes==null||i.table)?s.compose(new de().retain(s.length()-1).delete(1)):s}normalizeHTML(e){Lb(e)}convertHTML(e){const t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);const n=t.body,i=new WeakMap,[s,l]=this.prepareMatching(n,i);return wl(this.quill.scroll,n,s,l,i)}dangerouslyPasteHTML(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Z.sources.API;if(typeof e=="string"){const i=this.convert({html:e,text:""});this.quill.setContents(i,t),this.quill.setSelection(0,Z.sources.SILENT)}else{const i=this.convert({html:t,text:""});this.quill.updateContents(new de().retain(e).concat(i),n),this.quill.setSelection(e+i.length(),Z.sources.SILENT)}}onCaptureCopy(e){var l,u;let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[n]=this.quill.selection.getRange();if(n==null)return;const{html:i,text:s}=this.onCopy(n,t);(l=e.clipboardData)==null||l.setData("text/plain",s),(u=e.clipboardData)==null||u.setData("text/html",i),t&&Sl({range:n,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){var l,u,a,o,c;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const t=this.quill.getSelection(!0);if(t==null)return;const n=(l=e.clipboardData)==null?void 0:l.getData("text/html");let i=(u=e.clipboardData)==null?void 0:u.getData("text/plain");if(!n&&!i){const g=(a=e.clipboardData)==null?void 0:a.getData("text/uri-list");g&&(i=this.normalizeURIList(g))}const s=Array.from(((o=e.clipboardData)==null?void 0:o.files)||[]);if(!n&&s.length>0){this.quill.uploader.upload(t,s);return}if(n&&s.length>0){const g=new DOMParser().parseFromString(n,"text/html");if(g.body.childElementCount===1&&((c=g.body.firstElementChild)==null?void 0:c.tagName)==="IMG"){this.quill.uploader.upload(t,s);return}}this.onPaste(t,{html:n,text:i})}onCopy(e){const t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:n,html:i}=t;const s=this.quill.getFormat(e.index),l=this.convert({text:n,html:i},s);Cb.log("onPaste",l,{text:n,html:i});const u=new de().retain(e.index).delete(e.length).concat(l);this.quill.updateContents(u,Z.sources.USER),this.quill.setSelection(u.length()-e.length,Z.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){const n=[],i=[];return this.matchers.forEach(s=>{const[l,u]=s;switch(l){case Node.TEXT_NODE:i.push(u);break;case Node.ELEMENT_NODE:n.push(u);break;default:Array.from(e.querySelectorAll(l)).forEach(a=>{if(t.has(a)){const o=t.get(a);o==null||o.push(u)}else t.set(a,[u])});break}}),[n,i]}}ue(Lh,"DEFAULTS",{matchers:[]});function hn(r,e,t,n){return n.query(e)?r.reduce((i,s)=>{if(!s.insert)return i;if(s.attributes&&s.attributes[e])return i.push(s);const l=t?{[e]:t}:{};return i.insert(s.insert,{...l,...s.attributes})},new de):r}function yi(r,e){let t="";for(let n=r.ops.length-1;n>=0&&t.length<e.length;--n){const i=r.ops[n];if(typeof i.insert!="string")break;t=i.insert+t}return t.slice(-1*e.length)===e}function zr(r,e){if(!(r instanceof Element))return!1;const t=e.query(r);return t&&t.prototype instanceof $t?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(r.tagName.toLowerCase())}function xb(r,e){return r.previousElementSibling&&r.nextElementSibling&&!zr(r.previousElementSibling,e)&&!zr(r.nextElementSibling,e)}const zi=new WeakMap;function Ch(r){return r==null?!1:(zi.has(r)||(r.tagName==="PRE"?zi.set(r,!0):zi.set(r,Ch(r.parentNode))),zi.get(r))}function wl(r,e,t,n,i){return e.nodeType===e.TEXT_NODE?n.reduce((s,l)=>l(e,s,r),new de):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((s,l)=>{let u=wl(r,l,t,n,i);return l.nodeType===e.ELEMENT_NODE&&(u=t.reduce((a,o)=>o(l,a,r),u),u=(i.get(l)||[]).reduce((a,o)=>o(l,a,r),u)),s.concat(u)},new de):new de}function no(r){return(e,t,n)=>hn(t,r,!0,n)}function Pb(r,e,t){const n=Ar.keys(r),i=ar.keys(r),s=Xr.keys(r),l={};return n.concat(i).concat(s).forEach(u=>{let a=t.query(u,pe.ATTRIBUTE);a!=null&&(l[a.attrName]=a.value(r),l[a.attrName])||(a=Ib[u],a!=null&&(a.attrName===u||a.keyName===u)&&(l[a.attrName]=a.value(r)||void 0),a=ju[u],a!=null&&(a.attrName===u||a.keyName===u)&&(a=ju[u],l[a.attrName]=a.value(r)||void 0))}),Object.entries(l).reduce((u,a)=>{let[o,c]=a;return hn(u,o,c,t)},e)}function Db(r,e,t){const n=t.query(r);if(n==null)return e;if(n.prototype instanceof $t){const i={},s=n.value(r);if(s!=null)return i[n.blotName]=s,new de().insert(i,n.formats(r,t))}else if(n.prototype instanceof oi&&!yi(e,`
`)&&e.insert(`
`),"blotName"in n&&"formats"in n&&typeof n.formats=="function")return hn(e,n.blotName,n.formats(r,t),t);return e}function jb(r,e){return yi(e,`
`)||e.insert(`
`),e}function Mb(r,e,t){const n=t.query("code-block"),i=n&&"formats"in n&&typeof n.formats=="function"?n.formats(r,t):!0;return hn(e,"code-block",i,t)}function kb(){return new de}function Bb(r,e,t){const n=t.query(r);if(n==null||n.blotName!=="list"||!yi(e,`
`))return e;let i=-1,s=r.parentNode;for(;s!=null;)["OL","UL"].includes(s.tagName)&&(i+=1),s=s.parentNode;return i<=0?e:e.reduce((l,u)=>u.insert?u.attributes&&typeof u.attributes.indent=="number"?l.push(u):l.insert(u.insert,{indent:i,...u.attributes||{}}):l,new de)}function Fb(r,e,t){const n=r;let i=n.tagName==="OL"?"ordered":"bullet";const s=n.getAttribute("data-checked");return s&&(i=s==="true"?"checked":"unchecked"),hn(e,"list",i,t)}function Mu(r,e,t){if(!yi(e,`
`)){if(zr(r,t)&&(r.childNodes.length>0||r instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&r.nextSibling){let n=r.nextSibling;for(;n!=null;){if(zr(n,t))return e.insert(`
`);const i=t.query(n);if(i&&i.prototype instanceof Jt)return e.insert(`
`);n=n.firstChild}}}return e}function $b(r,e,t){var s;const n={},i=r.style||{};return i.fontStyle==="italic"&&(n.italic=!0),i.textDecoration==="underline"&&(n.underline=!0),i.textDecoration==="line-through"&&(n.strike=!0),((s=i.fontWeight)!=null&&s.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(n.bold=!0),e=Object.entries(n).reduce((l,u)=>{let[a,o]=u;return hn(l,a,o,t)},e),parseFloat(i.textIndent||0)>0?new de().insert("	").concat(e):e}function Ub(r,e,t){var i,s;const n=((i=r.parentElement)==null?void 0:i.tagName)==="TABLE"?r.parentElement:(s=r.parentElement)==null?void 0:s.parentElement;if(n!=null){const u=Array.from(n.querySelectorAll("tr")).indexOf(r)+1;return hn(e,"table",u,t)}return e}function Hb(r,e,t){var i;let n=r.data;if(((i=r.parentElement)==null?void 0:i.tagName)==="O:P")return e.insert(n.trim());if(!Ch(r)){if(n.trim().length===0&&n.includes(`
`)&&!xb(r,t))return e;n=n.replace(/[^\S\u00a0]/g," "),n=n.replace(/ {2,}/g," "),(r.previousSibling==null&&r.parentElement!=null&&zr(r.parentElement,t)||r.previousSibling instanceof Element&&zr(r.previousSibling,t))&&(n=n.replace(/^ /,"")),(r.nextSibling==null&&r.parentElement!=null&&zr(r.parentElement,t)||r.nextSibling instanceof Element&&zr(r.nextSibling,t))&&(n=n.replace(/ $/,"")),n=n.replaceAll(" "," ")}return e.insert(n)}class qh extends ur{constructor(t,n){super(t,n);ue(this,"lastRecorded",0);ue(this,"ignoreChange",!1);ue(this,"stack",{undo:[],redo:[]});ue(this,"currentRange",null);this.quill.on(Z.events.EDITOR_CHANGE,(i,s,l,u)=>{i===Z.events.SELECTION_CHANGE?s&&u!==Z.sources.SILENT&&(this.currentRange=s):i===Z.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||u===Z.sources.USER?this.record(s,l):this.transform(s)),this.currentRange=el(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(t,n){if(this.stack[t].length===0)return;const i=this.stack[t].pop();if(!i)return;const s=this.quill.getContents(),l=i.delta.invert(s);this.stack[n].push({delta:l,range:el(i.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,Z.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,n){if(t.ops.length===0)return;this.stack.redo=[];let i=t.invert(n),s=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const u=this.stack.undo.pop();u&&(i=i.compose(u.delta),s=u.range)}else this.lastRecorded=l;i.length()!==0&&(this.stack.undo.push({delta:i,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){ku(this.stack.undo,t),ku(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,Z.sources.USER);else{const n=Vb(this.quill.scroll,t.delta);this.quill.setSelection(n,Z.sources.USER)}}}ue(qh,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function ku(r,e){let t=e;for(let n=r.length-1;n>=0;n-=1){const i=r[n];r[n]={delta:t.transform(i.delta,!0),range:i.range&&el(i.range,t)},t=i.delta.transform(t),r[n].delta.length()===0&&r.splice(n,1)}}function zb(r,e){const t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(n=>r.query(n,pe.BLOCK)!=null):!1}function Vb(r,e){const t=e.reduce((i,s)=>i+(s.delete||0),0);let n=e.length()-t;return zb(r,e)&&(n-=1),n}function el(r,e){if(!r)return r;const t=e.transformPosition(r.index),n=e.transformPosition(r.index+r.length);return{index:t,length:n-t}}class Ih extends ur{constructor(e,t){super(e,t),e.root.addEventListener("drop",n=>{var l;n.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(n.clientX,n.clientY);else if(document.caretPositionFromPoint){const u=document.caretPositionFromPoint(n.clientX,n.clientY);i=document.createRange(),i.setStart(u.offsetNode,u.offset),i.setEnd(u.offsetNode,u.offset)}const s=i&&e.selection.normalizeNative(i);if(s){const u=e.selection.normalizedToRange(s);(l=n.dataTransfer)!=null&&l.files&&this.upload(u,n.dataTransfer.files)}})}upload(e,t){const n=[];Array.from(t).forEach(i=>{var s;i&&((s=this.options.mimetypes)!=null&&s.includes(i.type))&&n.push(i)}),n.length>0&&this.options.handler.call(this,e,n)}}Ih.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(r,e){if(!this.quill.scroll.query("image"))return;const t=e.map(n=>new Promise(i=>{const s=new FileReader;s.onload=()=>{i(s.result)},s.readAsDataURL(n)}));Promise.all(t).then(n=>{const i=n.reduce((s,l)=>s.insert({image:l}),new de().retain(r.index).delete(r.length));this.quill.updateContents(i,fe.sources.USER),this.quill.setSelection(r.index+n.length,fe.sources.SILENT)})}};const Gb=["insertText","insertReplacementText"];class Wb extends ur{constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",n=>{this.handleBeforeInput(n)}),/Android/i.test(navigator.userAgent)||e.on(Z.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){Sl({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){const n=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new de().retain(e.index).insert(t,n),Z.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,Z.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!Gb.includes(e.inputType))return;const t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;const n=Kb(e);if(n==null)return;const i=this.quill.selection.normalizeNative(t),s=i?this.quill.selection.normalizedToRange(i):null;s&&this.replaceText(s,n)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function Kb(r){var e;return typeof r.data=="string"?r.data:(e=r.dataTransfer)!=null&&e.types.includes("text/plain")?r.dataTransfer.getData("text/plain"):null}const Yb=/Mac/i.test(navigator.platform),Zb=100,Xb=r=>!!(r.key==="ArrowLeft"||r.key==="ArrowRight"||r.key==="ArrowUp"||r.key==="ArrowDown"||r.key==="Home"||Yb&&r.key==="a"&&r.ctrlKey===!0);class Jb extends ur{constructor(t,n){super(t,n);ue(this,"isListening",!1);ue(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,n){let{line:i,event:s}=n;if(!(i instanceof ir)||!i.uiNode)return!0;const l=getComputedStyle(i.domNode).direction==="rtl";return l&&s.key!=="ArrowRight"||!l&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(t.index-1,t.length+(s.shiftKey?1:0),Z.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&Xb(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+Zb,this.isListening)return;this.isListening=!0;const t=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",t,{once:!0})}handleSelectionChange(){const t=document.getSelection();if(!t)return;const n=t.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const i=this.quill.scroll.find(n.startContainer);if(!(i instanceof ir)||!i.uiNode)return;const s=document.createRange();s.setStartAfter(i.uiNode),s.setEndAfter(i.uiNode),t.removeAllRanges(),t.addRange(s)}}Z.register({"blots/block":mt,"blots/block/embed":Jt,"blots/break":lr,"blots/container":cn,"blots/cursor":In,"blots/embed":ml,"blots/inline":Or,"blots/scroll":Tn,"blots/text":sr,"modules/clipboard":Lh,"modules/history":qh,"modules/keyboard":Ls,"modules/uploader":Ih,"modules/input":Wb,"modules/uiNode":Jb});class Qb extends ar{add(e,t){let n=0;if(t==="+1"||t==="-1"){const i=this.value(e)||0;n=t==="+1"?i+1:i-1}else typeof t=="number"&&(n=t);return n===0?(this.remove(e),!0):super.add(e,n.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}}const e1=new Qb("indent","ql-indent",{scope:pe.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class tl extends mt{}ue(tl,"blotName","blockquote"),ue(tl,"tagName","blockquote");class rl extends mt{static formats(e){return this.tagName.indexOf(e.tagName)+1}}ue(rl,"blotName","header"),ue(rl,"tagName",["H1","H2","H3","H4","H5","H6"]);class mi extends cn{}mi.blotName="list-container";mi.tagName="OL";class bi extends mt{static create(e){const t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){Z.register(mi)}constructor(e,t){super(e,t);const n=t.ownerDocument.createElement("span"),i=s=>{if(!e.isEnabled())return;const l=this.statics.formats(t,e);l==="checked"?(this.format("list","unchecked"),s.preventDefault()):l==="unchecked"&&(this.format("list","checked"),s.preventDefault())};n.addEventListener("mousedown",i),n.addEventListener("touchstart",i),this.attachUI(n)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}}bi.blotName="list";bi.tagName="LI";mi.allowedChildren=[bi];bi.requiredContainer=mi;class li extends Or{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}ue(li,"blotName","bold"),ue(li,"tagName",["STRONG","B"]);class nl extends li{}ue(nl,"blotName","italic"),ue(nl,"tagName",["EM","I"]);class Vr extends Or{static create(e){const t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return xh(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}}ue(Vr,"blotName","link"),ue(Vr,"tagName","A"),ue(Vr,"SANITIZED_URL","about:blank"),ue(Vr,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function xh(r,e){const t=document.createElement("a");t.href=r;const n=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(n)>-1}class il extends Or{static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}ue(il,"blotName","script"),ue(il,"tagName",["SUB","SUP"]);class sl extends li{}ue(sl,"blotName","strike"),ue(sl,"tagName",["S","STRIKE"]);class ol extends Or{}ue(ol,"blotName","underline"),ue(ol,"tagName","U");class Zi extends ml{static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}ue(Zi,"blotName","formula"),ue(Zi,"className","ql-formula"),ue(Zi,"tagName","SPAN");const Bu=["alt","height","width"];class al extends $t{static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return Bu.reduce((t,n)=>(e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return xh(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){Bu.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}}ue(al,"blotName","image"),ue(al,"tagName","IMG");const Fu=["height","width"];class Xi extends Jt{static create(e){const t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return Fu.reduce((t,n)=>(e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t),{})}static sanitize(e){return Vr.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){Fu.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}ue(Xi,"blotName","video"),ue(Xi,"className","ql-video"),ue(Xi,"tagName","IFRAME");const Xn=new ar("code-token","hljs",{scope:pe.INLINE});class Cr extends Or{static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(Tt.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,n){super(e,t,n),Xn.add(this.domNode,n)}format(e,t){e!==Cr.blotName?super.format(e,t):t?Xn.add(this.domNode,t):(Xn.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Xn.value(this.domNode)||this.unwrap()}}Cr.blotName="code-token";Cr.className="ql-token";class Xt extends Tt{static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),Cr.blotName,!1),super.replaceWith(e,t)}}class ei extends fn{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===Xt.blotName&&(this.forceNext=!0,this.children.forEach(n=>{n.format(e,t)}))}formatAt(e,t,n,i){n===Xt.blotName&&(this.forceNext=!0),super.formatAt(e,t,n,i)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(l=>l!==this.uiNode).map(l=>l.textContent).join(`
`)}
`,s=Xt.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const l=this.children.reduce((a,o)=>a.concat(vh(o,!1)),new de),u=e(i,s);l.diff(u).reduce((a,o)=>{let{retain:c,attributes:g}=o;return c?(g&&Object.keys(g).forEach(p=>{[Xt.blotName,Cr.blotName].includes(p)&&this.formatAt(a,c,p,g[p])}),a+c):a},0)}this.cachedText=i,this.forceNext=!1}}html(e,t){const[n]=this.children.find(e);return`<pre data-language="${n?Xt.formats(n.domNode):"plain"}">
${Ns(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const t=Xt.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}ei.allowedChildren=[Xt];Xt.requiredContainer=ei;Xt.allowedChildren=[Cr,In,sr,lr];const t1=(r,e,t)=>{if(typeof r.versionString=="string"){const n=r.versionString.split(".")[0];if(parseInt(n,10)>=11)return r.highlight(t,{language:e}).value}return r.highlight(e,t).value};class Ph extends ur{static register(){Z.register(Cr,!0),Z.register(Xt,!0),Z.register(ei,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((n,i)=>{let{key:s}=i;return n[s]=!0,n},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Z.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof ei))return;const t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(n=>{let{key:i,label:s}=n;const l=t.ownerDocument.createElement("option");l.textContent=s,l.setAttribute("value",i),t.appendChild(l)}),t.addEventListener("change",()=>{e.format(Xt.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=Xt.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(Z.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(Z.sources.USER);const n=this.quill.getSelection();(e==null?this.quill.scroll.descendants(ei):[e]).forEach(s=>{s.highlight(this.highlightBlot,t)}),this.quill.update(Z.sources.SILENT),n!=null&&this.quill.setSelection(n,Z.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return Ns(e).split(`
`).reduce((i,s,l)=>(l!==0&&i.insert(`
`,{[Tt.blotName]:t}),i.insert(s)),new de);const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(Tt.className),n.innerHTML=t1(this.options.hljs,t,e),wl(this.quill.scroll,n,[(i,s)=>{const l=Xn.value(i);return l?s.compose(new de().retain(s.length(),{[Cr.blotName]:l})):s}],[(i,s)=>i.data.split(`
`).reduce((l,u,a)=>(a!==0&&l.insert(`
`,{[Tt.blotName]:t}),l.insert(u)),s)],new WeakMap)}}Ph.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const ri=class ri extends mt{static create(e){const t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",Tl()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===ri.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};ue(ri,"blotName","table"),ue(ri,"tagName","TD");let nr=ri;class qr extends cn{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),t=this.children.tail.formats(),n=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===t.table&&e.table===n.table&&e.table===i.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;const n=t.formats(),i=t.next.formats();if(n.table!==i.table){const s=this.splitAfter(t);s&&s.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}ue(qr,"blotName","table-row"),ue(qr,"tagName","TR");class Er extends cn{}ue(Er,"blotName","table-body"),ue(Er,"tagName","TBODY");class Pn extends cn{balanceCells(){const e=this.descendants(qr),t=e.reduce((n,i)=>Math.max(i.children.length,n),0);e.forEach(n=>{new Array(t-n.children.length).fill(0).forEach(()=>{let i;n.children.head!=null&&(i=nr.formats(n.children.head.domNode));const s=this.scroll.create(nr.blotName,i);n.appendChild(s),s.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){const[t]=this.descendant(Er);t==null||t.children.head==null||t.children.forEach(n=>{const i=n.children.at(e);i!=null&&i.remove()})}insertColumn(e){const[t]=this.descendant(Er);t==null||t.children.head==null||t.children.forEach(n=>{const i=n.children.at(e),s=nr.formats(n.children.head.domNode),l=this.scroll.create(nr.blotName,s);n.insertBefore(l,i)})}insertRow(e){const[t]=this.descendant(Er);if(t==null||t.children.head==null)return;const n=Tl(),i=this.scroll.create(qr.blotName);t.children.head.children.forEach(()=>{const l=this.scroll.create(nr.blotName,n);i.appendChild(l)});const s=t.children.at(e);t.insertBefore(i,s)}rows(){const e=this.children.head;return e==null?[]:e.children.map(t=>t)}}ue(Pn,"blotName","table-container"),ue(Pn,"tagName","TABLE");Pn.allowedChildren=[Er];Er.requiredContainer=Pn;Er.allowedChildren=[qr];qr.requiredContainer=Er;qr.allowedChildren=[nr];nr.requiredContainer=qr;function Tl(){return`row-${Math.random().toString(36).slice(2,6)}`}class r1 extends ur{static register(){Z.register(nr),Z.register(qr),Z.register(Er),Z.register(Pn)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Pn).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(Z.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(Z.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const t=e.offset();e.remove(),this.quill.update(Z.sources.USER),this.quill.setSelection(t,Z.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[t,n]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==nr.blotName)return[null,null,null,-1];const i=t.parent;return[i.parent.parent,i,t,n]}insertColumn(e){const t=this.quill.getSelection();if(!t)return;const[n,i,s]=this.getTable(t);if(s==null)return;const l=s.cellOffset();n.insertColumn(l+e),this.quill.update(Z.sources.USER);let u=i.rowOffset();e===0&&(u+=1),this.quill.setSelection(t.index+u,t.length,Z.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const t=this.quill.getSelection();if(!t)return;const[n,i,s]=this.getTable(t);if(s==null)return;const l=i.rowOffset();n.insertRow(l+e),this.quill.update(Z.sources.USER),e>0?this.quill.setSelection(t,Z.sources.SILENT):this.quill.setSelection(t.index+i.children.length,t.length,Z.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){const n=this.quill.getSelection();if(n==null)return;const i=new Array(e).fill(0).reduce(s=>{const l=new Array(t).fill(`
`).join("");return s.insert(l,{table:Tl()})},new de().retain(n.index));this.quill.updateContents(i,Z.sources.USER),this.quill.setSelection(n.index,Z.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Z.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(Z.events.TEXT_CHANGE,(n,i,s)=>{s===Z.sources.USER&&this.balanceTables()}),!0):!1)})}}const $u=xr("quill:toolbar");class Rl extends ur{constructor(e,t){var n,i;if(super(e,t),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),n1(s,this.options.container),(i=(n=e.container)==null?void 0:n.parentNode)==null||i.insertBefore(s,e.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){$u.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{var u;const l=(u=this.options.handlers)==null?void 0:u[s];l&&this.addHandler(s,l)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(Z.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(i=>i.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){$u.warn("ignoring attaching to nonexistent format",t,e);return}const n=e.tagName==="SELECT"?"change":"click";e.addEventListener(n,i=>{let s;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const u=e.options[e.selectedIndex];u.hasAttribute("selected")?s=!1:s=u.value||!1}else e.classList.contains("ql-active")?s=!1:s=e.value||!e.hasAttribute("value"),i.preventDefault();this.quill.focus();const[l]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,s);else if(this.quill.scroll.query(t).prototype instanceof $t){if(s=prompt(`Enter ${t}`),!s)return;this.quill.updateContents(new de().retain(l.index).delete(l.length).insert({[t]:s}),Z.sources.USER)}else this.quill.format(t,s,Z.sources.USER);this.update(l)}),this.controls.push([t,e])}update(e){const t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(n=>{const[i,s]=n;if(s.tagName==="SELECT"){let l=null;if(e==null)l=null;else if(t[i]==null)l=s.querySelector("option[selected]");else if(!Array.isArray(t[i])){let u=t[i];typeof u=="string"&&(u=u.replace(/"/g,'\\"')),l=s.querySelector(`option[value="${u}"]`)}l==null?(s.value="",s.selectedIndex=-1):l.selected=!0}else if(e==null)s.classList.remove("ql-active"),s.setAttribute("aria-pressed","false");else if(s.hasAttribute("value")){const l=t[i],u=l===s.getAttribute("value")||l!=null&&l.toString()===s.getAttribute("value")||l==null&&!s.getAttribute("value");s.classList.toggle("ql-active",u),s.setAttribute("aria-pressed",u.toString())}else{const l=t[i]!=null;s.classList.toggle("ql-active",l),s.setAttribute("aria-pressed",l.toString())}})}}Rl.DEFAULTS={};function Uu(r,e,t){const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add(`ql-${e}`),n.setAttribute("aria-pressed","false"),t!=null?(n.value=t,n.setAttribute("aria-label",`${e}: ${t}`)):n.setAttribute("aria-label",e),r.appendChild(n)}function n1(r,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{const n=document.createElement("span");n.classList.add("ql-formats"),t.forEach(i=>{if(typeof i=="string")Uu(n,i);else{const s=Object.keys(i)[0],l=i[s];Array.isArray(l)?i1(n,s,l):Uu(n,s,l)}}),r.appendChild(n)})}function i1(r,e,t){const n=document.createElement("select");n.classList.add(`ql-${e}`),t.forEach(i=>{const s=document.createElement("option");i!==!1?s.setAttribute("value",String(i)):s.setAttribute("selected","selected"),n.appendChild(s)}),r.appendChild(n)}Rl.DEFAULTS={container:null,handlers:{clean(){const r=this.quill.getSelection();if(r!=null)if(r.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,pe.INLINE)!=null&&this.quill.format(t,!1,Z.sources.USER)})}else this.quill.removeFormat(r.index,r.length,Z.sources.USER)},direction(r){const{align:e}=this.quill.getFormat();r==="rtl"&&e==null?this.quill.format("align","right",Z.sources.USER):!r&&e==="right"&&this.quill.format("align",!1,Z.sources.USER),this.quill.format("direction",r,Z.sources.USER)},indent(r){const e=this.quill.getSelection(),t=this.quill.getFormat(e),n=parseInt(t.indent||0,10);if(r==="+1"||r==="-1"){let i=r==="+1"?1:-1;t.direction==="rtl"&&(i*=-1),this.quill.format("indent",n+i,Z.sources.USER)}},link(r){r===!0&&(r=prompt("Enter link URL:")),this.quill.format("link",r,Z.sources.USER)},list(r){const e=this.quill.getSelection(),t=this.quill.getFormat(e);r==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,Z.sources.USER):this.quill.format("list","unchecked",Z.sources.USER):this.quill.format("list",r,Z.sources.USER)}}};const s1='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',o1='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',a1='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',l1='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',u1='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',c1='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',f1='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',h1='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Hu='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',d1='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',p1='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',g1='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',v1='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',y1='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',m1='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',b1='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',_1='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',E1='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',A1='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',O1='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',S1='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',w1='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',T1='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',R1='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',N1='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',L1='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',C1='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',q1='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',I1='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',x1='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',P1='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',D1='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',j1='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',ui={align:{"":s1,center:o1,right:a1,justify:l1},background:u1,blockquote:c1,bold:f1,clean:h1,code:Hu,"code-block":Hu,color:d1,direction:{"":p1,rtl:g1},formula:v1,header:{1:y1,2:m1,3:b1,4:_1,5:E1,6:A1},italic:O1,image:S1,indent:{"+1":w1,"-1":T1},link:R1,list:{bullet:N1,check:L1,ordered:C1},script:{sub:q1,super:I1},strike:x1,table:P1,underline:D1,video:j1},M1='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let zu=0;function Vu(r,e){r.setAttribute(e,`${r.getAttribute(e)!=="true"}`)}class Cs{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Vu(this.label,"aria-expanded"),Vu(this.options,"aria-hidden")}buildItem(e){const t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");const n=e.getAttribute("value");return n&&t.setAttribute("data-value",n),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(t,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),t}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=M1,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${zu}`,zu+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{const n=this.buildItem(t);e.appendChild(n),t.selected===!0&&this.selectItem(n)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.container.querySelector(".ql-selected");e!==n&&(n!=null&&n.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const n=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(n)}else this.selectItem(null);const t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}}class Dh extends Cs{constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(n=>{n.classList.add("ql-primary")})}buildItem(e){const t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);const n=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";n&&(n.tagName==="line"?n.style.stroke=i:n.style.fill=i)}}class jh extends Cs{constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(n=>{n.innerHTML=t[n.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);const n=e||this.defaultItem;if(n!=null){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}}const k1=r=>{const{overflowY:e}=getComputedStyle(r,null);return e!=="visible"&&e!=="clip"};class Mh{constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,k1(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const t=e.left+e.width/2-this.root.offsetWidth/2,n=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),s=this.root.getBoundingClientRect();let l=0;if(s.right>i.right&&(l=i.right-s.right,this.root.style.left=`${t+l}px`),s.left<i.left&&(l=i.left-s.left,this.root.style.left=`${t+l}px`),s.bottom>i.bottom){const u=s.bottom-s.top,a=e.bottom-e.top+u;this.root.style.top=`${n-a}px`,this.root.classList.add("ql-flip")}return l}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const B1=[!1,"center","right","justify"],F1=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],$1=[!1,"serif","monospace"],U1=["1","2","3",!1],H1=["small",!1,"large","huge"];class _i extends xn{constructor(e,t){super(e,t);const n=i=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",n);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(s=>{s.container.contains(i.target)||s.close()})};e.emitter.listenDOM("click",document.body,n)}addModule(e){const t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(n=>{(n.getAttribute("class")||"").split(/\s+/).forEach(s=>{if(s.startsWith("ql-")&&(s=s.slice(3),t[s]!=null))if(s==="direction")n.innerHTML=t[s][""]+t[s].rtl;else if(typeof t[s]=="string")n.innerHTML=t[s];else{const l=n.value||"";l!=null&&t[s][l]&&(n.innerHTML=t[s][l])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&Gn(i,B1),typeof t.align=="object"))return new jh(i,t.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const s=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&Gn(i,F1,s==="background"?"#ffffff":"#000000"),new Dh(i,t[s])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?Gn(i,$1):i.classList.contains("ql-header")?Gn(i,U1):i.classList.contains("ql-size")&&Gn(i,H1)),new Cs(i)});const n=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(fe.events.EDITOR_CHANGE,n)}}_i.DEFAULTS=Gr({},xn.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let r=this.container.querySelector("input.ql-image[type=file]");r==null&&(r=document.createElement("input"),r.setAttribute("type","file"),r.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),r.classList.add("ql-image"),r.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,r.files),r.value=""}),this.container.appendChild(r)),r.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class kh extends Mh{constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);n!=null&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,fe.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,fe.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=z1(e);case"formula":{if(!e)break;const t=this.quill.getSelection(!0);if(t!=null){const n=t.index+t.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),e,fe.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(n+1," ",fe.sources.USER),this.quill.setSelection(n+2,fe.sources.USER)}break}}this.textbox.value="",this.hide()}}function z1(r){let e=r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=r.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:r}function Gn(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(n=>{const i=document.createElement("option");n===t?i.setAttribute("selected","selected"):i.setAttribute("value",String(n)),r.appendChild(i)})}const V1=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Bh extends kh{constructor(e,t){super(e,t),this.quill.on(fe.events.EDITOR_CHANGE,(n,i,s,l)=>{if(n===fe.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&l===fe.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const u=this.quill.getLines(i.index,i.length);if(u.length===1){const a=this.quill.getBounds(i);a!=null&&this.position(a)}else{const a=u[u.length-1],o=this.quill.getIndex(a),c=Math.min(a.length()-1,i.index+i.length-o),g=this.quill.getBounds(new on(o,c));g!=null&&this.position(g)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(fe.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){const t=super.position(e),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",t!==0&&(n.style.marginLeft=`${-1*t-n.offsetWidth/2}px`),t}}ue(Bh,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class Fh extends _i{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=V1),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new Bh(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),ui),this.buildPickers(e.container.querySelectorAll("select"),ui))}}Fh.DEFAULTS=Gr({},_i.DEFAULTS,{modules:{toolbar:{handlers:{link(r){r?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Z.sources.USER)}}}}});const G1=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class $h extends kh{constructor(){super(...arguments);ue(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,fe.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(fe.events.SELECTION_CHANGE,(t,n,i)=>{if(t!=null){if(t.length===0&&i===fe.sources.USER){const[s,l]=this.quill.scroll.descendant(Vr,t.index);if(s!=null){this.linkRange=new on(t.index-l,s.length());const u=Vr.formats(s.domNode);this.preview.textContent=u,this.preview.setAttribute("href",u),this.show();const a=this.quill.getBounds(this.linkRange);a!=null&&this.position(a);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}ue($h,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class Uh extends _i{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=G1),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),ui),this.buildPickers(e.container.querySelectorAll("select"),ui),this.tooltip=new $h(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,n)=>{e.handlers.link.call(e,!n.format.link)}))}}Uh.DEFAULTS=Gr({},_i.DEFAULTS,{modules:{toolbar:{handlers:{link(r){if(r){const e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);const{tooltip:n}=this.quill.theme;n.edit("link",t)}else this.quill.format("link",!1,Z.sources.USER)}}}}});Z.register({"attributors/attribute/direction":Eh,"attributors/class/align":mh,"attributors/class/background":cb,"attributors/class/color":ub,"attributors/class/direction":Ah,"attributors/class/font":wh,"attributors/class/size":Rh,"attributors/style/align":bh,"attributors/style/background":El,"attributors/style/color":_l,"attributors/style/direction":Oh,"attributors/style/font":Th,"attributors/style/size":Nh},!0);Z.register({"formats/align":mh,"formats/direction":Ah,"formats/indent":e1,"formats/background":El,"formats/color":_l,"formats/font":wh,"formats/size":Rh,"formats/blockquote":tl,"formats/code-block":Tt,"formats/header":rl,"formats/list":bi,"formats/bold":li,"formats/code":Al,"formats/italic":nl,"formats/link":Vr,"formats/script":il,"formats/strike":sl,"formats/underline":ol,"formats/formula":Zi,"formats/image":al,"formats/video":Xi,"modules/syntax":Ph,"modules/table":r1,"modules/toolbar":Rl,"themes/bubble":Fh,"themes/snow":Uh,"ui/icons":ui,"ui/picker":Cs,"ui/icon-picker":jh,"ui/color-picker":Dh,"ui/tooltip":Mh},!0);var io={exports:{}};/*! For license information please see quill-cursors.js.LICENSE.txt */var Gu;function W1(){return Gu||(Gu=1,(function(r,e){(function(t,n){r.exports=n()})(self,(()=>(()=>{var t={582:(l,u,a)=>{a.d(u,{Z:()=>d});var o=a(81),c=a.n(o),g=a(645),p=a.n(g)()(c());p.push([l.id,".ql-container{position:relative;overflow:hidden}@media(pointer: coarse){.ql-cursor-caret-container{z-index:-1}}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{cursor:text;margin-left:-9px;padding:0 9px}.ql-cursor .ql-cursor-caret-container.hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-caret-container.no-pointer{pointer-events:none}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);const d=p},645:l=>{l.exports=function(u){var a=[];return a.toString=function(){return this.map((function(o){var c="",g=o[5]!==void 0;return o[4]&&(c+="@supports (".concat(o[4],") {")),o[2]&&(c+="@media ".concat(o[2]," {")),g&&(c+="@layer".concat(o[5].length>0?" ".concat(o[5]):""," {")),c+=u(o),g&&(c+="}"),o[2]&&(c+="}"),o[4]&&(c+="}"),c})).join("")},a.i=function(o,c,g,p,d){typeof o=="string"&&(o=[[null,o,void 0]]);var m={};if(g)for(var A=0;A<this.length;A++){var O=this[A][0];O!=null&&(m[O]=!0)}for(var E=0;E<o.length;E++){var _=[].concat(o[E]);g&&m[_[0]]||(d!==void 0&&(_[5]===void 0||(_[1]="@layer".concat(_[5].length>0?" ".concat(_[5]):""," {").concat(_[1],"}")),_[5]=d),c&&(_[2]&&(_[1]="@media ".concat(_[2]," {").concat(_[1],"}")),_[2]=c),p&&(_[4]?(_[1]="@supports (".concat(_[4],") {").concat(_[1],"}"),_[4]=p):_[4]="".concat(p)),a.push(_))}},a}},81:l=>{l.exports=function(u){return u[1]}},529:l=>{var u=-1;function a(h,f,v,b){if(h===f)return h?[[0,h]]:[];if(v!=null){var S=(function(j,R,I){var D=typeof I=="number"?{index:I,length:0}:I.oldRange,q=typeof I=="number"?null:I.newRange,$=j.length,U=R.length;if(D.length===0&&(q===null||q.length===0)){var K=D.index,V=j.slice(0,K),ne=j.slice(K),te=q?q.index:null,L=K+U-$;if((te===null||te===L)&&!(L<0||L>U)){var B=R.slice(0,L);if((re=R.slice(L))===ne){var k=Math.min(K,L);if((ee=V.slice(0,k))===(Q=B.slice(0,k)))return E(ee,V.slice(k),B.slice(k),ne)}}if(te===null||te===K){var Y=K,re=(B=R.slice(0,Y),R.slice(Y));if(B===V){var X=Math.min($-Y,U-Y);if((J=ne.slice(ne.length-X))===(oe=re.slice(re.length-X)))return E(V,ne.slice(0,ne.length-X),re.slice(0,re.length-X),J)}}}if(D.length>0&&q&&q.length===0){var ee=j.slice(0,D.index),J=j.slice(D.index+D.length);if(!(U<(k=ee.length)+(X=J.length))){var Q=R.slice(0,k),oe=R.slice(U-X);if(ee===Q&&J===oe)return E(ee,j.slice(k,$-X),R.slice(k,U-X),J)}}return null})(h,f,v);if(S)return S}var N=c(h,f),C=h.substring(0,N);N=g(h=h.substring(N),f=f.substring(N));var P=h.substring(h.length-N),w=(function(j,R){var I;if(!j)return[[1,R]];if(!R)return[[u,j]];var D=j.length>R.length?j:R,q=j.length>R.length?R:j,$=D.indexOf(q);if($!==-1)return I=[[1,D.substring(0,$)],[0,q],[1,D.substring($+q.length)]],j.length>R.length&&(I[0][0]=I[2][0]=u),I;if(q.length===1)return[[u,j],[1,R]];var U=(function(Y,re){var X=Y.length>re.length?Y:re,ee=Y.length>re.length?re:Y;if(X.length<4||2*ee.length<X.length)return null;function J(Ze,G,xe){for(var Be,Ue,De,Oe,tt=Ze.substring(xe,xe+Math.floor(Ze.length/4)),Ge=-1,Fe="";(Ge=G.indexOf(tt,Ge+1))!==-1;){var je=c(Ze.substring(xe),G.substring(Ge)),rt=g(Ze.substring(0,xe),G.substring(0,Ge));Fe.length<rt+je&&(Fe=G.substring(Ge-rt,Ge)+G.substring(Ge,Ge+je),Be=Ze.substring(0,xe-rt),Ue=Ze.substring(xe+je),De=G.substring(0,Ge-rt),Oe=G.substring(Ge+je))}return 2*Fe.length>=Ze.length?[Be,Ue,De,Oe,Fe]:null}var Q,oe,le,he,me,Ae=J(X,ee,Math.ceil(X.length/4)),Qe=J(X,ee,Math.ceil(X.length/2));return Ae||Qe?(Q=Qe?Ae&&Ae[4].length>Qe[4].length?Ae:Qe:Ae,Y.length>re.length?(oe=Q[0],le=Q[1],he=Q[2],me=Q[3]):(he=Q[0],me=Q[1],oe=Q[2],le=Q[3]),[oe,le,he,me,Q[4]]):null})(j,R);if(U){var K=U[0],V=U[1],ne=U[2],te=U[3],L=U[4],B=a(K,ne),k=a(V,te);return B.concat([[0,L]],k)}return(function(Y,re){for(var X=Y.length,ee=re.length,J=Math.ceil((X+ee)/2),Q=J,oe=2*J,le=new Array(oe),he=new Array(oe),me=0;me<oe;me++)le[me]=-1,he[me]=-1;le[Q+1]=0,he[Q+1]=0;for(var Ae=X-ee,Qe=Ae%2!=0,Ze=0,G=0,xe=0,Be=0,Ue=0;Ue<J;Ue++){for(var De=-Ue+Ze;De<=Ue-G;De+=2){for(var Oe=Q+De,tt=(Me=De===-Ue||De!==Ue&&le[Oe-1]<le[Oe+1]?le[Oe+1]:le[Oe-1]+1)-De;Me<X&&tt<ee&&Y.charAt(Me)===re.charAt(tt);)Me++,tt++;if(le[Oe]=Me,Me>X)G+=2;else if(tt>ee)Ze+=2;else if(Qe&&(je=Q+Ae-De)>=0&&je<oe&&he[je]!==-1&&Me>=(Fe=X-he[je]))return o(Y,re,Me,tt)}for(var Ge=-Ue+xe;Ge<=Ue-Be;Ge+=2){for(var Fe,je=Q+Ge,rt=(Fe=Ge===-Ue||Ge!==Ue&&he[je-1]<he[je+1]?he[je+1]:he[je-1]+1)-Ge;Fe<X&&rt<ee&&Y.charAt(X-Fe-1)===re.charAt(ee-rt-1);)Fe++,rt++;if(he[je]=Fe,Fe>X)Be+=2;else if(rt>ee)xe+=2;else if(!Qe){var Me;if((Oe=Q+Ae-Ge)>=0&&Oe<oe&&le[Oe]!==-1&&(tt=Q+(Me=le[Oe])-Oe,Me>=(Fe=X-Fe)))return o(Y,re,Me,tt)}}}return[[u,Y],[1,re]]})(j,R)})(h=h.substring(0,h.length-N),f=f.substring(0,f.length-N));return C&&w.unshift([0,C]),P&&w.push([0,P]),p(w,b),w}function o(h,f,v,b){var S=h.substring(0,v),N=f.substring(0,b),C=h.substring(v),P=f.substring(b),w=a(S,N),j=a(C,P);return w.concat(j)}function c(h,f){if(!h||!f||h.charAt(0)!==f.charAt(0))return 0;for(var v=0,b=Math.min(h.length,f.length),S=b,N=0;v<S;)h.substring(N,S)==f.substring(N,S)?N=v=S:b=S,S=Math.floor((b-v)/2+v);return d(h.charCodeAt(S-1))&&S--,S}function g(h,f){if(!h||!f||h.slice(-1)!==f.slice(-1))return 0;for(var v=0,b=Math.min(h.length,f.length),S=b,N=0;v<S;)h.substring(h.length-S,h.length-N)==f.substring(f.length-S,f.length-N)?N=v=S:b=S,S=Math.floor((b-v)/2+v);return m(h.charCodeAt(h.length-S))&&S--,S}function p(h,f){h.push([0,""]);for(var v,b=0,S=0,N=0,C="",P="";b<h.length;)if(b<h.length-1&&!h[b][1])h.splice(b,1);else switch(h[b][0]){case 1:N++,P+=h[b][1],b++;break;case u:S++,C+=h[b][1],b++;break;case 0:var w=b-N-S-1;if(f){if(w>=0&&O(h[w][1])){var j=h[w][1].slice(-1);if(h[w][1]=h[w][1].slice(0,-1),C=j+C,P=j+P,!h[w][1]){h.splice(w,1),b--;var R=w-1;h[R]&&h[R][0]===1&&(N++,P=h[R][1]+P,R--),h[R]&&h[R][0]===u&&(S++,C=h[R][1]+C,R--),w=R}}A(h[b][1])&&(j=h[b][1].charAt(0),h[b][1]=h[b][1].slice(1),C+=j,P+=j)}if(b<h.length-1&&!h[b][1]){h.splice(b,1);break}if(C.length>0||P.length>0){C.length>0&&P.length>0&&((v=c(P,C))!==0&&(w>=0?h[w][1]+=P.substring(0,v):(h.splice(0,0,[0,P.substring(0,v)]),b++),P=P.substring(v),C=C.substring(v)),(v=g(P,C))!==0&&(h[b][1]=P.substring(P.length-v)+h[b][1],P=P.substring(0,P.length-v),C=C.substring(0,C.length-v)));var I=N+S;C.length===0&&P.length===0?(h.splice(b-I,I),b-=I):C.length===0?(h.splice(b-I,I,[1,P]),b=b-I+1):P.length===0?(h.splice(b-I,I,[u,C]),b=b-I+1):(h.splice(b-I,I,[u,C],[1,P]),b=b-I+2)}b!==0&&h[b-1][0]===0?(h[b-1][1]+=h[b][1],h.splice(b,1)):b++,N=0,S=0,C="",P=""}h[h.length-1][1]===""&&h.pop();var D=!1;for(b=1;b<h.length-1;)h[b-1][0]===0&&h[b+1][0]===0&&(h[b][1].substring(h[b][1].length-h[b-1][1].length)===h[b-1][1]?(h[b][1]=h[b-1][1]+h[b][1].substring(0,h[b][1].length-h[b-1][1].length),h[b+1][1]=h[b-1][1]+h[b+1][1],h.splice(b-1,1),D=!0):h[b][1].substring(0,h[b+1][1].length)==h[b+1][1]&&(h[b-1][1]+=h[b+1][1],h[b][1]=h[b][1].substring(h[b+1][1].length)+h[b+1][1],h.splice(b+1,1),D=!0)),b++;D&&p(h,f)}function d(h){return h>=55296&&h<=56319}function m(h){return h>=56320&&h<=57343}function A(h){return m(h.charCodeAt(0))}function O(h){return d(h.charCodeAt(h.length-1))}function E(h,f,v,b){return O(h)||A(b)?null:(function(S){for(var N=[],C=0;C<S.length;C++)S[C][1].length>0&&N.push(S[C]);return N})([[0,h],[u,f],[1,v],[0,b]])}function _(h,f,v){return a(h,f,v,!0)}_.INSERT=1,_.DELETE=u,_.EQUAL=0,l.exports=_},465:(l,u,a)=>{l=a.nmd(l);var o="__lodash_hash_undefined__",c=9007199254740991,g="[object Arguments]",p="[object Boolean]",d="[object Date]",m="[object Function]",A="[object GeneratorFunction]",O="[object Map]",E="[object Number]",_="[object Object]",h="[object Promise]",f="[object RegExp]",v="[object Set]",b="[object String]",S="[object Symbol]",N="[object WeakMap]",C="[object ArrayBuffer]",P="[object DataView]",w="[object Float32Array]",j="[object Float64Array]",R="[object Int8Array]",I="[object Int16Array]",D="[object Int32Array]",q="[object Uint8Array]",$="[object Uint8ClampedArray]",U="[object Uint16Array]",K="[object Uint32Array]",V=/\w*$/,ne=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,L={};L[g]=L["[object Array]"]=L[C]=L[P]=L[p]=L[d]=L[w]=L[j]=L[R]=L[I]=L[D]=L[O]=L[E]=L[_]=L[f]=L[v]=L[b]=L[S]=L[q]=L[$]=L[U]=L[K]=!0,L["[object Error]"]=L[m]=L[N]=!1;var B=typeof a.g=="object"&&a.g&&a.g.Object===Object&&a.g,k=typeof self=="object"&&self&&self.Object===Object&&self,Y=B||k||Function("return this")(),re=u&&!u.nodeType&&u,X=re&&l&&!l.nodeType&&l,ee=X&&X.exports===re;function J(M,z){return M.set(z[0],z[1]),M}function Q(M,z){return M.add(z),M}function oe(M,z,se,ae){var ye=-1,Ce=M?M.length:0;for(ae;++ye<Ce;)se=z(se,M[ye],ye,M);return se}function le(M){var z=!1;if(M!=null&&typeof M.toString!="function")try{z=!!(M+"")}catch{}return z}function he(M){var z=-1,se=Array(M.size);return M.forEach((function(ae,ye){se[++z]=[ye,ae]})),se}function me(M,z){return function(se){return M(z(se))}}function Ae(M){var z=-1,se=Array(M.size);return M.forEach((function(ae){se[++z]=ae})),se}var Qe,Ze=Array.prototype,G=Function.prototype,xe=Object.prototype,Be=Y["__core-js_shared__"],Ue=(Qe=/[^.]+$/.exec(Be&&Be.keys&&Be.keys.IE_PROTO||""))?"Symbol(src)_1."+Qe:"",De=G.toString,Oe=xe.hasOwnProperty,tt=xe.toString,Ge=RegExp("^"+De.call(Oe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fe=ee?Y.Buffer:void 0,je=Y.Symbol,rt=Y.Uint8Array,Me=me(Object.getPrototypeOf,Object),hr=Object.create,Ut=xe.propertyIsEnumerable,en=Ze.splice,dr=Object.getOwnPropertySymbols,pr=Fe?Fe.isBuffer:void 0,Dr=me(Object.keys,Object),Ht=qt(Y,"DataView"),bt=qt(Y,"Map"),at=qt(Y,"Promise"),ft=qt(Y,"Set"),lt=qt(Y,"WeakMap"),nt=qt(Object,"create"),zt=It(Ht),ht=It(bt),Vt=It(at),jt=It(ft),gr=It(lt),Ct=je?je.prototype:void 0,vr=Ct?Ct.valueOf:void 0;function it(M){var z=-1,se=M?M.length:0;for(this.clear();++z<se;){var ae=M[z];this.set(ae[0],ae[1])}}function dt(M){var z=-1,se=M?M.length:0;for(this.clear();++z<se;){var ae=M[z];this.set(ae[0],ae[1])}}function pt(M){var z=-1,se=M?M.length:0;for(this.clear();++z<se;){var ae=M[z];this.set(ae[0],ae[1])}}function Gt(M){this.__data__=new dt(M)}function _t(M,z,se){var ae=M[z];Oe.call(M,z)&&kr(ae,se)&&(se!==void 0||z in M)||(M[z]=se)}function Wt(M,z){for(var se=M.length;se--;)if(kr(M[se][0],z))return se;return-1}function $e(M,z,se,ae,ye,Ce,ze){var Se;if(ae&&(Se=Ce?ae(M,ye,Ce,ze):ae(M)),Se!==void 0)return Se;if(!Ne(M))return M;var Xe=F(M);if(Xe){if(Se=(function(ge){var qe=ge.length,We=ge.constructor(qe);return qe&&typeof ge[0]=="string"&&Oe.call(ge,"index")&&(We.index=ge.index,We.input=ge.input),We})(M),!z)return(function(ge,qe){var We=-1,_e=ge.length;for(qe||(qe=Array(_e));++We<_e;)qe[We]=ge[We];return qe})(M,Se)}else{var Ve=He(M),xt=Ve==m||Ve==A;if(ie(M))return(function(ge,qe){if(qe)return ge.slice();var We=new ge.constructor(ge.length);return ge.copy(We),We})(M,z);if(Ve==_||Ve==g||xt&&!Ce){if(le(M))return Ce?M:{};if(Se=(function(ge){return typeof ge.constructor!="function"||Kt(ge)?{}:Ne(qe=Me(ge))?hr(qe):{};var qe})(xt?{}:M),!z)return(function(ge,qe){return jr(ge,wr(ge),qe)})(M,(function(ge,qe){return ge&&jr(qe,be(qe),ge)})(Se,M))}else{if(!L[Ve])return Ce?M:{};Se=(function(ge,qe,We,_e){var Te,Rt=ge.constructor;switch(qe){case C:return yr(ge);case p:case d:return new Rt(+ge);case P:return(function(we,et){var Ke=et?yr(we.buffer):we.buffer;return new we.constructor(Ke,we.byteOffset,we.byteLength)})(ge,_e);case w:case j:case R:case I:case D:case q:case $:case U:case K:return(function(we,et){var Ke=et?yr(we.buffer):we.buffer;return new we.constructor(Ke,we.byteOffset,we.length)})(ge,_e);case O:return(function(we,et,Ke){return oe(et?Ke(he(we),!0):he(we),J,new we.constructor)})(ge,_e,We);case E:case b:return new Rt(ge);case f:return(function(we){var et=new we.constructor(we.source,V.exec(we));return et.lastIndex=we.lastIndex,et})(ge);case v:return(function(we,et,Ke){return oe(et?Ke(Ae(we),!0):Ae(we),Q,new we.constructor)})(ge,_e,We);case S:return Te=ge,vr?Object(vr.call(Te)):{}}})(M,Ve,$e,z)}}ze||(ze=new Gt);var Et=ze.get(M);if(Et)return Et;if(ze.set(M,Se),!Xe)var Pt=se?(function(ge){return(function(qe,We,_e){var Te=We(qe);return F(qe)?Te:(function(Rt,we){for(var et=-1,Ke=we.length,Nt=Rt.length;++et<Ke;)Rt[Nt+et]=we[et];return Rt})(Te,_e(qe))})(ge,be,wr)})(M):be(M);return(function(ge,qe){for(var We=-1,_e=ge?ge.length:0;++We<_e&&qe(ge[We],We)!==!1;);})(Pt||M,(function(ge,qe){Pt&&(ge=M[qe=ge]),_t(Se,qe,$e(ge,z,se,ae,qe,M,ze))})),Se}function yr(M){var z=new M.constructor(M.byteLength);return new rt(z).set(new rt(M)),z}function jr(M,z,se,ae){se||(se={});for(var ye=-1,Ce=z.length;++ye<Ce;){var ze=z[ye],Se=void 0;_t(se,ze,Se===void 0?M[ze]:Se)}return se}function Mt(M,z){var se,ae,ye=M.__data__;return((ae=typeof(se=z))=="string"||ae=="number"||ae=="symbol"||ae=="boolean"?se!=="__proto__":se===null)?ye[typeof z=="string"?"string":"hash"]:ye.map}function qt(M,z){var se=(function(ae,ye){return ae==null?void 0:ae[ye]})(M,z);return(function(ae){return!(!Ne(ae)||(ye=ae,Ue&&Ue in ye))&&(ce(ae)||le(ae)?Ge:ne).test(It(ae));var ye})(se)?se:void 0}it.prototype.clear=function(){this.__data__=nt?nt(null):{}},it.prototype.delete=function(M){return this.has(M)&&delete this.__data__[M]},it.prototype.get=function(M){var z=this.__data__;if(nt){var se=z[M];return se===o?void 0:se}return Oe.call(z,M)?z[M]:void 0},it.prototype.has=function(M){var z=this.__data__;return nt?z[M]!==void 0:Oe.call(z,M)},it.prototype.set=function(M,z){return this.__data__[M]=nt&&z===void 0?o:z,this},dt.prototype.clear=function(){this.__data__=[]},dt.prototype.delete=function(M){var z=this.__data__,se=Wt(z,M);return!(se<0||(se==z.length-1?z.pop():en.call(z,se,1),0))},dt.prototype.get=function(M){var z=this.__data__,se=Wt(z,M);return se<0?void 0:z[se][1]},dt.prototype.has=function(M){return Wt(this.__data__,M)>-1},dt.prototype.set=function(M,z){var se=this.__data__,ae=Wt(se,M);return ae<0?se.push([M,z]):se[ae][1]=z,this},pt.prototype.clear=function(){this.__data__={hash:new it,map:new(bt||dt),string:new it}},pt.prototype.delete=function(M){return Mt(this,M).delete(M)},pt.prototype.get=function(M){return Mt(this,M).get(M)},pt.prototype.has=function(M){return Mt(this,M).has(M)},pt.prototype.set=function(M,z){return Mt(this,M).set(M,z),this},Gt.prototype.clear=function(){this.__data__=new dt},Gt.prototype.delete=function(M){return this.__data__.delete(M)},Gt.prototype.get=function(M){return this.__data__.get(M)},Gt.prototype.has=function(M){return this.__data__.has(M)},Gt.prototype.set=function(M,z){var se=this.__data__;if(se instanceof dt){var ae=se.__data__;if(!bt||ae.length<199)return ae.push([M,z]),this;se=this.__data__=new pt(ae)}return se.set(M,z),this};var wr=dr?me(dr,Object):function(){return[]},He=function(M){return tt.call(M)};function Mr(M,z){return!!(z=z==null?c:z)&&(typeof M=="number"||te.test(M))&&M>-1&&M%1==0&&M<z}function Kt(M){var z=M&&M.constructor;return M===(typeof z=="function"&&z.prototype||xe)}function It(M){if(M!=null){try{return De.call(M)}catch{}try{return M+""}catch{}}return""}function kr(M,z){return M===z||M!=M&&z!=z}(Ht&&He(new Ht(new ArrayBuffer(1)))!=P||bt&&He(new bt)!=O||at&&He(at.resolve())!=h||ft&&He(new ft)!=v||lt&&He(new lt)!=N)&&(He=function(M){var z=tt.call(M),se=z==_?M.constructor:void 0,ae=se?It(se):void 0;if(ae)switch(ae){case zt:return P;case ht:return O;case Vt:return h;case jt:return v;case gr:return N}return z});var F=Array.isArray;function H(M){return M!=null&&(function(z){return typeof z=="number"&&z>-1&&z%1==0&&z<=c})(M.length)&&!ce(M)}var ie=pr||function(){return!1};function ce(M){var z=Ne(M)?tt.call(M):"";return z==m||z==A}function Ne(M){var z=typeof M;return!!M&&(z=="object"||z=="function")}function be(M){return H(M)?(function(z,se){var ae=F(z)||(function(Se){return(function(Xe){return(function(Ve){return!!Ve&&typeof Ve=="object"})(Xe)&&H(Xe)})(Se)&&Oe.call(Se,"callee")&&(!Ut.call(Se,"callee")||tt.call(Se)==g)})(z)?(function(Se,Xe){for(var Ve=-1,xt=Array(Se);++Ve<Se;)xt[Ve]=Xe(Ve);return xt})(z.length,String):[],ye=ae.length,Ce=!!ye;for(var ze in z)!Oe.call(z,ze)||Ce&&(ze=="length"||Mr(ze,ye))||ae.push(ze);return ae})(M):(function(z){if(!Kt(z))return Dr(z);var se=[];for(var ae in Object(z))Oe.call(z,ae)&&ae!="constructor"&&se.push(ae);return se})(M)}l.exports=function(M){return $e(M,!0,!0)}},307:(l,u,a)=>{l=a.nmd(l);var o="__lodash_hash_undefined__",c=9007199254740991,g="[object Arguments]",p="[object Array]",d="[object Boolean]",m="[object Date]",A="[object Error]",O="[object Function]",E="[object Map]",_="[object Number]",h="[object Object]",f="[object Promise]",v="[object RegExp]",b="[object Set]",S="[object String]",N="[object WeakMap]",C="[object ArrayBuffer]",P="[object DataView]",w=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,R={};R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R[g]=R[p]=R[C]=R[d]=R[P]=R[m]=R[A]=R[O]=R[E]=R[_]=R[h]=R[v]=R[b]=R[S]=R[N]=!1;var I=typeof a.g=="object"&&a.g&&a.g.Object===Object&&a.g,D=typeof self=="object"&&self&&self.Object===Object&&self,q=I||D||Function("return this")(),$=u&&!u.nodeType&&u,U=$&&l&&!l.nodeType&&l,K=U&&U.exports===$,V=K&&I.process,ne=(function(){try{return V&&V.binding&&V.binding("util")}catch{}})(),te=ne&&ne.isTypedArray;function L(F,H){for(var ie=-1,ce=F==null?0:F.length;++ie<ce;)if(H(F[ie],ie,F))return!0;return!1}function B(F){var H=-1,ie=Array(F.size);return F.forEach((function(ce,Ne){ie[++H]=[Ne,ce]})),ie}function k(F){var H=-1,ie=Array(F.size);return F.forEach((function(ce){ie[++H]=ce})),ie}var Y,re,X,ee=Array.prototype,J=Function.prototype,Q=Object.prototype,oe=q["__core-js_shared__"],le=J.toString,he=Q.hasOwnProperty,me=(Y=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",Ae=Q.toString,Qe=RegExp("^"+le.call(he).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ze=K?q.Buffer:void 0,G=q.Symbol,xe=q.Uint8Array,Be=Q.propertyIsEnumerable,Ue=ee.splice,De=G?G.toStringTag:void 0,Oe=Object.getOwnPropertySymbols,tt=Ze?Ze.isBuffer:void 0,Ge=(re=Object.keys,X=Object,function(F){return re(X(F))}),Fe=pt(q,"DataView"),je=pt(q,"Map"),rt=pt(q,"Promise"),Me=pt(q,"Set"),hr=pt(q,"WeakMap"),Ut=pt(Object,"create"),en=$e(Fe),dr=$e(je),pr=$e(rt),Dr=$e(Me),Ht=$e(hr),bt=G?G.prototype:void 0,at=bt?bt.valueOf:void 0;function ft(F){var H=-1,ie=F==null?0:F.length;for(this.clear();++H<ie;){var ce=F[H];this.set(ce[0],ce[1])}}function lt(F){var H=-1,ie=F==null?0:F.length;for(this.clear();++H<ie;){var ce=F[H];this.set(ce[0],ce[1])}}function nt(F){var H=-1,ie=F==null?0:F.length;for(this.clear();++H<ie;){var ce=F[H];this.set(ce[0],ce[1])}}function zt(F){var H=-1,ie=F==null?0:F.length;for(this.__data__=new nt;++H<ie;)this.add(F[H])}function ht(F){var H=this.__data__=new lt(F);this.size=H.size}function Vt(F,H){for(var ie=F.length;ie--;)if(yr(F[ie][0],H))return ie;return-1}function jt(F){return F==null?F===void 0?"[object Undefined]":"[object Null]":De&&De in Object(F)?(function(H){var ie=he.call(H,De),ce=H[De];try{H[De]=void 0;var Ne=!0}catch{}var be=Ae.call(H);return Ne&&(ie?H[De]=ce:delete H[De]),be})(F):(function(H){return Ae.call(H)})(F)}function gr(F){return Kt(F)&&jt(F)==g}function Ct(F,H,ie,ce,Ne){return F===H||(F==null||H==null||!Kt(F)&&!Kt(H)?F!=F&&H!=H:(function(be,M,z,se,ae,ye){var Ce=Mt(be),ze=Mt(M),Se=Ce?p:_t(be),Xe=ze?p:_t(M),Ve=(Se=Se==g?h:Se)==h,xt=(Xe=Xe==g?h:Xe)==h,Et=Se==Xe;if(Et&&qt(be)){if(!qt(M))return!1;Ce=!0,Ve=!1}if(Et&&!Ve)return ye||(ye=new ht),Ce||It(be)?vr(be,M,z,se,ae,ye):(function(_e,Te,Rt,we,et,Ke,Nt){switch(Rt){case P:if(_e.byteLength!=Te.byteLength||_e.byteOffset!=Te.byteOffset)return!1;_e=_e.buffer,Te=Te.buffer;case C:return!(_e.byteLength!=Te.byteLength||!Ke(new xe(_e),new xe(Te)));case d:case m:case _:return yr(+_e,+Te);case A:return _e.name==Te.name&&_e.message==Te.message;case v:case S:return _e==Te+"";case E:var At=B;case b:var gt=1&we;if(At||(At=k),_e.size!=Te.size&&!gt)return!1;var vt=Nt.get(_e);if(vt)return vt==Te;we|=2,Nt.set(_e,Te);var ut=vr(At(_e),At(Te),we,et,Ke,Nt);return Nt.delete(_e),ut;case"[object Symbol]":if(at)return at.call(_e)==at.call(Te)}return!1})(be,M,Se,z,se,ae,ye);if(!(1&z)){var Pt=Ve&&he.call(be,"__wrapped__"),ge=xt&&he.call(M,"__wrapped__");if(Pt||ge){var qe=Pt?be.value():be,We=ge?M.value():M;return ye||(ye=new ht),ae(qe,We,z,se,ye)}}return!!Et&&(ye||(ye=new ht),(function(_e,Te,Rt,we,et,Ke){var Nt=1&Rt,At=it(_e),gt=At.length;if(gt!=it(Te).length&&!Nt)return!1;for(var vt=gt;vt--;){var ut=At[vt];if(!(Nt?ut in Te:he.call(Te,ut)))return!1}var pn=Ke.get(_e);if(pn&&Ke.get(Te))return pn==Te;var Lt=!0;Ke.set(_e,Te),Ke.set(Te,_e);for(var tn=Nt;++vt<gt;){var Br=_e[ut=At[vt]],Fr=Te[ut];if(we)var gn=Nt?we(Fr,Br,ut,Te,_e,Ke):we(Br,Fr,ut,_e,Te,Ke);if(!(gn===void 0?Br===Fr||et(Br,Fr,Rt,we,Ke):gn)){Lt=!1;break}tn||(tn=ut=="constructor")}if(Lt&&!tn){var Tr=_e.constructor,st=Te.constructor;Tr==st||!("constructor"in _e)||!("constructor"in Te)||typeof Tr=="function"&&Tr instanceof Tr&&typeof st=="function"&&st instanceof st||(Lt=!1)}return Ke.delete(_e),Ke.delete(Te),Lt})(be,M,z,se,ae,ye))})(F,H,ie,ce,Ct,Ne))}function vr(F,H,ie,ce,Ne,be){var M=1&ie,z=F.length,se=H.length;if(z!=se&&!(M&&se>z))return!1;var ae=be.get(F);if(ae&&be.get(H))return ae==H;var ye=-1,Ce=!0,ze=2&ie?new zt:void 0;for(be.set(F,H),be.set(H,F);++ye<z;){var Se=F[ye],Xe=H[ye];if(ce)var Ve=M?ce(Xe,Se,ye,H,F,be):ce(Se,Xe,ye,F,H,be);if(Ve!==void 0){if(Ve)continue;Ce=!1;break}if(ze){if(!L(H,(function(xt,Et){if(Pt=Et,!ze.has(Pt)&&(Se===xt||Ne(Se,xt,ie,ce,be)))return ze.push(Et);var Pt}))){Ce=!1;break}}else if(Se!==Xe&&!Ne(Se,Xe,ie,ce,be)){Ce=!1;break}}return be.delete(F),be.delete(H),Ce}function it(F){return(function(H,ie,ce){var Ne=ie(H);return Mt(H)?Ne:(function(be,M){for(var z=-1,se=M.length,ae=be.length;++z<se;)be[ae+z]=M[z];return be})(Ne,ce(H))})(F,kr,Gt)}function dt(F,H){var ie,ce,Ne=F.__data__;return((ce=typeof(ie=H))=="string"||ce=="number"||ce=="symbol"||ce=="boolean"?ie!=="__proto__":ie===null)?Ne[typeof H=="string"?"string":"hash"]:Ne.map}function pt(F,H){var ie=(function(ce,Ne){return ce==null?void 0:ce[Ne]})(F,H);return(function(ce){return!(!Mr(ce)||(function(Ne){return!!me&&me in Ne})(ce))&&(wr(ce)?Qe:w).test($e(ce))})(ie)?ie:void 0}ft.prototype.clear=function(){this.__data__=Ut?Ut(null):{},this.size=0},ft.prototype.delete=function(F){var H=this.has(F)&&delete this.__data__[F];return this.size-=H?1:0,H},ft.prototype.get=function(F){var H=this.__data__;if(Ut){var ie=H[F];return ie===o?void 0:ie}return he.call(H,F)?H[F]:void 0},ft.prototype.has=function(F){var H=this.__data__;return Ut?H[F]!==void 0:he.call(H,F)},ft.prototype.set=function(F,H){var ie=this.__data__;return this.size+=this.has(F)?0:1,ie[F]=Ut&&H===void 0?o:H,this},lt.prototype.clear=function(){this.__data__=[],this.size=0},lt.prototype.delete=function(F){var H=this.__data__,ie=Vt(H,F);return!(ie<0||(ie==H.length-1?H.pop():Ue.call(H,ie,1),--this.size,0))},lt.prototype.get=function(F){var H=this.__data__,ie=Vt(H,F);return ie<0?void 0:H[ie][1]},lt.prototype.has=function(F){return Vt(this.__data__,F)>-1},lt.prototype.set=function(F,H){var ie=this.__data__,ce=Vt(ie,F);return ce<0?(++this.size,ie.push([F,H])):ie[ce][1]=H,this},nt.prototype.clear=function(){this.size=0,this.__data__={hash:new ft,map:new(je||lt),string:new ft}},nt.prototype.delete=function(F){var H=dt(this,F).delete(F);return this.size-=H?1:0,H},nt.prototype.get=function(F){return dt(this,F).get(F)},nt.prototype.has=function(F){return dt(this,F).has(F)},nt.prototype.set=function(F,H){var ie=dt(this,F),ce=ie.size;return ie.set(F,H),this.size+=ie.size==ce?0:1,this},zt.prototype.add=zt.prototype.push=function(F){return this.__data__.set(F,o),this},zt.prototype.has=function(F){return this.__data__.has(F)},ht.prototype.clear=function(){this.__data__=new lt,this.size=0},ht.prototype.delete=function(F){var H=this.__data__,ie=H.delete(F);return this.size=H.size,ie},ht.prototype.get=function(F){return this.__data__.get(F)},ht.prototype.has=function(F){return this.__data__.has(F)},ht.prototype.set=function(F,H){var ie=this.__data__;if(ie instanceof lt){var ce=ie.__data__;if(!je||ce.length<199)return ce.push([F,H]),this.size=++ie.size,this;ie=this.__data__=new nt(ce)}return ie.set(F,H),this.size=ie.size,this};var Gt=Oe?function(F){return F==null?[]:(F=Object(F),(function(H,ie){for(var ce=-1,Ne=H==null?0:H.length,be=0,M=[];++ce<Ne;){var z=H[ce];se=z,Be.call(F,se)&&(M[be++]=z)}var se;return M})(Oe(F)))}:function(){return[]},_t=jt;function Wt(F,H){return!!(H=H==null?c:H)&&(typeof F=="number"||j.test(F))&&F>-1&&F%1==0&&F<H}function $e(F){if(F!=null){try{return le.call(F)}catch{}try{return F+""}catch{}}return""}function yr(F,H){return F===H||F!=F&&H!=H}(Fe&&_t(new Fe(new ArrayBuffer(1)))!=P||je&&_t(new je)!=E||rt&&_t(rt.resolve())!=f||Me&&_t(new Me)!=b||hr&&_t(new hr)!=N)&&(_t=function(F){var H=jt(F),ie=H==h?F.constructor:void 0,ce=ie?$e(ie):"";if(ce)switch(ce){case en:return P;case dr:return E;case pr:return f;case Dr:return b;case Ht:return N}return H});var jr=gr((function(){return arguments})())?gr:function(F){return Kt(F)&&he.call(F,"callee")&&!Be.call(F,"callee")},Mt=Array.isArray,qt=tt||function(){return!1};function wr(F){if(!Mr(F))return!1;var H=jt(F);return H==O||H=="[object GeneratorFunction]"||H=="[object AsyncFunction]"||H=="[object Proxy]"}function He(F){return typeof F=="number"&&F>-1&&F%1==0&&F<=c}function Mr(F){var H=typeof F;return F!=null&&(H=="object"||H=="function")}function Kt(F){return F!=null&&typeof F=="object"}var It=te?(function(F){return function(H){return F(H)}})(te):function(F){return Kt(F)&&He(F.length)&&!!R[jt(F)]};function kr(F){return(H=F)!=null&&He(H.length)&&!wr(H)?(function(ie,ce){var Ne=Mt(ie),be=!Ne&&jr(ie),M=!Ne&&!be&&qt(ie),z=!Ne&&!be&&!M&&It(ie),se=Ne||be||M||z,ae=se?(function(ze,Se){for(var Xe=-1,Ve=Array(ze);++Xe<ze;)Ve[Xe]=Se(Xe);return Ve})(ie.length,String):[],ye=ae.length;for(var Ce in ie)!he.call(ie,Ce)||se&&(Ce=="length"||M&&(Ce=="offset"||Ce=="parent")||z&&(Ce=="buffer"||Ce=="byteLength"||Ce=="byteOffset")||Wt(Ce,ye))||ae.push(Ce);return ae})(F):(function(ie){if(Ne=(ce=ie)&&ce.constructor,ce!==(typeof Ne=="function"&&Ne.prototype||Q))return Ge(ie);var ce,Ne,be=[];for(var M in Object(ie))he.call(ie,M)&&M!="constructor"&&be.push(M);return be})(F);var H}l.exports=function(F,H){return Ct(F,H)}},210:function(l,u,a){var o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(u,"__esModule",{value:!0});var c,g=o(a(465)),p=o(a(307));(function(d){d.compose=function(m,A,O){m===void 0&&(m={}),A===void 0&&(A={}),typeof m!="object"&&(m={}),typeof A!="object"&&(A={});var E=g.default(A);for(var _ in O||(E=Object.keys(E).reduce((function(h,f){return E[f]!=null&&(h[f]=E[f]),h}),{})),m)m[_]!==void 0&&A[_]===void 0&&(E[_]=m[_]);return Object.keys(E).length>0?E:void 0},d.diff=function(m,A){m===void 0&&(m={}),A===void 0&&(A={}),typeof m!="object"&&(m={}),typeof A!="object"&&(A={});var O=Object.keys(m).concat(Object.keys(A)).reduce((function(E,_){return p.default(m[_],A[_])||(E[_]=A[_]===void 0?null:A[_]),E}),{});return Object.keys(O).length>0?O:void 0},d.invert=function(m,A){m===void 0&&(m={}),A===void 0&&(A={}),m=m||{};var O=Object.keys(A).reduce((function(E,_){return A[_]!==m[_]&&m[_]!==void 0&&(E[_]=A[_]),E}),{});return Object.keys(m).reduce((function(E,_){return m[_]!==A[_]&&A[_]===void 0&&(E[_]=null),E}),O)},d.transform=function(m,A,O){if(O===void 0&&(O=!1),typeof m!="object")return A;if(typeof A=="object"){if(!O)return A;var E=Object.keys(A).reduce((function(_,h){return m[h]===void 0&&(_[h]=A[h]),_}),{});return Object.keys(E).length>0?E:void 0}}})(c||(c={})),u.default=c},895:function(l,u,a){var o=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}},c=o(a(529)),g=o(a(465)),p=o(a(307)),d=o(a(210)),m=o(a(430)),A="\0",O=(function(){function E(_){Array.isArray(_)?this.ops=_:_!=null&&Array.isArray(_.ops)?this.ops=_.ops:this.ops=[]}return E.prototype.insert=function(_,h){var f={};return typeof _=="string"&&_.length===0?this:(f.insert=_,h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(f.attributes=h),this.push(f))},E.prototype.delete=function(_){return _<=0?this:this.push({delete:_})},E.prototype.retain=function(_,h){if(_<=0)return this;var f={retain:_};return h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(f.attributes=h),this.push(f)},E.prototype.push=function(_){var h=this.ops.length,f=this.ops[h-1];if(_=g.default(_),typeof f=="object"){if(typeof _.delete=="number"&&typeof f.delete=="number")return this.ops[h-1]={delete:f.delete+_.delete},this;if(typeof f.delete=="number"&&_.insert!=null&&(h-=1,typeof(f=this.ops[h-1])!="object"))return this.ops.unshift(_),this;if(p.default(_.attributes,f.attributes)){if(typeof _.insert=="string"&&typeof f.insert=="string")return this.ops[h-1]={insert:f.insert+_.insert},typeof _.attributes=="object"&&(this.ops[h-1].attributes=_.attributes),this;if(typeof _.retain=="number"&&typeof f.retain=="number")return this.ops[h-1]={retain:f.retain+_.retain},typeof _.attributes=="object"&&(this.ops[h-1].attributes=_.attributes),this}}return h===this.ops.length?this.ops.push(_):this.ops.splice(h,0,_),this},E.prototype.chop=function(){var _=this.ops[this.ops.length-1];return _&&_.retain&&!_.attributes&&this.ops.pop(),this},E.prototype.filter=function(_){return this.ops.filter(_)},E.prototype.forEach=function(_){this.ops.forEach(_)},E.prototype.map=function(_){return this.ops.map(_)},E.prototype.partition=function(_){var h=[],f=[];return this.forEach((function(v){(_(v)?h:f).push(v)})),[h,f]},E.prototype.reduce=function(_,h){return this.ops.reduce(_,h)},E.prototype.changeLength=function(){return this.reduce((function(_,h){return h.insert?_+m.default.length(h):h.delete?_-h.delete:_}),0)},E.prototype.length=function(){return this.reduce((function(_,h){return _+m.default.length(h)}),0)},E.prototype.slice=function(_,h){_===void 0&&(_=0),h===void 0&&(h=1/0);for(var f=[],v=m.default.iterator(this.ops),b=0;b<h&&v.hasNext();){var S=void 0;b<_?S=v.next(_-b):(S=v.next(h-b),f.push(S)),b+=m.default.length(S)}return new E(f)},E.prototype.compose=function(_){var h=m.default.iterator(this.ops),f=m.default.iterator(_.ops),v=[],b=f.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){for(var S=b.retain;h.peekType()==="insert"&&h.peekLength()<=S;)S-=h.peekLength(),v.push(h.next());b.retain-S>0&&f.next(b.retain-S)}for(var N=new E(v);h.hasNext()||f.hasNext();)if(f.peekType()==="insert")N.push(f.next());else if(h.peekType()==="delete")N.push(h.next());else{var C=Math.min(h.peekLength(),f.peekLength()),P=h.next(C),w=f.next(C);if(typeof w.retain=="number"){var j={};typeof P.retain=="number"?j.retain=C:j.insert=P.insert;var R=d.default.compose(P.attributes,w.attributes,typeof P.retain=="number");if(R&&(j.attributes=R),N.push(j),!f.hasNext()&&p.default(N.ops[N.ops.length-1],j)){var I=new E(h.rest());return N.concat(I).chop()}}else typeof w.delete=="number"&&typeof P.retain=="number"&&N.push(w)}return N.chop()},E.prototype.concat=function(_){var h=new E(this.ops.slice());return _.ops.length>0&&(h.push(_.ops[0]),h.ops=h.ops.concat(_.ops.slice(1))),h},E.prototype.diff=function(_,h){if(this.ops===_.ops)return new E;var f=[this,_].map((function(C){return C.map((function(P){if(P.insert!=null)return typeof P.insert=="string"?P.insert:A;throw new Error("diff() called "+(C===_?"on":"with")+" non-document")})).join("")})),v=new E,b=c.default(f[0],f[1],h),S=m.default.iterator(this.ops),N=m.default.iterator(_.ops);return b.forEach((function(C){for(var P=C[1].length;P>0;){var w=0;switch(C[0]){case c.default.INSERT:w=Math.min(N.peekLength(),P),v.push(N.next(w));break;case c.default.DELETE:w=Math.min(P,S.peekLength()),S.next(w),v.delete(w);break;case c.default.EQUAL:w=Math.min(S.peekLength(),N.peekLength(),P);var j=S.next(w),R=N.next(w);p.default(j.insert,R.insert)?v.retain(w,d.default.diff(j.attributes,R.attributes)):v.push(R).delete(w)}P-=w}})),v.chop()},E.prototype.eachLine=function(_,h){h===void 0&&(h=`
`);for(var f=m.default.iterator(this.ops),v=new E,b=0;f.hasNext();){if(f.peekType()!=="insert")return;var S=f.peek(),N=m.default.length(S)-f.peekLength(),C=typeof S.insert=="string"?S.insert.indexOf(h,N)-N:-1;if(C<0)v.push(f.next());else if(C>0)v.push(f.next(C));else{if(_(v,f.next(1).attributes||{},b)===!1)return;b+=1,v=new E}}v.length()>0&&_(v,{},b)},E.prototype.invert=function(_){var h=new E;return this.reduce((function(f,v){if(v.insert)h.delete(m.default.length(v));else{if(v.retain&&v.attributes==null)return h.retain(v.retain),f+v.retain;if(v.delete||v.retain&&v.attributes){var b=v.delete||v.retain;return _.slice(f,f+b).forEach((function(S){v.delete?h.push(S):v.retain&&v.attributes&&h.retain(m.default.length(S),d.default.invert(v.attributes,S.attributes))})),f+b}}return f}),0),h.chop()},E.prototype.transform=function(_,h){if(h===void 0&&(h=!1),h=!!h,typeof _=="number")return this.transformPosition(_,h);for(var f=_,v=m.default.iterator(this.ops),b=m.default.iterator(f.ops),S=new E;v.hasNext()||b.hasNext();)if(v.peekType()!=="insert"||!h&&b.peekType()==="insert")if(b.peekType()==="insert")S.push(b.next());else{var N=Math.min(v.peekLength(),b.peekLength()),C=v.next(N),P=b.next(N);if(C.delete)continue;P.delete?S.push(P):S.retain(N,d.default.transform(C.attributes,P.attributes,h))}else S.retain(m.default.length(v.next()));return S.chop()},E.prototype.transformPosition=function(_,h){h===void 0&&(h=!1),h=!!h;for(var f=m.default.iterator(this.ops),v=0;f.hasNext()&&v<=_;){var b=f.peekLength(),S=f.peekType();f.next(),S!=="delete"?(S==="insert"&&(v<_||!h)&&(_+=b),v+=b):_-=Math.min(b,_-v)}return _},E.Op=m.default,E.AttributeMap=d.default,E})();l.exports=O},977:function(l,u,a){var o=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(u,"__esModule",{value:!0});var c=o(a(430)),g=(function(){function p(d){this.ops=d,this.index=0,this.offset=0}return p.prototype.hasNext=function(){return this.peekLength()<1/0},p.prototype.next=function(d){d||(d=1/0);var m=this.ops[this.index];if(m){var A=this.offset,O=c.default.length(m);if(d>=O-A?(d=O-A,this.index+=1,this.offset=0):this.offset+=d,typeof m.delete=="number")return{delete:d};var E={};return m.attributes&&(E.attributes=m.attributes),typeof m.retain=="number"?E.retain=d:typeof m.insert=="string"?E.insert=m.insert.substr(A,d):E.insert=m.insert,E}return{retain:1/0}},p.prototype.peek=function(){return this.ops[this.index]},p.prototype.peekLength=function(){return this.ops[this.index]?c.default.length(this.ops[this.index])-this.offset:1/0},p.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},p.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,m=this.index,A=this.next(),O=this.ops.slice(this.index);return this.offset=d,this.index=m,[A].concat(O)}return[]},p})();u.default=g},430:function(l,u,a){var o=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(u,"__esModule",{value:!0});var c,g=o(a(977));(function(p){p.iterator=function(d){return new g.default(d)},p.length=function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}})(c||(c={})),u.default=c},165:function(l,u,a){var o,c;(c=typeof(o=function(){var g,p={};function d(O,E,_){var h=O.getClientRects();if(h.length===2){var f=O.getBoundingClientRect();return h[E][_]<f[_]}return!1}function m(O){if(!O||screen.deviceXDPI===screen.logicalXDPI)return O;if("length"in O)return Array.prototype.map.call(O,m);var E=screen.deviceXDPI/screen.logicalXDPI;return{top:O.top/E,bottom:O.bottom/E,left:O.left/E,right:O.right/E,width:O.width/E,height:O.height/E}}function A(O,E){var _,h=0,f=1024;if(f>=E.length)return Array.prototype.push.apply(O,E);for(;h<E.length;)_=Array.prototype.push.apply(O,Array.prototype.slice.call(E,h,h+f)),h+=f;return _}return p.isBroken=function(){if(g===void 0){var O=document.createElement("p"),E=document.createElement("span"),_=document.createTextNode("aa"),h=document.createTextNode("aa"),f=document.createElement("img");f.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");var v=document.createRange();if(g={},O.appendChild(_),O.appendChild(E),E.appendChild(f),E.appendChild(h),document.body.appendChild(O),v.setStart(_,1),v.setEnd(E,0),g.getClientRects=g.getBoundingClientRect=v.getClientRects().length>1,g.getClientRects||(v.setEnd(h,1),g.getClientRects=g.getBoundingClientRect=v.getClientRects().length===2),!g.getBoundingClientRect){v.setEnd(v.startContainer,v.startOffset);var b=v.getBoundingClientRect();g.getBoundingClientRect=b.top===0&&b.left===0}if(document.body.removeChild(O),!g.getBoundingClientRect){var S=document.createElement("p");S.style.width="0px",S.style.fontSize="20px",S.style.whiteSpace="normal",S.style.wordBreak="normal";var N=document.createTextNode("m mm");S.appendChild(N),document.body.appendChild(S),v.setStart(N,1),v.setEnd(N,2),d(v,1,"left")?g.getBoundingClientRect=!0:(v.setStart(N,1),v.setEnd(N,3),d(v,0,"top")&&(g.getBoundingClientRect=!0)),document.body.removeChild(S)}var C=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();g.ieZoom=!!C&&C<=10}return g},p.getClientRects=function(O){var E=this.isBroken();if(E.ieZoom)return m(O.getClientRects());if(!E.getClientRects)return O.getClientRects();var _=[],h=[],f=O.endContainer,v=O.endOffset,b=document.createRange();function S(N){for(var C=0;N=N.previousSibling;)C++;return C}for(;f!==O.commonAncestorContainer;)b.setStart(f,0),b.setEnd(f,v),A(h,b.getClientRects()),v=S(f),f=f.parentNode;return(b=O.cloneRange()).setEnd(f,v),A(_,b.getClientRects()),A(_,h),_},p.getBoundingClientRect=function(O){var E=this.getClientRects(O);if(E.length===0)return null;var _,h=O.getBoundingClientRect(),f=this.isBroken();if(f.ieZoom)return m(h);if(!f.getBoundingClientRect)return h;if(h.width===0&&h.height===0)return E[0];for(var v=0,b=E.length;v<b;v++){var S=E[v];_?(_.left=Math.min(_.left,S.left),_.top=Math.min(_.top,S.top),_.right=Math.max(_.right,S.right),_.bottom=Math.max(_.bottom,S.bottom)):_={left:S.left,top:S.top,right:S.right,bottom:S.bottom}}return _&&(_.width=_.right-_.left,_.height=_.bottom-_.top),_},p})=="function"?o.call(u,a,u,l):o)===void 0||(l.exports=c)},33:(l,u,a)=>{a.r(u),a.d(u,{default:()=>R});var o=(function(){if(typeof Map!="undefined")return Map;function I(D,q){var $=-1;return D.some((function(U,K){return U[0]===q&&($=K,!0)})),$}return(function(){function D(){this.__entries__=[]}return Object.defineProperty(D.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),D.prototype.get=function(q){var $=I(this.__entries__,q),U=this.__entries__[$];return U&&U[1]},D.prototype.set=function(q,$){var U=I(this.__entries__,q);~U?this.__entries__[U][1]=$:this.__entries__.push([q,$])},D.prototype.delete=function(q){var $=this.__entries__,U=I($,q);~U&&$.splice(U,1)},D.prototype.has=function(q){return!!~I(this.__entries__,q)},D.prototype.clear=function(){this.__entries__.splice(0)},D.prototype.forEach=function(q,$){$===void 0&&($=null);for(var U=0,K=this.__entries__;U<K.length;U++){var V=K[U];q.call($,V[1],V[0])}},D})()})(),c=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,g=a.g!==void 0&&a.g.Math===Math?a.g:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")(),p=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(g):function(I){return setTimeout((function(){return I(Date.now())}),1e3/60)},d=["top","right","bottom","left","width","height","size","weight"],m=typeof MutationObserver!="undefined",A=(function(){function I(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=(function(D,q){var $=!1,U=!1,K=0;function V(){$&&($=!1,D()),U&&te()}function ne(){p(V)}function te(){var L=Date.now();if($){if(L-K<2)return;U=!0}else $=!0,U=!1,setTimeout(ne,20);K=L}return te})(this.refresh.bind(this))}return I.prototype.addObserver=function(D){~this.observers_.indexOf(D)||this.observers_.push(D),this.connected_||this.connect_()},I.prototype.removeObserver=function(D){var q=this.observers_,$=q.indexOf(D);~$&&q.splice($,1),!q.length&&this.connected_&&this.disconnect_()},I.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},I.prototype.updateObservers_=function(){var D=this.observers_.filter((function(q){return q.gatherActive(),q.hasActive()}));return D.forEach((function(q){return q.broadcastActive()})),D.length>0},I.prototype.connect_=function(){c&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),m?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},I.prototype.disconnect_=function(){c&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},I.prototype.onTransitionEnd_=function(D){var q=D.propertyName,$=q===void 0?"":q;d.some((function(U){return!!~$.indexOf(U)}))&&this.refresh()},I.getInstance=function(){return this.instance_||(this.instance_=new I),this.instance_},I.instance_=null,I})(),O=function(I,D){for(var q=0,$=Object.keys(D);q<$.length;q++){var U=$[q];Object.defineProperty(I,U,{value:D[U],enumerable:!1,writable:!1,configurable:!0})}return I},E=function(I){return I&&I.ownerDocument&&I.ownerDocument.defaultView||g},_=S(0,0,0,0);function h(I){return parseFloat(I)||0}function f(I){for(var D=[],q=1;q<arguments.length;q++)D[q-1]=arguments[q];return D.reduce((function($,U){return $+h(I["border-"+U+"-width"])}),0)}var v=typeof SVGGraphicsElement!="undefined"?function(I){return I instanceof E(I).SVGGraphicsElement}:function(I){return I instanceof E(I).SVGElement&&typeof I.getBBox=="function"};function b(I){return c?v(I)?(function(D){var q=D.getBBox();return S(0,0,q.width,q.height)})(I):(function(D){var q=D.clientWidth,$=D.clientHeight;if(!q&&!$)return _;var U=E(D).getComputedStyle(D),K=(function(Y){for(var re={},X=0,ee=["top","right","bottom","left"];X<ee.length;X++){var J=ee[X],Q=Y["padding-"+J];re[J]=h(Q)}return re})(U),V=K.left+K.right,ne=K.top+K.bottom,te=h(U.width),L=h(U.height);if(U.boxSizing==="border-box"&&(Math.round(te+V)!==q&&(te-=f(U,"left","right")+V),Math.round(L+ne)!==$&&(L-=f(U,"top","bottom")+ne)),!(function(Y){return Y===E(Y).document.documentElement})(D)){var B=Math.round(te+V)-q,k=Math.round(L+ne)-$;Math.abs(B)!==1&&(te-=B),Math.abs(k)!==1&&(L-=k)}return S(K.left,K.top,te,L)})(I):_}function S(I,D,q,$){return{x:I,y:D,width:q,height:$}}var N=(function(){function I(D){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=S(0,0,0,0),this.target=D}return I.prototype.isActive=function(){var D=b(this.target);return this.contentRect_=D,D.width!==this.broadcastWidth||D.height!==this.broadcastHeight},I.prototype.broadcastRect=function(){var D=this.contentRect_;return this.broadcastWidth=D.width,this.broadcastHeight=D.height,D},I})(),C=function(I,D){var q,$,U,K,V,ne,te,L=($=(q=D).x,U=q.y,K=q.width,V=q.height,ne=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,te=Object.create(ne.prototype),O(te,{x:$,y:U,width:K,height:V,top:U,right:$+K,bottom:V+U,left:$}),te);O(this,{target:I,contentRect:L})},P=(function(){function I(D,q,$){if(this.activeObservations_=[],this.observations_=new o,typeof D!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=D,this.controller_=q,this.callbackCtx_=$}return I.prototype.observe=function(D){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element!="undefined"&&Element instanceof Object){if(!(D instanceof E(D).Element))throw new TypeError('parameter 1 is not of type "Element".');var q=this.observations_;q.has(D)||(q.set(D,new N(D)),this.controller_.addObserver(this),this.controller_.refresh())}},I.prototype.unobserve=function(D){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element!="undefined"&&Element instanceof Object){if(!(D instanceof E(D).Element))throw new TypeError('parameter 1 is not of type "Element".');var q=this.observations_;q.has(D)&&(q.delete(D),q.size||this.controller_.removeObserver(this))}},I.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},I.prototype.gatherActive=function(){var D=this;this.clearActive(),this.observations_.forEach((function(q){q.isActive()&&D.activeObservations_.push(q)}))},I.prototype.broadcastActive=function(){if(this.hasActive()){var D=this.callbackCtx_,q=this.activeObservations_.map((function($){return new C($.target,$.broadcastRect())}));this.callback_.call(D,q,D),this.clearActive()}},I.prototype.clearActive=function(){this.activeObservations_.splice(0)},I.prototype.hasActive=function(){return this.activeObservations_.length>0},I})(),w=typeof WeakMap!="undefined"?new WeakMap:new o,j=function I(D){if(!(this instanceof I))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var q=A.getInstance(),$=new P(D,q,this);w.set(this,$)};["observe","unobserve","disconnect"].forEach((function(I){j.prototype[I]=function(){var D;return(D=w.get(this))[I].apply(D,arguments)}}));const R=g.ResizeObserver!==void 0?g.ResizeObserver:j},413:(l,u,a)=>{a.r(u),a.d(u,{default:()=>S});var o=a(379),c=a.n(o),g=a(795),p=a.n(g),d=a(569),m=a.n(d),A=a(565),O=a.n(A),E=a(216),_=a.n(E),h=a(589),f=a.n(h),v=a(582),b={};b.styleTagTransform=f(),b.setAttributes=O(),b.insert=m().bind(null,"head"),b.domAPI=p(),b.insertStyleElement=_(),c()(v.Z,b);const S=v.Z&&v.Z.locals?v.Z.locals:void 0},379:l=>{var u=[];function a(g){for(var p=-1,d=0;d<u.length;d++)if(u[d].identifier===g){p=d;break}return p}function o(g,p){for(var d={},m=[],A=0;A<g.length;A++){var O=g[A],E=p.base?O[0]+p.base:O[0],_=d[E]||0,h="".concat(E," ").concat(_);d[E]=_+1;var f=a(h),v={css:O[1],media:O[2],sourceMap:O[3],supports:O[4],layer:O[5]};if(f!==-1)u[f].references++,u[f].updater(v);else{var b=c(v,p);p.byIndex=A,u.splice(A,0,{identifier:h,updater:b,references:1})}m.push(h)}return m}function c(g,p){var d=p.domAPI(p);return d.update(g),function(m){if(m){if(m.css===g.css&&m.media===g.media&&m.sourceMap===g.sourceMap&&m.supports===g.supports&&m.layer===g.layer)return;d.update(g=m)}else d.remove()}}l.exports=function(g,p){var d=o(g=g||[],p=p||{});return function(m){m=m||[];for(var A=0;A<d.length;A++){var O=a(d[A]);u[O].references--}for(var E=o(m,p),_=0;_<d.length;_++){var h=a(d[_]);u[h].references===0&&(u[h].updater(),u.splice(h,1))}d=E}}},569:l=>{var u={};l.exports=function(a,o){var c=(function(g){if(u[g]===void 0){var p=document.querySelector(g);if(window.HTMLIFrameElement&&p instanceof window.HTMLIFrameElement)try{p=p.contentDocument.head}catch{p=null}u[g]=p}return u[g]})(a);if(!c)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");c.appendChild(o)}},216:l=>{l.exports=function(u){var a=document.createElement("style");return u.setAttributes(a,u.attributes),u.insert(a,u.options),a}},565:(l,u,a)=>{l.exports=function(o){var c=a.nc;c&&o.setAttribute("nonce",c)}},795:l=>{l.exports=function(u){var a=u.insertStyleElement(u);return{update:function(o){(function(c,g,p){var d="";p.supports&&(d+="@supports (".concat(p.supports,") {")),p.media&&(d+="@media ".concat(p.media," {"));var m=p.layer!==void 0;m&&(d+="@layer".concat(p.layer.length>0?" ".concat(p.layer):""," {")),d+=p.css,m&&(d+="}"),p.media&&(d+="}"),p.supports&&(d+="}");var A=p.sourceMap;A&&typeof btoa!="undefined"&&(d+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(A))))," */")),g.styleTagTransform(d,c,g.options)})(a,u,o)},remove:function(){(function(o){if(o.parentNode===null)return!1;o.parentNode.removeChild(o)})(a)}}}},589:l=>{l.exports=function(u,a){if(a.styleSheet)a.styleSheet.cssText=u;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(u))}}},607:function(l,u,a){var o=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(u,"__esModule",{value:!0}),u.Cursor=u.default=void 0;var c=o(a(678));u.default=c.default;var g=o(a(353));u.Cursor=g.default,a(413)},353:(l,u)=>{Object.defineProperty(u,"__esModule",{value:!0});var a=(function(){function o(c,g,p){this.id=c,this.name=g,this.color=p,this.toggleNearCursor=this.toggleNearCursor.bind(this),this._toggleOpenedCursor=this._toggleOpenedCursor.bind(this),this._setHoverState=this._setHoverState.bind(this)}return o.prototype.build=function(c){var g=document.createElement(o.CONTAINER_ELEMENT_TAG);g.classList.add(o.CURSOR_CLASS),g.id="ql-cursor-".concat(this.id),g.innerHTML=c.template;var p=g.getElementsByClassName(o.SELECTION_CLASS)[0],d=g.getElementsByClassName(o.CARET_CONTAINER_CLASS)[0],m=d.getElementsByClassName(o.CARET_CLASS)[0],A=g.getElementsByClassName(o.FLAG_CLASS)[0];return A.style.backgroundColor=this.color,m.style.backgroundColor=this.color,g.getElementsByClassName(o.NAME_CLASS)[0].textContent=this.name,this._hideDelay="".concat(c.hideDelayMs,"ms"),this._hideSpeedMs=c.hideSpeedMs,this._positionFlag=c.positionFlag,A.style.transitionDelay=this._hideDelay,A.style.transitionDuration="".concat(this._hideSpeedMs,"ms"),this._el=g,this._selectionEl=p,this._caretEl=d,this._flagEl=A,d.addEventListener("mouseover",this._setHoverState,{passive:!0}),this._el},o.prototype.show=function(){this._el.classList.remove(o.HIDDEN_CLASS)},o.prototype.hide=function(){this._el.classList.add(o.HIDDEN_CLASS)},o.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},o.prototype.toggleNearCursor=function(c,g){var p=this._getCoordinates(),d=p.left,m=p.right,A=p.top,O=p.bottom,E=c>=d&&c<=m&&g>=A&&g<=O;return this._caretEl.classList.toggle(o.CONTAINER_HOVER_CLASS,E),E},o.prototype.toggleFlag=function(c){var g=this;this._caretEl.classList.toggle(o.CONTAINER_HOVER_CLASS,c)||(this._flagEl.classList.add(o.NO_DELAY_CLASS),setTimeout((function(){return g._flagEl.classList.remove(o.NO_DELAY_CLASS)}),this._hideSpeedMs))},o.prototype.updateCaret=function(c,g){this._caretEl.style.top="".concat(c.top,"px"),this._caretEl.style.left="".concat(c.left,"px"),this._caretEl.style.height="".concat(c.height,"px"),this._positionFlag?this._positionFlag(this._flagEl,c,g):this._updateCaretFlag(c,g)},o.prototype.updateSelection=function(c,g){var p=this;this._clearSelection(),c=c||[],c=Array.from(c),c=this._sanitize(c),(c=this._sortByDomPosition(c)).forEach((function(d){return p._addSelection(d,g)}))},o.prototype._setHoverState=function(){document.addEventListener("mousemove",this._toggleOpenedCursor,{passive:!0})},o.prototype._toggleOpenedCursor=function(c){var g=this.toggleNearCursor(c.clientX,c.clientY);this._caretEl.classList.toggle(o.CONTAINER_NO_POINTER_CLASS,g),g||document.removeEventListener("mousemove",this._toggleOpenedCursor)},o.prototype._getCoordinates=function(){return this._caretEl.getBoundingClientRect()},o.prototype._updateCaretFlag=function(c,g){this._flagEl.style.width="";var p=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(o.FLAG_FLIPPED_CLASS),c.left>g.width-p.width&&this._flagEl.classList.add(o.FLAG_FLIPPED_CLASS),this._flagEl.style.left="".concat(c.left,"px"),this._flagEl.style.top="".concat(c.top,"px"),this._flagEl.style.width="".concat(Math.ceil(p.width),"px")},o.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},o.prototype._addSelection=function(c,g){var p=this._selectionBlock(c,g);this._selectionEl.appendChild(p)},o.prototype._selectionBlock=function(c,g){var p=document.createElement(o.SELECTION_ELEMENT_TAG);return p.classList.add(o.SELECTION_BLOCK_CLASS),p.style.top="".concat(c.top-g.top,"px"),p.style.left="".concat(c.left-g.left,"px"),p.style.width="".concat(c.width,"px"),p.style.height="".concat(c.height,"px"),p.style.backgroundColor=this.color,p.style.opacity="0.3",p},o.prototype._sortByDomPosition=function(c){return c.sort((function(g,p){return g.top===p.top?g.left-p.left:g.top-p.top}))},o.prototype._sanitize=function(c){var g=this,p=new Set;return c.filter((function(d){if(!d.width||!d.height)return!1;var m=g._serialize(d);return!p.has(m)&&(p.add(m),!0)}))},o.prototype._serialize=function(c){return["top:".concat(c.top),"right:".concat(c.right),"bottom:".concat(c.bottom),"left:".concat(c.left)].join(";")},o.CONTAINER_ELEMENT_TAG="SPAN",o.SELECTION_ELEMENT_TAG="SPAN",o.CURSOR_CLASS="ql-cursor",o.SELECTION_CLASS="ql-cursor-selections",o.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",o.CARET_CLASS="ql-cursor-caret",o.CARET_CONTAINER_CLASS="ql-cursor-caret-container",o.CONTAINER_HOVER_CLASS="hover",o.CONTAINER_NO_POINTER_CLASS="no-pointer",o.FLAG_CLASS="ql-cursor-flag",o.FLAG_FLIPPED_CLASS="flag-flipped",o.NAME_CLASS="ql-cursor-name",o.HIDDEN_CLASS="hidden",o.NO_DELAY_CLASS="no-delay",o})();u.default=a},678:function(l,u,a){var o=this&&this.__createBinding||(Object.create?function(h,f,v,b){b===void 0&&(b=v);var S=Object.getOwnPropertyDescriptor(f,v);S&&!("get"in S?!f.__esModule:S.writable||S.configurable)||(S={enumerable:!0,get:function(){return f[v]}}),Object.defineProperty(h,b,S)}:function(h,f,v,b){b===void 0&&(b=v),h[b]=f[v]}),c=this&&this.__setModuleDefault||(Object.create?function(h,f){Object.defineProperty(h,"default",{enumerable:!0,value:f})}:function(h,f){h.default=f}),g=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var f={};if(h!=null)for(var v in h)v!=="default"&&Object.prototype.hasOwnProperty.call(h,v)&&o(f,h,v);return c(f,h),f},p=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(u,"__esModule",{value:!0});var d=p(a(353)),m=g(a(165)),A=p(a(338)),O=p(a(33)),E=a(895),_=(function(){function h(f,v){v===void 0&&(v={}),this._cursors={},this._isObserving=!1,this._handleCursorTouch=this._handleCursorTouch.bind(this),this.quill=f,this.options=this._setDefaults(v),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return h.prototype.createCursor=function(f,v,b){var S=this._cursors[f];if(!S){S=new d.default(f,v,b),this._cursors[f]=S;var N=S.build(this.options);this._container.appendChild(N)}return S},h.prototype.moveCursor=function(f,v){var b=this._cursors[f];b&&(b.range=v,this._updateCursor(b))},h.prototype.removeCursor=function(f){var v=this._cursors[f];v&&(v.remove(),delete this._cursors[f])},h.prototype.update=function(){var f=this;this.cursors().forEach((function(v){return f._updateCursor(v)}))},h.prototype.clearCursors=function(){var f=this;this.cursors().forEach((function(v){return f.removeCursor(v.id)}))},h.prototype.toggleFlag=function(f,v){var b=this._cursors[f];b&&b.toggleFlag(v)},h.prototype.cursors=function(){var f=this;return Object.keys(this._cursors).map((function(v){return f._cursors[v]}))},h.prototype._registerSelectionChangeListeners=function(){var f=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,(function(v){f._currentSelection=v}))},h.prototype._registerTextChangeListener=function(){var f=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,(function(v){return f._handleTextChange(v)}))},h.prototype._registerDomListeners=function(){var f=this,v=this.quill.container.getElementsByClassName("ql-editor")[0];v.addEventListener("scroll",(function(){return f.update()}),{passive:!0}),v.addEventListener("touchstart",this._handleCursorTouch,{passive:!0})},h.prototype._handleCursorTouch=function(f){var v=this;this.cursors().forEach((function(b){b.toggleNearCursor(f.pageX,f.pageY),setTimeout((function(){return b.toggleFlag(!1)}),v.options.hideDelayMs)}))},h.prototype._registerResizeObserver=function(){var f=this;if(!this._isObserving){var v=this.quill.container.getElementsByClassName("ql-editor")[0],b=new O.default((function(S){if(!S[0].target.isConnected)return b.disconnect(),void(f._isObserving=!1);f.update()}));b.observe(v),this._isObserving=!0}},h.prototype._updateCursor=function(f){if(this._registerResizeObserver(),!f.range)return f.hide();var v=this._indexWithinQuillBounds(f.range.index),b=this._indexWithinQuillBounds(f.range.index+f.range.length),S=this.quill.getLeaf(v),N=this.quill.getLeaf(b);if(!this._leafIsValid(S)||!this._leafIsValid(N))return f.hide();f.show();var C=this._boundsContainer.getBoundingClientRect(),P=this.quill.getBounds(b);f.updateCaret(P,C);var w=this._lineRanges(f,S,N).reduce((function(j,R){return j.concat(Array.from(m.getClientRects(R)))}),[]);f.updateSelection(w,C)},h.prototype._indexWithinQuillBounds=function(f){var v=this.quill.getLength(),b=v?v-1:0;return f=Math.max(f,0),Math.min(f,b)},h.prototype._leafIsValid=function(f){return f&&f[0]&&f[0].domNode&&f[1]>=0},h.prototype._handleTextChange=function(f){var v=this;window.setTimeout((function(){v.options.transformOnTextChange&&v._transformCursors(f),v.options.selectionChangeSource&&(v._emitSelection(),v.update())}))},h.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},h.prototype._setDefaults=function(f){return(f=Object.assign({},f)).template||(f.template=h.DEFAULTS.template),f.containerClass||(f.containerClass=h.DEFAULTS.containerClass),f.selectionChangeSource!==null&&(f.selectionChangeSource||(f.selectionChangeSource=h.DEFAULTS.selectionChangeSource)),f.hideDelayMs=Number.isInteger(f.hideDelayMs)?f.hideDelayMs:h.DEFAULTS.hideDelayMs,f.hideSpeedMs=Number.isInteger(f.hideSpeedMs)?f.hideSpeedMs:h.DEFAULTS.hideSpeedMs,f.transformOnTextChange=!!f.transformOnTextChange,f},h.prototype._lineRanges=function(f,v,b){var S=this.quill.getLines(f.range);return S.reduce((function(N,C,P){if(!C.children){var w=document.createRange();return w.selectNode(C.domNode),N.concat(w)}var j=P===0?v:C.path(0).pop(),R=j[0],I=j[1],D=P===S.length-1?b:C.path(C.length()-1).pop(),q=D[0],$=D[1],U=document.createRange();return R.domNode.nodeType===Node.TEXT_NODE?U.setStart(R.domNode,I):U.setStartBefore(R.domNode),q.domNode.nodeType===Node.TEXT_NODE?U.setEnd(q.domNode,$):U.setEndAfter(q.domNode),N.concat(U)}),[])},h.prototype._transformCursors=function(f){var v=this;f=new E(f),this.cursors().filter((function(b){return b.range})).forEach((function(b){b.range.index=f.transformPosition(b.range.index),v._updateCursor(b)}))},h.DEFAULTS={template:A.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},h})();u.default=_},338:function(l,u,a){var o=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(u,"__esModule",{value:!0});var c=o(a(353)),g=`
  <span class="`.concat(c.default.SELECTION_CLASS,`"></span>
  <span class="`).concat(c.default.CARET_CONTAINER_CLASS,`">
    <span class="`).concat(c.default.CARET_CLASS,`"></span>
  </span>
  <div class="`).concat(c.default.FLAG_CLASS,`">
    <small class="`).concat(c.default.NAME_CLASS,`"></small>
  </div>
`);u.default=g}},n={};function i(l){var u=n[l];if(u!==void 0)return u.exports;var a=n[l]={id:l,loaded:!1,exports:{}};return t[l].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.n=l=>{var u=l&&l.__esModule?()=>l.default:()=>l;return i.d(u,{a:u}),u},i.d=(l,u)=>{for(var a in u)i.o(u,a)&&!i.o(l,a)&&Object.defineProperty(l,a,{enumerable:!0,get:u[a]})},i.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),i.o=(l,u)=>Object.prototype.hasOwnProperty.call(l,u),i.r=l=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},i.nmd=l=>(l.paths=[],l.children||(l.children=[]),l),i.nc=void 0;var s=i(607);return s.default})()))})(io)),io.exports}var K1=W1();const Y1=vi(K1);var Ur={},Vi={},Gi={exports:{}},Wu;function Hh(){if(Wu)return Gi.exports;Wu=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(v,b,S){return Function.prototype.apply.call(v,b,S)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:t=function(v){return Object.getOwnPropertyNames(v)};function n(f){console&&console.warn&&console.warn(f)}var i=Number.isNaN||function(v){return v!==v};function s(){s.init.call(this)}Gi.exports=s,Gi.exports.once=E,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(f){if(typeof f!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof f)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(f){if(typeof f!="number"||f<0||i(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");l=f}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(v){if(typeof v!="number"||v<0||i(v))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+v+".");return this._maxListeners=v,this};function a(f){return f._maxListeners===void 0?s.defaultMaxListeners:f._maxListeners}s.prototype.getMaxListeners=function(){return a(this)},s.prototype.emit=function(v){for(var b=[],S=1;S<arguments.length;S++)b.push(arguments[S]);var N=v==="error",C=this._events;if(C!==void 0)N=N&&C.error===void 0;else if(!N)return!1;if(N){var P;if(b.length>0&&(P=b[0]),P instanceof Error)throw P;var w=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw w.context=P,w}var j=C[v];if(j===void 0)return!1;if(typeof j=="function")e(j,this,b);else for(var R=j.length,I=m(j,R),S=0;S<R;++S)e(I[S],this,b);return!0};function o(f,v,b,S){var N,C,P;if(u(b),C=f._events,C===void 0?(C=f._events=Object.create(null),f._eventsCount=0):(C.newListener!==void 0&&(f.emit("newListener",v,b.listener?b.listener:b),C=f._events),P=C[v]),P===void 0)P=C[v]=b,++f._eventsCount;else if(typeof P=="function"?P=C[v]=S?[b,P]:[P,b]:S?P.unshift(b):P.push(b),N=a(f),N>0&&P.length>N&&!P.warned){P.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=f,w.type=v,w.count=P.length,n(w)}return f}s.prototype.addListener=function(v,b){return o(this,v,b,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(v,b){return o(this,v,b,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(f,v,b){var S={fired:!1,wrapFn:void 0,target:f,type:v,listener:b},N=c.bind(S);return N.listener=b,S.wrapFn=N,N}s.prototype.once=function(v,b){return u(b),this.on(v,g(this,v,b)),this},s.prototype.prependOnceListener=function(v,b){return u(b),this.prependListener(v,g(this,v,b)),this},s.prototype.removeListener=function(v,b){var S,N,C,P,w;if(u(b),N=this._events,N===void 0)return this;if(S=N[v],S===void 0)return this;if(S===b||S.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete N[v],N.removeListener&&this.emit("removeListener",v,S.listener||b));else if(typeof S!="function"){for(C=-1,P=S.length-1;P>=0;P--)if(S[P]===b||S[P].listener===b){w=S[P].listener,C=P;break}if(C<0)return this;C===0?S.shift():A(S,C),S.length===1&&(N[v]=S[0]),N.removeListener!==void 0&&this.emit("removeListener",v,w||b)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(v){var b,S,N;if(S=this._events,S===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[v]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete S[v]),this;if(arguments.length===0){var C=Object.keys(S),P;for(N=0;N<C.length;++N)P=C[N],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=S[v],typeof b=="function")this.removeListener(v,b);else if(b!==void 0)for(N=b.length-1;N>=0;N--)this.removeListener(v,b[N]);return this};function p(f,v,b){var S=f._events;if(S===void 0)return[];var N=S[v];return N===void 0?[]:typeof N=="function"?b?[N.listener||N]:[N]:b?O(N):m(N,N.length)}s.prototype.listeners=function(v){return p(this,v,!0)},s.prototype.rawListeners=function(v){return p(this,v,!1)},s.listenerCount=function(f,v){return typeof f.listenerCount=="function"?f.listenerCount(v):d.call(f,v)},s.prototype.listenerCount=d;function d(f){var v=this._events;if(v!==void 0){var b=v[f];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function m(f,v){for(var b=new Array(v),S=0;S<v;++S)b[S]=f[S];return b}function A(f,v){for(;v+1<f.length;v++)f[v]=f[v+1];f.pop()}function O(f){for(var v=new Array(f.length),b=0;b<v.length;++b)v[b]=f[b].listener||f[b];return v}function E(f,v){return new Promise(function(b,S){function N(P){f.removeListener(v,C),S(P)}function C(){typeof f.removeListener=="function"&&f.removeListener("error",N),b([].slice.call(arguments))}h(f,v,C,{once:!0}),v!=="error"&&_(f,N,{once:!0})})}function _(f,v,b){typeof f.on=="function"&&h(f,"error",v,b)}function h(f,v,b,S){if(typeof f.on=="function")S.once?f.once(v,b):f.on(v,b);else if(typeof f.addEventListener=="function")f.addEventListener(v,function N(C){S.once&&f.removeEventListener(v,N),b(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof f)}return Gi.exports}var Ku;function Bn(){if(Ku)return Vi;Ku=1;var r=Hh().EventEmitter;Vi.EventEmitter=r,Vi.mixin=e;function e(t){for(var n in r.prototype)t.prototype[n]=r.prototype[n]}return Vi}var so,Yu;function Z1(){if(Yu)return so;Yu=1;var r=["info","warn","error"];function e(){var t=Object.create(null);r.forEach(function(n){t[n]=console[n].bind(console)}),this.setMethods(t)}return so=e,e.prototype.setMethods=function(t){t=t||{};var n=this;r.forEach(function(i){typeof t[i]=="function"&&(n[i]=t[i])})},so}var oo,Zu;function Nl(){if(Zu)return oo;Zu=1;var r=Z1(),e=new r;return oo=e,oo}var ao,Xu;function Ei(){if(Xu)return ao;Xu=1;function r(e,t){this.code=e,this.message=t||"",Error.captureStackTrace?Error.captureStackTrace(this,r):this.stack=new Error().stack}return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r.prototype.name="ShareDBError",r.CODES={ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT:"ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT",ERR_APPLY_SNAPSHOT_NOT_PROVIDED:"ERR_APPLY_SNAPSHOT_NOT_PROVIDED",ERR_FIXUP_IS_ONLY_VALID_ON_APPLY:"ERR_FIXUP_IS_ONLY_VALID_ON_APPLY",ERR_CANNOT_FIXUP_DELETION:"ERR_CANNOT_FIXUP_DELETION",ERR_CLIENT_ID_BADLY_FORMED:"ERR_CLIENT_ID_BADLY_FORMED",ERR_CANNOT_PING_OFFLINE:"ERR_CANNOT_PING_OFFLINE",ERR_CONNECTION_SEQ_INTEGER_OVERFLOW:"ERR_CONNECTION_SEQ_INTEGER_OVERFLOW",ERR_CONNECTION_STATE_TRANSITION_INVALID:"ERR_CONNECTION_STATE_TRANSITION_INVALID",ERR_DATABASE_ADAPTER_NOT_FOUND:"ERR_DATABASE_ADAPTER_NOT_FOUND",ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE:"ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE",ERR_DATABASE_METHOD_NOT_IMPLEMENTED:"ERR_DATABASE_METHOD_NOT_IMPLEMENTED",ERR_DEFAULT_TYPE_MISMATCH:"ERR_DEFAULT_TYPE_MISMATCH",ERR_DOC_MISSING_VERSION:"ERR_DOC_MISSING_VERSION",ERR_DOC_ALREADY_CREATED:"ERR_DOC_ALREADY_CREATED",ERR_DOC_DOES_NOT_EXIST:"ERR_DOC_DOES_NOT_EXIST",ERR_DOC_TYPE_NOT_RECOGNIZED:"ERR_DOC_TYPE_NOT_RECOGNIZED",ERR_DOC_WAS_DELETED:"ERR_DOC_WAS_DELETED",ERR_DOC_IN_HARD_ROLLBACK:"ERR_DOC_IN_HARD_ROLLBACK",ERR_INFLIGHT_OP_MISSING:"ERR_INFLIGHT_OP_MISSING",ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION:"ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION",ERR_MAX_SUBMIT_RETRIES_EXCEEDED:"ERR_MAX_SUBMIT_RETRIES_EXCEEDED",ERR_MESSAGE_BADLY_FORMED:"ERR_MESSAGE_BADLY_FORMED",ERR_MILESTONE_ARGUMENT_INVALID:"ERR_MILESTONE_ARGUMENT_INVALID",ERR_NO_OP:"ERR_NO_OP",ERR_OP_ALREADY_SUBMITTED:"ERR_OP_ALREADY_SUBMITTED",ERR_OP_NOT_ALLOWED_IN_PROJECTION:"ERR_OP_NOT_ALLOWED_IN_PROJECTION",ERR_OP_SUBMIT_REJECTED:"ERR_OP_SUBMIT_REJECTED",ERR_PENDING_OP_REMOVED_BY_OP_SUBMIT_REJECTED:"ERR_PENDING_OP_REMOVED_BY_OP_SUBMIT_REJECTED",ERR_HARD_ROLLBACK_FETCH_FAILED:"ERR_HARD_ROLLBACK_FETCH_FAILED",ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM:"ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM",ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM:"ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM",ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT:"ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT",ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED:"ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED",ERR_OT_OP_BADLY_FORMED:"ERR_OT_OP_BADLY_FORMED",ERR_OT_OP_NOT_APPLIED:"ERR_OT_OP_NOT_APPLIED",ERR_OT_OP_NOT_PROVIDED:"ERR_OT_OP_NOT_PROVIDED",ERR_PRESENCE_TRANSFORM_FAILED:"ERR_PRESENCE_TRANSFORM_FAILED",ERR_PROTOCOL_VERSION_NOT_SUPPORTED:"ERR_PROTOCOL_VERSION_NOT_SUPPORTED",ERR_QUERY_CHANNEL_MISSING:"ERR_QUERY_CHANNEL_MISSING",ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED:"ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED",ERR_SNAPSHOT_READ_SILENT_REJECTION:"ERR_SNAPSHOT_READ_SILENT_REJECTION",ERR_SNAPSHOT_READS_REJECTED:"ERR_SNAPSHOT_READS_REJECTED",ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND:"ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND",ERR_TYPE_CANNOT_BE_PROJECTED:"ERR_TYPE_CANNOT_BE_PROJECTED",ERR_TYPE_DOES_NOT_SUPPORT_COMPOSE:"ERR_TYPE_DOES_NOT_SUPPORT_COMPOSE",ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE:"ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE",ERR_UNKNOWN_ERROR:"ERR_UNKNOWN_ERROR"},ao=r,ao}var lo={},uo,Ju;function zh(){if(Ju)return uo;Ju=1,uo=r;function r(e,t,n,i){var s=function(u,a,o,c){t(o,u,a,"left"),t(c,a,u,"right")},l=e.transformX=function(u,a){n(u),n(a);for(var o=[],c=0;c<a.length;c++){for(var g=a[c],p=[],d=0;d<u.length;){var m=[];if(s(u[d],g,p,m),d++,m.length===1)g=m[0];else if(m.length===0){for(var A=d;A<u.length;A++)i(p,u[A]);g=null;break}else{for(var O=l(u.slice(d),m),E=0;E<O[0].length;E++)i(p,O[0][E]);for(var _=0;_<O[1].length;_++)i(o,O[1][_]);g=null;break}}g!=null&&i(o,g),u=p}return[u,o]};e.transform=function(u,a,o){if(!(o==="left"||o==="right"))throw new Error("type must be 'left' or 'right'");return a.length===0?u:u.length===1&&a.length===1?t([],u[0],a[0],o):o==="left"?l(u,a)[0]:l(a,u)[1]}}return uo}var co={exports:{}},Qu;function X1(){if(Qu)return co.exports;Qu=1;var r=co.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(a){if(a!=null&&typeof a!="string")throw new Error("Initial data must be a string");return a||""}},e=function(a,o,c){return a.slice(0,o)+c+a.slice(o)},t=function(a){if(typeof a.p!="number")throw new Error("component missing position field");if(typeof a.i=="string"==(typeof a.d=="string"))throw new Error("component needs an i or d field");if(a.p<0)throw new Error("position cannot be negative")},n=function(a){for(var o=0;o<a.length;o++)t(a[o])};r.apply=function(a,o){var c;n(o);for(var g=0;g<o.length;g++){var p=o[g];if(p.i!=null)a=e(a,p.p,p.i);else{if(c=a.slice(p.p,p.p+p.d.length),p.d!==c)throw new Error("Delete component '"+p.d+"' does not match deleted text '"+c+"'");a=a.slice(0,p.p)+a.slice(p.p+p.d.length)}}return a};var i=r._append=function(a,o){if(!(o.i===""||o.d===""))if(a.length===0)a.push(o);else{var c=a[a.length-1];c.i!=null&&o.i!=null&&c.p<=o.p&&o.p<=c.p+c.i.length?a[a.length-1]={i:e(c.i,o.p-c.p,o.i),p:c.p}:c.d!=null&&o.d!=null&&o.p<=c.p&&c.p<=o.p+o.d.length?a[a.length-1]={d:e(o.d,c.p-o.p,c.d),p:o.p}:a.push(o)}};r.compose=function(a,o){n(a),n(o);for(var c=a.slice(),g=0;g<o.length;g++)i(c,o[g]);return c},r.normalize=function(a){var o=[];(a.i!=null||a.p!=null)&&(a=[a]);for(var c=0;c<a.length;c++){var g=a[c];g.p==null&&(g.p=0),i(o,g)}return o};var s=function(a,o,c){return o.i!=null?o.p<a||o.p===a&&c?a+o.i.length:a:a<=o.p?a:a<=o.p+o.d.length?o.p:a-o.d.length};r.transformCursor=function(a,o,c){for(var g=c==="right",p=0;p<o.length;p++)a=s(a,o[p],g);return a};var l=r._tc=function(a,o,c,g){if(t(o),t(c),o.i!=null)i(a,{i:o.i,p:s(o.p,c,g==="right")});else if(c.i!=null){var p=o.d;o.p<c.p&&(i(a,{d:p.slice(0,c.p-o.p),p:o.p}),p=p.slice(c.p-o.p)),p!==""&&i(a,{d:p,p:o.p+c.i.length})}else if(o.p>=c.p+c.d.length)i(a,{d:o.d,p:o.p-c.d.length});else if(o.p+o.d.length<=c.p)i(a,o);else{var d={d:"",p:o.p};o.p<c.p&&(d.d=o.d.slice(0,c.p-o.p)),o.p+o.d.length>c.p+c.d.length&&(d.d+=o.d.slice(c.p+c.d.length-o.p));var m=Math.max(o.p,c.p),A=Math.min(o.p+o.d.length,c.p+c.d.length),O=o.d.slice(m-o.p,A-o.p),E=c.d.slice(m-c.p,A-c.p);if(O!==E)throw new Error("Delete ops delete different text in the same region of the document");d.d!==""&&(d.p=s(d.p,c),i(a,d))}return a},u=function(a){return a.i!=null?{d:a.i,p:a.p}:{i:a.d,p:a.p}};return r.invert=function(a){a=a.slice().reverse();for(var o=0;o<a.length;o++)a[o]=u(a[o]);return a},zh()(r,l,n,i),co.exports}var fo,ec;function J1(){if(ec)return fo;ec=1;var r=function(o){return Object.prototype.toString.call(o)=="[object Array]"},e=function(o){return!!o&&o.constructor===Object},t=function(o){return JSON.parse(JSON.stringify(o))},n={name:"json0",uri:"http://sharejs.org/types/JSONv0"},i={};n.registerSubtype=function(o){i[o.name]=o},n.create=function(o){return o===void 0?null:t(o)},n.invertComponent=function(o){var c={p:o.p};return o.t&&i[o.t]&&(c.t=o.t,c.o=i[o.t].invert(o.o)),o.si!==void 0&&(c.sd=o.si),o.sd!==void 0&&(c.si=o.sd),o.oi!==void 0&&(c.od=o.oi),o.od!==void 0&&(c.oi=o.od),o.li!==void 0&&(c.ld=o.li),o.ld!==void 0&&(c.li=o.ld),o.na!==void 0&&(c.na=-o.na),o.lm!==void 0&&(c.lm=o.p[o.p.length-1],c.p=o.p.slice(0,o.p.length-1).concat([o.lm])),c},n.invert=function(o){for(var c=o.slice().reverse(),g=[],p=0;p<c.length;p++)g.push(n.invertComponent(c[p]));return g},n.checkValidOp=function(o){for(var c=0;c<o.length;c++)if(!r(o[c].p))throw new Error("Missing path")},n.checkList=function(o){if(!r(o))throw new Error("Referenced element not a list")},n.checkObj=function(o){if(!e(o))throw new Error("Referenced element not an object (it was "+JSON.stringify(o)+")")};function s(o){o.t="text0";var c={p:o.p.pop()};o.si!=null&&(c.i=o.si),o.sd!=null&&(c.d=o.sd),o.o=[c]}function l(o){o.p.push(o.o[0].p),o.o[0].i!=null&&(o.si=o.o[0].i),o.o[0].d!=null&&(o.sd=o.o[0].d),delete o.t,delete o.o}n.apply=function(o,c){n.checkValidOp(c),c=t(c);for(var g={data:o},p=0;p<c.length;p++){var d=c[p];(d.si!=null||d.sd!=null)&&s(d);for(var m=null,A=g,O="data",E=0;E<d.p.length;E++){var _=d.p[E];if(m=A,A=A[O],O=_,m==null)throw new Error("Path invalid")}if(d.t&&d.o!==void 0&&i[d.t])A[O]=i[d.t].apply(A[O],d.o);else if(d.na!==void 0){if(typeof A[O]!="number")throw new Error("Referenced element not a number");A[O]+=d.na}else if(d.li!==void 0&&d.ld!==void 0)n.checkList(A),A[O]=d.li;else if(d.li!==void 0)n.checkList(A),A.splice(O,0,d.li);else if(d.ld!==void 0)n.checkList(A),A.splice(O,1);else if(d.lm!==void 0){if(n.checkList(A),d.lm!=O){var h=A[O];A.splice(O,1),A.splice(d.lm,0,h)}}else if(d.oi!==void 0)n.checkObj(A),A[O]=d.oi;else if(d.od!==void 0)n.checkObj(A),delete A[O];else throw new Error("invalid / missing instruction in op")}return g.data},n.shatter=function(o){for(var c=[],g=0;g<o.length;g++)c.push([o[g]]);return c},n.incrementalApply=function(o,c,g){for(var p=0;p<c.length;p++){var d=[c[p]];o=n.apply(o,d),g(d,o)}return o};var u=n.pathMatches=function(o,c,g){if(o.length!=c.length)return!1;for(var p=0;p<o.length;p++)if(o[p]!==c[p]&&(!g||p!==o.length-1))return!1;return!0};n.append=function(o,c){if(c=t(c),o.length===0){o.push(c);return}var g=o[o.length-1];if((c.si!=null||c.sd!=null)&&(g.si!=null||g.sd!=null)&&(s(c),s(g)),u(c.p,g.p))if(c.t&&g.t&&c.t===g.t&&i[c.t]){if(g.o=i[c.t].compose(g.o,c.o),c.si!=null||c.sd!=null){for(var p=c.p,d=0;d<g.o.length-1;d++)c.o=[g.o.pop()],c.p=p.slice(),l(c),o.push(c);l(g)}}else g.na!=null&&c.na!=null?o[o.length-1]={p:g.p,na:g.na+c.na}:g.li!==void 0&&c.li===void 0&&c.ld===g.li?g.ld!==void 0?delete g.li:o.pop():g.od!==void 0&&g.oi===void 0&&c.oi!==void 0&&c.od===void 0?g.oi=c.oi:g.oi!==void 0&&c.od!==void 0?c.oi!==void 0?g.oi=c.oi:g.od!==void 0?delete g.oi:o.pop():c.lm!==void 0&&c.p[c.p.length-1]===c.lm||o.push(c);else(c.si!=null||c.sd!=null)&&(g.si!=null||g.sd!=null)&&(l(c),l(g)),o.push(c)},n.compose=function(o,c){n.checkValidOp(o),n.checkValidOp(c);for(var g=t(o),p=0;p<c.length;p++)n.append(g,c[p]);return g},n.normalize=function(o){var c=[];o=r(o)?o:[o];for(var g=0;g<o.length;g++){var p=o[g];p.p==null&&(p.p=[]),n.append(c,p)}return c},n.commonLengthForOps=function(o,c){var g=o.p.length,p=c.p.length;if((o.na!=null||o.t)&&g++,(c.na!=null||c.t)&&p++,g===0)return-1;if(p===0)return null;g--,p--;for(var d=0;d<g;d++){var m=o.p[d];if(d>=p||m!==c.p[d])return null}return g},n.canOpAffectPath=function(o,c){return n.commonLengthForOps({p:c},o)!=null},n.transformComponent=function(o,c,g,p){c=t(c);var d=n.commonLengthForOps(g,c),m=n.commonLengthForOps(c,g),A=c.p.length,O=g.p.length;if((c.na!=null||c.t)&&A++,(g.na!=null||g.t)&&O++,m!=null&&O>A&&c.p[m]==g.p[m]){if(c.ld!==void 0){var E=t(g);E.p=E.p.slice(A),c.ld=n.apply(t(c.ld),[E])}else if(c.od!==void 0){var E=t(g);E.p=E.p.slice(A),c.od=n.apply(t(c.od),[E])}}if(d!=null){var _=A==O,E=g;if((c.si!=null||c.sd!=null)&&(g.si!=null||g.sd!=null)&&(s(c),E=t(g),s(E)),E.t&&i[E.t]){if(c.t&&c.t===E.t){var h=i[c.t].transform(c.o,E.o,p);if(c.si!=null||c.sd!=null)for(var f=c.p,v=0;v<h.length;v++)c.o=[h[v]],c.p=f.slice(),l(c),n.append(o,c);else(!r(h)||h.length>0)&&(c.o=h,n.append(o,c));return o}}else if(g.na===void 0){if(g.li!==void 0&&g.ld!==void 0){if(g.p[d]===c.p[d])if(_){if(c.ld!==void 0)if(c.li!==void 0&&p==="left")c.ld=t(g.li);else return o}else return o}else if(g.li!==void 0)c.li!==void 0&&c.ld===void 0&&_&&c.p[d]===g.p[d]?p==="right"&&c.p[d]++:g.p[d]<=c.p[d]&&c.p[d]++,c.lm!==void 0&&_&&g.p[d]<=c.lm&&c.lm++;else if(g.ld!==void 0){if(c.lm!==void 0&&_){if(g.p[d]===c.p[d])return o;var f=g.p[d],b=c.p[d],S=c.lm;(f<S||f===S&&b<S)&&c.lm--}if(g.p[d]<c.p[d])c.p[d]--;else if(g.p[d]===c.p[d]){if(O<A)return o;if(c.ld!==void 0)if(c.li!==void 0)delete c.ld;else return o}}else if(g.lm!==void 0)if(c.lm!==void 0&&A===O){var b=c.p[d],S=c.lm,N=g.p[d],C=g.lm;if(N!==C)if(b===N)if(p==="left")c.p[d]=C,b===S&&(c.lm=C);else return o;else b>N&&c.p[d]--,b>C?c.p[d]++:b===C&&N>C&&(c.p[d]++,b===S&&c.lm++),(S>N||S===N&&S>b)&&c.lm--,S>C?c.lm++:S===C&&(C>N&&S>b||C<N&&S<b?p==="right"&&c.lm++:S>b?c.lm++:S===N&&c.lm--)}else if(c.li!==void 0&&c.ld===void 0&&_){var b=g.p[d],S=g.lm;f=c.p[d],f>b&&c.p[d]--,f>S&&c.p[d]++}else{var b=g.p[d],S=g.lm;f=c.p[d],f===b?c.p[d]=S:(f>b&&c.p[d]--,(f>S||f===S&&b>S)&&c.p[d]++)}else if(g.oi!==void 0&&g.od!==void 0){if(c.p[d]===g.p[d])if(c.oi!==void 0&&_){if(p==="right")return o;c.od=g.oi}else return o}else if(g.oi!==void 0){if(c.oi!==void 0&&c.p[d]===g.p[d])if(p==="left")n.append(o,{p:c.p,od:g.oi});else return o}else if(g.od!==void 0&&c.p[d]==g.p[d]){if(!_)return o;if(c.oi!==void 0)delete c.od;else return o}}}return n.append(o,c),o},zh()(n,n.transformComponent,n.checkValidOp,n.append);var a=X1();return n.registerSubtype(a),fo=n,fo}var ho,tc;function Q1(){return tc||(tc=1,ho={type:J1()}),ho}var rc;function qs(){return rc||(rc=1,(function(r){r.defaultType=Q1().type,r.map=Object.create(null),r.register=function(e){e.name&&(r.map[e.name]=e),e.uri&&(r.map[e.uri]=e)},r.register(r.defaultType)})(lo)),lo}var po={},Wi={},nc;function e0(){if(nc)return Wi;nc=1,Wi.messageChannel=function(){var e=r(arguments),t=new MessageChannel;t.port1.onmessage=function(){e(),t.port1.close()},t.port2.postMessage("")},Wi.setTimeout=function(){var e=r(arguments);setTimeout(e)};function r(e){for(var t=e[0],n=[],i=1;i<e.length;i++)n[i-1]=e[i];return function(){t.apply(null,n)}}return Wi}var go={},vo={},yo,ic;function Vh(){return ic||(ic=1,yo=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var l=Object.getOwnPropertySymbols(e);if(l.length!==1||l[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var u=Object.getOwnPropertyDescriptor(e,t);if(u.value!==i||u.enumerable!==!0)return!1}return!0}),yo}var mo,sc;function Is(){if(sc)return mo;sc=1;var r=Vh();return mo=function(){return r()&&!!Symbol.toStringTag},mo}var bo,oc;function Gh(){return oc||(oc=1,bo=Object),bo}var _o,ac;function t0(){return ac||(ac=1,_o=Error),_o}var Eo,lc;function r0(){return lc||(lc=1,Eo=EvalError),Eo}var Ao,uc;function n0(){return uc||(uc=1,Ao=RangeError),Ao}var Oo,cc;function i0(){return cc||(cc=1,Oo=ReferenceError),Oo}var So,fc;function Wh(){return fc||(fc=1,So=SyntaxError),So}var wo,hc;function Ai(){return hc||(hc=1,wo=TypeError),wo}var To,dc;function s0(){return dc||(dc=1,To=URIError),To}var Ro,pc;function o0(){return pc||(pc=1,Ro=Math.abs),Ro}var No,gc;function a0(){return gc||(gc=1,No=Math.floor),No}var Lo,vc;function l0(){return vc||(vc=1,Lo=Math.max),Lo}var Co,yc;function u0(){return yc||(yc=1,Co=Math.min),Co}var qo,mc;function c0(){return mc||(mc=1,qo=Math.pow),qo}var Io,bc;function f0(){return bc||(bc=1,Io=Math.round),Io}var xo,_c;function h0(){return _c||(_c=1,xo=Number.isNaN||function(e){return e!==e}),xo}var Po,Ec;function d0(){if(Ec)return Po;Ec=1;var r=h0();return Po=function(t){return r(t)||t===0?t:t<0?-1:1},Po}var Do,Ac;function p0(){return Ac||(Ac=1,Do=Object.getOwnPropertyDescriptor),Do}var jo,Oc;function Fn(){if(Oc)return jo;Oc=1;var r=p0();if(r)try{r([],"length")}catch{r=null}return jo=r,jo}var Mo,Sc;function xs(){if(Sc)return Mo;Sc=1;var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}return Mo=r,Mo}var ko,wc;function g0(){if(wc)return ko;wc=1;var r=typeof Symbol!="undefined"&&Symbol,e=Vh();return ko=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},ko}var Bo,Tc;function Kh(){return Tc||(Tc=1,Bo=typeof Reflect!="undefined"&&Reflect.getPrototypeOf||null),Bo}var Fo,Rc;function Yh(){if(Rc)return Fo;Rc=1;var r=Gh();return Fo=r.getPrototypeOf||null,Fo}var $o,Nc;function v0(){if(Nc)return $o;Nc=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(a,o){for(var c=[],g=0;g<a.length;g+=1)c[g]=a[g];for(var p=0;p<o.length;p+=1)c[p+a.length]=o[p];return c},s=function(a,o){for(var c=[],g=o,p=0;g<a.length;g+=1,p+=1)c[p]=a[g];return c},l=function(u,a){for(var o="",c=0;c<u.length;c+=1)o+=u[c],c+1<u.length&&(o+=a);return o};return $o=function(a){var o=this;if(typeof o!="function"||e.apply(o)!==n)throw new TypeError(r+o);for(var c=s(arguments,1),g,p=function(){if(this instanceof g){var E=o.apply(this,i(c,arguments));return Object(E)===E?E:this}return o.apply(a,i(c,arguments))},d=t(0,o.length-c.length),m=[],A=0;A<d;A++)m[A]="$"+A;if(g=Function("binder","return function ("+l(m,",")+"){ return binder.apply(this,arguments); }")(p),o.prototype){var O=function(){};O.prototype=o.prototype,g.prototype=new O,O.prototype=null}return g},$o}var Uo,Lc;function Oi(){if(Lc)return Uo;Lc=1;var r=v0();return Uo=Function.prototype.bind||r,Uo}var Ho,Cc;function Ll(){return Cc||(Cc=1,Ho=Function.prototype.call),Ho}var zo,qc;function Cl(){return qc||(qc=1,zo=Function.prototype.apply),zo}var Vo,Ic;function y0(){return Ic||(Ic=1,Vo=typeof Reflect!="undefined"&&Reflect&&Reflect.apply),Vo}var Go,xc;function Zh(){if(xc)return Go;xc=1;var r=Oi(),e=Cl(),t=Ll(),n=y0();return Go=n||r.call(t,e),Go}var Wo,Pc;function ql(){if(Pc)return Wo;Pc=1;var r=Oi(),e=Ai(),t=Ll(),n=Zh();return Wo=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return n(r,t,s)},Wo}var Ko,Dc;function m0(){if(Dc)return Ko;Dc=1;var r=ql(),e=Fn(),t;try{t=[].__proto__===Array.prototype}catch(l){if(!l||typeof l!="object"||!("code"in l)||l.code!=="ERR_PROTO_ACCESS")throw l}var n=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return Ko=n&&typeof n.get=="function"?r([n.get]):typeof s=="function"?function(u){return s(u==null?u:i(u))}:!1,Ko}var Yo,jc;function Il(){if(jc)return Yo;jc=1;var r=Kh(),e=Yh(),t=m0();return Yo=r?function(i){return r(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,Yo}var Zo,Mc;function Xh(){if(Mc)return Zo;Mc=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Oi();return Zo=t.call(r,e),Zo}var Xo,kc;function Jh(){if(kc)return Xo;kc=1;var r,e=Gh(),t=t0(),n=r0(),i=n0(),s=i0(),l=Wh(),u=Ai(),a=s0(),o=o0(),c=a0(),g=l0(),p=u0(),d=c0(),m=f0(),A=d0(),O=Function,E=function(ee){try{return O('"use strict"; return ('+ee+").constructor;")()}catch{}},_=Fn(),h=xs(),f=function(){throw new u},v=_?(function(){try{return arguments.callee,f}catch{try{return _(arguments,"callee").get}catch{return f}}})():f,b=g0()(),S=Il(),N=Yh(),C=Kh(),P=Cl(),w=Ll(),j={},R=typeof Uint8Array=="undefined"||!S?r:S(Uint8Array),I={__proto__:null,"%AggregateError%":typeof AggregateError=="undefined"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?r:ArrayBuffer,"%ArrayIteratorPrototype%":b&&S?S([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":j,"%AsyncGenerator%":j,"%AsyncGeneratorFunction%":j,"%AsyncIteratorPrototype%":j,"%Atomics%":typeof Atomics=="undefined"?r:Atomics,"%BigInt%":typeof BigInt=="undefined"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array=="undefined"?r:Float16Array,"%Float32Array%":typeof Float32Array=="undefined"?r:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?r:FinalizationRegistry,"%Function%":O,"%GeneratorFunction%":j,"%Int8Array%":typeof Int8Array=="undefined"?r:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?r:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":b&&S?S(S([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map=="undefined"?r:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!b||!S?r:S(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":_,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?r:Promise,"%Proxy%":typeof Proxy=="undefined"?r:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect=="undefined"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?r:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!b||!S?r:S(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":b&&S?S(""[Symbol.iterator]()):r,"%Symbol%":b?Symbol:r,"%SyntaxError%":l,"%ThrowTypeError%":v,"%TypedArray%":R,"%TypeError%":u,"%Uint8Array%":typeof Uint8Array=="undefined"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?r:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap=="undefined"?r:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?r:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?r:WeakSet,"%Function.prototype.call%":w,"%Function.prototype.apply%":P,"%Object.defineProperty%":h,"%Object.getPrototypeOf%":N,"%Math.abs%":o,"%Math.floor%":c,"%Math.max%":g,"%Math.min%":p,"%Math.pow%":d,"%Math.round%":m,"%Math.sign%":A,"%Reflect.getPrototypeOf%":C};if(S)try{null.error}catch(ee){var D=S(S(ee));I["%Error.prototype%"]=D}var q=function ee(J){var Q;if(J==="%AsyncFunction%")Q=E("async function () {}");else if(J==="%GeneratorFunction%")Q=E("function* () {}");else if(J==="%AsyncGeneratorFunction%")Q=E("async function* () {}");else if(J==="%AsyncGenerator%"){var oe=ee("%AsyncGeneratorFunction%");oe&&(Q=oe.prototype)}else if(J==="%AsyncIteratorPrototype%"){var le=ee("%AsyncGenerator%");le&&S&&(Q=S(le.prototype))}return I[J]=Q,Q},$={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},U=Oi(),K=Xh(),V=U.call(w,Array.prototype.concat),ne=U.call(P,Array.prototype.splice),te=U.call(w,String.prototype.replace),L=U.call(w,String.prototype.slice),B=U.call(w,RegExp.prototype.exec),k=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Y=/\\(\\)?/g,re=function(J){var Q=L(J,0,1),oe=L(J,-1);if(Q==="%"&&oe!=="%")throw new l("invalid intrinsic syntax, expected closing `%`");if(oe==="%"&&Q!=="%")throw new l("invalid intrinsic syntax, expected opening `%`");var le=[];return te(J,k,function(he,me,Ae,Qe){le[le.length]=Ae?te(Qe,Y,"$1"):me||he}),le},X=function(J,Q){var oe=J,le;if(K($,oe)&&(le=$[oe],oe="%"+le[0]+"%"),K(I,oe)){var he=I[oe];if(he===j&&(he=q(oe)),typeof he=="undefined"&&!Q)throw new u("intrinsic "+J+" exists, but is not available. Please file an issue!");return{alias:le,name:oe,value:he}}throw new l("intrinsic "+J+" does not exist!")};return Xo=function(J,Q){if(typeof J!="string"||J.length===0)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Q!="boolean")throw new u('"allowMissing" argument must be a boolean');if(B(/^%?[^%]*%?$/,J)===null)throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var oe=re(J),le=oe.length>0?oe[0]:"",he=X("%"+le+"%",Q),me=he.name,Ae=he.value,Qe=!1,Ze=he.alias;Ze&&(le=Ze[0],ne(oe,V([0,1],Ze)));for(var G=1,xe=!0;G<oe.length;G+=1){var Be=oe[G],Ue=L(Be,0,1),De=L(Be,-1);if((Ue==='"'||Ue==="'"||Ue==="`"||De==='"'||De==="'"||De==="`")&&Ue!==De)throw new l("property names with quotes must have matching quotes");if((Be==="constructor"||!xe)&&(Qe=!0),le+="."+Be,me="%"+le+"%",K(I,me))Ae=I[me];else if(Ae!=null){if(!(Be in Ae)){if(!Q)throw new u("base intrinsic for "+J+" exists, but the property is not available.");return}if(_&&G+1>=oe.length){var Oe=_(Ae,Be);xe=!!Oe,xe&&"get"in Oe&&!("originalValue"in Oe.get)?Ae=Oe.get:Ae=Ae[Be]}else xe=K(Ae,Be),Ae=Ae[Be];xe&&!Qe&&(I[me]=Ae)}}return Ae},Xo}var Jo,Bc;function Si(){if(Bc)return Jo;Bc=1;var r=Jh(),e=ql(),t=e([r("%String.prototype.indexOf%")]);return Jo=function(i,s){var l=r(i,!!s);return typeof l=="function"&&t(i,".prototype.")>-1?e([l]):l},Jo}var Qo,Fc;function b0(){if(Fc)return Qo;Fc=1;var r=Is()(),e=Si(),t=e("Object.prototype.toString"),n=function(u){return r&&u&&typeof u=="object"&&Symbol.toStringTag in u?!1:t(u)==="[object Arguments]"},i=function(u){return n(u)?!0:u!==null&&typeof u=="object"&&"length"in u&&typeof u.length=="number"&&u.length>=0&&t(u)!=="[object Array]"&&"callee"in u&&t(u.callee)==="[object Function]"},s=(function(){return n(arguments)})();return n.isLegacyArguments=i,Qo=s?n:i,Qo}var ea,$c;function _0(){if($c)return ea;$c=1;var r=Si(),e=Is()(),t=Xh(),n=Fn(),i;if(e){var s=r("RegExp.prototype.exec"),l={},u=function(){throw l},a={toString:u,valueOf:u};typeof Symbol.toPrimitive=="symbol"&&(a[Symbol.toPrimitive]=u),i=function(p){if(!p||typeof p!="object")return!1;var d=n(p,"lastIndex"),m=d&&t(d,"value");if(!m)return!1;try{s(p,a)}catch(A){return A===l}}}else{var o=r("Object.prototype.toString"),c="[object RegExp]";i=function(p){return!p||typeof p!="object"&&typeof p!="function"?!1:o(p)===c}}return ea=i,ea}var ta,Uc;function E0(){if(Uc)return ta;Uc=1;var r=Si(),e=_0(),t=r("RegExp.prototype.exec"),n=Ai();return ta=function(s){if(!e(s))throw new n("`regex` must be a RegExp");return function(u){return t(s,u)!==null}},ta}var ra,Hc;function A0(){if(Hc)return ra;Hc=1;var r=Si(),e=E0(),t=e(/^\s*(?:function)?\*/),n=Is()(),i=Il(),s=r("Object.prototype.toString"),l=r("Function.prototype.toString"),u=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},a;return ra=function(c){if(typeof c!="function")return!1;if(t(l(c)))return!0;if(!n){var g=s(c);return g==="[object GeneratorFunction]"}if(!i)return!1;if(typeof a=="undefined"){var p=u();a=p?i(p):!1}return i(c)===a},ra}var na,zc;function O0(){if(zc)return na;zc=1;var r=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,t)}catch(_){_!==n&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(h){try{var f=r.call(h);return i.test(f)}catch{return!1}},l=function(h){try{return s(h)?!1:(r.call(h),!0)}catch{return!1}},u=Object.prototype.toString,a="[object Object]",o="[object Function]",c="[object GeneratorFunction]",g="[object HTMLAllCollection]",p="[object HTML document.all class]",d="[object HTMLCollection]",m=typeof Symbol=="function"&&!!Symbol.toStringTag,A=!(0 in[,]),O=function(){return!1};if(typeof document=="object"){var E=document.all;u.call(E)===u.call(document.all)&&(O=function(h){if((A||!h)&&(typeof h=="undefined"||typeof h=="object"))try{var f=u.call(h);return(f===g||f===p||f===d||f===a)&&h("")==null}catch{}return!1})}return na=e?function(h){if(O(h))return!0;if(!h||typeof h!="function"&&typeof h!="object")return!1;try{e(h,null,t)}catch(f){if(f!==n)return!1}return!s(h)&&l(h)}:function(h){if(O(h))return!0;if(!h||typeof h!="function"&&typeof h!="object")return!1;if(m)return l(h);if(s(h))return!1;var f=u.call(h);return f!==o&&f!==c&&!/^\[object HTML/.test(f)?!1:l(h)},na}var ia,Vc;function S0(){if(Vc)return ia;Vc=1;var r=O0(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,n=function(a,o,c){for(var g=0,p=a.length;g<p;g++)t.call(a,g)&&(c==null?o(a[g],g,a):o.call(c,a[g],g,a))},i=function(a,o,c){for(var g=0,p=a.length;g<p;g++)c==null?o(a.charAt(g),g,a):o.call(c,a.charAt(g),g,a)},s=function(a,o,c){for(var g in a)t.call(a,g)&&(c==null?o(a[g],g,a):o.call(c,a[g],g,a))};function l(u){return e.call(u)==="[object Array]"}return ia=function(a,o,c){if(!r(o))throw new TypeError("iterator must be a function");var g;arguments.length>=3&&(g=c),l(a)?n(a,o,g):typeof a=="string"?i(a,o,g):s(a,o,g)},ia}var sa,Gc;function w0(){return Gc||(Gc=1,sa=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),sa}var oa,Wc;function T0(){if(Wc)return oa;Wc=1;var r=w0(),e=typeof globalThis=="undefined"?window:globalThis;return oa=function(){for(var n=[],i=0;i<r.length;i++)typeof e[r[i]]=="function"&&(n[n.length]=r[i]);return n},oa}var aa={exports:{}},la,Kc;function R0(){if(Kc)return la;Kc=1;var r=xs(),e=Wh(),t=Ai(),n=Fn();return la=function(s,l,u){if(!s||typeof s!="object"&&typeof s!="function")throw new t("`obj` must be an object or a function`");if(typeof l!="string"&&typeof l!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,g=arguments.length>6?arguments[6]:!1,p=!!n&&n(s,l);if(r)r(s,l,{configurable:c===null&&p?p.configurable:!c,enumerable:a===null&&p?p.enumerable:!a,value:u,writable:o===null&&p?p.writable:!o});else if(g||!a&&!o&&!c)s[l]=u;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},la}var ua,Yc;function N0(){if(Yc)return ua;Yc=1;var r=xs(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},ua=e,ua}var ca,Zc;function L0(){if(Zc)return ca;Zc=1;var r=Jh(),e=R0(),t=N0()(),n=Fn(),i=Ai(),s=r("%Math.floor%");return ca=function(u,a){if(typeof u!="function")throw new i("`fn` is not a function");if(typeof a!="number"||a<0||a>4294967295||s(a)!==a)throw new i("`length` must be a positive 32-bit integer");var o=arguments.length>2&&!!arguments[2],c=!0,g=!0;if("length"in u&&n){var p=n(u,"length");p&&!p.configurable&&(c=!1),p&&!p.writable&&(g=!1)}return(c||g||!o)&&(t?e(u,"length",a,!0,!0):e(u,"length",a)),u},ca}var fa,Xc;function C0(){if(Xc)return fa;Xc=1;var r=Oi(),e=Cl(),t=Zh();return fa=function(){return t(r,e,arguments)},fa}var Jc;function q0(){return Jc||(Jc=1,(function(r){var e=L0(),t=xs(),n=ql(),i=C0();r.exports=function(l){var u=n(arguments),a=l.length-(arguments.length-1);return e(u,1+(a>0?a:0),!0)},t?t(r.exports,"apply",{value:i}):r.exports.apply=i})(aa)),aa.exports}var ha,Qc;function Qh(){if(Qc)return ha;Qc=1;var r=S0(),e=T0(),t=q0(),n=Si(),i=Fn(),s=Il(),l=n("Object.prototype.toString"),u=Is()(),a=typeof globalThis=="undefined"?window:globalThis,o=e(),c=n("String.prototype.slice"),g=n("Array.prototype.indexOf",!0)||function(O,E){for(var _=0;_<O.length;_+=1)if(O[_]===E)return _;return-1},p={__proto__:null};u&&i&&s?r(o,function(A){var O=new a[A];if(Symbol.toStringTag in O&&s){var E=s(O),_=i(E,Symbol.toStringTag);if(!_&&E){var h=s(E);_=i(h,Symbol.toStringTag)}p["$"+A]=t(_.get)}}):r(o,function(A){var O=new a[A],E=O.slice||O.set;E&&(p["$"+A]=t(E))});var d=function(O){var E=!1;return r(p,function(_,h){if(!E)try{"$"+_(O)===h&&(E=c(h,1))}catch{}}),E},m=function(O){var E=!1;return r(p,function(_,h){if(!E)try{_(O),E=c(h,1)}catch{}}),E};return ha=function(O){if(!O||typeof O!="object")return!1;if(!u){var E=c(l(O),8,-1);return g(o,E)>-1?E:E!=="Object"?!1:m(O)}return i?d(O):null},ha}var da,ef;function I0(){if(ef)return da;ef=1;var r=Qh();return da=function(t){return!!r(t)},da}var tf;function x0(){return tf||(tf=1,(function(r){var e=b0(),t=A0(),n=Qh(),i=I0();function s(G){return G.call.bind(G)}var l=typeof BigInt!="undefined",u=typeof Symbol!="undefined",a=s(Object.prototype.toString),o=s(Number.prototype.valueOf),c=s(String.prototype.valueOf),g=s(Boolean.prototype.valueOf);if(l)var p=s(BigInt.prototype.valueOf);if(u)var d=s(Symbol.prototype.valueOf);function m(G,xe){if(typeof G!="object")return!1;try{return xe(G),!0}catch{return!1}}r.isArgumentsObject=e,r.isGeneratorFunction=t,r.isTypedArray=i;function A(G){return typeof Promise!="undefined"&&G instanceof Promise||G!==null&&typeof G=="object"&&typeof G.then=="function"&&typeof G.catch=="function"}r.isPromise=A;function O(G){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(G):i(G)||L(G)}r.isArrayBufferView=O;function E(G){return n(G)==="Uint8Array"}r.isUint8Array=E;function _(G){return n(G)==="Uint8ClampedArray"}r.isUint8ClampedArray=_;function h(G){return n(G)==="Uint16Array"}r.isUint16Array=h;function f(G){return n(G)==="Uint32Array"}r.isUint32Array=f;function v(G){return n(G)==="Int8Array"}r.isInt8Array=v;function b(G){return n(G)==="Int16Array"}r.isInt16Array=b;function S(G){return n(G)==="Int32Array"}r.isInt32Array=S;function N(G){return n(G)==="Float32Array"}r.isFloat32Array=N;function C(G){return n(G)==="Float64Array"}r.isFloat64Array=C;function P(G){return n(G)==="BigInt64Array"}r.isBigInt64Array=P;function w(G){return n(G)==="BigUint64Array"}r.isBigUint64Array=w;function j(G){return a(G)==="[object Map]"}j.working=typeof Map!="undefined"&&j(new Map);function R(G){return typeof Map=="undefined"?!1:j.working?j(G):G instanceof Map}r.isMap=R;function I(G){return a(G)==="[object Set]"}I.working=typeof Set!="undefined"&&I(new Set);function D(G){return typeof Set=="undefined"?!1:I.working?I(G):G instanceof Set}r.isSet=D;function q(G){return a(G)==="[object WeakMap]"}q.working=typeof WeakMap!="undefined"&&q(new WeakMap);function $(G){return typeof WeakMap=="undefined"?!1:q.working?q(G):G instanceof WeakMap}r.isWeakMap=$;function U(G){return a(G)==="[object WeakSet]"}U.working=typeof WeakSet!="undefined"&&U(new WeakSet);function K(G){return U(G)}r.isWeakSet=K;function V(G){return a(G)==="[object ArrayBuffer]"}V.working=typeof ArrayBuffer!="undefined"&&V(new ArrayBuffer);function ne(G){return typeof ArrayBuffer=="undefined"?!1:V.working?V(G):G instanceof ArrayBuffer}r.isArrayBuffer=ne;function te(G){return a(G)==="[object DataView]"}te.working=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"&&te(new DataView(new ArrayBuffer(1),0,1));function L(G){return typeof DataView=="undefined"?!1:te.working?te(G):G instanceof DataView}r.isDataView=L;var B=typeof SharedArrayBuffer!="undefined"?SharedArrayBuffer:void 0;function k(G){return a(G)==="[object SharedArrayBuffer]"}function Y(G){return typeof B=="undefined"?!1:(typeof k.working=="undefined"&&(k.working=k(new B)),k.working?k(G):G instanceof B)}r.isSharedArrayBuffer=Y;function re(G){return a(G)==="[object AsyncFunction]"}r.isAsyncFunction=re;function X(G){return a(G)==="[object Map Iterator]"}r.isMapIterator=X;function ee(G){return a(G)==="[object Set Iterator]"}r.isSetIterator=ee;function J(G){return a(G)==="[object Generator]"}r.isGeneratorObject=J;function Q(G){return a(G)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=Q;function oe(G){return m(G,o)}r.isNumberObject=oe;function le(G){return m(G,c)}r.isStringObject=le;function he(G){return m(G,g)}r.isBooleanObject=he;function me(G){return l&&m(G,p)}r.isBigIntObject=me;function Ae(G){return u&&m(G,d)}r.isSymbolObject=Ae;function Qe(G){return oe(G)||le(G)||he(G)||me(G)||Ae(G)}r.isBoxedPrimitive=Qe;function Ze(G){return typeof Uint8Array!="undefined"&&(ne(G)||Y(G))}r.isAnyArrayBuffer=Ze,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(G){Object.defineProperty(r,G,{enumerable:!1,value:function(){throw new Error(G+" is not supported in userland")}})})})(vo)),vo}var pa,rf;function P0(){return rf||(rf=1,pa=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),pa}var Ki={exports:{}},nf;function ed(){return nf||(nf=1,typeof Object.create=="function"?Ki.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Ki.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Ki.exports}var sf;function D0(){return sf||(sf=1,(function(r){var e={},t=Object.getOwnPropertyDescriptors||function(B){for(var k=Object.keys(B),Y={},re=0;re<k.length;re++)Y[k[re]]=Object.getOwnPropertyDescriptor(B,k[re]);return Y},n=/%[sdj%]/g;r.format=function(L){if(!b(L)){for(var B=[],k=0;k<arguments.length;k++)B.push(u(arguments[k]));return B.join(" ")}for(var k=1,Y=arguments,re=Y.length,X=String(L).replace(n,function(J){if(J==="%%")return"%";if(k>=re)return J;switch(J){case"%s":return String(Y[k++]);case"%d":return Number(Y[k++]);case"%j":try{return JSON.stringify(Y[k++])}catch{return"[Circular]"}default:return J}}),ee=Y[k];k<re;ee=Y[++k])h(ee)||!P(ee)?X+=" "+ee:X+=" "+u(ee);return X},r.deprecate=function(L,B){if(typeof process!="undefined"&&process.noDeprecation===!0)return L;if(typeof process=="undefined")return function(){return r.deprecate(L,B).apply(this,arguments)};var k=!1;function Y(){if(!k){if(process.throwDeprecation)throw new Error(B);process.traceDeprecation?console.trace(B):console.error(B),k=!0}return L.apply(this,arguments)}return Y};var i={},s=/^$/;if(e.NODE_DEBUG){var l=e.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+l+"$","i")}r.debuglog=function(L){if(L=L.toUpperCase(),!i[L])if(s.test(L)){var B=process.pid;i[L]=function(){var k=r.format.apply(r,arguments);console.error("%s %d: %s",L,B,k)}}else i[L]=function(){};return i[L]};function u(L,B){var k={seen:[],stylize:o};return arguments.length>=3&&(k.depth=arguments[2]),arguments.length>=4&&(k.colors=arguments[3]),_(B)?k.showHidden=B:B&&r._extend(k,B),N(k.showHidden)&&(k.showHidden=!1),N(k.depth)&&(k.depth=2),N(k.colors)&&(k.colors=!1),N(k.customInspect)&&(k.customInspect=!0),k.colors&&(k.stylize=a),g(k,L,k.depth)}r.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(L,B){var k=u.styles[B];return k?"\x1B["+u.colors[k][0]+"m"+L+"\x1B["+u.colors[k][1]+"m":L}function o(L,B){return L}function c(L){var B={};return L.forEach(function(k,Y){B[k]=!0}),B}function g(L,B,k){if(L.customInspect&&B&&R(B.inspect)&&B.inspect!==r.inspect&&!(B.constructor&&B.constructor.prototype===B)){var Y=B.inspect(k,L);return b(Y)||(Y=g(L,Y,k)),Y}var re=p(L,B);if(re)return re;var X=Object.keys(B),ee=c(X);if(L.showHidden&&(X=Object.getOwnPropertyNames(B)),j(B)&&(X.indexOf("message")>=0||X.indexOf("description")>=0))return d(B);if(X.length===0){if(R(B)){var J=B.name?": "+B.name:"";return L.stylize("[Function"+J+"]","special")}if(C(B))return L.stylize(RegExp.prototype.toString.call(B),"regexp");if(w(B))return L.stylize(Date.prototype.toString.call(B),"date");if(j(B))return d(B)}var Q="",oe=!1,le=["{","}"];if(E(B)&&(oe=!0,le=["[","]"]),R(B)){var he=B.name?": "+B.name:"";Q=" [Function"+he+"]"}if(C(B)&&(Q=" "+RegExp.prototype.toString.call(B)),w(B)&&(Q=" "+Date.prototype.toUTCString.call(B)),j(B)&&(Q=" "+d(B)),X.length===0&&(!oe||B.length==0))return le[0]+Q+le[1];if(k<0)return C(B)?L.stylize(RegExp.prototype.toString.call(B),"regexp"):L.stylize("[Object]","special");L.seen.push(B);var me;return oe?me=m(L,B,k,ee,X):me=X.map(function(Ae){return A(L,B,k,ee,Ae,oe)}),L.seen.pop(),O(me,Q,le)}function p(L,B){if(N(B))return L.stylize("undefined","undefined");if(b(B)){var k="'"+JSON.stringify(B).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return L.stylize(k,"string")}if(v(B))return L.stylize(""+B,"number");if(_(B))return L.stylize(""+B,"boolean");if(h(B))return L.stylize("null","null")}function d(L){return"["+Error.prototype.toString.call(L)+"]"}function m(L,B,k,Y,re){for(var X=[],ee=0,J=B.length;ee<J;++ee)K(B,String(ee))?X.push(A(L,B,k,Y,String(ee),!0)):X.push("");return re.forEach(function(Q){Q.match(/^\d+$/)||X.push(A(L,B,k,Y,Q,!0))}),X}function A(L,B,k,Y,re,X){var ee,J,Q;if(Q=Object.getOwnPropertyDescriptor(B,re)||{value:B[re]},Q.get?Q.set?J=L.stylize("[Getter/Setter]","special"):J=L.stylize("[Getter]","special"):Q.set&&(J=L.stylize("[Setter]","special")),K(Y,re)||(ee="["+re+"]"),J||(L.seen.indexOf(Q.value)<0?(h(k)?J=g(L,Q.value,null):J=g(L,Q.value,k-1),J.indexOf(`
`)>-1&&(X?J=J.split(`
`).map(function(oe){return"  "+oe}).join(`
`).slice(2):J=`
`+J.split(`
`).map(function(oe){return"   "+oe}).join(`
`))):J=L.stylize("[Circular]","special")),N(ee)){if(X&&re.match(/^\d+$/))return J;ee=JSON.stringify(""+re),ee.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ee=ee.slice(1,-1),ee=L.stylize(ee,"name")):(ee=ee.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ee=L.stylize(ee,"string"))}return ee+": "+J}function O(L,B,k){var Y=L.reduce(function(re,X){return X.indexOf(`
`)>=0,re+X.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Y>60?k[0]+(B===""?"":B+`
 `)+" "+L.join(`,
  `)+" "+k[1]:k[0]+B+" "+L.join(", ")+" "+k[1]}r.types=x0();function E(L){return Array.isArray(L)}r.isArray=E;function _(L){return typeof L=="boolean"}r.isBoolean=_;function h(L){return L===null}r.isNull=h;function f(L){return L==null}r.isNullOrUndefined=f;function v(L){return typeof L=="number"}r.isNumber=v;function b(L){return typeof L=="string"}r.isString=b;function S(L){return typeof L=="symbol"}r.isSymbol=S;function N(L){return L===void 0}r.isUndefined=N;function C(L){return P(L)&&D(L)==="[object RegExp]"}r.isRegExp=C,r.types.isRegExp=C;function P(L){return typeof L=="object"&&L!==null}r.isObject=P;function w(L){return P(L)&&D(L)==="[object Date]"}r.isDate=w,r.types.isDate=w;function j(L){return P(L)&&(D(L)==="[object Error]"||L instanceof Error)}r.isError=j,r.types.isNativeError=j;function R(L){return typeof L=="function"}r.isFunction=R;function I(L){return L===null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||typeof L=="symbol"||typeof L=="undefined"}r.isPrimitive=I,r.isBuffer=P0();function D(L){return Object.prototype.toString.call(L)}function q(L){return L<10?"0"+L.toString(10):L.toString(10)}var $=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function U(){var L=new Date,B=[q(L.getHours()),q(L.getMinutes()),q(L.getSeconds())].join(":");return[L.getDate(),$[L.getMonth()],B].join(" ")}r.log=function(){console.log("%s - %s",U(),r.format.apply(r,arguments))},r.inherits=ed(),r._extend=function(L,B){if(!B||!P(B))return L;for(var k=Object.keys(B),Y=k.length;Y--;)L[k[Y]]=B[k[Y]];return L};function K(L,B){return Object.prototype.hasOwnProperty.call(L,B)}var V=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;r.promisify=function(B){if(typeof B!="function")throw new TypeError('The "original" argument must be of type Function');if(V&&B[V]){var k=B[V];if(typeof k!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(k,V,{value:k,enumerable:!1,writable:!1,configurable:!0}),k}function k(){for(var Y,re,X=new Promise(function(Q,oe){Y=Q,re=oe}),ee=[],J=0;J<arguments.length;J++)ee.push(arguments[J]);ee.push(function(Q,oe){Q?re(Q):Y(oe)});try{B.apply(this,ee)}catch(Q){re(Q)}return X}return Object.setPrototypeOf(k,Object.getPrototypeOf(B)),V&&Object.defineProperty(k,V,{value:k,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(k,t(B))},r.promisify.custom=V;function ne(L,B){if(!L){var k=new Error("Promise was rejected with a falsy value");k.reason=L,L=k}return B(L)}function te(L){if(typeof L!="function")throw new TypeError('The "original" argument must be of type Function');function B(){for(var k=[],Y=0;Y<arguments.length;Y++)k.push(arguments[Y]);var re=k.pop();if(typeof re!="function")throw new TypeError("The last argument must be of type Function");var X=this,ee=function(){return re.apply(X,arguments)};L.apply(this,k).then(function(J){process.nextTick(ee.bind(null,null,J))},function(J){process.nextTick(ne.bind(null,J,ee))})}return Object.setPrototypeOf(B,Object.getPrototypeOf(L)),Object.defineProperties(B,t(L)),B}r.callbackify=te})(go)),go}var of;function cr(){return of||(of=1,(function(r){var e=e0();r.doNothing=t;function t(){}r.hasKeys=function(l){for(var u in l)return!0;return!1};var n;r.hasOwn=n=Object.hasOwn||function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},r.isInteger=Number.isInteger||function(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l},r.isValidVersion=function(l){return l===null?!0:r.isInteger(l)&&l>=0},r.isValidTimestamp=function(l){return r.isValidVersion(l)},r.MAX_SAFE_INTEGER=9007199254740991,r.dig=function(){for(var l=arguments[0],u=1;u<arguments.length;u++){var a=arguments[u];l=n(l,a)?l[a]:u===arguments.length-1?void 0:Object.create(null)}return l},r.digOrCreate=function(){for(var l=arguments[0],u=arguments[arguments.length-1],a=1;a<arguments.length-1;a++){var o=arguments[a];l=n(l,o)?l[o]:l[o]=a===arguments.length-2?u():Object.create(null)}return l},r.digAndRemove=function(){for(var l=arguments[0],u=[l],a=1;a<arguments.length-1;a++){var o=arguments[a];if(!n(l,o))break;l=l[o],u.push(l)}for(var a=u.length-1;a>=0;a--){var c=u[a],o=arguments[a+1],g=c[o];(a===u.length-1||!r.hasKeys(g))&&delete c[o]}},r.supportsPresence=function(l){return l&&typeof l.transformPresence=="function"},r.callEach=function(l,u){var a=!1;return l.forEach(function(o){o&&(o(u),a=!0)}),a},r.truthy=function(l){return!!l},typeof process!="undefined"&&typeof process.nextTick=="function"?r.nextTick=process.nextTick:typeof MessageChannel!="undefined"?r.nextTick=e.messageChannel:r.nextTick=e.setTimeout,r.clone=function(l){return l===void 0?void 0:JSON.parse(JSON.stringify(l))};var i=Object.create(null);Object.getOwnPropertyNames(Object.prototype).forEach(function(l){l!=="__proto__"&&(i[l]=!0)}),r.isDangerousProperty=function(l){return l==="__proto__"||i[l]};try{var s=D0();if(typeof s.inherits!="function")throw new Error("Could not find util.inherits()");r.inherits=s.inherits}catch{try{r.inherits=ed()}catch{throw new Error('If running sharedb in a browser, please install the "inherits" or "util" package')}}})(po)),po}var ga,af;function j0(){return af||(af=1,ga=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!r(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=n;i--!==0;){var l=s[i];if(!r(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}),ga}var va={},lf;function dn(){return lf||(lf=1,va.ACTIONS={initLegacy:"init",handshake:"hs",queryFetch:"qf",querySubscribe:"qs",queryUnsubscribe:"qu",queryUpdate:"q",bulkFetch:"bf",bulkSubscribe:"bs",bulkUnsubscribe:"bu",fetch:"f",fixup:"fixup",subscribe:"s",unsubscribe:"u",op:"op",snapshotFetch:"nf",snapshotFetchByTimestamp:"nt",pingPong:"pp",presence:"p",presenceSubscribe:"ps",presenceUnsubscribe:"pu",presenceRequest:"pr"}),va}var ya,uf;function td(){if(uf)return ya;uf=1;var r=Bn(),e=Nl(),t=Ei(),n=qs(),i=cr(),s=i.clone,l=j0(),u=dn().ACTIONS,a=t.CODES;ya=o;function o(d,m,A){r.EventEmitter.call(this),this.connection=d,this.collection=m,this.id=A,this.version=null,this.type=null,this.data=void 0,this.inflightFetch=[],this.inflightSubscribe=null,this.pendingFetch=[],this.pendingSubscribe=[],this._isInHardRollback=!1,this.subscribed=!1,this.wantSubscribe=!1,this._wantsDestroy=!1,this.inflightOp=null,this.pendingOps=[],this.applyStack=null,this.preventCompose=!1,this.submitSource=!1,this.paused=!1,this._dataStateVersion=0}r.mixin(o),o.prototype.destroy=function(d){this._wantsDestroy=!0;var m=this;m.whenNothingPending(function(){m.wantSubscribe?m.unsubscribe(function(A){if(A)return d?d(A):m.emit("error",A);m.connection._destroyDoc(m),d&&d()}):(m.connection._destroyDoc(m),d&&d())})},o.prototype._setType=function(d){if(typeof d=="string"&&(d=n.map[d]),d)this.type=d;else if(d===null)this.type=d,this._setData(void 0);else{var m=new t(a.ERR_DOC_TYPE_NOT_RECOGNIZED,"Missing type "+d);return this.emit("error",m)}},o.prototype._setData=function(d){this.data=d,this._dataStateVersion++},o.prototype.ingestSnapshot=function(d,m){if(!d)return m&&m();if(typeof d.v!="number"){var A=new t(a.ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return m?m(A):this.emit("error",A)}if(this.type||this.hasWritePending()){if(this.version==null){if(this.hasWritePending())return m&&this.once("no write pending",m);var A=new t(a.ERR_DOC_MISSING_VERSION,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id);return m?m(A):this.emit("error",A)}return d.v>this.version?this.fetch(m):m&&m()}if(this.version>d.v)return m&&m();this.version=d.v;var O=d.type===void 0?n.defaultType:d.type;this._setType(O),this._setData(this.type&&this.type.deserialize?this.type.deserialize(d.data):d.data),this.emit("load"),m&&m()},o.prototype.whenNothingPending=function(d){var m=this;i.nextTick(function(){if(m.hasPending()){m.once("nothing pending",d);return}d()})},o.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe||this.pendingFetch.length||this.pendingSubscribe.length)},o.prototype.hasWritePending=function(){return!!(this.inflightOp||this.pendingOps.length)},o.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),!this.hasPending()&&this.emit("nothing pending"))},o.prototype._emitResponseError=function(d,m){if(d&&d.code===a.ERR_SNAPSHOT_READ_SILENT_REJECTION){this.wantSubscribe=!1,m&&m(),this._emitNothingPending();return}if(m){m(d),this._emitNothingPending();return}this._emitNothingPending(),this.emit("error",d)},o.prototype._handleFetch=function(d,m){var A=this.pendingFetch;this.pendingFetch=[];var O=this.inflightFetch.shift();if(O&&A.unshift(O),A.length&&(O=function(E){i.callEach(A,E)}),d)return this._emitResponseError(d,O);this.ingestSnapshot(m,O),this._emitNothingPending()},o.prototype._handleSubscribe=function(d,m){var A=this.inflightSubscribe;this.inflightSubscribe=null;var O=this.pendingFetch;this.pendingFetch=[],A.callback&&O.push(A.callback);var E;if(O.length&&(E=function(_){i.callEach(O,_)}),d)return this._emitResponseError(d,E);this.subscribed=A.wantSubscribe,this.subscribed?this.ingestSnapshot(m,E):E&&E(),this._emitNothingPending(),this._flushSubscribe()},o.prototype._handleOp=function(d,m){if(d)return d.code===a.ERR_NO_OP&&m.seq===this.inflightOp.seq?this.fetch(this._clearInflightOp.bind(this)):this.inflightOp?this._rollback(d):this.emit("error",d);if(this.inflightOp&&m.src===this.inflightOp.src&&m.seq===this.inflightOp.seq){this._opAcknowledged(m);return}if(this.version==null||m.v>this.version){this.fetch();return}if(!(m.v<this.version)){if(this.inflightOp){var A=p(this.inflightOp,m);if(A)return this._hardRollback(A)}for(var O=0;O<this.pendingOps.length;O++){var A=p(this.pendingOps[O],m);if(A)return this._hardRollback(A)}this.version++;try{this._otApply(m,!1)}catch(E){return this._hardRollback(E)}}},o.prototype._onConnectionStateChanged=function(){this.connection.canSend?(this.flush(),this._resubscribe()):(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,this.inflightSubscribe&&(this.inflightSubscribe.wantSubscribe?(this.pendingSubscribe.unshift(this.inflightSubscribe),this.inflightSubscribe=null):this._handleSubscribe()),this.inflightFetch.length&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch),this.inflightFetch.length=0))},o.prototype._resubscribe=function(){if(!this.pendingSubscribe.length&&this.wantSubscribe)return this.subscribe();var d=this.pendingSubscribe.some(function(m){return m.wantSubscribe});!d&&this.pendingFetch.length&&this.fetch(),this._flushSubscribe()},o.prototype.fetch=function(d){this._fetch({},d)},o.prototype._fetch=function(d,m){this.pendingFetch.push(m);var A=this.connection.canSend&&(d.force||!this.inflightFetch.length);A&&(this.inflightFetch.push(this.pendingFetch.shift()),this.connection.sendFetch(this))},o.prototype.subscribe=function(d){var m=!0;this._queueSubscribe(m,d)},o.prototype.unsubscribe=function(d){var m=!1;this._queueSubscribe(m,d)},o.prototype._queueSubscribe=function(d,m){var A=this.pendingSubscribe[this.pendingSubscribe.length-1]||this.inflightSubscribe,O=A&&A.wantSubscribe===d;if(O){A.callback=c([A.callback,m]);return}this.pendingSubscribe.push({wantSubscribe:!!d,callback:m}),this._flushSubscribe()},o.prototype._flushSubscribe=function(){if(!(this.inflightSubscribe||!this.pendingSubscribe.length)){if(this.connection.canSend){this.inflightSubscribe=this.pendingSubscribe.shift(),this.wantSubscribe=this.inflightSubscribe.wantSubscribe,this.wantSubscribe?this.connection.sendSubscribe(this):(this.subscribed=!1,this.connection.sendUnsubscribe(this));return}if(!this.pendingSubscribe[0].wantSubscribe){this.inflightSubscribe=this.pendingSubscribe.shift();var d=this;i.nextTick(function(){d._handleSubscribe()})}}};function c(d){return d=d.filter(i.truthy),d.length?function(m){i.callEach(d,m)}:null}o.prototype.flush=function(){!this.connection.canSend||this.inflightOp||!this.paused&&this.pendingOps.length&&this._sendOp()};function g(d){delete d.op,delete d.create,delete d.del}function p(d,m){if(d.del)return g(m);if(m.del)return new t(a.ERR_DOC_WAS_DELETED,"Document was deleted");if(m.create)return new t(a.ERR_DOC_ALREADY_CREATED,"Document already created");if("op"in m){if(d.create)return new t(a.ERR_DOC_ALREADY_CREATED,"Document already created");if(d.type.transformX){var A=d.type.transformX(d.op,m.op);d.op=A[0],m.op=A[1]}else{var O=d.type.transform(d.op,m.op,"left"),E=d.type.transform(m.op,d.op,"right");d.op=O,m.op=E}}}return o.prototype._otApply=function(d,m){if("op"in d){if(!this.type)throw new t(a.ERR_DOC_DOES_NOT_EXIST,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);if(this.emit("before op batch",d.op,m),!m&&this.type===n.defaultType&&d.op.length>1){this.applyStack||(this.applyStack=[]);for(var A=this.applyStack.length,O=0;O<d.op.length;O++){var E=d.op[O],_={op:[E]};this.emit("before op",_.op,m,d.src);for(var h=A;h<this.applyStack.length;h++){var f=p(this.applyStack[h],_);if(f)return this._hardRollback(f)}this._setData(this.type.apply(this.data,_.op)),this.emit("op",_.op,m,d.src)}this.emit("op batch",d.op,m),this._popApplyStack(A);return}this.emit("before op",d.op,m,d.src),this._setData(this.type.apply(this.data,d.op)),this.emit("op",d.op,m,d.src),this.emit("op batch",d.op,m);return}if(d.create){this._setType(d.create.type),this.type.deserialize?this.type.createDeserialized?this._setData(this.type.createDeserialized(d.create.data)):this._setData(this.type.deserialize(this.type.create(d.create.data))):this._setData(this.type.create(d.create.data)),this.emit("create",m);return}if(d.del){var v=this.data;this._setType(null),this.emit("del",v,m);return}},o.prototype._sendOp=function(){if(this.connection.canSend){var d=this.connection.id;this.inflightOp||(this.inflightOp=this.pendingOps.shift());var m=this.inflightOp;if(!m){var A=new t(a.ERR_INFLIGHT_OP_MISSING,"No op to send on call to _sendOp");return this.emit("error",A)}if(m.sentAt=Date.now(),m.retries=m.retries==null?0:m.retries+1,m.seq==null){if(this.connection.seq>=i.MAX_SAFE_INTEGER)return this.emit("error",new t(a.ERR_CONNECTION_SEQ_INTEGER_OVERFLOW,"Connection seq has exceeded the max safe integer, maybe from being open for too long"));m.seq=this.connection.seq++}this.connection.sendOp(this,m),m.src==null&&(m.src=d)}},o.prototype._submit=function(d,m,A){if(m||(m=!0),"op"in d){if(!this.type){if(this._isInHardRollback)var O=new t(a.ERR_DOC_IN_HARD_ROLLBACK,"Cannot submit op. Document is performing hard rollback. "+this.collection+"."+this.id);else var O=new t(a.ERR_DOC_DOES_NOT_EXIST,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return A?A(O):this.emit("error",O)}this.type.normalize&&(d.op=this.type.normalize(d.op))}try{this._pushOp(d,m,A),this._otApply(d,m)}catch(_){return this._hardRollback(_)}var E=this;i.nextTick(function(){E.flush()})},o.prototype._pushOp=function(d,m,A){if(d.source=m,this.applyStack)this.applyStack.push(d);else{var O=this._tryCompose(d);if(O){O.callbacks.push(A);return}}d.type=this.type,d.callbacks=[A],this.pendingOps.push(d)},o.prototype._popApplyStack=function(d){if(d>0){this.applyStack.length=d;return}var m=this.applyStack[0];if(this.applyStack=null,!!m){var A=this.pendingOps.indexOf(m);if(A!==-1)for(var O=this.pendingOps.splice(A),A=0;A<O.length;A++){var m=O[A],E=this._tryCompose(m);E?E.callbacks=E.callbacks.concat(m.callbacks):this.pendingOps.push(m)}}},o.prototype._tryCompose=function(d){if(!this.preventCompose){var m=this.pendingOps[this.pendingOps.length-1];if(!(!m||m.sentAt)&&!(this.submitSource&&!l(d.source,m.source))){if(m.create&&"op"in d)return m.create.data=this.type.apply(m.create.data,d.op),m;if("op"in m&&"op"in d&&this.type.compose)return m.op=this.type.compose(m.op,d.op),m}}},o.prototype.submitOp=function(d,m,A){typeof m=="function"&&(A=m,m=null);var O={op:d},E=m&&m.source;this._submit(O,E,A)},o.prototype.create=function(d,m,A,O){if(typeof m=="function"?(O=m,A=null,m=null):typeof A=="function"&&(O=A,A=null),m||(m=n.defaultType.uri),this.type){var E=new t(a.ERR_DOC_ALREADY_CREATED,"Document already exists");return O?O(E):this.emit("error",E)}var _={create:{type:m,data:d}},h=A&&A.source;this._submit(_,h,O)},o.prototype.del=function(d,m){if(typeof d=="function"&&(m=d,d=null),!this.type){var A=new t(a.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");return m?m(A):this.emit("error",A)}var O={del:!0},E=d&&d.source;this._submit(O,E,m)},o.prototype.pause=function(){this.paused=!0},o.prototype.resume=function(){this.paused=!1,this.flush()},o.prototype.toSnapshot=function(){return{v:this.version,data:s(this.data),type:this.type.uri}},o.prototype._opAcknowledged=function(d){if(this.inflightOp.create)this.version=d.v;else if(d.v!==this.version)return e.warn("Invalid version from server. Expected: "+this.version+" Received: "+d.v,d),this.fetch();if(d[u.fixup])for(var m=0;m<d[u.fixup].length;m++){for(var A=d[u.fixup][m],O=0;O<this.pendingOps.length;O++){var E=p(this.pendingOps[m],A);if(E)return this._hardRollback(E)}try{this._otApply(A,!1)}catch(_){return this._hardRollback(_)}}this.version++,this._clearInflightOp()},o.prototype._rollback=function(d){var m=this.inflightOp;if(!("op"in m&&m.type.invert))return this._hardRollback(d);try{m.op=m.type.invert(m.op)}catch{return this._hardRollback(d)}for(var A=0;A<this.pendingOps.length;A++){var O=p(this.pendingOps[A],m);if(O)return this._hardRollback(O)}try{this._otApply(m,!1)}catch(E){return this._hardRollback(E)}if(d.code===a.ERR_OP_SUBMIT_REJECTED)return this._clearInflightOp(null);this._clearInflightOp(d)},o.prototype._hardRollback=function(d){this._isInHardRollback=!0;var m=this.pendingOps,A=this.inflightOp;this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[];var O=this;this._fetch({force:!0},function(E){if(O._isInHardRollback=!1,E&&(e.error("Hard rollback doc fetch failed.",E,A),O.emit("error",new t(a.ERR_HARD_ROLLBACK_FETCH_FAILED,"Hard rollback fetch failed: "+E.message))),d.code===a.ERR_OP_SUBMIT_REJECTED){if(A&&(i.callEach(A.callbacks),A=null),!m.length)return;d=new t(a.ERR_PENDING_OP_REMOVED_BY_OP_SUBMIT_REJECTED,"Discarding pending op because of hard rollback during ERR_OP_SUBMIT_REJECTED")}A&&m.unshift(A);for(var _=!!m.length,h=0;h<m.length;h++)_=i.callEach(m[h].callbacks,d)&&_;d&&!_&&O.emit("error",d)})},o.prototype._clearInflightOp=function(d){var m=this.inflightOp;this.inflightOp=null;var A=i.callEach(m.callbacks,d);if(this.flush(),this._emitNothingPending(),d&&!A)return this.emit("error",d)},ya}var ma,cf;function rd(){if(cf)return ma;cf=1;var r=Bn(),e=dn().ACTIONS,t=cr();ma=n;function n(i,s,l,u,a,o,c){r.EventEmitter.call(this),this.action=i,this.connection=s,this.id=l,this.collection=u,this.query=a,this.results=null,o&&o.results&&(this.results=o.results,delete o.results),this.extra=void 0,this.options=o,this.callback=c,this.ready=!1,this.sent=!1}return r.mixin(n),n.prototype.hasPending=function(){return!this.ready},n.prototype.send=function(){if(this.connection.canSend){var i={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(i.o=this.options),this.results){for(var s=[],l=0;l<this.results.length;l++){var u=this.results[l];s.push([u.id,u.version])}i.r=s}this.connection.send(i),this.sent=!0}},n.prototype.destroy=function(i){this.connection.canSend&&this.action===e.querySubscribe&&this.connection.send({a:e.queryUnsubscribe,id:this.id}),this.connection._destroyQuery(this),i&&t.nextTick(i)},n.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1},n.prototype._handleFetch=function(i,s,l){this.connection._destroyQuery(this),this._handleResponse(i,s,l)},n.prototype._handleSubscribe=function(i,s,l){this._handleResponse(i,s,l)},n.prototype._handleResponse=function(i,s,l){var u=this.callback;if(this.callback=null,i)return this._finishResponse(i,u);if(!s)return this._finishResponse(null,u);var a=this,o=1,c=function(m){if(m)return a._finishResponse(m,u);--o||a._finishResponse(null,u)};if(Array.isArray(s))o+=s.length,this.results=this._ingestSnapshots(s,c),this.extra=l;else for(var g in s){o++;var p=s[g],d=this.connection.get(p.c||this.collection,g);d.ingestSnapshot(p,c)}c()},n.prototype._ingestSnapshots=function(i,s){for(var l=[],u=0;u<i.length;u++){var a=i[u],o=this.connection.get(a.c||this.collection,a.d);o.ingestSnapshot(a,s),l.push(o)}return l},n.prototype._finishResponse=function(i,s){if(this.emit("ready"),this.ready=!0,i)return this.connection._destroyQuery(this),s?s(i):this.emit("error",i);s&&s(null,this.results,this.extra)},n.prototype._handleError=function(i){this.emit("error",i)},n.prototype._handleDiff=function(i){for(var s=0;s<i.length;s++){var l=i[s];l.type==="insert"&&(l.values=this._ingestSnapshots(l.values))}for(var s=0;s<i.length;s++){var l=i[s];switch(l.type){case"insert":var u=l.values;Array.prototype.splice.apply(this.results,[l.index,0].concat(u)),this.emit("insert",u,l.index);break;case"remove":var o=l.howMany||1,a=this.results.splice(l.index,o);this.emit("remove",a,l.index);break;case"move":var o=l.howMany||1,c=this.results.splice(l.from,o);Array.prototype.splice.apply(this.results,[l.to,0].concat(c)),this.emit("move",c,l.from,l.to);break}}this.emit("changed",this.results)},n.prototype._handleExtra=function(i){this.extra=i,this.emit("extra",i)},ma}var ba,ff;function nd(){if(ff)return ba;ff=1;var r=Bn(),e=dn().ACTIONS,t=cr();ba=n;function n(i,s){if(r.EventEmitter.call(this),!s||typeof s!="string")throw new Error("LocalPresence presenceId must be a string");this.presence=i,this.presenceId=s,this.connection=i.connection,this.presenceVersion=0,this.value=null,this._pendingMessages=[],this._callbacksByPresenceVersion=Object.create(null)}return r.mixin(n),n.prototype.submit=function(i,s){this.value=i,this.send(s)},n.prototype.send=function(i){var s=this._message();this._pendingMessages.push(s),this._callbacksByPresenceVersion[s.pv]=i,this._sendPending()},n.prototype.destroy=function(i){var s=this;this.submit(null,function(l){if(l)return s._callbackOrEmit(l,i);delete s.presence.localPresences[s.presenceId],i&&i()})},n.prototype._sendPending=function(){if(this.connection.canSend){var i=this;this._pendingMessages.forEach(function(s){i.connection.send(s)}),this._pendingMessages=[]}},n.prototype._ack=function(i,s){var l=this._getCallback(s);this._callbackOrEmit(i,l)},n.prototype._message=function(){return{a:e.presence,ch:this.presence.channel,id:this.presenceId,p:this.value,pv:this.presenceVersion++}},n.prototype._getCallback=function(i){var s=this._callbacksByPresenceVersion[i];return delete this._callbacksByPresenceVersion[i],s},n.prototype._callbackOrEmit=function(i,s){if(s)return t.nextTick(s,i);i&&this.emit("error",i)},ba}var _a,hf;function id(){if(hf)return _a;hf=1;var r=cr();_a=e;function e(t,n){this.presence=t,this.presenceId=n,this.connection=this.presence.connection,this.value=null,this.presenceVersion=0}return e.prototype.receiveUpdate=function(t){t.pv<this.presenceVersion||(this.value=t.p,this.presenceVersion=t.pv,this.presence._updateRemotePresence(this))},e.prototype.destroy=function(t){delete this.presence._remotePresenceInstances[this.presenceId],delete this.presence.remotePresences[this.presenceId],t&&r.nextTick(t)},_a}function sd(r,...e){return(...t)=>r(...e,...t)}function wi(r){return function(...e){var t=e.pop();return r.call(this,e,t)}}var M0=typeof queueMicrotask=="function"&&queueMicrotask,od=typeof setImmediate=="function"&&setImmediate,ad=typeof process=="object"&&typeof process.nextTick=="function";function ld(r){setTimeout(r,0)}function ud(r){return(e,...t)=>r(()=>e(...t))}var Jn;M0?Jn=queueMicrotask:od?Jn=setImmediate:ad?Jn=process.nextTick:Jn=ld;var Wr=ud(Jn);function ci(r){return Ti(r)?function(...e){const t=e.pop(),n=r.apply(this,e);return df(n,t)}:wi(function(e,t){var n;try{n=r.apply(this,e)}catch(i){return t(i)}if(n&&typeof n.then=="function")return df(n,t);t(null,n)})}function df(r,e){return r.then(t=>{pf(e,null,t)},t=>{pf(e,t&&(t instanceof Error||t.message)?t:new Error(t))})}function pf(r,e,t){try{r(e,t)}catch(n){Wr(i=>{throw i},n)}}function Ti(r){return r[Symbol.toStringTag]==="AsyncFunction"}function k0(r){return r[Symbol.toStringTag]==="AsyncGenerator"}function B0(r){return typeof r[Symbol.asyncIterator]=="function"}function Le(r){if(typeof r!="function")throw new Error("expected a function");return Ti(r)?ci(r):r}function Re(r,e){if(e||(e=r.length),!e)throw new Error("arity is undefined");function t(...n){return typeof n[e-1]=="function"?r.apply(this,n):new Promise((i,s)=>{n[e-1]=(l,...u)=>{if(l)return s(l);i(u.length>1?u:u[0])},r.apply(this,n)})}return t}function cd(r){return function(t,...n){return Re(function(s){var l=this;return r(t,(u,a)=>{Le(u).apply(l,n.concat(a))},s)})}}function xl(r,e,t,n){e=e||[];var i=[],s=0,l=Le(t);return r(e,(u,a,o)=>{var c=s++;l(u,(g,p)=>{i[c]=p,o(g)})},u=>{n(u,i)})}function Ps(r){return r&&typeof r.length=="number"&&r.length>=0&&r.length%1===0}const Ds={};function Jr(r){function e(...t){if(r!==null){var n=r;r=null,n.apply(this,t)}}return Object.assign(e,r),e}function F0(r){return r[Symbol.iterator]&&r[Symbol.iterator]()}function $0(r){var e=-1,t=r.length;return function(){return++e<t?{value:r[e],key:e}:null}}function U0(r){var e=-1;return function(){var n=r.next();return n.done?null:(e++,{value:n.value,key:e})}}function H0(r){var e=r?Object.keys(r):[],t=-1,n=e.length;return function i(){var s=e[++t];return s==="__proto__"?i():t<n?{value:r[s],key:s}:null}}function z0(r){if(Ps(r))return $0(r);var e=F0(r);return e?U0(e):H0(r)}function Qr(r){return function(...e){if(r===null)throw new Error("Callback was already called.");var t=r;r=null,t.apply(this,e)}}function gf(r,e,t,n){let i=!1,s=!1,l=!1,u=0,a=0;function o(){u>=e||l||i||(l=!0,r.next().then(({value:p,done:d})=>{if(!(s||i)){if(l=!1,d){i=!0,u<=0&&n(null);return}u++,t(p,a,c),a++,o()}}).catch(g))}function c(p,d){if(u-=1,!s){if(p)return g(p);if(p===!1){i=!0,s=!0;return}if(d===Ds||i&&u<=0)return i=!0,n(null);o()}}function g(p){s||(l=!1,i=!0,n(p))}o()}var fr=r=>(e,t,n)=>{if(n=Jr(n),r<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if(k0(e))return gf(e,r,t,n);if(B0(e))return gf(e[Symbol.asyncIterator](),r,t,n);var i=z0(e),s=!1,l=!1,u=0,a=!1;function o(g,p){if(!l)if(u-=1,g)s=!0,n(g);else if(g===!1)s=!0,l=!0;else{if(p===Ds||s&&u<=0)return s=!0,n(null);a||c()}}function c(){for(a=!0;u<r&&!s;){var g=i();if(g===null){s=!0,u<=0&&n(null);return}u+=1,t(g.value,g.key,Qr(o))}a=!1}c()};function V0(r,e,t,n){return fr(e)(r,Le(t),n)}var Dn=Re(V0,4);function G0(r,e,t){t=Jr(t);var n=0,i=0,{length:s}=r,l=!1;s===0&&t(null);function u(a,o){a===!1&&(l=!0),l!==!0&&(a?t(a):(++i===s||o===Ds)&&t(null))}for(;n<s;n++)e(r[n],n,Qr(u))}function W0(r,e,t){return Dn(r,1/0,e,t)}function K0(r,e,t){var n=Ps(r)?G0:W0;return n(r,Le(e),t)}var Ft=Re(K0,3);function Y0(r,e,t){return xl(Ft,r,e,t)}var js=Re(Y0,3),fd=cd(js);function Z0(r,e,t){return Dn(r,1,e,t)}var or=Re(Z0,3);function X0(r,e,t){return xl(or,r,e,t)}var Pl=Re(X0,3),hd=cd(Pl);const $n=Symbol("promiseCallback");function jn(){let r,e;function t(n,...i){if(n)return e(n);r(i.length>1?i:i[0])}return t[$n]=new Promise((n,i)=>{r=n,e=i}),t}function Dl(r,e,t){typeof e!="number"&&(t=e,e=null),t=Jr(t||jn());var n=Object.keys(r).length;if(!n)return t(null);e||(e=n);var i={},s=0,l=!1,u=!1,a=Object.create(null),o=[],c=[],g={};Object.keys(r).forEach(h=>{var f=r[h];if(!Array.isArray(f)){p(h,[f]),c.push(h);return}var v=f.slice(0,f.length-1),b=v.length;if(b===0){p(h,f),c.push(h);return}g[h]=b,v.forEach(S=>{if(!r[S])throw new Error("async.auto task `"+h+"` has a non-existent dependency `"+S+"` in "+v.join(", "));m(S,()=>{b--,b===0&&p(h,f)})})}),E(),d();function p(h,f){o.push(()=>O(h,f))}function d(){if(!l){if(o.length===0&&s===0)return t(null,i);for(;o.length&&s<e;){var h=o.shift();h()}}}function m(h,f){var v=a[h];v||(v=a[h]=[]),v.push(f)}function A(h){var f=a[h]||[];f.forEach(v=>v()),d()}function O(h,f){if(!u){var v=Qr((S,...N)=>{if(s--,S===!1){l=!0;return}if(N.length<2&&([N]=N),S){var C={};if(Object.keys(i).forEach(P=>{C[P]=i[P]}),C[h]=N,u=!0,a=Object.create(null),l)return;t(S,C)}else i[h]=N,A(h)});s++;var b=Le(f[f.length-1]);f.length>1?b(i,v):b(v)}}function E(){for(var h,f=0;c.length;)h=c.pop(),f++,_(h).forEach(v=>{--g[v]===0&&c.push(v)});if(f!==n)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function _(h){var f=[];return Object.keys(r).forEach(v=>{const b=r[v];Array.isArray(b)&&b.indexOf(h)>=0&&f.push(v)}),f}return t[$n]}var J0=/^(?:async\s)?(?:function)?\s*(?:\w+\s*)?\(([^)]+)\)(?:\s*{)/,Q0=/^(?:async\s)?\s*(?:\(\s*)?((?:[^)=\s]\s*)*)(?:\)\s*)?=>/,e_=/,/,t_=/(=.+)?(\s*)$/;function r_(r){let e="",t=0,n=r.indexOf("*/");for(;t<r.length;)if(r[t]==="/"&&r[t+1]==="/"){let i=r.indexOf(`
`,t);t=i===-1?r.length:i}else if(n!==-1&&r[t]==="/"&&r[t+1]==="*"){let i=r.indexOf("*/",t);i!==-1?(t=i+2,n=r.indexOf("*/",t)):(e+=r[t],t++)}else e+=r[t],t++;return e}function n_(r){const e=r_(r.toString());let t=e.match(J0);if(t||(t=e.match(Q0)),!t)throw new Error(`could not parse args in autoInject
Source:
`+e);let[,n]=t;return n.replace(/\s/g,"").split(e_).map(i=>i.replace(t_,"").trim())}function dd(r,e){var t={};return Object.keys(r).forEach(n=>{var i=r[n],s,l=Ti(i),u=!l&&i.length===1||l&&i.length===0;if(Array.isArray(i))s=[...i],i=s.pop(),t[n]=s.concat(s.length>0?a:i);else if(u)t[n]=i;else{if(s=n_(i),i.length===0&&!l&&s.length===0)throw new Error("autoInject task functions require explicit parameters.");l||s.pop(),t[n]=s.concat(a)}function a(o,c){var g=s.map(p=>o[p]);g.push(c),Le(i)(...g)}}),Dl(t,e)}class i_{constructor(){this.head=this.tail=null,this.length=0}removeLink(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e}empty(){for(;this.head;)this.shift();return this}insertAfter(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1}insertBefore(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1}unshift(e){this.head?this.insertBefore(this.head,e):vf(this,e)}push(e){this.tail?this.insertAfter(this.tail,e):vf(this,e)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var e=this.head;e;)yield e.data,e=e.next}remove(e){for(var t=this.head;t;){var{next:n}=t;e(t)&&this.removeLink(t),t=n}return this}}function vf(r,e){r.length=1,r.head=r.tail=e}function jl(r,e,t){if(e==null)e=1;else if(e===0)throw new RangeError("Concurrency must not be zero");var n=Le(r),i=0,s=[];const l={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function u(_,h){l[_].push(h)}function a(_,h){const f=(...v)=>{o(_,f),h(...v)};l[_].push(f)}function o(_,h){if(!_)return Object.keys(l).forEach(f=>l[f]=[]);if(!h)return l[_]=[];l[_]=l[_].filter(f=>f!==h)}function c(_,...h){l[_].forEach(f=>f(...h))}var g=!1;function p(_,h,f,v){if(v!=null&&typeof v!="function")throw new Error("task callback must be a function");E.started=!0;var b,S;function N(P,...w){if(P)return f?S(P):b();if(w.length<=1)return b(w[0]);b(w)}var C=E._createTaskItem(_,f?N:v||N);if(h?E._tasks.unshift(C):E._tasks.push(C),g||(g=!0,Wr(()=>{g=!1,E.process()})),f||!v)return new Promise((P,w)=>{b=P,S=w})}function d(_){return function(h,...f){i-=1;for(var v=0,b=_.length;v<b;v++){var S=_[v],N=s.indexOf(S);N===0?s.shift():N>0&&s.splice(N,1),S.callback(h,...f),h!=null&&c("error",h,S.data)}i<=E.concurrency-E.buffer&&c("unsaturated"),E.idle()&&c("drain"),E.process()}}function m(_){return _.length===0&&E.idle()?(Wr(()=>c("drain")),!0):!1}const A=_=>h=>{if(!h)return new Promise((f,v)=>{a(_,(b,S)=>{if(b)return v(b);f(S)})});o(_),u(_,h)};var O=!1,E={_tasks:new i_,_createTaskItem(_,h){return{data:_,callback:h}},*[Symbol.iterator](){yield*E._tasks[Symbol.iterator]()},concurrency:e,payload:t,buffer:e/4,started:!1,paused:!1,push(_,h){return Array.isArray(_)?m(_)?void 0:_.map(f=>p(f,!1,!1,h)):p(_,!1,!1,h)},pushAsync(_,h){return Array.isArray(_)?m(_)?void 0:_.map(f=>p(f,!1,!0,h)):p(_,!1,!0,h)},kill(){o(),E._tasks.empty()},unshift(_,h){return Array.isArray(_)?m(_)?void 0:_.map(f=>p(f,!0,!1,h)):p(_,!0,!1,h)},unshiftAsync(_,h){return Array.isArray(_)?m(_)?void 0:_.map(f=>p(f,!0,!0,h)):p(_,!0,!0,h)},remove(_){E._tasks.remove(_)},process(){if(!O){for(O=!0;!E.paused&&i<E.concurrency&&E._tasks.length;){var _=[],h=[],f=E._tasks.length;E.payload&&(f=Math.min(f,E.payload));for(var v=0;v<f;v++){var b=E._tasks.shift();_.push(b),s.push(b),h.push(b.data)}i+=1,E._tasks.length===0&&c("empty"),i===E.concurrency&&c("saturated");var S=Qr(d(_));n(h,S)}O=!1}},length(){return E._tasks.length},running(){return i},workersList(){return s},idle(){return E._tasks.length+i===0},pause(){E.paused=!0},resume(){E.paused!==!1&&(E.paused=!1,Wr(E.process))}};return Object.defineProperties(E,{saturated:{writable:!1,value:A("saturated")},unsaturated:{writable:!1,value:A("unsaturated")},empty:{writable:!1,value:A("empty")},drain:{writable:!1,value:A("drain")},error:{writable:!1,value:A("error")}}),E}function pd(r,e){return jl(r,1,e)}function gd(r,e,t){return jl(r,e,t)}function s_(r,e,t,n){n=Jr(n);var i=Le(t);return or(r,(s,l,u)=>{i(e,s,(a,o)=>{e=o,u(a)})},s=>n(s,e))}var Kr=Re(s_,4);function Ml(...r){var e=r.map(Le);return function(...t){var n=this,i=t[t.length-1];return typeof i=="function"?t.pop():i=jn(),Kr(e,t,(s,l,u)=>{l.apply(n,s.concat((a,...o)=>{u(a,o)}))},(s,l)=>i(s,...l)),i[$n]}}function vd(...r){return Ml(...r.reverse())}function o_(r,e,t,n){return xl(fr(e),r,t,n)}var Ri=Re(o_,4);function a_(r,e,t,n){var i=Le(t);return Ri(r,e,(s,l)=>{i(s,(u,...a)=>u?l(u):l(u,a))},(s,l)=>{for(var u=[],a=0;a<l.length;a++)l[a]&&(u=u.concat(...l[a]));return n(s,u)})}var Mn=Re(a_,4);function l_(r,e,t){return Mn(r,1/0,e,t)}var ns=Re(l_,3);function u_(r,e,t){return Mn(r,1,e,t)}var is=Re(u_,3);function yd(...r){return function(...e){var t=e.pop();return t(null,...r)}}function Pr(r,e){return(t,n,i,s)=>{var l=!1,u;const a=Le(i);t(n,(o,c,g)=>{a(o,(p,d)=>{if(p||p===!1)return g(p);if(r(d)&&!u)return l=!0,u=e(!0,o),g(null,Ds);g()})},o=>{if(o)return s(o);s(null,l?u:e(!1))})}}function c_(r,e,t){return Pr(n=>n,(n,i)=>i)(Ft,r,e,t)}var ss=Re(c_,3);function f_(r,e,t,n){return Pr(i=>i,(i,s)=>s)(fr(e),r,t,n)}var os=Re(f_,4);function h_(r,e,t){return Pr(n=>n,(n,i)=>i)(fr(1),r,e,t)}var as=Re(h_,3);function md(r){return(e,...t)=>Le(e)(...t,(n,...i)=>{typeof console=="object"&&(n?console.error&&console.error(n):console[r]&&i.forEach(s=>console[r](s)))})}var bd=md("dir");function d_(r,e,t){t=Qr(t);var n=Le(r),i=Le(e),s;function l(a,...o){if(a)return t(a);a!==!1&&(s=o,i(...o,u))}function u(a,o){if(a)return t(a);if(a!==!1){if(!o)return t(null,...s);n(l)}}return u(null,!0)}var fi=Re(d_,3);function _d(r,e,t){const n=Le(e);return fi(r,(...i)=>{const s=i.pop();n(...i,(l,u)=>s(l,!u))},t)}function Ed(r){return(e,t,n)=>r(e,n)}function p_(r,e,t){return Ft(r,Ed(Le(e)),t)}var ls=Re(p_,3);function g_(r,e,t,n){return fr(e)(r,Ed(Le(t)),n)}var hi=Re(g_,4);function v_(r,e,t){return hi(r,1,e,t)}var di=Re(v_,3);function kl(r){return Ti(r)?r:function(...e){var t=e.pop(),n=!0;e.push((...i)=>{n?Wr(()=>t(...i)):t(...i)}),r.apply(this,e),n=!1}}function y_(r,e,t){return Pr(n=>!n,n=>!n)(Ft,r,e,t)}var us=Re(y_,3);function m_(r,e,t,n){return Pr(i=>!i,i=>!i)(fr(e),r,t,n)}var cs=Re(m_,4);function b_(r,e,t){return Pr(n=>!n,n=>!n)(or,r,e,t)}var fs=Re(b_,3);function __(r,e,t,n){var i=new Array(e.length);r(e,(s,l,u)=>{t(s,(a,o)=>{i[l]=!!o,u(a)})},s=>{if(s)return n(s);for(var l=[],u=0;u<e.length;u++)i[u]&&l.push(e[u]);n(null,l)})}function E_(r,e,t,n){var i=[];r(e,(s,l,u)=>{t(s,(a,o)=>{if(a)return u(a);o&&i.push({index:l,value:s}),u(a)})},s=>{if(s)return n(s);n(null,i.sort((l,u)=>l.index-u.index).map(l=>l.value))})}function Ms(r,e,t,n){var i=Ps(e)?__:E_;return i(r,e,Le(t),n)}function A_(r,e,t){return Ms(Ft,r,e,t)}var hs=Re(A_,3);function O_(r,e,t,n){return Ms(fr(e),r,t,n)}var ds=Re(O_,4);function S_(r,e,t){return Ms(or,r,e,t)}var ps=Re(S_,3);function w_(r,e){var t=Qr(e),n=Le(kl(r));function i(s){if(s)return t(s);s!==!1&&n(i)}return i()}var Ad=Re(w_,2);function T_(r,e,t,n){var i=Le(t);return Ri(r,e,(s,l)=>{i(s,(u,a)=>u?l(u):l(u,{key:a,val:s}))},(s,l)=>{for(var u={},{hasOwnProperty:a}=Object.prototype,o=0;o<l.length;o++)if(l[o]){var{key:c}=l[o],{val:g}=l[o];a.call(u,c)?u[c].push(g):u[c]=[g]}return n(s,u)})}var ks=Re(T_,4);function Od(r,e,t){return ks(r,1/0,e,t)}function Sd(r,e,t){return ks(r,1,e,t)}var wd=md("log");function R_(r,e,t,n){n=Jr(n);var i={},s=Le(t);return fr(e)(r,(l,u,a)=>{s(l,u,(o,c)=>{if(o)return a(o);i[u]=c,a(o)})},l=>n(l,i))}var Bs=Re(R_,4);function Td(r,e,t){return Bs(r,1/0,e,t)}function Rd(r,e,t){return Bs(r,1,e,t)}function Nd(r,e=t=>t){var t=Object.create(null),n=Object.create(null),i=Le(r),s=wi((l,u)=>{var a=e(...l);a in t?Wr(()=>u(null,...t[a])):a in n?n[a].push(u):(n[a]=[u],i(...l,(o,...c)=>{o||(t[a]=c);var g=n[a];delete n[a];for(var p=0,d=g.length;p<d;p++)g[p](o,...c)}))});return s.memo=t,s.unmemoized=r,s}var Ji;ad?Ji=process.nextTick:od?Ji=setImmediate:Ji=ld;var Ld=ud(Ji),Bl=Re((r,e,t)=>{var n=Ps(e)?[]:{};r(e,(i,s,l)=>{Le(i)((u,...a)=>{a.length<2&&([a]=a),n[s]=a,l(u)})},i=>t(i,n))},3);function Cd(r,e){return Bl(Ft,r,e)}function qd(r,e,t){return Bl(fr(e),r,t)}function Fl(r,e){var t=Le(r);return jl((n,i)=>{t(n[0],i)},e,1)}class N_{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(e){let t;for(;e>0&&Ea(this.heap[e],this.heap[t=yf(e)]);){let n=this.heap[e];this.heap[e]=this.heap[t],this.heap[t]=n,e=t}}percDown(e){let t;for(;(t=L_(e))<this.heap.length&&(t+1<this.heap.length&&Ea(this.heap[t+1],this.heap[t])&&(t=t+1),!Ea(this.heap[e],this.heap[t]));){let n=this.heap[e];this.heap[e]=this.heap[t],this.heap[t]=n,e=t}}push(e){e.pushCount=++this.pushCount,this.heap.push(e),this.percUp(this.heap.length-1)}unshift(e){return this.heap.push(e)}shift(){let[e]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),e}toArray(){return[...this]}*[Symbol.iterator](){for(let e=0;e<this.heap.length;e++)yield this.heap[e].data}remove(e){let t=0;for(let n=0;n<this.heap.length;n++)e(this.heap[n])||(this.heap[t]=this.heap[n],t++);this.heap.splice(t);for(let n=yf(this.heap.length-1);n>=0;n--)this.percDown(n);return this}}function L_(r){return(r<<1)+1}function yf(r){return(r+1>>1)-1}function Ea(r,e){return r.priority!==e.priority?r.priority<e.priority:r.pushCount<e.pushCount}function Id(r,e){var t=Fl(r,e),{push:n,pushAsync:i}=t;t._tasks=new N_,t._createTaskItem=({data:l,priority:u},a)=>({data:l,priority:u,callback:a});function s(l,u){return Array.isArray(l)?l.map(a=>({data:a,priority:u})):{data:l,priority:u}}return t.push=function(l,u=0,a){return n(s(l,u),a)},t.pushAsync=function(l,u=0,a){return i(s(l,u),a)},delete t.unshift,delete t.unshiftAsync,t}function C_(r,e){if(e=Jr(e),!Array.isArray(r))return e(new TypeError("First argument to race must be an array of functions"));if(!r.length)return e();for(var t=0,n=r.length;t<n;t++)Le(r[t])(e)}var xd=Re(C_,2);function gs(r,e,t,n){var i=[...r].reverse();return Kr(i,e,t,n)}function vs(r){var e=Le(r);return wi(function(n,i){return n.push((s,...l)=>{let u={};if(s&&(u.error=s),l.length>0){var a=l;l.length<=1&&([a]=l),u.value=a}i(null,u)}),e.apply(this,n)})}function Pd(r){var e;return Array.isArray(r)?e=r.map(vs):(e={},Object.keys(r).forEach(t=>{e[t]=vs.call(this,r[t])})),e}function $l(r,e,t,n){const i=Le(t);return Ms(r,e,(s,l)=>{i(s,(u,a)=>{l(u,!a)})},n)}function q_(r,e,t){return $l(Ft,r,e,t)}var Dd=Re(q_,3);function I_(r,e,t,n){return $l(fr(e),r,t,n)}var jd=Re(I_,4);function x_(r,e,t){return $l(or,r,e,t)}var Md=Re(x_,3);function kd(r){return function(){return r}}const ll=5,Bd=0;function ys(r,e,t){var n={times:ll,intervalFunc:kd(Bd)};if(arguments.length<3&&typeof r=="function"?(t=e||jn(),e=r):(P_(n,r),t=t||jn()),typeof e!="function")throw new Error("Invalid arguments for async.retry");var i=Le(e),s=1;function l(){i((u,...a)=>{u!==!1&&(u&&s++<n.times&&(typeof n.errorFilter!="function"||n.errorFilter(u))?setTimeout(l,n.intervalFunc(s-1)):t(u,...a))})}return l(),t[$n]}function P_(r,e){if(typeof e=="object")r.times=+e.times||ll,r.intervalFunc=typeof e.interval=="function"?e.interval:kd(+e.interval||Bd),r.errorFilter=e.errorFilter;else if(typeof e=="number"||typeof e=="string")r.times=+e||ll;else throw new Error("Invalid arguments for async.retry")}function Fd(r,e){e||(e=r,r=null);let t=r&&r.arity||e.length;Ti(e)&&(t+=1);var n=Le(e);return wi((i,s)=>{(i.length<t-1||s==null)&&(i.push(s),s=jn());function l(u){n(...i,u)}return r?ys(r,l,s):ys(l,s),s[$n]})}function $d(r,e){return Bl(or,r,e)}function D_(r,e,t){return Pr(Boolean,n=>n)(Ft,r,e,t)}var ms=Re(D_,3);function j_(r,e,t,n){return Pr(Boolean,i=>i)(fr(e),r,t,n)}var bs=Re(j_,4);function M_(r,e,t){return Pr(Boolean,n=>n)(or,r,e,t)}var _s=Re(M_,3);function k_(r,e,t){var n=Le(e);return js(r,(s,l)=>{n(s,(u,a)=>{if(u)return l(u);l(u,{value:s,criteria:a})})},(s,l)=>{if(s)return t(s);t(null,l.sort(i).map(u=>u.value))});function i(s,l){var u=s.criteria,a=l.criteria;return u<a?-1:u>a?1:0}}var Ud=Re(k_,3);function Hd(r,e,t){var n=Le(r);return wi((i,s)=>{var l=!1,u;function a(){var o=r.name||"anonymous",c=new Error('Callback function "'+o+'" timed out.');c.code="ETIMEDOUT",t&&(c.info=t),l=!0,s(c)}i.push((...o)=>{l||(s(...o),clearTimeout(u))}),u=setTimeout(a,e),n(...i)})}function B_(r){for(var e=Array(r);r--;)e[r]=r;return e}function Fs(r,e,t,n){var i=Le(t);return Ri(B_(r),e,i,n)}function zd(r,e,t){return Fs(r,1/0,e,t)}function Vd(r,e,t){return Fs(r,1,e,t)}function Gd(r,e,t,n){arguments.length<=3&&typeof e=="function"&&(n=t,t=e,e=Array.isArray(r)?[]:{}),n=Jr(n||jn());var i=Le(t);return Ft(r,(s,l,u)=>{i(e,s,l,u)},s=>n(s,e)),n[$n]}function F_(r,e){var t=null,n;return di(r,(i,s)=>{Le(i)((l,...u)=>{if(l===!1)return s(l);u.length<2?[n]=u:n=u,t=l,s(l?null:{})})},()=>e(t,n))}var Wd=Re(F_);function Kd(r){return(...e)=>(r.unmemoized||r)(...e)}function $_(r,e,t){t=Qr(t);var n=Le(e),i=Le(r),s=[];function l(a,...o){if(a)return t(a);s=o,a!==!1&&i(u)}function u(a,o){if(a)return t(a);if(a!==!1){if(!o)return t(null,...s);n(l)}}return i(u)}var pi=Re($_,3);function Yd(r,e,t){const n=Le(r);return pi(i=>n((s,l)=>i(s,!l)),e,t)}function U_(r,e){if(e=Jr(e),!Array.isArray(r))return e(new Error("First argument to waterfall must be an array of functions"));if(!r.length)return e();var t=0;function n(s){var l=Le(r[t++]);l(...s,Qr(i))}function i(s,...l){if(s!==!1){if(s||t===r.length)return e(s,...l);n(l)}}n([])}var Zd=Re(U_),H_={apply:sd,applyEach:fd,applyEachSeries:hd,asyncify:ci,auto:Dl,autoInject:dd,cargo:pd,cargoQueue:gd,compose:vd,concat:ns,concatLimit:Mn,concatSeries:is,constant:yd,detect:ss,detectLimit:os,detectSeries:as,dir:bd,doUntil:_d,doWhilst:fi,each:ls,eachLimit:hi,eachOf:Ft,eachOfLimit:Dn,eachOfSeries:or,eachSeries:di,ensureAsync:kl,every:us,everyLimit:cs,everySeries:fs,filter:hs,filterLimit:ds,filterSeries:ps,forever:Ad,groupBy:Od,groupByLimit:ks,groupBySeries:Sd,log:wd,map:js,mapLimit:Ri,mapSeries:Pl,mapValues:Td,mapValuesLimit:Bs,mapValuesSeries:Rd,memoize:Nd,nextTick:Ld,parallel:Cd,parallelLimit:qd,priorityQueue:Id,queue:Fl,race:xd,reduce:Kr,reduceRight:gs,reflect:vs,reflectAll:Pd,reject:Dd,rejectLimit:jd,rejectSeries:Md,retry:ys,retryable:Fd,seq:Ml,series:$d,setImmediate:Wr,some:ms,someLimit:bs,someSeries:_s,sortBy:Ud,timeout:Hd,times:zd,timesLimit:Fs,timesSeries:Vd,transform:Gd,tryEach:Wd,unmemoize:Kd,until:Yd,waterfall:Zd,whilst:pi,all:us,allLimit:cs,allSeries:fs,any:ms,anyLimit:bs,anySeries:_s,find:ss,findLimit:os,findSeries:as,flatMap:ns,flatMapLimit:Mn,flatMapSeries:is,forEach:ls,forEachSeries:di,forEachLimit:hi,forEachOf:Ft,forEachOfSeries:or,forEachOfLimit:Dn,inject:Kr,foldl:Kr,foldr:gs,select:hs,selectLimit:ds,selectSeries:ps,wrapSync:ci,during:pi,doDuring:fi};const z_=Object.freeze(Object.defineProperty({__proto__:null,all:us,allLimit:cs,allSeries:fs,any:ms,anyLimit:bs,anySeries:_s,apply:sd,applyEach:fd,applyEachSeries:hd,asyncify:ci,auto:Dl,autoInject:dd,cargo:pd,cargoQueue:gd,compose:vd,concat:ns,concatLimit:Mn,concatSeries:is,constant:yd,default:H_,detect:ss,detectLimit:os,detectSeries:as,dir:bd,doDuring:fi,doUntil:_d,doWhilst:fi,during:pi,each:ls,eachLimit:hi,eachOf:Ft,eachOfLimit:Dn,eachOfSeries:or,eachSeries:di,ensureAsync:kl,every:us,everyLimit:cs,everySeries:fs,filter:hs,filterLimit:ds,filterSeries:ps,find:ss,findLimit:os,findSeries:as,flatMap:ns,flatMapLimit:Mn,flatMapSeries:is,foldl:Kr,foldr:gs,forEach:ls,forEachLimit:hi,forEachOf:Ft,forEachOfLimit:Dn,forEachOfSeries:or,forEachSeries:di,forever:Ad,groupBy:Od,groupByLimit:ks,groupBySeries:Sd,inject:Kr,log:wd,map:js,mapLimit:Ri,mapSeries:Pl,mapValues:Td,mapValuesLimit:Bs,mapValuesSeries:Rd,memoize:Nd,nextTick:Ld,parallel:Cd,parallelLimit:qd,priorityQueue:Id,queue:Fl,race:xd,reduce:Kr,reduceRight:gs,reflect:vs,reflectAll:Pd,reject:Dd,rejectLimit:jd,rejectSeries:Md,retry:ys,retryable:Fd,select:hs,selectLimit:ds,selectSeries:ps,seq:Ml,series:$d,setImmediate:Wr,some:ms,someLimit:bs,someSeries:_s,sortBy:Ud,timeout:Hd,times:zd,timesLimit:Fs,timesSeries:Vd,transform:Gd,tryEach:Wd,unmemoize:Kd,until:Yd,waterfall:Zd,whilst:pi,wrapSync:ci},Symbol.toStringTag,{value:"Module"})),V_=Bm(z_);var Aa={exports:{}},mf;function G_(){if(mf)return Aa.exports;mf=1;var r=Aa.exports=function(e,t){if(t||(t=16),e===void 0&&(e=128),e<=0)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),i=2;n===1/0;i*=2)n=Math.log(Math.pow(2,e/i))/Math.log(t)*i;for(var s=n-Math.floor(n),l="",i=0;i<Math.floor(n);i++){var u=Math.floor(Math.random()*t).toString(t);l=u+l}if(s){var a=Math.pow(t,s),u=Math.floor(Math.random()*a).toString(t);l=u+l}var o=parseInt(l,t);return o!==1/0&&o>=Math.pow(2,e)?r(e,t):l};return r.rack=function(e,t,n){var i=function(l){var u=0;do{if(u++>10)if(n)e+=n;else throw new Error("too many ID collisions, use more bits");var a=r(e,t)}while(Object.hasOwnProperty.call(s,a));return s[a]=l,a},s=i.hats={};return i.get=function(l){return i.hats[l]},i.set=function(l,u){return i.hats[l]=u,i},i.bits=e||128,i.base=t||16,i},Aa.exports}var Oa,bf;function Xd(){if(bf)return Oa;bf=1;var r=Bn(),e=nd(),t=id(),n=cr(),i=V_,s=G_(),l=dn().ACTIONS;Oa=u;function u(a,o){if(r.EventEmitter.call(this),!o||typeof o!="string")throw new Error("Presence channel must be provided");this.connection=a,this.channel=o,this.wantSubscribe=!1,this.subscribed=!1,this.remotePresences=Object.create(null),this.localPresences=Object.create(null),this._remotePresenceInstances=Object.create(null),this._subscriptionCallbacksBySeq=Object.create(null),this._wantsDestroy=!1}return r.mixin(u),u.prototype.subscribe=function(a){this._sendSubscriptionAction(!0,a)},u.prototype.unsubscribe=function(a){this._sendSubscriptionAction(!1,a)},u.prototype.create=function(a){if(this._wantsDestroy)throw new Error("Presence is being destroyed");a=a||s();var o=this._createLocalPresence(a);return this.localPresences[a]=o,o},u.prototype.destroy=function(a){this._wantsDestroy=!0;var o=this,c=Object.keys(o.localPresences);this.unsubscribe(function(g){if(g)return o._callbackOrEmit(g,a);var p=Object.keys(o._remotePresenceInstances);i.parallel([function(d){i.each(c,function(m,A){var O=o.localPresences[m];if(!O)return A();O.destroy(A)},d)},function(d){if(!o._wantsDestroy)return d();i.each(p,function(m,A){o._remotePresenceInstances[m].destroy(A)},d)}],function(d){o._wantsDestroy&&delete o.connection._presences[o.channel],o._callbackOrEmit(d,a)})})},u.prototype._sendSubscriptionAction=function(a,o){if(a=!!a,a===this.wantSubscribe){if(!o)return;if(a===this.subscribed)return n.nextTick(o);if(Object.keys(this._subscriptionCallbacksBySeq).length)return this._combineSubscribeCallbackWithLastAdded(o)}this.wantSubscribe=a;var c=this.wantSubscribe?l.presenceSubscribe:l.presenceUnsubscribe,g=this.connection._presenceSeq++;this._subscriptionCallbacksBySeq[g]=o,this.connection.canSend&&this.connection._sendPresenceAction(c,g,this)},u.prototype._requestRemotePresence=function(){this.connection._requestRemotePresence(this.channel)},u.prototype._handleSubscribe=function(a,o){this.wantSubscribe&&(this.subscribed=!0);var c=this._subscriptionCallback(o);this._callbackOrEmit(a,c)},u.prototype._handleUnsubscribe=function(a,o){this.subscribed=!1;var c=this._subscriptionCallback(o);this._callbackOrEmit(a,c)},u.prototype._receiveUpdate=function(a,o){var c=n.dig(this.localPresences,o.id);if(c)return c._ack(a,o.pv);if(a)return this.emit("error",a);var g=this,p=n.digOrCreate(this._remotePresenceInstances,o.id,function(){return g._createRemotePresence(o.id)});p.receiveUpdate(o)},u.prototype._updateRemotePresence=function(a){this.remotePresences[a.presenceId]=a.value,a.value===null&&this._removeRemotePresence(a.presenceId),this.emit("receive",a.presenceId,a.value)},u.prototype._broadcastAllLocalPresence=function(a){if(a)return this.emit("error",a);for(var o in this.localPresences){var c=this.localPresences[o];c.value!==null&&c.send()}},u.prototype._removeRemotePresence=function(a){this._remotePresenceInstances[a].destroy(),delete this._remotePresenceInstances[a],delete this.remotePresences[a]},u.prototype._onConnectionStateChanged=function(){if(!this.connection.canSend){this.subscribed=!1;return}this._resubscribe();for(var a in this.localPresences)this.localPresences[a]._sendPending()},u.prototype._resubscribe=function(){var a=[];for(var o in this._subscriptionCallbacksBySeq){var c=this._subscriptionCallback(o);a.push(c)}if(!this.wantSubscribe)return this._callEachOrEmit(a);var g=this;this.subscribe(function(p){g._callEachOrEmit(a,p)})},u.prototype._subscriptionCallback=function(a){var o=this._subscriptionCallbacksBySeq[a];return delete this._subscriptionCallbacksBySeq[a],o},u.prototype._callbackOrEmit=function(a,o){if(o)return n.nextTick(o,a);a&&this.emit("error",a)},u.prototype._createLocalPresence=function(a){return new e(this,a)},u.prototype._createRemotePresence=function(a){return new t(this,a)},u.prototype._callEachOrEmit=function(a,o){var c=n.callEach(a,o);!c&&o&&this.emit("error",o)},u.prototype._combineSubscribeCallbackWithLastAdded=function(a){var o=Object.keys(this._subscriptionCallbacksBySeq),c=o[o.length-1],g=this._subscriptionCallbacksBySeq[c];if(!g)return this._subscriptionCallbacksBySeq[c]=a;this._subscriptionCallbacksBySeq[c]=function(p){g(p),a(p)}},Oa}var Sa,_f;function W_(){if(_f)return Sa;_f=1;var r=nd(),e=Ei(),t=cr(),n=e.CODES;Sa=i;function i(s,l){r.call(this,s,l),this.collection=this.presence.collection,this.id=this.presence.id,this._doc=this.connection.get(this.collection,this.id),this._emitter=this.connection._docPresenceEmitter,this._isSending=!1,this._docDataVersionByPresenceVersion=Object.create(null),this._opHandler=this._transformAgainstOp.bind(this),this._createOrDelHandler=this._handleCreateOrDel.bind(this),this._loadHandler=this._handleLoad.bind(this),this._destroyHandler=this.destroy.bind(this),this._registerWithDoc()}return i.prototype=Object.create(r.prototype),i.prototype.submit=function(s,l){if(!this._doc.type){if(s===null)return this._callbackOrEmit(null,l);var u=null;return this._doc._isInHardRollback?u={code:n.ERR_DOC_IN_HARD_ROLLBACK,message:"Cannot submit presence. Document is processing hard rollback"}:u={code:n.ERR_DOC_DOES_NOT_EXIST,message:"Cannot submit presence. Document has not been created"},this._callbackOrEmit(u,l)}this._docDataVersionByPresenceVersion[this.presenceVersion]=this._doc._dataStateVersion,r.prototype.submit.call(this,s,l)},i.prototype.destroy=function(s){this._emitter.removeEventListener(this._doc,"op",this._opHandler),this._emitter.removeEventListener(this._doc,"create",this._createOrDelHandler),this._emitter.removeEventListener(this._doc,"del",this._createOrDelHandler),this._emitter.removeEventListener(this._doc,"load",this._loadHandler),this._emitter.removeEventListener(this._doc,"destroy",this._destroyHandler),r.prototype.destroy.call(this,s)},i.prototype._sendPending=function(){if(!this._isSending){this._isSending=!0;var s=this;this._doc.whenNothingPending(function(){s._isSending=!1,s.connection.canSend&&(s._pendingMessages.forEach(function(l){l.t=s._doc.type.uri,l.v=s._doc.version,s.connection.send(l)}),s._pendingMessages=[],s._docDataVersionByPresenceVersion=Object.create(null))})}},i.prototype._registerWithDoc=function(){this._emitter.addEventListener(this._doc,"op",this._opHandler),this._emitter.addEventListener(this._doc,"create",this._createOrDelHandler),this._emitter.addEventListener(this._doc,"del",this._createOrDelHandler),this._emitter.addEventListener(this._doc,"load",this._loadHandler),this._emitter.addEventListener(this._doc,"destroy",this._destroyHandler)},i.prototype._transformAgainstOp=function(s,l){var u=this,a=this._doc._dataStateVersion;this._pendingMessages.forEach(function(o){var c=u._docDataVersionByPresenceVersion[o.pv];if(!(c>=a))try{o.p=u._transformPresence(o.p,s,l),u._docDataVersionByPresenceVersion[o.pv]=a}catch(p){var g=u._getCallback(o.pv);u._callbackOrEmit(p,g)}});try{this.value=this._transformPresence(this.value,s,l)}catch(o){this.emit("error",o)}},i.prototype._handleCreateOrDel=function(){this._pendingMessages.forEach(function(s){s.p=null}),this.value=null},i.prototype._handleLoad=function(){this.value=null,this._pendingMessages=[],this._docDataVersionByPresenceVersion=Object.create(null)},i.prototype._message=function(){var s=r.prototype._message.call(this);return s.c=this.collection,s.d=this.id,s.v=null,s.t=null,s},i.prototype._transformPresence=function(s,l,u){var a=this._doc.type;if(!t.supportsPresence(a))throw new e(n.ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE,"Type does not support presence: "+a.name);return a.transformPresence(s,l,u)},Sa}var wa={},Ef;function K_(){return Ef||(Ef=1,(function(r){var e=qs(),t=Ei(),n=cr(),i=t.CODES;r.checkOp=function(u){if(u==null||typeof u!="object")return new t(i.ERR_OT_OP_BADLY_FORMED,"Op must be an object");if(u.create!=null){if(typeof u.create!="object")return new t(i.ERR_OT_OP_BADLY_FORMED,"Create data must be an object");var a=u.create.type;if(typeof a!="string")return new t(i.ERR_OT_OP_BADLY_FORMED,"Missing create type");var o=e.map[a];if(o==null||typeof o!="object")return new t(i.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type")}else if(u.del!=null){if(u.del!==!0)return new t(i.ERR_OT_OP_BADLY_FORMED,"del value must be true")}else if(!("op"in u))return new t(i.ERR_OT_OP_BADLY_FORMED,"Missing op, create, or del");if(u.src!=null&&typeof u.src!="string")return new t(i.ERR_OT_OP_BADLY_FORMED,"src must be a string");if(u.seq!=null&&typeof u.seq!="number")return new t(i.ERR_OT_OP_BADLY_FORMED,"seq must be a number");if(u.src==null&&u.seq!=null||u.src!=null&&u.seq==null)return new t(i.ERR_OT_OP_BADLY_FORMED,"Both src and seq must be set together");if(u.m!=null&&typeof u.m!="object")return new t(i.ERR_OT_OP_BADLY_FORMED,"op.m must be an object or null")},r.normalizeType=function(u){return e.map[u]&&e.map[u].uri},r.apply=function(u,a){if(typeof u!="object")return new t(i.ERR_APPLY_SNAPSHOT_NOT_PROVIDED,"Missing snapshot");if(u.v!=null&&a.v!=null&&u.v!==a.v)return new t(i.ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT,"Version mismatch");if(a.create){if(u.type)return new t(i.ERR_DOC_ALREADY_CREATED,"Document already exists");var o=a.create,c=e.map[o.type];if(!c)return new t(i.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");try{u.data=c.create(o.data),u.type=c.uri,u.v++}catch(p){return p}}else if(a.del)u.data=void 0,u.type=null,u.v++;else if("op"in a){var g=s(u,a.op);if(g)return g;u.v++}else u.v++};function s(u,a){if(!u.type)return new t(i.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");if(a===void 0)return new t(i.ERR_OT_OP_NOT_PROVIDED,"Missing op");var o=e.map[u.type];if(!o)return new t(i.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");if(o.name==="json0"&&Array.isArray(a))for(var c=0;c<a.length;c++){var g=a[c];if(Array.isArray(g.p))for(var p=0;p<g.p.length;p++){var d=g.p[p];if(n.isDangerousProperty(d))return new t(i.ERR_OT_OP_NOT_APPLIED,"Invalid path segment")}}try{u.data=o.apply(u.data,a)}catch(m){return new t(i.ERR_OT_OP_NOT_APPLIED,m.message)}}r.transform=function(u,a,o){if(a.v!=null&&a.v!==o.v)return new t(i.ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM,"Version mismatch");if(o.del){if(a.create||"op"in a)return new t(i.ERR_DOC_WAS_DELETED,"Document was deleted")}else{if(o.create&&("op"in a||a.create||a.del)||"op"in o&&a.create)return new t(i.ERR_DOC_ALREADY_CREATED,"Document was created remotely");if("op"in o&&"op"in a){if(!u)return new t(i.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");if(typeof u=="string"&&(u=e.map[u],!u))return new t(i.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");try{a.op=u.transform(a.op,o.op,"left")}catch(c){return c}}}a.v!=null&&a.v++},r.applyOps=function(u,a,o){o=o||{};for(var c=0;c<a.length;c++){var g=a[c];if(o._normalizeLegacyJson0Ops)try{l(u,g)}catch{return new t(i.ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED,"Cannot normalize legacy json0 op")}u.v=g.v;var p=r.apply(u,g);if(p)return p}},r.transformPresence=function(u,a,o){var c=this.checkOp(a);if(c)return c;var g=u.t;if(typeof g=="string"&&(g=e.map[g]),!g)return{code:i.ERR_DOC_TYPE_NOT_RECOGNIZED,message:"Unknown type"};if(!n.supportsPresence(g))return{code:i.ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE,message:"Type does not support presence"};if(a.create||a.del){u.p=null,u.v++;return}try{u.p=u.p===null?null:g.transformPresence(u.p,a.op,o)}catch(p){return{code:i.ERR_PRESENCE_TRANSFORM_FAILED,message:p.message||p}}u.v++};function l(u,a){if(u.type===e.defaultType.uri){var o=a.op;if(o){var c=u.data;o.length>1&&(c=n.clone(c));for(var g=0;g<o.length;g++){var p=o[g];typeof p.lm=="string"&&(p.lm=+p.lm);for(var d=p.p,m=c,A=0;A<d.length;A++){var O=d[A];Object.prototype.toString.call(m)=="[object Array]"?d[A]=+O:m.constructor===Object&&(d[A]=O.toString()),m=m[O]}g<o.length-1&&(c=e.defaultType.apply(c,[p]))}}}}})(wa)),wa}var Ta,Af;function Y_(){if(Af)return Ta;Af=1;var r=id(),e=K_();Ta=t;function t(n,i){r.call(this,n,i),this.collection=this.presence.collection,this.id=this.presence.id,this.src=null,this.presenceVersion=null,this._doc=this.connection.get(this.collection,this.id),this._emitter=this.connection._docPresenceEmitter,this._pending=null,this._opCache=null,this._pendingSetPending=!1,this._opHandler=this._handleOp.bind(this),this._createDelHandler=this._handleCreateDel.bind(this),this._loadHandler=this._handleLoad.bind(this),this._registerWithDoc()}return t.prototype=Object.create(r.prototype),t.prototype.receiveUpdate=function(n){this._pending&&n.pv<this._pending.pv||(this.src=n.src,this._pending=n,this._setPendingPresence())},t.prototype.destroy=function(n){this._emitter.removeEventListener(this._doc,"op",this._opHandler),this._emitter.removeEventListener(this._doc,"create",this._createDelHandler),this._emitter.removeEventListener(this._doc,"del",this._createDelHandler),this._emitter.removeEventListener(this._doc,"load",this._loadHandler),r.prototype.destroy.call(this,n)},t.prototype._registerWithDoc=function(){this._emitter.addEventListener(this._doc,"op",this._opHandler),this._emitter.addEventListener(this._doc,"create",this._createDelHandler),this._emitter.addEventListener(this._doc,"del",this._createDelHandler),this._emitter.addEventListener(this._doc,"load",this._loadHandler)},t.prototype._setPendingPresence=function(){if(!this._pendingSetPending){this._pendingSetPending=!0;var n=this;this._doc.whenNothingPending(function(){if(n._pendingSetPending=!1,!!n._pending){if(n._pending.pv<n.presenceVersion)return n._pending=null;if(n._pending.v>n._doc.version)return n._doc.fetch();n._catchUpStalePresence()&&(n.value=n._pending.p,n.presenceVersion=n._pending.pv,n._pending=null,n.presence._updateRemotePresence(n))}})}},t.prototype._handleOp=function(n,i,s){var l=s===this.src;this._transformAgainstOp(n,l),this._cacheOp(n,l),this._setPendingPresence()},r.prototype._handleCreateDel=function(){this._cacheOp(null),this._setPendingPresence()},r.prototype._handleLoad=function(){this.value=null,this._pending=null,this._opCache=null,this.presence._updateRemotePresence(this)},t.prototype._transformAgainstOp=function(n,i){if(this.value){try{this.value=this._doc.type.transformPresence(this.value,n,i)}catch(s){return this.presence.emit("error",s)}this.presence._updateRemotePresence(this)}},t.prototype._catchUpStalePresence=function(){if(this._pending.v>=this._doc.version)return!0;if(!this._opCache)return this._startCachingOps(),this._doc.fetch(),this.presence._requestRemotePresence(),!1;for(;this._opCache[this._pending.v];){var n=this._opCache[this._pending.v],i=n.op,s=n.isOwnOp;i===null?(this._pending.p=null,this._pending.v++):e.transformPresence(this._pending,i,s)}var l=this._pending.v>=this._doc.version;return l&&this._stopCachingOps(),l},t.prototype._startCachingOps=function(){this._opCache=[]},t.prototype._stopCachingOps=function(){this._opCache=null},t.prototype._cacheOp=function(n,i){this._opCache&&(n=n?{op:n}:null,this._opCache[this._doc.version-1]={op:n,isOwnOp:i})},Ta}var Ra,Of;function Z_(){if(Of)return Ra;Of=1;var r=Xd(),e=W_(),t=Y_();function n(i,s,l){var u=n.channel(s,l);r.call(this,i,u),this.collection=s,this.id=l}return Ra=n,n.prototype=Object.create(r.prototype),n.channel=function(i,s){return i+"."+s},n.prototype._createLocalPresence=function(i){return new e(this,i)},n.prototype._createRemotePresence=function(i){return new t(this,i)},Ra}var Na,Sf;function X_(){if(Sf)return Na;Sf=1,Na=r;function r(e,t,n,i,s){this.id=e,this.v=t,this.type=n,this.data=i,this.m=s}return Na}var La,wf;function Jd(){if(wf)return La;wf=1;var r=X_(),e=Bn();La=t;function t(n,i,s,l,u){if(e.EventEmitter.call(this),typeof u!="function")throw new Error("Callback is required for SnapshotRequest");this.requestId=i,this.connection=n,this.id=l,this.collection=s,this.callback=u,this.sent=!1}return e.mixin(t),t.prototype.send=function(){this.connection.canSend&&(this.connection.send(this._message()),this.sent=!0)},t.prototype._onConnectionStateChanged=function(){this.connection.canSend?this.sent||this.send():this.sent=!1},t.prototype._handleResponse=function(n,i){if(this.emit("ready"),n)return this.callback(n);var s=i.meta?i.meta:null,l=new r(this.id,i.v,i.type,i.data,s);this.callback(null,l)},La}var Ca,Tf;function J_(){if(Tf)return Ca;Tf=1;var r=Jd(),e=cr(),t=dn().ACTIONS;Ca=n;function n(i,s,l,u,a,o){if(r.call(this,i,s,l,u,o),!e.isValidVersion(a))throw new Error("Snapshot version must be a positive integer or null");this.version=a}return n.prototype=Object.create(r.prototype),n.prototype._message=function(){return{a:t.snapshotFetch,id:this.requestId,c:this.collection,d:this.id,v:this.version}},Ca}var qa,Rf;function Q_(){if(Rf)return qa;Rf=1;var r=Jd(),e=cr(),t=dn().ACTIONS;qa=n;function n(i,s,l,u,a,o){if(r.call(this,i,s,l,u,o),!e.isValidTimestamp(a))throw new Error("Snapshot timestamp must be a positive integer or null");this.timestamp=a}return n.prototype=Object.create(r.prototype),n.prototype._message=function(){return{a:t.snapshotFetchByTimestamp,id:this.requestId,c:this.collection,d:this.id,ts:this.timestamp}},qa}var Ia,Nf;function eE(){if(Nf)return Ia;Nf=1;var r=cr(),e=Hh().EventEmitter,t=["create","del","destroy","load","op"];Ia=n;function n(){this._docs=Object.create(null),this._forwarders=Object.create(null),this._emitters=Object.create(null)}return n.prototype.addEventListener=function(i,s,l){this._registerDoc(i);var u=r.dig(this._emitters,i.collection,i.id);u.on(s,l)},n.prototype.removeEventListener=function(i,s,l){var u=r.dig(this._emitters,i.collection,i.id);u&&(u.off(s,l),u._eventsCount===1&&this._unregisterDoc(i))},n.prototype._registerDoc=function(i){var s=!0;if(r.digOrCreate(this._docs,i.collection,i.id,function(){return s=!1,i}),!s){var l=r.digOrCreate(this._emitters,i.collection,i.id,function(){var a=new e;return a.setMaxListeners(1e3),a}),u=this;t.forEach(function(a){var o=r.digOrCreate(u._forwarders,i.collection,i.id,a,function(){return l.emit.bind(l,a)});i.on(a,o)}),this.addEventListener(i,"destroy",this._unregisterDoc.bind(this,i))}},n.prototype._unregisterDoc=function(i){var s=r.dig(this._forwarders,i.collection,i.id);for(var l in s)i.off(l,s[l]);var u=r.dig(this._emitters,i.collection,i.id);u.removeAllListeners(),r.digAndRemove(this._forwarders,i.collection,i.id),r.digAndRemove(this._emitters,i.collection,i.id),r.digAndRemove(this._docs,i.collection,i.id)},Ia}var xa,Lf;function tE(){if(Lf)return xa;Lf=1,xa={major:1,minor:2,checkAtLeast:r};function r(t,n){return t=e(t),n=e(n),t.major>n.major?!0:t.major===n.major&&t.minor>=n.minor}function e(t){if(typeof t=="string"){var n=t.split(".");t={major:n[0],minor:n[1]}}return{major:+(t.protocol||t.major||0),minor:+(t.protocolMinor||t.minor||0)}}return xa}var Pa,Cf;function rE(){if(Cf)return Pa;Cf=1;var r=td(),e=rd(),t=Xd(),n=Z_(),i=J_(),s=Q_(),l=Bn(),u=Ei(),a=dn().ACTIONS,o=qs(),c=cr(),g=Nl(),p=eE(),d=tE(),m=u.CODES;function A(f){return f.readyState===0||f.readyState===1?"connecting":"disconnected"}Pa=O;function O(f){l.EventEmitter.call(this),this.collections=Object.create(null),this.nextQueryId=1,this.nextSnapshotRequestId=1,this.queries=Object.create(null),this._presences=Object.create(null),this._docPresenceEmitter=new p,this._snapshotRequests=Object.create(null),this.seq=1,this._presenceSeq=1,this.id=null,this.agent=null,this.debug=!1,this.state=A(f),this.bindToSocket(f)}l.mixin(O),O.prototype.bindToSocket=function(f){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=f;var v=A(f);this._setState(v),this.canSend=!1;var b=this;f.onmessage=function(S){try{var N=typeof S.data=="string"?JSON.parse(S.data):S.data}catch{g.warn("Failed to parse message",S);return}b.debug&&g.info("RECV",JSON.stringify(N));var C={data:N};if(b.emit("receive",C),!!C.data)try{b.handleMessage(C.data)}catch(P){c.nextTick(function(){b.emit("error",P)})}},f.readyState===1&&b._initializeHandshake(),f.onopen=function(){b._setState("connecting"),b._initializeHandshake()},f.onerror=function(S){b.emit("connection error",S)},f.onclose=function(S){S==="closed"||S==="Closed"?b._setState("closed",S):S==="stopped"||S==="Stopped by server"?b._setState("stopped",S):b._setState("disconnected",S)}},O.prototype.handleMessage=function(f){var v=null;switch(f.error&&(v=E(f.error,f),delete f.error),f.a){case a.initLegacy:return this._handleLegacyInit(f);case a.handshake:return this._handleHandshake(v,f);case a.queryFetch:var b=this.queries[f.id];b&&b._handleFetch(v,f.data,f.extra);return;case a.querySubscribe:var b=this.queries[f.id];b&&b._handleSubscribe(v,f.data,f.extra);return;case a.queryUnsubscribe:return;case a.queryUpdate:var b=this.queries[f.id];if(!b)return;if(v)return b._handleError(v);f.diff&&b._handleDiff(f.diff),c.hasOwn(f,"extra")&&b._handleExtra(f.extra);return;case a.bulkFetch:return this._handleBulkMessage(v,f,"_handleFetch");case a.bulkSubscribe:case a.bulkUnsubscribe:return this._handleBulkMessage(v,f,"_handleSubscribe");case a.snapshotFetch:case a.snapshotFetchByTimestamp:return this._handleSnapshotFetch(v,f);case a.fetch:var S=this.getExisting(f.c,f.d);S&&S._handleFetch(v,f.data);return;case a.subscribe:case a.unsubscribe:var S=this.getExisting(f.c,f.d);S&&S._handleSubscribe(v,f.data);return;case a.op:var S=this.getExisting(f.c,f.d);S&&S._handleOp(v,f);return;case a.presence:return this._handlePresence(v,f);case a.presenceSubscribe:return this._handlePresenceSubscribe(v,f);case a.presenceUnsubscribe:return this._handlePresenceUnsubscribe(v,f);case a.presenceRequest:return this._handlePresenceRequest(v,f);case a.pingPong:return this._handlePingPong(v);default:g.warn("Ignoring unrecognized message",f)}};function E(f,v){var b=new Error(f.message);return b.code=f.code,v&&(b.data=v),b}O.prototype._handleBulkMessage=function(f,v,b){if(v.data)for(var S in v.data){var N=v.data[S],C=this.getExisting(v.c,S);C&&(f?C[b](f):N.error?C[b](E(N.error)):C[b](null,N))}else if(Array.isArray(v.b))for(var P=0;P<v.b.length;P++){var S=v.b[P],C=this.getExisting(v.c,S);C&&C[b](f)}else if(v.b)for(var S in v.b){var C=this.getExisting(v.c,S);C&&C[b](f)}else g.error("Invalid bulk message",v)},O.prototype._reset=function(){this.agent=null},O.prototype._setState=function(f,v){if(this.state!==f){if(f==="connecting"&&this.state!=="disconnected"&&this.state!=="stopped"&&this.state!=="closed"||f==="connected"&&this.state!=="connecting"){var b=new u(m.ERR_CONNECTION_STATE_TRANSITION_INVALID,"Cannot transition directly from "+this.state+" to "+f);return this.emit("error",b)}this.state=f,this.canSend=f==="connected",(f==="disconnected"||f==="stopped"||f==="closed")&&this._reset(),this.startBulk();for(var S in this.queries){var N=this.queries[S];N._onConnectionStateChanged()}for(var C in this.collections){var P=this.collections[C];for(var S in P)P[S]._onConnectionStateChanged()}for(var w in this._presences)this._presences[w]._onConnectionStateChanged();for(var S in this._snapshotRequests){var j=this._snapshotRequests[S];j._onConnectionStateChanged()}this.endBulk(),this.emit(f,v),this.emit("state",f,v)}},O.prototype.startBulk=function(){this.bulk||(this.bulk=Object.create(null))},O.prototype.endBulk=function(){if(this.bulk)for(var f in this.bulk){var v=this.bulk[f];this._sendBulk("f",f,v.f),this._sendBulk("s",f,v.s),this._sendBulk("u",f,v.u)}this.bulk=null},O.prototype._sendBulk=function(f,v,b){if(b){var S=[],N=Object.create(null),C=0,P;for(var w in b){var j=b[w];j==null?S.push(w):(N[w]=j,P=w,C++)}if(S.length===1){var w=S[0];this.send({a:f,c:v,d:w})}else S.length&&this.send({a:"b"+f,c:v,b:S});if(C===1){var R=N[P];this.send({a:f,c:v,d:P,v:R})}else C&&this.send({a:"b"+f,c:v,b:N})}},O.prototype._sendActions=function(f,v,b){if(this._addDoc(v),this.bulk){var S=this.bulk[v.collection]||(this.bulk[v.collection]=Object.create(null)),N=S[f]||(S[f]=Object.create(null)),C=c.hasOwn(N,v.id);return N[v.id]=b,C}else{var P={a:f,c:v.collection,d:v.id,v:b};this.send(P)}},O.prototype.sendFetch=function(f){return this._sendActions(a.fetch,f,f.version)},O.prototype.sendSubscribe=function(f){return this._sendActions(a.subscribe,f,f.version)},O.prototype.sendUnsubscribe=function(f){return this._sendActions(a.unsubscribe,f)},O.prototype.sendOp=function(f,v){this._addDoc(f);var b={a:a.op,c:f.collection,d:f.id,v:f.version,src:v.src,seq:v.seq,x:{}};"op"in v&&(b.op=v.op),v.create&&(b.create=v.create),v.del&&(b.del=v.del),f.submitSource&&(b.x.source=v.source),this.send(b)},O.prototype.send=function(f){this.debug&&g.info("SEND",JSON.stringify(f)),this.emit("send",f),this.socket.send(JSON.stringify(f))},O.prototype.ping=function(){if(!this.canSend)throw new u(m.ERR_CANNOT_PING_OFFLINE,"Socket must be CONNECTED to ping");var f={a:a.pingPong};this.send(f)},O.prototype.close=function(){this.socket.close()},O.prototype.getExisting=function(f,v){if(this.collections[f])return this.collections[f][v]},O.prototype.get=function(f,v){var b=this.collections[f]||(this.collections[f]=Object.create(null)),S=b[v];return S||(S=b[v]=new r(this,f,v),this.emit("doc",S)),S._wantsDestroy=!1,S},O.prototype._destroyDoc=function(f){f._wantsDestroy&&(c.digAndRemove(this.collections,f.collection,f.id),f.emit("destroy"))},O.prototype._addDoc=function(f){var v=this.collections[f.collection];v||(v=this.collections[f.collection]=Object.create(null)),v[f.id]!==f&&(v[f.id]=f)},O.prototype._createQuery=function(f,v,b,S,N){var C=this.nextQueryId++,P=new e(f,this,C,v,b,S,N);return this.queries[C]=P,P.send(),P},O.prototype._destroyQuery=function(f){delete this.queries[f.id]},O.prototype.createFetchQuery=function(f,v,b,S){return this._createQuery(a.queryFetch,f,v,b,S)},O.prototype.createSubscribeQuery=function(f,v,b,S){return this._createQuery(a.querySubscribe,f,v,b,S)},O.prototype.hasPending=function(){return!!(this._firstDoc(_)||this._firstQuery(_)||this._firstSnapshotRequest())};function _(f){return f.hasPending()}O.prototype.hasWritePending=function(){return!!this._firstDoc(h)};function h(f){return f.hasWritePending()}return O.prototype.whenNothingPending=function(f){var v=this._firstDoc(_);if(v){v.once("nothing pending",this._nothingPendingRetry(f));return}var b=this._firstQuery(_);if(b){b.once("ready",this._nothingPendingRetry(f));return}var S=this._firstSnapshotRequest();if(S){S.once("ready",this._nothingPendingRetry(f));return}c.nextTick(f)},O.prototype._nothingPendingRetry=function(f){var v=this;return function(){c.nextTick(function(){v.whenNothingPending(f)})}},O.prototype._firstDoc=function(f){for(var v in this.collections){var b=this.collections[v];for(var S in b){var N=b[S];if(f(N))return N}}},O.prototype._firstQuery=function(f){for(var v in this.queries){var b=this.queries[v];if(f(b))return b}},O.prototype._firstSnapshotRequest=function(){for(var f in this._snapshotRequests)return this._snapshotRequests[f]},O.prototype.fetchSnapshot=function(f,v,b,S){typeof b=="function"&&(S=b,b=null);var N=this.nextSnapshotRequestId++,C=new i(this,N,f,v,b,S);this._snapshotRequests[C.requestId]=C,C.send()},O.prototype.fetchSnapshotByTimestamp=function(f,v,b,S){typeof b=="function"&&(S=b,b=null);var N=this.nextSnapshotRequestId++,C=new s(this,N,f,v,b,S);this._snapshotRequests[C.requestId]=C,C.send()},O.prototype._handleSnapshotFetch=function(f,v){var b=this._snapshotRequests[v.id];b&&(delete this._snapshotRequests[v.id],b._handleResponse(f,v))},O.prototype._handleLegacyInit=function(f){if(d.checkAtLeast(f,"1.1"))return this._initializeHandshake();this._initialize(f)},O.prototype._initializeHandshake=function(){this.send({a:a.handshake,id:this.id,protocol:d.major,protocolMinor:d.minor})},O.prototype._handleHandshake=function(f,v){if(f)return this.emit("error",f);this._initialize(v)},O.prototype._handlePingPong=function(f){if(f)return this.emit("error",f);this.emit("pong")},O.prototype._initialize=function(f){if(this.state==="connecting"){if(f.protocol!==d.major)return this.emit("error",new u(m.ERR_PROTOCOL_VERSION_NOT_SUPPORTED,"Unsupported protocol version: "+f.protocol));if(o.map[f.type]!==o.defaultType)return this.emit("error",new u(m.ERR_DEFAULT_TYPE_MISMATCH,f.type+" does not match the server default type"));if(typeof f.id!="string")return this.emit("error",new u(m.ERR_CLIENT_ID_BADLY_FORMED,"Client id must be a string"));this.id=f.id,this._setState("connected")}},O.prototype.getPresence=function(f){var v=this,b=c.digOrCreate(this._presences,f,function(){return new t(v,f)});return b._wantsDestroy=!1,b},O.prototype.getDocPresence=function(f,v){var b=n.channel(f,v),S=this,N=c.digOrCreate(this._presences,b,function(){return new n(S,f,v)});return N._wantsDestroy=!1,N},O.prototype._sendPresenceAction=function(f,v,b){this._addPresence(b);var S={a:f,ch:b.channel,seq:v};return this.send(S),S.seq},O.prototype._addPresence=function(f){c.digOrCreate(this._presences,f.channel,function(){return f})},O.prototype._requestRemotePresence=function(f){this.send({a:a.presenceRequest,ch:f})},O.prototype._handlePresenceSubscribe=function(f,v){var b=c.dig(this._presences,v.ch);b&&b._handleSubscribe(f,v.seq)},O.prototype._handlePresenceUnsubscribe=function(f,v){var b=c.dig(this._presences,v.ch);b&&b._handleUnsubscribe(f,v.seq)},O.prototype._handlePresence=function(f,v){var b=c.dig(this._presences,v.ch);b&&b._receiveUpdate(f,v)},O.prototype._handlePresenceRequest=function(f,v){var b=c.dig(this._presences,v.ch);b&&b._broadcastAllLocalPresence(f,v)},Pa}var qf;function nE(){return qf||(qf=1,Ur.Connection=rE(),Ur.Doc=td(),Ur.Error=Ei(),Ur.Query=rd(),Ur.types=qs(),Ur.logger=Nl()),Ur}var iE=nE();const Qd=vi(iE);var Da,If;function sE(){if(If)return Da;If=1;var r=-1,e=1,t=0;function n(h,f,v,b){if(h===f)return h?[[t,h]]:[];if(v!=null){var S=E(h,f,v);if(S)return S}var N=u(h,f),C=h.substring(0,N);h=h.substring(N),f=f.substring(N),N=a(h,f);var P=h.substring(h.length-N);h=h.substring(0,h.length-N),f=f.substring(0,f.length-N);var w=i(h,f);return C&&w.unshift([t,C]),P&&w.push([t,P]),c(w,b),w}function i(h,f){var v;if(!h)return[[e,f]];if(!f)return[[r,h]];var b=h.length>f.length?h:f,S=h.length>f.length?f:h,N=b.indexOf(S);if(N!==-1)return v=[[e,b.substring(0,N)],[t,S],[e,b.substring(N+S.length)]],h.length>f.length&&(v[0][0]=v[2][0]=r),v;if(S.length===1)return[[r,h],[e,f]];var C=o(h,f);if(C){var P=C[0],w=C[1],j=C[2],R=C[3],I=C[4],D=n(P,j),q=n(w,R);return D.concat([[t,I]],q)}return s(h,f)}function s(h,f){for(var v=h.length,b=f.length,S=Math.ceil((v+b)/2),N=S,C=2*S,P=new Array(C),w=new Array(C),j=0;j<C;j++)P[j]=-1,w[j]=-1;P[N+1]=0,w[N+1]=0;for(var R=v-b,I=R%2!==0,D=0,q=0,$=0,U=0,K=0;K<S;K++){for(var V=-K+D;V<=K-q;V+=2){var ne=N+V,te;V===-K||V!==K&&P[ne-1]<P[ne+1]?te=P[ne+1]:te=P[ne-1]+1;for(var L=te-V;te<v&&L<b&&h.charAt(te)===f.charAt(L);)te++,L++;if(P[ne]=te,te>v)q+=2;else if(L>b)D+=2;else if(I){var B=N+R-V;if(B>=0&&B<C&&w[B]!==-1){var k=v-w[B];if(te>=k)return l(h,f,te,L)}}}for(var Y=-K+$;Y<=K-U;Y+=2){var B=N+Y,k;Y===-K||Y!==K&&w[B-1]<w[B+1]?k=w[B+1]:k=w[B-1]+1;for(var re=k-Y;k<v&&re<b&&h.charAt(v-k-1)===f.charAt(b-re-1);)k++,re++;if(w[B]=k,k>v)U+=2;else if(re>b)$+=2;else if(!I){var ne=N+R-Y;if(ne>=0&&ne<C&&P[ne]!==-1){var te=P[ne],L=N+te-ne;if(k=v-k,te>=k)return l(h,f,te,L)}}}}return[[r,h],[e,f]]}function l(h,f,v,b){var S=h.substring(0,v),N=f.substring(0,b),C=h.substring(v),P=f.substring(b),w=n(S,N),j=n(C,P);return w.concat(j)}function u(h,f){if(!h||!f||h.charAt(0)!==f.charAt(0))return 0;for(var v=0,b=Math.min(h.length,f.length),S=b,N=0;v<S;)h.substring(N,S)==f.substring(N,S)?(v=S,N=v):b=S,S=Math.floor((b-v)/2+v);return g(h.charCodeAt(S-1))&&S--,S}function a(h,f){if(!h||!f||h.slice(-1)!==f.slice(-1))return 0;for(var v=0,b=Math.min(h.length,f.length),S=b,N=0;v<S;)h.substring(h.length-S,h.length-N)==f.substring(f.length-S,f.length-N)?(v=S,N=v):b=S,S=Math.floor((b-v)/2+v);return p(h.charCodeAt(h.length-S))&&S--,S}function o(h,f){var v=h.length>f.length?h:f,b=h.length>f.length?f:h;if(v.length<4||b.length*2<v.length)return null;function S(q,$,U){for(var K=q.substring(U,U+Math.floor(q.length/4)),V=-1,ne="",te,L,B,k;(V=$.indexOf(K,V+1))!==-1;){var Y=u(q.substring(U),$.substring(V)),re=a(q.substring(0,U),$.substring(0,V));ne.length<re+Y&&(ne=$.substring(V-re,V)+$.substring(V,V+Y),te=q.substring(0,U-re),L=q.substring(U+Y),B=$.substring(0,V-re),k=$.substring(V+Y))}return ne.length*2>=q.length?[te,L,B,k,ne]:null}var N=S(v,b,Math.ceil(v.length/4)),C=S(v,b,Math.ceil(v.length/2)),P;if(!N&&!C)return null;C?N?P=N[4].length>C[4].length?N:C:P=C:P=N;var w,j,R,I;h.length>f.length?(w=P[0],j=P[1],R=P[2],I=P[3]):(R=P[0],I=P[1],w=P[2],j=P[3]);var D=P[4];return[w,j,R,I,D]}function c(h,f){h.push([t,""]);for(var v=0,b=0,S=0,N="",C="",P;v<h.length;){if(v<h.length-1&&!h[v][1]){h.splice(v,1);continue}switch(h[v][0]){case e:S++,C+=h[v][1],v++;break;case r:b++,N+=h[v][1],v++;break;case t:var w=v-S-b-1;if(f){if(w>=0&&m(h[w][1])){var j=h[w][1].slice(-1);if(h[w][1]=h[w][1].slice(0,-1),N=j+N,C=j+C,!h[w][1]){h.splice(w,1),v--;var R=w-1;h[R]&&h[R][0]===e&&(S++,C=h[R][1]+C,R--),h[R]&&h[R][0]===r&&(b++,N=h[R][1]+N,R--),w=R}}if(d(h[v][1])){var j=h[v][1].charAt(0);h[v][1]=h[v][1].slice(1),N+=j,C+=j}}if(v<h.length-1&&!h[v][1]){h.splice(v,1);break}if(N.length>0||C.length>0){N.length>0&&C.length>0&&(P=u(C,N),P!==0&&(w>=0?h[w][1]+=C.substring(0,P):(h.splice(0,0,[t,C.substring(0,P)]),v++),C=C.substring(P),N=N.substring(P)),P=a(C,N),P!==0&&(h[v][1]=C.substring(C.length-P)+h[v][1],C=C.substring(0,C.length-P),N=N.substring(0,N.length-P)));var I=S+b;N.length===0&&C.length===0?(h.splice(v-I,I),v=v-I):N.length===0?(h.splice(v-I,I,[e,C]),v=v-I+1):C.length===0?(h.splice(v-I,I,[r,N]),v=v-I+1):(h.splice(v-I,I,[r,N],[e,C]),v=v-I+2)}v!==0&&h[v-1][0]===t?(h[v-1][1]+=h[v][1],h.splice(v,1)):v++,S=0,b=0,N="",C="";break}}h[h.length-1][1]===""&&h.pop();var D=!1;for(v=1;v<h.length-1;)h[v-1][0]===t&&h[v+1][0]===t&&(h[v][1].substring(h[v][1].length-h[v-1][1].length)===h[v-1][1]?(h[v][1]=h[v-1][1]+h[v][1].substring(0,h[v][1].length-h[v-1][1].length),h[v+1][1]=h[v-1][1]+h[v+1][1],h.splice(v-1,1),D=!0):h[v][1].substring(0,h[v+1][1].length)==h[v+1][1]&&(h[v-1][1]+=h[v+1][1],h[v][1]=h[v][1].substring(h[v+1][1].length)+h[v+1][1],h.splice(v+1,1),D=!0)),v++;D&&c(h,f)}function g(h){return h>=55296&&h<=56319}function p(h){return h>=56320&&h<=57343}function d(h){return p(h.charCodeAt(0))}function m(h){return g(h.charCodeAt(h.length-1))}function A(h){for(var f=[],v=0;v<h.length;v++)h[v][1].length>0&&f.push(h[v]);return f}function O(h,f,v,b){return m(h)||d(b)?null:A([[t,h],[r,f],[e,v],[t,b]])}function E(h,f,v){var b=typeof v=="number"?{index:v,length:0}:v.oldRange,S=typeof v=="number"?null:v.newRange,N=h.length,C=f.length;if(b.length===0&&(S===null||S.length===0)){var P=b.index,w=h.slice(0,P),j=h.slice(P),R=S?S.index:null;e:{var I=P+C-N;if(R!==null&&R!==I||I<0||I>C)break e;var D=f.slice(0,I),q=f.slice(I);if(q!==j)break e;var $=Math.min(P,I),U=w.slice(0,$),K=D.slice(0,$);if(U!==K)break e;var V=w.slice($),ne=D.slice($);return O(U,V,ne,j)}e:{if(R!==null&&R!==P)break e;var te=P,D=f.slice(0,te),q=f.slice(te);if(D!==w)break e;var L=Math.min(N-te,C-te),B=j.slice(j.length-L),k=q.slice(q.length-L);if(B!==k)break e;var V=j.slice(0,j.length-L),ne=q.slice(0,q.length-L);return O(w,V,ne,B)}}if(b.length>0&&S&&S.length===0)e:{var U=h.slice(0,b.index),B=h.slice(b.index+b.length),$=U.length,L=B.length;if(C<$+L)break e;var K=f.slice(0,$),k=f.slice(C-L);if(U!==K||B!==k)break e;var V=h.slice($,N-L),ne=f.slice($,C-L);return O(U,V,ne,B)}return null}function _(h,f,v){return n(h,f,v,!0)}return _.INSERT=e,_.DELETE=r,_.EQUAL=t,Da=_,Da}var mn={},xf;function oE(){if(xf)return mn;xf=1;var r=mn&&mn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(mn,"__esModule",{value:!0});var e=r(Ts()),t=r(Rs()),n;return(function(i){function s(o,c,g){o===void 0&&(o={}),c===void 0&&(c={}),typeof o!="object"&&(o={}),typeof c!="object"&&(c={});var p=e.default(c);g||(p=Object.keys(p).reduce(function(m,A){return p[A]!=null&&(m[A]=p[A]),m},{}));for(var d in o)o[d]!==void 0&&c[d]===void 0&&(p[d]=o[d]);return Object.keys(p).length>0?p:void 0}i.compose=s;function l(o,c){o===void 0&&(o={}),c===void 0&&(c={}),typeof o!="object"&&(o={}),typeof c!="object"&&(c={});var g=Object.keys(o).concat(Object.keys(c)).reduce(function(p,d){return t.default(o[d],c[d])||(p[d]=c[d]===void 0?null:c[d]),p},{});return Object.keys(g).length>0?g:void 0}i.diff=l;function u(o,c){o===void 0&&(o={}),c===void 0&&(c={}),o=o||{};var g=Object.keys(c).reduce(function(p,d){return c[d]!==o[d]&&o[d]!==void 0&&(p[d]=c[d]),p},{});return Object.keys(o).reduce(function(p,d){return o[d]!==c[d]&&c[d]===void 0&&(p[d]=null),p},g)}i.invert=u;function a(o,c,g){if(g===void 0&&(g=!1),typeof o!="object")return c;if(typeof c=="object"){if(!g)return c;var p=Object.keys(c).reduce(function(d,m){return o[m]===void 0&&(d[m]=c[m]),d},{});return Object.keys(p).length>0?p:void 0}}i.transform=a})(n||(n={})),mn.default=n,mn}var bn={},_n={},Pf;function aE(){if(Pf)return _n;Pf=1;var r=_n&&_n.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(_n,"__esModule",{value:!0});var e=r(ep()),t=(function(){function n(i){this.ops=i,this.index=0,this.offset=0}return n.prototype.hasNext=function(){return this.peekLength()<1/0},n.prototype.next=function(i){i||(i=1/0);var s=this.ops[this.index];if(s){var l=this.offset,u=e.default.length(s);if(i>=u-l?(i=u-l,this.index+=1,this.offset=0):this.offset+=i,typeof s.delete=="number")return{delete:i};var a={};return s.attributes&&(a.attributes=s.attributes),typeof s.retain=="number"?a.retain=i:typeof s.insert=="string"?a.insert=s.insert.substr(l,i):a.insert=s.insert,a}else return{retain:1/0}},n.prototype.peek=function(){return this.ops[this.index]},n.prototype.peekLength=function(){return this.ops[this.index]?e.default.length(this.ops[this.index])-this.offset:1/0},n.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},n.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var i=this.offset,s=this.index,l=this.next(),u=this.ops.slice(this.index);return this.offset=i,this.index=s,[l].concat(u)}else return[]},n})();return _n.default=t,_n}var Df;function ep(){if(Df)return bn;Df=1;var r=bn&&bn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(bn,"__esModule",{value:!0});var e=r(aE()),t;return(function(n){function i(l){return new e.default(l)}n.iterator=i;function s(l){return typeof l.delete=="number"?l.delete:typeof l.retain=="number"?l.retain:typeof l.insert=="string"?l.insert.length:1}n.length=s})(t||(t={})),bn.default=t,bn}var Wn,jf;function lE(){if(jf)return Wn;jf=1;var r=Wn&&Wn.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},e=r(sE()),t=r(Ts()),n=r(Rs()),i=r(oE()),s=r(ep()),l="\0",u=(function(){function a(o){Array.isArray(o)?this.ops=o:o!=null&&Array.isArray(o.ops)?this.ops=o.ops:this.ops=[]}return a.prototype.insert=function(o,c){var g={};return typeof o=="string"&&o.length===0?this:(g.insert=o,c!=null&&typeof c=="object"&&Object.keys(c).length>0&&(g.attributes=c),this.push(g))},a.prototype.delete=function(o){return o<=0?this:this.push({delete:o})},a.prototype.retain=function(o,c){if(o<=0)return this;var g={retain:o};return c!=null&&typeof c=="object"&&Object.keys(c).length>0&&(g.attributes=c),this.push(g)},a.prototype.push=function(o){var c=this.ops.length,g=this.ops[c-1];if(o=t.default(o),typeof g=="object"){if(typeof o.delete=="number"&&typeof g.delete=="number")return this.ops[c-1]={delete:g.delete+o.delete},this;if(typeof g.delete=="number"&&o.insert!=null&&(c-=1,g=this.ops[c-1],typeof g!="object"))return this.ops.unshift(o),this;if(n.default(o.attributes,g.attributes)){if(typeof o.insert=="string"&&typeof g.insert=="string")return this.ops[c-1]={insert:g.insert+o.insert},typeof o.attributes=="object"&&(this.ops[c-1].attributes=o.attributes),this;if(typeof o.retain=="number"&&typeof g.retain=="number")return this.ops[c-1]={retain:g.retain+o.retain},typeof o.attributes=="object"&&(this.ops[c-1].attributes=o.attributes),this}}return c===this.ops.length?this.ops.push(o):this.ops.splice(c,0,o),this},a.prototype.chop=function(){var o=this.ops[this.ops.length-1];return o&&o.retain&&!o.attributes&&this.ops.pop(),this},a.prototype.filter=function(o){return this.ops.filter(o)},a.prototype.forEach=function(o){this.ops.forEach(o)},a.prototype.map=function(o){return this.ops.map(o)},a.prototype.partition=function(o){var c=[],g=[];return this.forEach(function(p){var d=o(p)?c:g;d.push(p)}),[c,g]},a.prototype.reduce=function(o,c){return this.ops.reduce(o,c)},a.prototype.changeLength=function(){return this.reduce(function(o,c){return c.insert?o+s.default.length(c):c.delete?o-c.delete:o},0)},a.prototype.length=function(){return this.reduce(function(o,c){return o+s.default.length(c)},0)},a.prototype.slice=function(o,c){o===void 0&&(o=0),c===void 0&&(c=1/0);for(var g=[],p=s.default.iterator(this.ops),d=0;d<c&&p.hasNext();){var m=void 0;d<o?m=p.next(o-d):(m=p.next(c-d),g.push(m)),d+=s.default.length(m)}return new a(g)},a.prototype.compose=function(o){var c=s.default.iterator(this.ops),g=s.default.iterator(o.ops),p=[],d=g.peek();if(d!=null&&typeof d.retain=="number"&&d.attributes==null){for(var m=d.retain;c.peekType()==="insert"&&c.peekLength()<=m;)m-=c.peekLength(),p.push(c.next());d.retain-m>0&&g.next(d.retain-m)}for(var A=new a(p);c.hasNext()||g.hasNext();)if(g.peekType()==="insert")A.push(g.next());else if(c.peekType()==="delete")A.push(c.next());else{var O=Math.min(c.peekLength(),g.peekLength()),E=c.next(O),_=g.next(O);if(typeof _.retain=="number"){var h={};typeof E.retain=="number"?h.retain=O:h.insert=E.insert;var f=i.default.compose(E.attributes,_.attributes,typeof E.retain=="number");if(f&&(h.attributes=f),A.push(h),!g.hasNext()&&n.default(A.ops[A.ops.length-1],h)){var v=new a(c.rest());return A.concat(v).chop()}}else typeof _.delete=="number"&&typeof E.retain=="number"&&A.push(_)}return A.chop()},a.prototype.concat=function(o){var c=new a(this.ops.slice());return o.ops.length>0&&(c.push(o.ops[0]),c.ops=c.ops.concat(o.ops.slice(1))),c},a.prototype.diff=function(o,c){if(this.ops===o.ops)return new a;var g=[this,o].map(function(O){return O.map(function(E){if(E.insert!=null)return typeof E.insert=="string"?E.insert:l;var _=O===o?"on":"with";throw new Error("diff() called "+_+" non-document")}).join("")}),p=new a,d=e.default(g[0],g[1],c),m=s.default.iterator(this.ops),A=s.default.iterator(o.ops);return d.forEach(function(O){for(var E=O[1].length;E>0;){var _=0;switch(O[0]){case e.default.INSERT:_=Math.min(A.peekLength(),E),p.push(A.next(_));break;case e.default.DELETE:_=Math.min(E,m.peekLength()),m.next(_),p.delete(_);break;case e.default.EQUAL:_=Math.min(m.peekLength(),A.peekLength(),E);var h=m.next(_),f=A.next(_);n.default(h.insert,f.insert)?p.retain(_,i.default.diff(h.attributes,f.attributes)):p.push(f).delete(_);break}E-=_}}),p.chop()},a.prototype.eachLine=function(o,c){c===void 0&&(c=`
`);for(var g=s.default.iterator(this.ops),p=new a,d=0;g.hasNext();){if(g.peekType()!=="insert")return;var m=g.peek(),A=s.default.length(m)-g.peekLength(),O=typeof m.insert=="string"?m.insert.indexOf(c,A)-A:-1;if(O<0)p.push(g.next());else if(O>0)p.push(g.next(O));else{if(o(p,g.next(1).attributes||{},d)===!1)return;d+=1,p=new a}}p.length()>0&&o(p,{},d)},a.prototype.invert=function(o){var c=new a;return this.reduce(function(g,p){if(p.insert)c.delete(s.default.length(p));else{if(p.retain&&p.attributes==null)return c.retain(p.retain),g+p.retain;if(p.delete||p.retain&&p.attributes){var d=p.delete||p.retain,m=o.slice(g,g+d);return m.forEach(function(A){p.delete?c.push(A):p.retain&&p.attributes&&c.retain(s.default.length(A),i.default.invert(p.attributes,A.attributes))}),g+d}}return g},0),c.chop()},a.prototype.transform=function(o,c){if(c===void 0&&(c=!1),c=!!c,typeof o=="number")return this.transformPosition(o,c);for(var g=o,p=s.default.iterator(this.ops),d=s.default.iterator(g.ops),m=new a;p.hasNext()||d.hasNext();)if(p.peekType()==="insert"&&(c||d.peekType()!=="insert"))m.retain(s.default.length(p.next()));else if(d.peekType()==="insert")m.push(d.next());else{var A=Math.min(p.peekLength(),d.peekLength()),O=p.next(A),E=d.next(A);if(O.delete)continue;E.delete?m.push(E):m.retain(A,i.default.transform(O.attributes,E.attributes,c))}return m.chop()},a.prototype.transformPosition=function(o,c){c===void 0&&(c=!1),c=!!c;for(var g=s.default.iterator(this.ops),p=0;g.hasNext()&&p<=o;){var d=g.peekLength(),m=g.peekType();if(g.next(),m==="delete"){o-=Math.min(d,o-p);continue}else m==="insert"&&(p<o||!c)&&(o+=d);p+=d}return o},a.Op=s.default,a.AttributeMap=i.default,a})();return Wn=u,Wn}var ja,Mf;function uE(){if(Mf)return ja;Mf=1;var r=lE();return ja={Delta:r,type:{name:"rich-text",uri:"http://sharejs.org/types/rich-text/v1",create:function(e){return new r(e)},apply:function(e,t){return e=new r(e),t=new r(t),e.compose(t)},compose:function(e,t){return e=new r(e),t=new r(t),e.compose(t)},diff:function(e,t){return e=new r(e),t=new r(t),e.diff(t)},transform:function(e,t,n){return e=new r(e),t=new r(t),t.transform(e,n==="left")},transformCursor:function(e,t,n){return t.transformPosition(e,!n)},normalize:function(e){return e},serialize:function(e){return e.ops},deserialize:function(e){return new r(e)},transformPresence:function(e,t,n){if(!e)return null;const i=new r(t),s=this.transformCursor(e.index,i,n),l=this.transformCursor(e.index+e.length,i,n);return Object.assign({},e,{index:s,length:l-s})}}},ja}var Ma,kf;function cE(){return kf||(kf=1,Ma=uE()),Ma}var fE=cE();const hE=vi(fE),ka={};Qd.types.register(hE.type);Z.register("modules/cursors",Y1);function Kn(r){let e=0;for(let t=0;t<r.length;t++)e=e*31+r.charCodeAt(t)>>>0;return`hsl(${e%360}deg 80% 60%)`}function dE(r){return(window.PEER_NAMES||{})[r]||`User ${String(r).slice(0,4)}`}if(window.__OT_V2_INIT__)console.warn("[OT] déjà initialisé, on ignore.");else{window.__OT_V2_INIT__=!0;const r=window.ROOM_ID;if(!r)console.warn("[OT] Pas de ROOM_ID");else{const e=t=>{const n=t&&t.detail&&t.detail.clientId||window.WRTC_CLIENT_ID;pE(r,n)};window.WRTC_CLIENT_ID?e():window.addEventListener("wrtc-joined",e,{once:!0})}}function pE(r,e){e||(e=Math.random().toString(36).slice(2,8));const t=location.protocol==="https:"?"wss":"ws",n=location.hostname,i=Number(ka==null?void 0:ka.VITE_OT_PORT)||3001,s=new WebSocket(`${t}://${n}:${i}/?cid=${e}`),l=new Qd.Connection(s),u=l.get("docs",r),a=new Z("#editor",{theme:"snow",placeholder:"Écris ici… (collab en direct)",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","code-block","blockquote"],["clean"]],cursors:!0}}),o=a.getModule("cursors"),c=l.getDocPresence("docs",r),g=c.create(e),p=new Map,d=new Map;function m(E){const _=dE(E),h=p.get(E);if(h){if(h.name!==_){const f=d.get(E);o.removeCursor(E),o.createCursor(E,_,Kn(E)),f&&o.moveCursor(E,f),p.set(E,{name:_,color:Kn(E)})}}else{const f=Kn(E);o.createCursor(E,_,f),p.set(E,{name:_,color:f});const v=d.get(E);v&&o.moveCursor(E,v)}}function A(E){g.submit(E||null,_=>{_&&console.warn("[OT] presence submit warn:",_)})}c.subscribe(E=>{E&&console.error("[OT] docPresence subscribe error:",E)}),c.on("receive",(E,_)=>{E!==e&&(_&&typeof _.index=="number"?(d.set(E,_),m(E),o.moveCursor(E,_)):(o.removeCursor(E),p.delete(E),d.delete(E)))}),window.addEventListener("peer-name",E=>{const{id:_,name:h}=E.detail||{};if(!_||!h)return;const f=d.get(_);o.removeCursor(_),o.createCursor(_,h,Kn(_)),f&&o.moveCursor(_,f),p.set(_,{name:h,color:Kn(_)})});let O=!1;u.subscribe(E=>{if(E)return console.error("[OT] subscribe error:",E);try{a.setContents(u.data||[{insert:`
`}],"silent")}catch{a.setContents([{insert:`
`}],"silent")}O||(O=!0,a.on("text-change",(_,h,f)=>{f==="user"&&u.submitOp(_,{source:a},v=>{v&&console.warn("[OT] submitOp warn:",v)})}),a.on("selection-change",(_,h,f)=>{f==="user"&&A(_)}),u.on("op",(_,h)=>{h!==a&&a.updateContents(_,"silent")}),A(a.getSelection()),console.log("[OT] prêt (cursors on) pour",r,"id=",e))}),window.addEventListener("beforeunload",()=>{try{g.submit(null,()=>{})}catch{}})}});export default gE();
//# sourceMappingURL=ot-main.js.map
